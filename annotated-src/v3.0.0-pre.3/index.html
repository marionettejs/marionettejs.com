<!doctype html>
<html lang="en" itemscope itemtype="http://schema.org/WebPage">
<head>
  <meta charset="utf-8">
  <meta name="x-ua-compatible" content="ie=edge">
  <title itemprop="name">backbone.marionette.js</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/apple-touch-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon-180x180.png">
  <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
  <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
  <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
  <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
  <link rel="manifest" href="/manifest.json">
  <meta name="msapplication-TileColor" content="#b91d47">
  <meta name="msapplication-TileImage" content="/mstile-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <link rel="stylesheet" media="all" href="../../styles/docco.860affb898b6e45b.860affb898b6e45b.860affb898b6e45b.860affb898b6e45b.860affb898b6e45b.860affb898b6e45b.860affb898b6e45b.860affb898b6e45b.860affb898b6e45b.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>backbone.marionette.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              <h2 id="marionettejs-backbone-marionette-">MarionetteJS (Backbone.Marionette)</h2>

            </div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p>v3.0.0-pre.3</p>
<p>Copyright (c)2016 Derick Bailey, Muted Solutions, LLC.
Distributed under MIT license</p>
<p><a href="http://marionettejs.com">http://marionettejs.com</a></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>

<span class="hljs-comment">/*!
* Includes BabySitter
* https://github.com/marionettejs/backbone.babysitter/
*
* Includes Radio
* https://github.com/marionettejs/backbone.radio/
*/</span></pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <h2 id="backbone-babysitter">Backbone.BabySitter</h2>

            </div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>v1.0.0-pre.1</p>
<p>Copyright (c)2016 Derick Bailey, Muted Solutions, LLC.
Distributed under MIT license</p>
<p><a href="http://github.com/marionettejs/backbone.babysitter">http://github.com/marionettejs/backbone.babysitter</a></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">Backbone, _</span>) </span>{
<span class="hljs-meta">  "use strict"</span>;
  <span class="hljs-keyword">var</span> previousChildViewContainer = Backbone.ChildViewContainer;</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <h2 id="babysitter-childviewcontainer">BabySitter.ChildViewContainer</h2>

            </div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>Provide a container to store, retrieve and
shut down child views.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  Backbone.ChildViewContainer = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">Backbone, _</span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <h2 id="container-constructor">Container Constructor</h2>

            </div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">var</span> Container = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">views</span>) </span>{
      <span class="hljs-keyword">this</span>._views = {};
      <span class="hljs-keyword">this</span>._indexByModel = {};
      <span class="hljs-keyword">this</span>._indexByCustom = {};
      <span class="hljs-keyword">this</span>._updateLength();
      _.each(views, <span class="hljs-keyword">this</span>.add, <span class="hljs-keyword">this</span>);
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <h2 id="container-methods">Container Methods</h2>

            </div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>    _.extend(Container.prototype, {</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <p>Add a view to this container. Stores the view
by <code>cid</code> and makes it searchable by the model
cid (and model itself). Optionally specify
a custom key to store an retrieve the view.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      add: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">view, customIndex</span>) </span>{
        <span class="hljs-keyword">var</span> viewCid = view.cid;</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <p>store the view</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">this</span>._views[viewCid] = view;</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <p>index it by model</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">if</span> (view.model) {
          <span class="hljs-keyword">this</span>._indexByModel[view.model.cid] = viewCid;
        }</pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <p>index by custom</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">if</span> (customIndex) {
          <span class="hljs-keyword">this</span>._indexByCustom[customIndex] = viewCid;
        }
        <span class="hljs-keyword">this</span>._updateLength();
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
      },</pre></div></div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <p>Find a view by the model that was attached to
it. Uses the model’s <code>cid</code> to find it.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      findByModel: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">model</span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.findByModelCid(model.cid);
      },</pre></div></div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              <p>Find a view by the <code>cid</code> of the model that was attached to
it. Uses the model’s <code>cid</code> to find the view <code>cid</code> and
retrieve the view using it.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      findByModelCid: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">modelCid</span>) </span>{
        <span class="hljs-keyword">var</span> viewCid = <span class="hljs-keyword">this</span>._indexByModel[modelCid];
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.findByCid(viewCid);
      },</pre></div></div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              <p>Find a view by a custom indexer.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      findByCustom: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">index</span>) </span>{
        <span class="hljs-keyword">var</span> viewCid = <span class="hljs-keyword">this</span>._indexByCustom[index];
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.findByCid(viewCid);
      },</pre></div></div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              <p>Find by index. This is not guaranteed to be a
stable index.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      findByIndex: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">index</span>) </span>{
        <span class="hljs-keyword">return</span> _.values(<span class="hljs-keyword">this</span>._views)[index];
      },</pre></div></div>
            
        </li>
        
        
        <li id="section-19">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-19">&#182;</a>
              </div>
              <p>retrieve a view by its <code>cid</code> directly</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      findByCid: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">cid</span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._views[cid];
      },</pre></div></div>
            
        </li>
        
        
        <li id="section-20">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-20">&#182;</a>
              </div>
              <p>Remove a view</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      remove: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">view</span>) </span>{
        <span class="hljs-keyword">var</span> viewCid = view.cid;</pre></div></div>
            
        </li>
        
        
        <li id="section-21">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-21">&#182;</a>
              </div>
              <p>delete model index</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">if</span> (view.model) {
          <span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>._indexByModel[view.model.cid];
        }</pre></div></div>
            
        </li>
        
        
        <li id="section-22">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-22">&#182;</a>
              </div>
              <p>delete custom index</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        _.any(<span class="hljs-keyword">this</span>._indexByCustom, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">cid, key</span>) </span>{
          <span class="hljs-keyword">if</span> (cid === viewCid) {
            <span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>._indexByCustom[key];
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
          }
        }, <span class="hljs-keyword">this</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-23">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-23">&#182;</a>
              </div>
              <p>remove the view from the container</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>._views[viewCid];</pre></div></div>
            
        </li>
        
        
        <li id="section-24">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-24">&#182;</a>
              </div>
              <p>update the length</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">this</span>._updateLength();
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
      },</pre></div></div>
            
        </li>
        
        
        <li id="section-25">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-25">&#182;</a>
              </div>
              <p>Call a method on every view in the container,
passing parameters to the call method one at a
time, like <code>function.call</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      call: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">method</span>) </span>{
        <span class="hljs-keyword">this</span>.apply(method, _.tail(<span class="hljs-built_in">arguments</span>));
      },</pre></div></div>
            
        </li>
        
        
        <li id="section-26">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-26">&#182;</a>
              </div>
              <p>Apply a method on every view in the container,
passing parameters to the call method one at a
time, like <code>function.apply</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      apply: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">method, args</span>) </span>{
        _.each(<span class="hljs-keyword">this</span>._views, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">view</span>) </span>{
          <span class="hljs-keyword">if</span> (_.isFunction(view[method])) {
            view[method].apply(view, args || []);
          }
        });
      },</pre></div></div>
            
        </li>
        
        
        <li id="section-27">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-27">&#182;</a>
              </div>
              <p>Update the <code>.length</code> attribute on this container</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      _updateLength: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.length = _.size(<span class="hljs-keyword">this</span>._views);
      }
    });</pre></div></div>
            
        </li>
        
        
        <li id="section-28">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-28">&#182;</a>
              </div>
              <p>Borrowing this code from Backbone.Collection:
<a href="http://backbonejs.org/docs/backbone.html#section-106">http://backbonejs.org/docs/backbone.html#section-106</a></p>
<p>Mix in methods from Underscore, for iteration, and other
collection related features.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">var</span> methods = [ <span class="hljs-string">"forEach"</span>, <span class="hljs-string">"each"</span>, <span class="hljs-string">"map"</span>, <span class="hljs-string">"find"</span>, <span class="hljs-string">"detect"</span>, <span class="hljs-string">"filter"</span>, <span class="hljs-string">"select"</span>, <span class="hljs-string">"reject"</span>, <span class="hljs-string">"every"</span>, <span class="hljs-string">"all"</span>, <span class="hljs-string">"some"</span>, <span class="hljs-string">"any"</span>, <span class="hljs-string">"include"</span>, <span class="hljs-string">"contains"</span>, <span class="hljs-string">"invoke"</span>, <span class="hljs-string">"toArray"</span>, <span class="hljs-string">"first"</span>, <span class="hljs-string">"initial"</span>, <span class="hljs-string">"rest"</span>, <span class="hljs-string">"last"</span>, <span class="hljs-string">"without"</span>, <span class="hljs-string">"isEmpty"</span>, <span class="hljs-string">"pluck"</span>, <span class="hljs-string">"reduce"</span> ];
    _.each(methods, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">method</span>) </span>{
      Container.prototype[method] = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> views = _.values(<span class="hljs-keyword">this</span>._views);
        <span class="hljs-keyword">var</span> args = [ views ].concat(_.toArray(<span class="hljs-built_in">arguments</span>));
        <span class="hljs-keyword">return</span> _[method].apply(_, args);
      };
    });</pre></div></div>
            
        </li>
        
        
        <li id="section-29">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-29">&#182;</a>
              </div>
              <p>return the public API</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">return</span> Container;
  }(Backbone, _);
  Backbone.ChildViewContainer.VERSION = <span class="hljs-string">"1.0.0-pre.1"</span>;
  Backbone.ChildViewContainer.noConflict = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    Backbone.ChildViewContainer = previousChildViewContainer;
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
  };
  <span class="hljs-keyword">return</span> Backbone.ChildViewContainer;
})(Backbone, _);<span class="hljs-comment">// Backbone.Radio v2.0.0-pre.1</span>
(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">_, Backbone</span>) </span>{
<span class="hljs-meta">  "use strict"</span>;
  _ = <span class="hljs-string">"default"</span> <span class="hljs-keyword">in</span> _ ? _[<span class="hljs-string">"default"</span>] : _;
  Backbone = <span class="hljs-string">"default"</span> <span class="hljs-keyword">in</span> Backbone ? Backbone[<span class="hljs-string">"default"</span>] : Backbone;
  <span class="hljs-keyword">var</span> babelHelpers = {};
  babelHelpers.typeof = <span class="hljs-keyword">typeof</span> <span class="hljs-built_in">Symbol</span> === <span class="hljs-string">"function"</span> &amp;&amp; <span class="hljs-keyword">typeof</span> <span class="hljs-built_in">Symbol</span>.iterator === <span class="hljs-string">"symbol"</span> ? <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">obj</span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">typeof</span> obj;
  } : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">obj</span>) </span>{
    <span class="hljs-keyword">return</span> obj &amp;&amp; <span class="hljs-keyword">typeof</span> <span class="hljs-built_in">Symbol</span> === <span class="hljs-string">"function"</span> &amp;&amp; obj.constructor === <span class="hljs-built_in">Symbol</span> ? <span class="hljs-string">"symbol"</span> : <span class="hljs-keyword">typeof</span> obj;
  };
  babelHelpers;
  <span class="hljs-keyword">var</span> previousRadio = Backbone.Radio;
  <span class="hljs-keyword">var</span> Radio = Backbone.Radio = {};
  Radio.VERSION = <span class="hljs-string">"2.0.0-pre.1"</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-30">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-30">&#182;</a>
              </div>
              <p>This allows you to run multiple instances of Radio on the same
webapp. After loading the new version, call <code>noConflict()</code> to
get a reference to it. At the same time the old version will be
returned to Backbone.Radio.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  Radio.noConflict = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    Backbone.Radio = previousRadio;
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-31">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-31">&#182;</a>
              </div>
              <p>Whether or not we’re in DEBUG mode or not. DEBUG mode helps you
get around the issues of lack of warnings when events are mis-typed.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  Radio.DEBUG = <span class="hljs-literal">false</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-32">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-32">&#182;</a>
              </div>
              <p>Format debug text.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  Radio._debugText = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">warning, eventName, channelName</span>) </span>{
    <span class="hljs-keyword">return</span> warning + (channelName ? <span class="hljs-string">" on the "</span> + channelName + <span class="hljs-string">" channel"</span> : <span class="hljs-string">""</span>) + <span class="hljs-string">': "'</span> + eventName + <span class="hljs-string">'"'</span>;
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-33">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-33">&#182;</a>
              </div>
              <p>This is the method that’s called when an unregistered event was called.
By default, it logs warning to the console. By overriding this you could
make it throw an Error, for instance. This would make firing a nonexistent event
have the same consequence as firing a nonexistent method on an Object.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  Radio.debugLog = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">warning, eventName, channelName</span>) </span>{
    <span class="hljs-keyword">if</span> (Radio.DEBUG &amp;&amp; <span class="hljs-built_in">console</span> &amp;&amp; <span class="hljs-built_in">console</span>.warn) {
      <span class="hljs-built_in">console</span>.warn(Radio._debugText(warning, eventName, channelName));
    }
  };
  <span class="hljs-keyword">var</span> eventSplitter = <span class="hljs-regexp">/\s+/</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-34">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-34">&#182;</a>
              </div>
              <p>An internal method used to handle Radio’s method overloading for Requests.
It’s borrowed from Backbone.Events. It differs from Backbone’s overload
API (which is used in Backbone.Events) in that it doesn’t support space-separated
event names.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  Radio._eventsApi = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">obj, action, name, rest</span>) </span>{
    <span class="hljs-keyword">if</span> (!name) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
    <span class="hljs-keyword">var</span> results = {};</pre></div></div>
            
        </li>
        
        
        <li id="section-35">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-35">&#182;</a>
              </div>
              <p>Handle event maps.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">if</span> ((<span class="hljs-keyword">typeof</span> name === <span class="hljs-string">"undefined"</span> ? <span class="hljs-string">"undefined"</span> : babelHelpers.typeof(name)) === <span class="hljs-string">"object"</span>) {
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> key <span class="hljs-keyword">in</span> name) {
        <span class="hljs-keyword">var</span> result = obj[action].apply(obj, [ key, name[key] ].concat(rest));
        eventSplitter.test(key) ? _.extend(results, result) : results[key] = result;
      }
      <span class="hljs-keyword">return</span> results;
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-36">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-36">&#182;</a>
              </div>
              <p>Handle space separated event names.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">if</span> (eventSplitter.test(name)) {
      <span class="hljs-keyword">var</span> names = name.split(eventSplitter);
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, l = names.length; i &lt; l; i++) {
        results[names[i]] = obj[action].apply(obj, [ names[i] ].concat(rest));
      }
      <span class="hljs-keyword">return</span> results;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-37">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-37">&#182;</a>
              </div>
              <p>An optimized way to execute callbacks.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  Radio._callHandler = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">callback, context, args</span>) </span>{
    <span class="hljs-keyword">var</span> a1 = args[<span class="hljs-number">0</span>], a2 = args[<span class="hljs-number">1</span>], a3 = args[<span class="hljs-number">2</span>];
    <span class="hljs-keyword">switch</span> (args.length) {
     <span class="hljs-keyword">case</span> <span class="hljs-number">0</span>:
      <span class="hljs-keyword">return</span> callback.call(context);

     <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:
      <span class="hljs-keyword">return</span> callback.call(context, a1);

     <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:
      <span class="hljs-keyword">return</span> callback.call(context, a1, a2);

     <span class="hljs-keyword">case</span> <span class="hljs-number">3</span>:
      <span class="hljs-keyword">return</span> callback.call(context, a1, a2, a3);

     <span class="hljs-keyword">default</span>:
      <span class="hljs-keyword">return</span> callback.apply(context, args);
    }
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-38">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-38">&#182;</a>
              </div>
              <p>A helper used by <code>off</code> methods to the handler from the store</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">removeHandler</span>(<span class="hljs-params">store, name, callback, context</span>) </span>{
    <span class="hljs-keyword">var</span> event = store[name];
    <span class="hljs-keyword">if</span> ((!callback || callback === event.callback || callback === event.callback._callback) &amp;&amp; (!context || context === event.context)) {
      <span class="hljs-keyword">delete</span> store[name];
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
  }
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">removeHandlers</span>(<span class="hljs-params">store, name, callback, context</span>) </span>{
    store || (store = {});
    <span class="hljs-keyword">var</span> names = name ? [ name ] : _.keys(store);
    <span class="hljs-keyword">var</span> matched = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, length = names.length; i &lt; length; i++) {
      name = names[i];</pre></div></div>
            
        </li>
        
        
        <li id="section-39">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-39">&#182;</a>
              </div>
              <p>If there’s no event by this name, log it and continue
with the loop</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">if</span> (!store[name]) {
        <span class="hljs-keyword">continue</span>;
      }
      <span class="hljs-keyword">if</span> (removeHandler(store, name, callback, context)) {
        matched = <span class="hljs-literal">true</span>;
      }
    }
    <span class="hljs-keyword">return</span> matched;
  }
  <span class="hljs-comment">/*
   * tune-in
   * -------
   * Get console logs of a channel's activity
   *
   */</span>
  <span class="hljs-keyword">var</span> _logs = {};</pre></div></div>
            
        </li>
        
        
        <li id="section-40">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-40">&#182;</a>
              </div>
              <p>This is to produce an identical function in both tuneIn and tuneOut,
so that Backbone.Events unregisters it.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_partial</span>(<span class="hljs-params">channelName</span>) </span>{
    <span class="hljs-keyword">return</span> _logs[channelName] || (_logs[channelName] = _.partial(Radio.log, channelName));
  }
  _.extend(Radio, {</pre></div></div>
            
        </li>
        
        
        <li id="section-41">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-41">&#182;</a>
              </div>
              <p>Log information about the channel and event</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    log: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">log</span>(<span class="hljs-params">channelName, eventName</span>) </span>{
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-built_in">console</span> === <span class="hljs-string">"undefined"</span>) {
        <span class="hljs-keyword">return</span>;
      }
      <span class="hljs-keyword">var</span> args = _.drop(<span class="hljs-built_in">arguments</span>, <span class="hljs-number">2</span>);
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"["</span> + channelName + <span class="hljs-string">'] "'</span> + eventName + <span class="hljs-string">'"'</span>, args);
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-42">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-42">&#182;</a>
              </div>
              <p>Logs all events on this channel to the console. It sets an
internal value on the channel telling it we’re listening,
then sets a listener on the Backbone.Events</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    tuneIn: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">tuneIn</span>(<span class="hljs-params">channelName</span>) </span>{
      <span class="hljs-keyword">var</span> channel = Radio.channel(channelName);
      channel._tunedIn = <span class="hljs-literal">true</span>;
      channel.on(<span class="hljs-string">"all"</span>, _partial(channelName));
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-43">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-43">&#182;</a>
              </div>
              <p>Stop logging all of the activities on this channel to the console</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    tuneOut: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">tuneOut</span>(<span class="hljs-params">channelName</span>) </span>{
      <span class="hljs-keyword">var</span> channel = Radio.channel(channelName);
      channel._tunedIn = <span class="hljs-literal">false</span>;
      channel.off(<span class="hljs-string">"all"</span>, _partial(channelName));
      <span class="hljs-keyword">delete</span> _logs[channelName];
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
    }
  });
  <span class="hljs-comment">/*
   * Backbone.Radio.Requests
   * -----------------------
   * A messaging system for requesting data.
   *
   */</span>
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">makeCallback</span>(<span class="hljs-params">callback</span>) </span>{
    <span class="hljs-keyword">return</span> _.isFunction(callback) ? callback : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">return</span> callback;
    };
  }
  Radio.Requests = {</pre></div></div>
            
        </li>
        
        
        <li id="section-44">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-44">&#182;</a>
              </div>
              <p>Make a request</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    request: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">request</span>(<span class="hljs-params">name</span>) </span>{
      <span class="hljs-keyword">var</span> args = _.rest(<span class="hljs-built_in">arguments</span>);
      <span class="hljs-keyword">var</span> results = Radio._eventsApi(<span class="hljs-keyword">this</span>, <span class="hljs-string">"request"</span>, name, args);
      <span class="hljs-keyword">if</span> (results) {
        <span class="hljs-keyword">return</span> results;
      }
      <span class="hljs-keyword">var</span> channelName = <span class="hljs-keyword">this</span>.channelName;
      <span class="hljs-keyword">var</span> requests = <span class="hljs-keyword">this</span>._requests;</pre></div></div>
            
        </li>
        
        
        <li id="section-45">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-45">&#182;</a>
              </div>
              <p>Check if we should log the request, and if so, do it</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">if</span> (channelName &amp;&amp; <span class="hljs-keyword">this</span>._tunedIn) {
        Radio.log.apply(<span class="hljs-keyword">this</span>, [ channelName, name ].concat(args));
      }</pre></div></div>
            
        </li>
        
        
        <li id="section-46">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-46">&#182;</a>
              </div>
              <p>If the request isn’t handled, log it in DEBUG mode and exit</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">if</span> (requests &amp;&amp; (requests[name] || requests[<span class="hljs-string">"default"</span>])) {
        <span class="hljs-keyword">var</span> handler = requests[name] || requests[<span class="hljs-string">"default"</span>];
        args = requests[name] ? args : <span class="hljs-built_in">arguments</span>;
        <span class="hljs-keyword">return</span> Radio._callHandler(handler.callback, handler.context, args);
      } <span class="hljs-keyword">else</span> {
        Radio.debugLog(<span class="hljs-string">"An unhandled request was fired"</span>, name, channelName);
      }
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-47">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-47">&#182;</a>
              </div>
              <p>Set up a handler for a request</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    reply: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">reply</span>(<span class="hljs-params">name, callback, context</span>) </span>{
      <span class="hljs-keyword">if</span> (Radio._eventsApi(<span class="hljs-keyword">this</span>, <span class="hljs-string">"reply"</span>, name, [ callback, context ])) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
      }
      <span class="hljs-keyword">this</span>._requests || (<span class="hljs-keyword">this</span>._requests = {});
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._requests[name]) {
        Radio.debugLog(<span class="hljs-string">"A request was overwritten"</span>, name, <span class="hljs-keyword">this</span>.channelName);
      }
      <span class="hljs-keyword">this</span>._requests[name] = {
        <span class="hljs-attr">callback</span>: makeCallback(callback),
        <span class="hljs-attr">context</span>: context || <span class="hljs-keyword">this</span>
      };
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-48">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-48">&#182;</a>
              </div>
              <p>Set up a handler that can only be requested once</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    replyOnce: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">replyOnce</span>(<span class="hljs-params">name, callback, context</span>) </span>{
      <span class="hljs-keyword">if</span> (Radio._eventsApi(<span class="hljs-keyword">this</span>, <span class="hljs-string">"replyOnce"</span>, name, [ callback, context ])) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
      }
      <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;
      <span class="hljs-keyword">var</span> once = _.once(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        self.stopReplying(name);
        <span class="hljs-keyword">return</span> makeCallback(callback).apply(<span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span>);
      });
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.reply(name, once, context);
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-49">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-49">&#182;</a>
              </div>
              <p>Remove handler(s)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    stopReplying: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">stopReplying</span>(<span class="hljs-params">name, callback, context</span>) </span>{
      <span class="hljs-keyword">if</span> (Radio._eventsApi(<span class="hljs-keyword">this</span>, <span class="hljs-string">"stopReplying"</span>, name)) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
      }</pre></div></div>
            
        </li>
        
        
        <li id="section-50">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-50">&#182;</a>
              </div>
              <p>Remove everything if there are no arguments passed</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">if</span> (!name &amp;&amp; !callback &amp;&amp; !context) {
        <span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>._requests;
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!removeHandlers(<span class="hljs-keyword">this</span>._requests, name, callback, context)) {
        Radio.debugLog(<span class="hljs-string">"Attempted to remove the unregistered request"</span>, name, <span class="hljs-keyword">this</span>.channelName);
      }
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
    }
  };
  <span class="hljs-comment">/*
   * Backbone.Radio.channel
   * ----------------------
   * Get a reference to a channel by name.
   *
   */</span>
  Radio._channels = {};
  Radio.channel = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">channelName</span>) </span>{
    <span class="hljs-keyword">if</span> (!channelName) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"You must provide a name for the channel."</span>);
    }
    <span class="hljs-keyword">if</span> (Radio._channels[channelName]) {
      <span class="hljs-keyword">return</span> Radio._channels[channelName];
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">return</span> Radio._channels[channelName] = <span class="hljs-keyword">new</span> Radio.Channel(channelName);
    }
  };
  <span class="hljs-comment">/*
   * Backbone.Radio.Channel
   * ----------------------
   * A Channel is an object that extends from Backbone.Events,
   * and Radio.Requests.
   *
   */</span>
  Radio.Channel = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">channelName</span>) </span>{
    <span class="hljs-keyword">this</span>.channelName = channelName;
  };
  _.extend(Radio.Channel.prototype, Backbone.Events, Radio.Requests, {</pre></div></div>
            
        </li>
        
        
        <li id="section-51">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-51">&#182;</a>
              </div>
              <p>Remove all handlers from the messaging systems of this channel</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    reset: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">reset</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">this</span>.off();
      <span class="hljs-keyword">this</span>.stopListening();
      <span class="hljs-keyword">this</span>.stopReplying();
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
    }
  });
  <span class="hljs-comment">/*
   * Top-level API
   * -------------
   * Supplies the 'top-level API' for working with Channels directly
   * from Backbone.Radio.
   *
   */</span>
  <span class="hljs-keyword">var</span> channel;
  <span class="hljs-keyword">var</span> args;
  <span class="hljs-keyword">var</span> systems = [ Backbone.Events, Radio.Requests ];
  _.each(systems, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">system</span>) </span>{
    _.each(system, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">method, methodName</span>) </span>{
      Radio[methodName] = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">channelName</span>) </span>{
        args = _.rest(<span class="hljs-built_in">arguments</span>);
        channel = <span class="hljs-keyword">this</span>.channel(channelName);
        <span class="hljs-keyword">return</span> channel[methodName].apply(channel, args);
      };
    });
  });
  Radio.reset = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">channelName</span>) </span>{
    <span class="hljs-keyword">var</span> channels = !channelName ? <span class="hljs-keyword">this</span>._channels : [ <span class="hljs-keyword">this</span>._channels[channelName] ];
    _.invoke(channels, <span class="hljs-string">"reset"</span>);
  };
  <span class="hljs-keyword">return</span> Radio;
})(_, Backbone);
<span class="hljs-keyword">var</span> Marionette  = global[<span class="hljs-string">'Mn'</span>] = (<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">Backbone,_,Radio,ChildViewContainer</span>) </span>{
<span class="hljs-meta">	'use strict'</span>;

	Backbone = <span class="hljs-string">'default'</span> <span class="hljs-keyword">in</span> Backbone ? Backbone[<span class="hljs-string">'default'</span>] : Backbone;
	_ = <span class="hljs-string">'default'</span> <span class="hljs-keyword">in</span> _ ? _[<span class="hljs-string">'default'</span>] : _;
	Radio = <span class="hljs-string">'default'</span> <span class="hljs-keyword">in</span> Radio ? Radio[<span class="hljs-string">'default'</span>] : Radio;
	ChildViewContainer = <span class="hljs-string">'default'</span> <span class="hljs-keyword">in</span> ChildViewContainer ? ChildViewContainer[<span class="hljs-string">'default'</span>] : ChildViewContainer;

	<span class="hljs-keyword">var</span> babelHelpers = {};

	babelHelpers.toConsumableArray = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">arr</span>) </span>{
	  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Array</span>.isArray(arr)) {
	    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, arr2 = <span class="hljs-built_in">Array</span>(arr.length); i &lt; arr.length; i++) arr2[i] = arr[i];

	    <span class="hljs-keyword">return</span> arr2;
	  } <span class="hljs-keyword">else</span> {
	    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Array</span>.from(arr);
	  }
	};

	babelHelpers;

	<span class="hljs-keyword">var</span> version = <span class="hljs-string">"3.0.0-pre.3"</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-52">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-52">&#182;</a>
              </div>
              <p>Internal utility for creating context style global utils</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">var</span> proxy = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">proxy</span>(<span class="hljs-params">method</span>) </span>{
	  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">context</span>) </span>{
	    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> _len = <span class="hljs-built_in">arguments</span>.length, args = <span class="hljs-built_in">Array</span>(_len &gt; <span class="hljs-number">1</span> ? _len - <span class="hljs-number">1</span> : <span class="hljs-number">0</span>), _key = <span class="hljs-number">1</span>; _key &lt; _len; _key++) {
	      args[_key - <span class="hljs-number">1</span>] = <span class="hljs-built_in">arguments</span>[_key];
	    }

	    <span class="hljs-keyword">return</span> method.apply(context, args);
	  };
	};</pre></div></div>
            
        </li>
        
        
        <li id="section-53">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-53">&#182;</a>
              </div>
              <p>Borrow the Backbone <code>extend</code> method so we can use it as needed</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">var</span> extend = Backbone.Model.extend;</pre></div></div>
            
        </li>
        
        
        <li id="section-54">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-54">&#182;</a>
              </div>
              <p>Determine if <code>el</code> is a child of the document</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">var</span> isNodeAttached = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isNodeAttached</span>(<span class="hljs-params">el</span>) </span>{
	  <span class="hljs-keyword">return</span> Backbone.$.contains(<span class="hljs-built_in">document</span>.documentElement, el);
	};</pre></div></div>
            
        </li>
        
        
        <li id="section-55">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-55">&#182;</a>
              </div>
              <p>Merge <code>keys</code> from <code>options</code> onto <code>this</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">var</span> mergeOptions = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">mergeOptions</span>(<span class="hljs-params">options, keys</span>) </span>{
	  <span class="hljs-keyword">if</span> (!options) {
	    <span class="hljs-keyword">return</span>;
	  }
	  _.extend(<span class="hljs-keyword">this</span>, _.pick(options, keys));
	};</pre></div></div>
            
        </li>
        
        
        <li id="section-56">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-56">&#182;</a>
              </div>
              <h2 id="marionette-getoption">Marionette.getOption</h2>

            </div>
            
        </li>
        
        
        <li id="section-57">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-57">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-58">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-58">&#182;</a>
              </div>
              <p>Retrieve an object, function or other value from the
object or its <code>options</code>, with <code>options</code> taking precedence.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">var</span> getOption = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getOption</span>(<span class="hljs-params">optionName</span>) </span>{
	  <span class="hljs-keyword">if</span> (!optionName) {
	    <span class="hljs-keyword">return</span>;
	  }
	  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.options &amp;&amp; <span class="hljs-keyword">this</span>.options[optionName] !== <span class="hljs-literal">undefined</span>) {
	    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.options[optionName];
	  } <span class="hljs-keyword">else</span> {
	    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>[optionName];
	  }
	};</pre></div></div>
            
        </li>
        
        
        <li id="section-59">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-59">&#182;</a>
              </div>
              <h2 id="marionette-normalizemethods">Marionette.normalizeMethods</h2>

            </div>
            
        </li>
        
        
        <li id="section-60">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-60">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-61">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-61">&#182;</a>
              </div>
              <p>Pass in a mapping of events =&gt; functions or function names
and return a mapping of events =&gt; functions</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">var</span> normalizeMethods = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">normalizeMethods</span>(<span class="hljs-params">hash</span>) </span>{
	  <span class="hljs-keyword">var</span> _this = <span class="hljs-keyword">this</span>;

	  <span class="hljs-keyword">return</span> _.reduce(hash, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">normalizedHash, method, name</span>) </span>{
	    <span class="hljs-keyword">if</span> (!_.isFunction(method)) {
	      method = _this[method];
	    }
	    <span class="hljs-keyword">if</span> (method) {
	      normalizedHash[name] = method;
	    }
	    <span class="hljs-keyword">return</span> normalizedHash;
	  }, {});
	};

	<span class="hljs-keyword">var</span> deprecate = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">deprecate</span>(<span class="hljs-params">message, test</span>) </span>{
	  <span class="hljs-keyword">if</span> (_.isObject(message)) {
	    message = message.prev + <span class="hljs-string">' is going to be removed in the future. '</span> + <span class="hljs-string">'Please use '</span> + message.next + <span class="hljs-string">' instead.'</span> + (message.url ? <span class="hljs-string">' See: '</span> + message.url : <span class="hljs-string">''</span>);
	  }

	  <span class="hljs-keyword">if</span> (!Marionette.DEV_MODE) {
	    <span class="hljs-keyword">return</span>;
	  }

	  <span class="hljs-keyword">if</span> ((test === <span class="hljs-literal">undefined</span> || !test) &amp;&amp; !deprecate._cache[message]) {
	    deprecate._warn(<span class="hljs-string">'Deprecation warning: '</span> + message);
	    deprecate._cache[message] = <span class="hljs-literal">true</span>;
	  }
	};

	deprecate._console = <span class="hljs-keyword">typeof</span> <span class="hljs-built_in">console</span> !== <span class="hljs-string">'undefined'</span> ? <span class="hljs-built_in">console</span> : {};
	deprecate._warn = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
	  <span class="hljs-keyword">var</span> warn = deprecate._console.warn || deprecate._console.log || <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{};
	  <span class="hljs-keyword">return</span> warn.apply(deprecate._console, <span class="hljs-built_in">arguments</span>);
	};
	deprecate._cache = {};</pre></div></div>
            
        </li>
        
        
        <li id="section-62">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-62">&#182;</a>
              </div>
              <p>split the event name on the “:”</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">var</span> splitter = <span class="hljs-regexp">/(^|:)(\w)/gi</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-63">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-63">&#182;</a>
              </div>
              <p>take the event section (“section1:section2:section3”)
and turn it in to uppercase name onSection1Section2Section3</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getEventName</span>(<span class="hljs-params">match, prefix, eventName</span>) </span>{
	  <span class="hljs-keyword">return</span> eventName.toUpperCase();
	}</pre></div></div>
            
        </li>
        
        
        <li id="section-64">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-64">&#182;</a>
              </div>
              <p>Trigger an event and/or a corresponding method name. Examples:</p>
<p><code>this.triggerMethod(&quot;foo&quot;)</code> will trigger the “foo” event and
call the “onFoo” method.</p>
<p><code>this.triggerMethod(&quot;foo:bar&quot;)</code> will trigger the “foo:bar” event and
call the “onFooBar” method.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">triggerMethod</span>(<span class="hljs-params">event</span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-65">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-65">&#182;</a>
              </div>
              <p>get the method name from the event name</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  <span class="hljs-keyword">var</span> methodName = <span class="hljs-string">'on'</span> + event.replace(splitter, getEventName);
	  <span class="hljs-keyword">var</span> method = getOption.call(<span class="hljs-keyword">this</span>, methodName);
	  <span class="hljs-keyword">var</span> result;</pre></div></div>
            
        </li>
        
        
        <li id="section-66">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-66">&#182;</a>
              </div>
              <p>call the onMethodName if it exists</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
	  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> _len = <span class="hljs-built_in">arguments</span>.length, args = <span class="hljs-built_in">Array</span>(_len &gt; <span class="hljs-number">1</span> ? _len - <span class="hljs-number">1</span> : <span class="hljs-number">0</span>), _key = <span class="hljs-number">1</span>; _key &lt; _len; _key++) {
	    args[_key - <span class="hljs-number">1</span>] = <span class="hljs-built_in">arguments</span>[_key];
	  }

	  <span class="hljs-keyword">if</span> (_.isFunction(method)) {</pre></div></div>
            
        </li>
        
        
        <li id="section-67">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-67">&#182;</a>
              </div>
              <p>pass all args, except the event name</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    result = method.apply(<span class="hljs-keyword">this</span>, args);
	  }</pre></div></div>
            
        </li>
        
        
        <li id="section-68">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-68">&#182;</a>
              </div>
              <p>trigger the event</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  <span class="hljs-keyword">this</span>.trigger.apply(<span class="hljs-keyword">this</span>, [event].concat(args));

	  <span class="hljs-keyword">return</span> result;
	}</pre></div></div>
            
        </li>
        
        
        <li id="section-69">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-69">&#182;</a>
              </div>
              <p>triggerMethodOn invokes triggerMethod on a specific context</p>
<p>e.g. <code>Marionette.triggerMethodOn(view, &#39;show&#39;)</code>
will trigger a “show” event or invoke onShow the view.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">triggerMethodOn</span>(<span class="hljs-params">context</span>) </span>{
	  <span class="hljs-keyword">var</span> fnc = _.isFunction(context.triggerMethod) ? context.triggerMethod : triggerMethod;

	  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> _len2 = <span class="hljs-built_in">arguments</span>.length, args = <span class="hljs-built_in">Array</span>(_len2 &gt; <span class="hljs-number">1</span> ? _len2 - <span class="hljs-number">1</span> : <span class="hljs-number">0</span>), _key2 = <span class="hljs-number">1</span>; _key2 &lt; _len2; _key2++) {
	    args[_key2 - <span class="hljs-number">1</span>] = <span class="hljs-built_in">arguments</span>[_key2];
	  }

	  <span class="hljs-keyword">return</span> fnc.apply(context, args);
	}</pre></div></div>
            
        </li>
        
        
        <li id="section-70">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-70">&#182;</a>
              </div>
              <p>Trigger method on children unless a pure Backbone.View</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">triggerMethodChildren</span>(<span class="hljs-params">view, event, beforeEachTrigger</span>) </span>{
	  <span class="hljs-keyword">if</span> (!view._getImmediateChildren) {
	    <span class="hljs-keyword">return</span>;
	  }
	  _.each(view._getImmediateChildren(), <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">child</span>) </span>{
	    <span class="hljs-keyword">if</span> (beforeEachTrigger) {
	      beforeEachTrigger(child);
	    }
	    triggerMethodOn(child, event, child);
	  });
	}

	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setIsAttached</span>(<span class="hljs-params">view</span>) </span>{
	  view._isAttached = <span class="hljs-literal">true</span>;
	}

	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">unsetIsAttached</span>(<span class="hljs-params">view</span>) </span>{
	  view._isAttached = <span class="hljs-literal">false</span>;
	}</pre></div></div>
            
        </li>
        
        
        <li id="section-71">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-71">&#182;</a>
              </div>
              <p>Monitor a view’s state, propagating attach/detach events to children and firing dom:refresh
whenever a rendered view is attached or an attached view is rendered.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">monitorViewEvents</span>(<span class="hljs-params">view</span>) </span>{
	  <span class="hljs-keyword">if</span> (view._areViewEventsMonitored) {
	    <span class="hljs-keyword">return</span>;
	  }

	  view._areViewEventsMonitored = <span class="hljs-literal">true</span>;

	  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">handleBeforeAttach</span>(<span class="hljs-params"></span>) </span>{
	    triggerMethodChildren(view, <span class="hljs-string">'before:attach'</span>);
	  }

	  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">handleAttach</span>(<span class="hljs-params"></span>) </span>{
	    triggerMethodChildren(view, <span class="hljs-string">'attach'</span>, setIsAttached);
	    triggerDOMRefresh();
	  }

	  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">handleBeforeDetach</span>(<span class="hljs-params"></span>) </span>{
	    triggerMethodChildren(view, <span class="hljs-string">'before:detach'</span>);
	  }

	  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">handleDetach</span>(<span class="hljs-params"></span>) </span>{
	    triggerMethodChildren(view, <span class="hljs-string">'detach'</span>, unsetIsAttached);
	  }

	  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">handleRender</span>(<span class="hljs-params"></span>) </span>{
	    triggerDOMRefresh();
	  }

	  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">triggerDOMRefresh</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">if</span> (view._isAttached &amp;&amp; view._isRendered) {
	      triggerMethodOn(view, <span class="hljs-string">'dom:refresh'</span>, view);
	    }
	  }

	  view.on({
	    <span class="hljs-string">'before:attach'</span>: handleBeforeAttach,
	    <span class="hljs-string">'attach'</span>: handleAttach,
	    <span class="hljs-string">'before:detach'</span>: handleBeforeDetach,
	    <span class="hljs-string">'detach'</span>: handleDetach,
	    <span class="hljs-string">'render'</span>: handleRender
	  });
	}</pre></div></div>
            
        </li>
        
        
        <li id="section-72">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-72">&#182;</a>
              </div>
              <p>Similar to <code>_.result</code>, this is a simple helper
If a function is provided we call it with context
otherwise just return the value. If the value is
undefined return a default value</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">var</span> getValue = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getValue</span>(<span class="hljs-params">value</span>) </span>{
	  <span class="hljs-keyword">if</span> (_.isFunction(value)) {
	    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> _len = <span class="hljs-built_in">arguments</span>.length, args = <span class="hljs-built_in">Array</span>(_len &gt; <span class="hljs-number">1</span> ? _len - <span class="hljs-number">1</span> : <span class="hljs-number">0</span>), _key = <span class="hljs-number">1</span>; _key &lt; _len; _key++) {
	      args[_key - <span class="hljs-number">1</span>] = <span class="hljs-built_in">arguments</span>[_key];
	    }

	    <span class="hljs-keyword">return</span> value.apply(<span class="hljs-keyword">this</span>, args);
	  }
	  <span class="hljs-keyword">return</span> value;
	};</pre></div></div>
            
        </li>
        
        
        <li id="section-73">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-73">&#182;</a>
              </div>
              <p>Internal utility for setting options consistently across Mn</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">var</span> _setOptions = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_setOptions</span>(<span class="hljs-params"></span>) </span>{
	  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> _len = <span class="hljs-built_in">arguments</span>.length, args = <span class="hljs-built_in">Array</span>(_len), _key = <span class="hljs-number">0</span>; _key &lt; _len; _key++) {
	    args[_key] = <span class="hljs-built_in">arguments</span>[_key];
	  }

	  <span class="hljs-keyword">this</span>.options = _.extend.apply(_, [{}, _.result(<span class="hljs-keyword">this</span>, <span class="hljs-string">'options'</span>)].concat(args));
	};

	<span class="hljs-keyword">var</span> errorProps = [<span class="hljs-string">'description'</span>, <span class="hljs-string">'fileName'</span>, <span class="hljs-string">'lineNumber'</span>, <span class="hljs-string">'name'</span>, <span class="hljs-string">'message'</span>, <span class="hljs-string">'number'</span>];

	<span class="hljs-keyword">var</span> MarionetteError = extend.call(<span class="hljs-built_in">Error</span>, {
	  <span class="hljs-attr">urlRoot</span>: <span class="hljs-string">'http://marionettejs.com/docs/v'</span> + version + <span class="hljs-string">'/'</span>,

	  <span class="hljs-attr">constructor</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">MarionetteError</span>(<span class="hljs-params">message, options</span>) </span>{
	    <span class="hljs-keyword">if</span> (_.isObject(message)) {
	      options = message;
	      message = options.message;
	    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!options) {
	      options = {};
	    }

	    <span class="hljs-keyword">var</span> error = <span class="hljs-built_in">Error</span>.call(<span class="hljs-keyword">this</span>, message);
	    _.extend(<span class="hljs-keyword">this</span>, _.pick(error, errorProps), _.pick(options, errorProps));

	    <span class="hljs-keyword">this</span>.captureStackTrace();

	    <span class="hljs-keyword">if</span> (options.url) {
	      <span class="hljs-keyword">this</span>.url = <span class="hljs-keyword">this</span>.urlRoot + options.url;
	    }
	  },

	  <span class="hljs-attr">captureStackTrace</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">captureStackTrace</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Error</span>.captureStackTrace) {
	      <span class="hljs-built_in">Error</span>.captureStackTrace(<span class="hljs-keyword">this</span>, MarionetteError);
	    }
	  },

	  <span class="hljs-attr">toString</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">toString</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.name + <span class="hljs-string">': '</span> + <span class="hljs-keyword">this</span>.message + (<span class="hljs-keyword">this</span>.url ? <span class="hljs-string">' See: '</span> + <span class="hljs-keyword">this</span>.url : <span class="hljs-string">''</span>);
	  }
	});

	MarionetteError.extend = extend;</pre></div></div>
            
        </li>
        
        
        <li id="section-74">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-74">&#182;</a>
              </div>
              <p>Bind/unbind the event to handlers specified as a string of
handler names on the target object</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">bindFromStrings</span>(<span class="hljs-params">target, entity, evt, methods, actionName</span>) </span>{
	  <span class="hljs-keyword">var</span> methodNames = methods.split(<span class="hljs-regexp">/\s+/</span>);

	  _.each(methodNames, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">methodName</span>) </span>{
	    <span class="hljs-keyword">var</span> method = target[methodName];
	    <span class="hljs-keyword">if</span> (!method) {
	      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> MarionetteError(<span class="hljs-string">'Method "'</span> + methodName + <span class="hljs-string">'" was configured as an event handler, but does not exist.'</span>);
	    }

	    target[actionName](entity, evt, method);
	  });
	}</pre></div></div>
            
        </li>
        
        
        <li id="section-75">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-75">&#182;</a>
              </div>
              <p>generic looping function</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">iterateEvents</span>(<span class="hljs-params">target, entity, bindings, actionName</span>) </span>{
	  <span class="hljs-keyword">if</span> (!entity || !bindings) {
	    <span class="hljs-keyword">return</span>;
	  }</pre></div></div>
            
        </li>
        
        
        <li id="section-76">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-76">&#182;</a>
              </div>
              <p>type-check bindings</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  <span class="hljs-keyword">if</span> (!_.isObject(bindings)) {
	    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> MarionetteError({
	      <span class="hljs-attr">message</span>: <span class="hljs-string">'Bindings must be an object.'</span>,
	      <span class="hljs-attr">url</span>: <span class="hljs-string">'marionette.functions.html#marionettebindentityevents'</span>
	    });
	  }</pre></div></div>
            
        </li>
        
        
        <li id="section-77">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-77">&#182;</a>
              </div>
              <p>iterate the bindings and bind/unbind them</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  _.each(bindings, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">method, evt</span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-78">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-78">&#182;</a>
              </div>
              <p>allow for a list of method names as a string</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    <span class="hljs-keyword">if</span> (_.isString(method)) {
	      bindFromStrings(target, entity, evt, method, actionName);
	      <span class="hljs-keyword">return</span>;
	    }

	    target[actionName](entity, evt, method);
	  });
	}

	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">bindEntityEvents</span>(<span class="hljs-params">entity, bindings</span>) </span>{
	  iterateEvents(<span class="hljs-keyword">this</span>, entity, bindings, <span class="hljs-string">'listenTo'</span>);
	}

	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">unbindEntityEvents</span>(<span class="hljs-params">entity, bindings</span>) </span>{
	  iterateEvents(<span class="hljs-keyword">this</span>, entity, bindings, <span class="hljs-string">'stopListening'</span>);
	}

	<span class="hljs-keyword">var</span> CommonMixin = {
	  <span class="hljs-attr">getValue</span>: getValue,</pre></div></div>
            
        </li>
        
        
        <li id="section-79">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-79">&#182;</a>
              </div>
              <p>Imports the “normalizeMethods” to transform hashes of
events=&gt;function references/names to a hash of events=&gt;function references</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  normalizeMethods: normalizeMethods,

	  <span class="hljs-attr">_setOptions</span>: _setOptions,</pre></div></div>
            
        </li>
        
        
        <li id="section-80">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-80">&#182;</a>
              </div>
              <p>A handy way to merge passed-in options onto the instance</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  mergeOptions: mergeOptions,</pre></div></div>
            
        </li>
        
        
        <li id="section-81">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-81">&#182;</a>
              </div>
              <p>Enable getting options from this or this.options by name.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  getOption: getOption,</pre></div></div>
            
        </li>
        
        
        <li id="section-82">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-82">&#182;</a>
              </div>
              <p>Enable binding view’s events from another entity.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  bindEntityEvents: bindEntityEvents,</pre></div></div>
            
        </li>
        
        
        <li id="section-83">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-83">&#182;</a>
              </div>
              <p>Enable unbinding view’s events from another entity.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  unbindEntityEvents: unbindEntityEvents
	};

	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">iterateReplies</span>(<span class="hljs-params">target, channel, bindings, actionName</span>) </span>{
	  <span class="hljs-keyword">if</span> (!channel || !bindings) {
	    <span class="hljs-keyword">return</span>;
	  }</pre></div></div>
            
        </li>
        
        
        <li id="section-84">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-84">&#182;</a>
              </div>
              <p>type-check bindings</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  <span class="hljs-keyword">if</span> (!_.isObject(bindings)) {
	    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> MarionetteError({
	      <span class="hljs-attr">message</span>: <span class="hljs-string">'Bindings must be an object.'</span>,
	      <span class="hljs-attr">url</span>: <span class="hljs-string">'marionette.functions.html#marionettebindradiorequests'</span>
	    });
	  }

	  <span class="hljs-keyword">var</span> normalizedRadioRequests = normalizeMethods.call(target, bindings);

	  channel[actionName](normalizedRadioRequests, target);
	}

	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">bindRadioRequests</span>(<span class="hljs-params">channel, bindings</span>) </span>{
	  iterateReplies(<span class="hljs-keyword">this</span>, channel, bindings, <span class="hljs-string">'reply'</span>);
	}

	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">unbindRadioRequests</span>(<span class="hljs-params">channel, bindings</span>) </span>{
	  iterateReplies(<span class="hljs-keyword">this</span>, channel, bindings, <span class="hljs-string">'stopReplying'</span>);
	}

	<span class="hljs-keyword">var</span> RadioMixin = {

	  <span class="hljs-attr">_initRadio</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_initRadio</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">var</span> channelName = <span class="hljs-keyword">this</span>.getValue(<span class="hljs-keyword">this</span>.getOption(<span class="hljs-string">'channelName'</span>));

	    <span class="hljs-keyword">if</span> (!channelName) {
	      <span class="hljs-keyword">return</span>;
	    }

	    <span class="hljs-keyword">var</span> channel = <span class="hljs-keyword">this</span>._channel = Radio.channel(channelName);

	    <span class="hljs-keyword">var</span> radioEvents = <span class="hljs-keyword">this</span>.getValue(<span class="hljs-keyword">this</span>.getOption(<span class="hljs-string">'radioEvents'</span>));
	    <span class="hljs-keyword">this</span>.bindRadioEvents(channel, radioEvents);

	    <span class="hljs-keyword">var</span> radioRequests = <span class="hljs-keyword">this</span>.getValue(<span class="hljs-keyword">this</span>.getOption(<span class="hljs-string">'radioRequests'</span>));
	    <span class="hljs-keyword">this</span>.bindRadioRequests(channel, radioRequests);

	    <span class="hljs-keyword">this</span>.on(<span class="hljs-string">'destroy'</span>, <span class="hljs-keyword">this</span>._destroyRadio);
	  },

	  <span class="hljs-attr">_destroyRadio</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_destroyRadio</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">this</span>._channel.stopReplying(<span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>, <span class="hljs-keyword">this</span>);
	  },

	  <span class="hljs-attr">getChannel</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getChannel</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._channel;
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-85">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-85">&#182;</a>
              </div>
              <p>Proxy <code>bindRadioEvents</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  bindRadioEvents: bindEntityEvents,</pre></div></div>
            
        </li>
        
        
        <li id="section-86">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-86">&#182;</a>
              </div>
              <p>Proxy <code>unbindRadioEvents</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  unbindRadioEvents: unbindEntityEvents,</pre></div></div>
            
        </li>
        
        
        <li id="section-87">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-87">&#182;</a>
              </div>
              <p>Proxy <code>bindRadioRequests</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  bindRadioRequests: bindRadioRequests,</pre></div></div>
            
        </li>
        
        
        <li id="section-88">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-88">&#182;</a>
              </div>
              <p>Proxy <code>unbindRadioRequests</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  unbindRadioRequests: unbindRadioRequests

	};</pre></div></div>
            
        </li>
        
        
        <li id="section-89">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-89">&#182;</a>
              </div>
              <p>A Base Class that other Classes should descend from.
Object borrows many conventions and utilities from Backbone.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">var</span> MarionetteObject = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">MarionetteObject</span>(<span class="hljs-params">options</span>) </span>{
	  <span class="hljs-keyword">this</span>._setOptions(options);
	  <span class="hljs-keyword">this</span>.cid = _.uniqueId(<span class="hljs-keyword">this</span>.cidPrefix);
	  <span class="hljs-keyword">this</span>._initRadio();
	  <span class="hljs-keyword">this</span>.initialize.apply(<span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span>);
	};

	MarionetteObject.extend = extend;</pre></div></div>
            
        </li>
        
        
        <li id="section-90">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-90">&#182;</a>
              </div>
              <h2 id="object-methods">Object Methods</h2>

            </div>
            
        </li>
        
        
        <li id="section-91">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-91">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-92">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-92">&#182;</a>
              </div>
              <p>Ensure it can trigger events with Backbone.Events</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	_.extend(MarionetteObject.prototype, Backbone.Events, CommonMixin, RadioMixin, {
	  <span class="hljs-attr">cidPrefix</span>: <span class="hljs-string">'mno'</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-93">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-93">&#182;</a>
              </div>
              <p>for parity with Marionette.AbstractView lifecyle</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  _isDestroyed: <span class="hljs-literal">false</span>,

	  <span class="hljs-attr">isDestroyed</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isDestroyed</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._isDestroyed;
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-94">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-94">&#182;</a>
              </div>
              <p>this is a noop method intended to be overridden by classes that extend from this base</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  initialize: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">initialize</span>(<span class="hljs-params"></span>) </span>{},

	  <span class="hljs-attr">destroy</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">destroy</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._isDestroyed) {
	      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
	    }

	    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> _len = <span class="hljs-built_in">arguments</span>.length, args = <span class="hljs-built_in">Array</span>(_len), _key = <span class="hljs-number">0</span>; _key &lt; _len; _key++) {
	      args[_key] = <span class="hljs-built_in">arguments</span>[_key];
	    }

	    <span class="hljs-keyword">this</span>.triggerMethod.apply(<span class="hljs-keyword">this</span>, [<span class="hljs-string">'before:destroy'</span>].concat(args));</pre></div></div>
            
        </li>
        
        
        <li id="section-95">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-95">&#182;</a>
              </div>
              <p>mark as destroyed before doing the actual destroy, to
prevent infinite loops within “destroy” event handlers</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    <span class="hljs-keyword">this</span>._isDestroyed = <span class="hljs-literal">true</span>;
	    <span class="hljs-keyword">this</span>.triggerMethod.apply(<span class="hljs-keyword">this</span>, [<span class="hljs-string">'destroy'</span>].concat(args));
	    <span class="hljs-keyword">this</span>.stopListening();

	    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
	  },

	  <span class="hljs-attr">triggerMethod</span>: triggerMethod
	});</pre></div></div>
            
        </li>
        
        
        <li id="section-96">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-96">&#182;</a>
              </div>
              <p>Manage templates stored in <code>&lt;script&gt;</code> blocks,
caching them for faster access.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">var</span> TemplateCache = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">TemplateCache</span>(<span class="hljs-params">templateId</span>) </span>{
	  <span class="hljs-keyword">this</span>.templateId = templateId;
	};</pre></div></div>
            
        </li>
        
        
        <li id="section-97">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-97">&#182;</a>
              </div>
              <p>TemplateCache object-level methods. Manage the template
caches from these method calls instead of creating
your own TemplateCache instances</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	_.extend(TemplateCache, {
	  <span class="hljs-attr">templateCaches</span>: {},</pre></div></div>
            
        </li>
        
        
        <li id="section-98">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-98">&#182;</a>
              </div>
              <p>Get the specified template by id. Either
retrieves the cached version, or loads it
from the DOM.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  get: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">get</span>(<span class="hljs-params">templateId, options</span>) </span>{
	    <span class="hljs-keyword">var</span> cachedTemplate = <span class="hljs-keyword">this</span>.templateCaches[templateId];

	    <span class="hljs-keyword">if</span> (!cachedTemplate) {
	      cachedTemplate = <span class="hljs-keyword">new</span> TemplateCache(templateId);
	      <span class="hljs-keyword">this</span>.templateCaches[templateId] = cachedTemplate;
	    }

	    <span class="hljs-keyword">return</span> cachedTemplate.load(options);
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-99">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-99">&#182;</a>
              </div>
              <p>Clear templates from the cache. If no arguments
are specified, clears all templates:
<code>clear()</code></p>
<p>If arguments are specified, clears each of the
specified templates from the cache:
<code>clear(&quot;#t1&quot;, &quot;#t2&quot;, &quot;...&quot;)</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  clear: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">clear</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">var</span> i;

	    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> _len = <span class="hljs-built_in">arguments</span>.length, args = <span class="hljs-built_in">Array</span>(_len), _key = <span class="hljs-number">0</span>; _key &lt; _len; _key++) {
	      args[_key] = <span class="hljs-built_in">arguments</span>[_key];
	    }

	    <span class="hljs-keyword">var</span> length = args.length;

	    <span class="hljs-keyword">if</span> (length &gt; <span class="hljs-number">0</span>) {
	      <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; length; i++) {
	        <span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>.templateCaches[args[i]];
	      }
	    } <span class="hljs-keyword">else</span> {
	      <span class="hljs-keyword">this</span>.templateCaches = {};
	    }
	  }
	});</pre></div></div>
            
        </li>
        
        
        <li id="section-100">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-100">&#182;</a>
              </div>
              <p>TemplateCache instance methods, allowing each
template cache object to manage its own state
and know whether or not it has been loaded</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	_.extend(TemplateCache.prototype, {</pre></div></div>
            
        </li>
        
        
        <li id="section-101">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-101">&#182;</a>
              </div>
              <p>Internal method to load the template</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  load: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">load</span>(<span class="hljs-params">options</span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-102">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-102">&#182;</a>
              </div>
              <p>Guard clause to prevent loading this template more than once</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.compiledTemplate) {
	      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.compiledTemplate;
	    }</pre></div></div>
            
        </li>
        
        
        <li id="section-103">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-103">&#182;</a>
              </div>
              <p>Load the template and compile it</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    <span class="hljs-keyword">var</span> template = <span class="hljs-keyword">this</span>.loadTemplate(<span class="hljs-keyword">this</span>.templateId, options);
	    <span class="hljs-keyword">this</span>.compiledTemplate = <span class="hljs-keyword">this</span>.compileTemplate(template, options);

	    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.compiledTemplate;
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-104">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-104">&#182;</a>
              </div>
              <p>Load a template from the DOM, by default. Override
this method to provide your own template retrieval
For asynchronous loading with AMD/RequireJS, consider
using a template-loader plugin as described here:
<a href="https://github.com/marionettejs/backbone.marionette/wiki/Using-marionette-with-requirejs">https://github.com/marionettejs/backbone.marionette/wiki/Using-marionette-with-requirejs</a></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  loadTemplate: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">loadTemplate</span>(<span class="hljs-params">templateId, options</span>) </span>{
	    <span class="hljs-keyword">var</span> $template = Backbone.$(templateId);

	    <span class="hljs-keyword">if</span> (!$template.length) {
	      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> MarionetteError({
	        <span class="hljs-attr">name</span>: <span class="hljs-string">'NoTemplateError'</span>,
	        <span class="hljs-attr">message</span>: <span class="hljs-string">'Could not find template: "'</span> + templateId + <span class="hljs-string">'"'</span>
	      });
	    }
	    <span class="hljs-keyword">return</span> $template.html();
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-105">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-105">&#182;</a>
              </div>
              <p>Pre-compile the template before caching it. Override
this method if you do not need to pre-compile a template
(JST / RequireJS for example) or if you want to change
the template engine used (Handebars, etc).</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  compileTemplate: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compileTemplate</span>(<span class="hljs-params">rawTemplate, options</span>) </span>{
	    <span class="hljs-keyword">return</span> _.template(rawTemplate, options);
	  }
	});</pre></div></div>
            
        </li>
        
        
        <li id="section-106">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-106">&#182;</a>
              </div>
              <p>Render a template with data by passing in the template
selector and the data to render.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">var</span> Renderer = {</pre></div></div>
            
        </li>
        
        
        <li id="section-107">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-107">&#182;</a>
              </div>
              <p>Render a template with data. The <code>template</code> parameter is
passed to the <code>TemplateCache</code> object to retrieve the
template function. Override this method to provide your own
custom rendering and template handling for all of Marionette.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  render: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">render</span>(<span class="hljs-params">template, data</span>) </span>{
	    <span class="hljs-keyword">if</span> (!template) {
	      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> MarionetteError({
	        <span class="hljs-attr">name</span>: <span class="hljs-string">'TemplateNotFoundError'</span>,
	        <span class="hljs-attr">message</span>: <span class="hljs-string">'Cannot render the template since its false, null or undefined.'</span>
	      });
	    }

	    <span class="hljs-keyword">var</span> templateFunc = _.isFunction(template) ? template : TemplateCache.get(template);

	    <span class="hljs-keyword">return</span> templateFunc(data);
	  }
	};

	<span class="hljs-keyword">var</span> _invoke = _.invokeMap || _.invoke;</pre></div></div>
            
        </li>
        
        
        <li id="section-108">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-108">&#182;</a>
              </div>
              <p>Takes care of getting the behavior class
given options and a key.
If a user passes in options.behaviorClass
default to using that.
If a user passes in a Behavior Class directly, use that
Otherwise delegate the lookup to the users <code>behaviorsLookup</code> implementation.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getBehaviorClass</span>(<span class="hljs-params">options, key</span>) </span>{
	  <span class="hljs-keyword">if</span> (options.behaviorClass) {
	    <span class="hljs-keyword">return</span> options.behaviorClass;</pre></div></div>
            
        </li>
        
        
        <li id="section-109">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-109">&#182;</a>
              </div>
              <p>treat functions as a Behavior constructor</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (_.isFunction(options)) {
	      <span class="hljs-keyword">return</span> options;
	    }</pre></div></div>
            
        </li>
        
        
        <li id="section-110">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-110">&#182;</a>
              </div>
              <p>behaviorsLookup can be either a flat object or a method</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  <span class="hljs-keyword">return</span> getValue(Marionette.Behaviors.behaviorsLookup, options, key)[key];
	}</pre></div></div>
            
        </li>
        
        
        <li id="section-111">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-111">&#182;</a>
              </div>
              <p>Iterate over the behaviors object, for each behavior
instantiate it and get its grouped behaviors.
This accepts a list of behaviors in either an object or array form</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">parseBehaviors</span>(<span class="hljs-params">view, behaviors</span>) </span>{
	  <span class="hljs-keyword">return</span> _.chain(behaviors).map(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">options, key</span>) </span>{
	    <span class="hljs-keyword">var</span> BehaviorClass = getBehaviorClass(options, key);</pre></div></div>
            
        </li>
        
        
        <li id="section-112">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-112">&#182;</a>
              </div>
              <p>if we’re passed a class directly instead of an object</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    <span class="hljs-keyword">var</span> _options = options === BehaviorClass ? {} : options;
	    <span class="hljs-keyword">var</span> behavior = <span class="hljs-keyword">new</span> BehaviorClass(_options, view);
	    <span class="hljs-keyword">var</span> nestedBehaviors = parseBehaviors(view, _.result(behavior, <span class="hljs-string">'behaviors'</span>));

	    <span class="hljs-keyword">return</span> [behavior].concat(nestedBehaviors);
	  }).flatten().value();
	}

	<span class="hljs-keyword">var</span> BehaviorsMixin = {
	  <span class="hljs-attr">_initBehaviors</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_initBehaviors</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">var</span> behaviors = <span class="hljs-keyword">this</span>.getValue(<span class="hljs-keyword">this</span>.getOption(<span class="hljs-string">'behaviors'</span>));</pre></div></div>
            
        </li>
        
        
        <li id="section-113">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-113">&#182;</a>
              </div>
              <p>Behaviors defined on a view can be a flat object literal
or it can be a function that returns an object.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    <span class="hljs-keyword">this</span>._behaviors = _.isObject(behaviors) ? parseBehaviors(<span class="hljs-keyword">this</span>, behaviors) : {};
	  },

	  <span class="hljs-attr">_getBehaviorTriggers</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_getBehaviorTriggers</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">var</span> triggers = _invoke(<span class="hljs-keyword">this</span>._behaviors, <span class="hljs-string">'getTriggers'</span>);
	    <span class="hljs-keyword">return</span> _.extend.apply(_, [{}].concat(babelHelpers.toConsumableArray(triggers)));
	  },

	  <span class="hljs-attr">_getBehaviorEvents</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_getBehaviorEvents</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">var</span> events = _invoke(<span class="hljs-keyword">this</span>._behaviors, <span class="hljs-string">'getEvents'</span>);
	    <span class="hljs-keyword">return</span> _.extend.apply(_, [{}].concat(babelHelpers.toConsumableArray(events)));
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-114">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-114">&#182;</a>
              </div>
              <p>proxy behavior $el to the view’s $el.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  _proxyBehaviorViewProperties: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_proxyBehaviorViewProperties</span>(<span class="hljs-params"></span>) </span>{
	    _invoke(<span class="hljs-keyword">this</span>._behaviors, <span class="hljs-string">'proxyViewProperties'</span>);
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-115">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-115">&#182;</a>
              </div>
              <p>delegate modelEvents and collectionEvents</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  _delegateBehaviorEntityEvents: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_delegateBehaviorEntityEvents</span>(<span class="hljs-params"></span>) </span>{
	    _invoke(<span class="hljs-keyword">this</span>._behaviors, <span class="hljs-string">'delegateEntityEvents'</span>);
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-116">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-116">&#182;</a>
              </div>
              <p>undelegate modelEvents and collectionEvents</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  _undelegateBehaviorEntityEvents: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_undelegateBehaviorEntityEvents</span>(<span class="hljs-params"></span>) </span>{
	    _invoke(<span class="hljs-keyword">this</span>._behaviors, <span class="hljs-string">'undelegateEntityEvents'</span>);
	  },

	  <span class="hljs-attr">_destroyBehaviors</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_destroyBehaviors</span>(<span class="hljs-params">args</span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-117">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-117">&#182;</a>
              </div>
              <p>Call destroy on each behavior after
destroying the view.
This unbinds event listeners
that behaviors have registered for.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    _invoke.apply(<span class="hljs-literal">undefined</span>, [<span class="hljs-keyword">this</span>._behaviors, <span class="hljs-string">'destroy'</span>].concat(babelHelpers.toConsumableArray(args)));
	  },

	  <span class="hljs-attr">_bindBehaviorUIElements</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_bindBehaviorUIElements</span>(<span class="hljs-params"></span>) </span>{
	    _invoke(<span class="hljs-keyword">this</span>._behaviors, <span class="hljs-string">'bindUIElements'</span>);
	  },

	  <span class="hljs-attr">_unbindBehaviorUIElements</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_unbindBehaviorUIElements</span>(<span class="hljs-params"></span>) </span>{
	    _invoke(<span class="hljs-keyword">this</span>._behaviors, <span class="hljs-string">'unbindUIElements'</span>);
	  },

	  <span class="hljs-attr">_triggerEventOnBehaviors</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_triggerEventOnBehaviors</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">var</span> behaviors = <span class="hljs-keyword">this</span>._behaviors;</pre></div></div>
            
        </li>
        
        
        <li id="section-118">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-118">&#182;</a>
              </div>
              <p>Use good ol’ for as this is a very hot function</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
	    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> _len = <span class="hljs-built_in">arguments</span>.length, args = <span class="hljs-built_in">Array</span>(_len), _key = <span class="hljs-number">0</span>; _key &lt; _len; _key++) {
	      args[_key] = <span class="hljs-built_in">arguments</span>[_key];
	    }

	    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, length = behaviors &amp;&amp; behaviors.length; i &lt; length; i++) {
	      triggerMethod.apply(behaviors[i], args);
	    }
	  }
	};

	<span class="hljs-keyword">var</span> DelegateEntityEventsMixin = {</pre></div></div>
            
        </li>
        
        
        <li id="section-119">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-119">&#182;</a>
              </div>
              <p>Handle <code>modelEvents</code>, and <code>collectionEvents</code> configuration</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  _delegateEntityEvents: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_delegateEntityEvents</span>(<span class="hljs-params">model, collection</span>) </span>{
	    <span class="hljs-keyword">this</span>._undelegateEntityEvents(model, collection);

	    <span class="hljs-keyword">var</span> modelEvents = <span class="hljs-keyword">this</span>.getValue(<span class="hljs-keyword">this</span>.getOption(<span class="hljs-string">'modelEvents'</span>));
	    bindEntityEvents.call(<span class="hljs-keyword">this</span>, model, modelEvents);

	    <span class="hljs-keyword">var</span> collectionEvents = <span class="hljs-keyword">this</span>.getValue(<span class="hljs-keyword">this</span>.getOption(<span class="hljs-string">'collectionEvents'</span>));
	    bindEntityEvents.call(<span class="hljs-keyword">this</span>, collection, collectionEvents);
	  },

	  <span class="hljs-attr">_undelegateEntityEvents</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_undelegateEntityEvents</span>(<span class="hljs-params">model, collection</span>) </span>{
	    <span class="hljs-keyword">var</span> modelEvents = <span class="hljs-keyword">this</span>.getValue(<span class="hljs-keyword">this</span>.getOption(<span class="hljs-string">'modelEvents'</span>));
	    unbindEntityEvents.call(<span class="hljs-keyword">this</span>, model, modelEvents);

	    <span class="hljs-keyword">var</span> collectionEvents = <span class="hljs-keyword">this</span>.getValue(<span class="hljs-keyword">this</span>.getOption(<span class="hljs-string">'collectionEvents'</span>));
	    unbindEntityEvents.call(<span class="hljs-keyword">this</span>, collection, collectionEvents);
	  }
	};</pre></div></div>
            
        </li>
        
        
        <li id="section-120">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-120">&#182;</a>
              </div>
              <p>Borrow event splitter from Backbone</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">var</span> delegateEventSplitter = <span class="hljs-regexp">/^(\S+)\s*(.*)$/</span>;

	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">uniqueName</span>(<span class="hljs-params">eventName, selector</span>) </span>{
	  <span class="hljs-keyword">return</span> [eventName + _.uniqueId(<span class="hljs-string">'.evt'</span>), selector].join(<span class="hljs-string">' '</span>);
	}</pre></div></div>
            
        </li>
        
        
        <li id="section-121">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-121">&#182;</a>
              </div>
              <p>Set event name to be namespaced using a unique index
to generate a non colliding event namespace
<a href="http://api.jquery.com/event.namespace/">http://api.jquery.com/event.namespace/</a></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">var</span> getUniqueEventName = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getUniqueEventName</span>(<span class="hljs-params">eventName</span>) </span>{
	  <span class="hljs-keyword">var</span> match = eventName.match(delegateEventSplitter);
	  <span class="hljs-keyword">return</span> uniqueName(match[<span class="hljs-number">1</span>], match[<span class="hljs-number">2</span>]);
	};</pre></div></div>
            
        </li>
        
        
        <li id="section-122">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-122">&#182;</a>
              </div>
              <p>Internal method to create an event handler for a given <code>triggerDef</code> like
‘click:foo’</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">buildViewTrigger</span>(<span class="hljs-params">view, triggerDef</span>) </span>{
	  <span class="hljs-keyword">if</span> (_.isString(triggerDef)) {
	    triggerDef = { <span class="hljs-attr">event</span>: triggerDef };
	  }

	  <span class="hljs-keyword">var</span> eventName = triggerDef.event;
	  <span class="hljs-keyword">var</span> shouldPreventDefault = triggerDef.preventDefault !== <span class="hljs-literal">false</span>;
	  <span class="hljs-keyword">var</span> shouldStopPropagation = triggerDef.stopPropagation !== <span class="hljs-literal">false</span>;

	  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>{
	    <span class="hljs-keyword">if</span> (shouldPreventDefault) {
	      e.preventDefault();
	    }

	    <span class="hljs-keyword">if</span> (shouldStopPropagation) {
	      e.stopPropagation();
	    }

	    view.triggerMethod(eventName, view);
	  };
	}

	<span class="hljs-keyword">var</span> TriggersMixin = {</pre></div></div>
            
        </li>
        
        
        <li id="section-123">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-123">&#182;</a>
              </div>
              <p>Configure <code>triggers</code> to forward DOM events to view
events. <code>triggers: {&quot;click .foo&quot;: &quot;do:foo&quot;}</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  _getViewTriggers: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_getViewTriggers</span>(<span class="hljs-params">view, triggers</span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-124">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-124">&#182;</a>
              </div>
              <p>Configure the triggers, prevent default
action and stop propagation of DOM events</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    <span class="hljs-keyword">return</span> _.reduce(triggers, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">events, value, key</span>) </span>{
	      key = getUniqueEventName(key);
	      events[key] = buildViewTrigger(view, value);
	      <span class="hljs-keyword">return</span> events;
	    }, {});
	  }

	};</pre></div></div>
            
        </li>
        
        
        <li id="section-125">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-125">&#182;</a>
              </div>
              <p>allows for the use of the @ui. syntax within
a given key for triggers and events
swaps the @ui with the associated selector.
Returns a new, non-mutated, parsed events hash.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">var</span> _normalizeUIKeys = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_normalizeUIKeys</span>(<span class="hljs-params">hash, ui</span>) </span>{
	  <span class="hljs-keyword">return</span> _.reduce(hash, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">memo, val, key</span>) </span>{
	    <span class="hljs-keyword">var</span> normalizedKey = normalizeUIString(key, ui);
	    memo[normalizedKey] = val;
	    <span class="hljs-keyword">return</span> memo;
	  }, {});
	};</pre></div></div>
            
        </li>
        
        
        <li id="section-126">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-126">&#182;</a>
              </div>
              <p>utility method for parsing @ui. syntax strings
into associated selector</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">var</span> normalizeUIString = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">normalizeUIString</span>(<span class="hljs-params">uiString, ui</span>) </span>{
	  <span class="hljs-keyword">return</span> uiString.replace(<span class="hljs-regexp">/@ui\.[a-zA-Z_$0-9]*/g</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">r</span>) </span>{
	    <span class="hljs-keyword">return</span> ui[r.slice(<span class="hljs-number">4</span>)];
	  });
	};</pre></div></div>
            
        </li>
        
        
        <li id="section-127">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-127">&#182;</a>
              </div>
              <p>allows for the use of the @ui. syntax within
a given value for regions
swaps the @ui with the associated selector</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">var</span> _normalizeUIValues = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_normalizeUIValues</span>(<span class="hljs-params">hash, ui, properties</span>) </span>{
	  _.each(hash, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">val, key</span>) </span>{
	    <span class="hljs-keyword">if</span> (_.isString(val)) {
	      hash[key] = normalizeUIString(val, ui);
	    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (_.isObject(val) &amp;&amp; _.isArray(properties)) {
	      _.extend(val, _normalizeUIValues(_.pick(val, properties), ui));
	      <span class="hljs-comment">/* Value is an object, and we got an array of embedded property names to normalize. */</span>
	      _.each(properties, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">property</span>) </span>{
	        <span class="hljs-keyword">var</span> propertyVal = val[property];
	        <span class="hljs-keyword">if</span> (_.isString(propertyVal)) {
	          val[property] = normalizeUIString(propertyVal, ui);
	        }
	      });
	    }
	  });
	  <span class="hljs-keyword">return</span> hash;
	};

	<span class="hljs-keyword">var</span> UIMixin = {</pre></div></div>
            
        </li>
        
        
        <li id="section-128">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-128">&#182;</a>
              </div>
              <p>normalize the keys of passed hash with the views <code>ui</code> selectors.
<code>{&quot;@ui.foo&quot;: &quot;bar&quot;}</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  normalizeUIKeys: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">normalizeUIKeys</span>(<span class="hljs-params">hash</span>) </span>{
	    <span class="hljs-keyword">var</span> uiBindings = <span class="hljs-keyword">this</span>._getUIBindings();
	    <span class="hljs-keyword">return</span> _normalizeUIKeys(hash, uiBindings);
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-129">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-129">&#182;</a>
              </div>
              <p>normalize the values of passed hash with the views <code>ui</code> selectors.
<code>{foo: &quot;@ui.bar&quot;}</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  normalizeUIValues: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">normalizeUIValues</span>(<span class="hljs-params">hash, properties</span>) </span>{
	    <span class="hljs-keyword">var</span> uiBindings = <span class="hljs-keyword">this</span>._getUIBindings();
	    <span class="hljs-keyword">return</span> _normalizeUIValues(hash, uiBindings, properties);
	  },

	  <span class="hljs-attr">_getUIBindings</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_getUIBindings</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">var</span> uiBindings = _.result(<span class="hljs-keyword">this</span>, <span class="hljs-string">'_uiBindings'</span>);
	    <span class="hljs-keyword">var</span> ui = _.result(<span class="hljs-keyword">this</span>, <span class="hljs-string">'ui'</span>);
	    <span class="hljs-keyword">return</span> uiBindings || ui;
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-130">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-130">&#182;</a>
              </div>
              <p>This method binds the elements specified in the “ui” hash inside the view’s code with
the associated jQuery selectors.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  _bindUIElements: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_bindUIElements</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">var</span> _this = <span class="hljs-keyword">this</span>;

	    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.ui) {
	      <span class="hljs-keyword">return</span>;
	    }</pre></div></div>
            
        </li>
        
        
        <li id="section-131">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-131">&#182;</a>
              </div>
              <p>store the ui hash in _uiBindings so they can be reset later
and so re-rendering the view will be able to find the bindings</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>._uiBindings) {
	      <span class="hljs-keyword">this</span>._uiBindings = <span class="hljs-keyword">this</span>.ui;
	    }</pre></div></div>
            
        </li>
        
        
        <li id="section-132">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-132">&#182;</a>
              </div>
              <p>get the bindings result, as a function or otherwise</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    <span class="hljs-keyword">var</span> bindings = _.result(<span class="hljs-keyword">this</span>, <span class="hljs-string">'_uiBindings'</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-133">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-133">&#182;</a>
              </div>
              <p>empty the ui so we don’t have anything to start with</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    <span class="hljs-keyword">this</span>._ui = {};</pre></div></div>
            
        </li>
        
        
        <li id="section-134">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-134">&#182;</a>
              </div>
              <p>bind each of the selectors</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    _.each(bindings, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">selector, key</span>) </span>{
	      _this._ui[key] = _this.$(selector);
	    });

	    <span class="hljs-keyword">this</span>.ui = <span class="hljs-keyword">this</span>._ui;
	  },

	  <span class="hljs-attr">_unbindUIElements</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_unbindUIElements</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">var</span> _this2 = <span class="hljs-keyword">this</span>;

	    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.ui || !<span class="hljs-keyword">this</span>._uiBindings) {
	      <span class="hljs-keyword">return</span>;
	    }</pre></div></div>
            
        </li>
        
        
        <li id="section-135">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-135">&#182;</a>
              </div>
              <p>delete all of the existing ui bindings</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    _.each(<span class="hljs-keyword">this</span>.ui, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">$el, name</span>) </span>{
	      <span class="hljs-keyword">delete</span> _this2.ui[name];
	    });</pre></div></div>
            
        </li>
        
        
        <li id="section-136">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-136">&#182;</a>
              </div>
              <p>reset the ui element to the original bindings configuration</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    <span class="hljs-keyword">this</span>.ui = <span class="hljs-keyword">this</span>._uiBindings;
	    <span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>._uiBindings;
	    <span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>._ui;
	  },

	  <span class="hljs-attr">_getUI</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_getUI</span>(<span class="hljs-params">name</span>) </span>{
	    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._ui[name];
	  }
	};

	<span class="hljs-keyword">var</span> ViewMixin = {
	  <span class="hljs-attr">supportsRenderLifecycle</span>: <span class="hljs-literal">true</span>,
	  <span class="hljs-attr">supportsDestroyLifecycle</span>: <span class="hljs-literal">true</span>,

	  <span class="hljs-attr">_isDestroyed</span>: <span class="hljs-literal">false</span>,

	  <span class="hljs-attr">isDestroyed</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isDestroyed</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">return</span> !!<span class="hljs-keyword">this</span>._isDestroyed;
	  },

	  <span class="hljs-attr">_isRendered</span>: <span class="hljs-literal">false</span>,

	  <span class="hljs-attr">isRendered</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isRendered</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">return</span> !!<span class="hljs-keyword">this</span>._isRendered;
	  },

	  <span class="hljs-attr">_isAttached</span>: <span class="hljs-literal">false</span>,

	  <span class="hljs-attr">isAttached</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isAttached</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">return</span> !!<span class="hljs-keyword">this</span>._isAttached;
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-137">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-137">&#182;</a>
              </div>
              <p>Mix in template context methods. Looks for a
<code>templateContext</code> attribute, which can either be an
object literal, or a function that returns an object
literal. All methods and attributes from this object
are copies to the object passed in.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  mixinTemplateContext: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">mixinTemplateContext</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">var</span> target = <span class="hljs-built_in">arguments</span>.length &lt;= <span class="hljs-number">0</span> || <span class="hljs-built_in">arguments</span>[<span class="hljs-number">0</span>] === <span class="hljs-literal">undefined</span> ? {} : <span class="hljs-built_in">arguments</span>[<span class="hljs-number">0</span>];

	    <span class="hljs-keyword">var</span> templateContext = <span class="hljs-keyword">this</span>.getValue(<span class="hljs-keyword">this</span>.getOption(<span class="hljs-string">'templateContext'</span>));
	    <span class="hljs-keyword">return</span> _.extend(target, templateContext);
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-138">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-138">&#182;</a>
              </div>
              <p>Overriding Backbone.View’s <code>delegateEvents</code> to handle
<code>events</code> and <code>triggers</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  delegateEvents: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">delegateEvents</span>(<span class="hljs-params">eventsArg</span>) </span>{

	    <span class="hljs-keyword">this</span>._proxyBehaviorViewProperties();
	    <span class="hljs-keyword">this</span>._buildEventProxies();

	    <span class="hljs-keyword">var</span> viewEvents = <span class="hljs-keyword">this</span>._getEvents(eventsArg);

	    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> eventsArg === <span class="hljs-string">'undefined'</span>) {
	      <span class="hljs-keyword">this</span>.events = viewEvents;
	    }

	    <span class="hljs-keyword">var</span> combinedEvents = _.extend({}, <span class="hljs-keyword">this</span>._getBehaviorEvents(), viewEvents, <span class="hljs-keyword">this</span>._getBehaviorTriggers(), <span class="hljs-keyword">this</span>.getTriggers());

	    Backbone.View.prototype.delegateEvents.call(<span class="hljs-keyword">this</span>, combinedEvents);

	    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
	  },

	  <span class="hljs-attr">_getEvents</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_getEvents</span>(<span class="hljs-params">eventsArg</span>) </span>{
	    <span class="hljs-keyword">var</span> events = <span class="hljs-keyword">this</span>.getValue(eventsArg || <span class="hljs-keyword">this</span>.events);

	    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.normalizeUIKeys(events);
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-139">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-139">&#182;</a>
              </div>
              <p>Configure <code>triggers</code> to forward DOM events to view
events. <code>triggers: {&quot;click .foo&quot;: &quot;do:foo&quot;}</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  getTriggers: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getTriggers</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.triggers) {
	      <span class="hljs-keyword">return</span>;
	    }</pre></div></div>
            
        </li>
        
        
        <li id="section-140">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-140">&#182;</a>
              </div>
              <p>Allow <code>triggers</code> to be configured as a function</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    <span class="hljs-keyword">var</span> triggers = <span class="hljs-keyword">this</span>.normalizeUIKeys(_.result(<span class="hljs-keyword">this</span>, <span class="hljs-string">'triggers'</span>));</pre></div></div>
            
        </li>
        
        
        <li id="section-141">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-141">&#182;</a>
              </div>
              <p>Configure the triggers, prevent default
action and stop propagation of DOM events</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._getViewTriggers(<span class="hljs-keyword">this</span>, triggers);
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-142">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-142">&#182;</a>
              </div>
              <p>Handle <code>modelEvents</code>, and <code>collectionEvents</code> configuration</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  delegateEntityEvents: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">delegateEntityEvents</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">this</span>._delegateEntityEvents(<span class="hljs-keyword">this</span>.model, <span class="hljs-keyword">this</span>.collection);</pre></div></div>
            
        </li>
        
        
        <li id="section-143">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-143">&#182;</a>
              </div>
              <p>bind each behaviors model and collection events</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    <span class="hljs-keyword">this</span>._delegateBehaviorEntityEvents();

	    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-144">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-144">&#182;</a>
              </div>
              <p>Handle unbinding <code>modelEvents</code>, and <code>collectionEvents</code> configuration</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  undelegateEntityEvents: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">undelegateEntityEvents</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">this</span>._undelegateEntityEvents(<span class="hljs-keyword">this</span>.model, <span class="hljs-keyword">this</span>.collection);</pre></div></div>
            
        </li>
        
        
        <li id="section-145">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-145">&#182;</a>
              </div>
              <p>unbind each behaviors model and collection events</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    <span class="hljs-keyword">this</span>._undelegateBehaviorEntityEvents();

	    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-146">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-146">&#182;</a>
              </div>
              <p>Internal helper method to verify whether the view hasn’t been destroyed</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  _ensureViewIsIntact: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_ensureViewIsIntact</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._isDestroyed) {
	      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> MarionetteError({
	        <span class="hljs-attr">name</span>: <span class="hljs-string">'ViewDestroyedError'</span>,
	        <span class="hljs-attr">message</span>: <span class="hljs-string">'View (cid: "'</span> + <span class="hljs-keyword">this</span>.cid + <span class="hljs-string">'") has already been destroyed and cannot be used.'</span>
	      });
	    }
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-147">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-147">&#182;</a>
              </div>
              <p>Handle destroying the view and its children.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  destroy: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">destroy</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._isDestroyed) {
	      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
	    }
	    <span class="hljs-keyword">var</span> shouldTriggerDetach = !!<span class="hljs-keyword">this</span>._isAttached;

	    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> _len = <span class="hljs-built_in">arguments</span>.length, args = <span class="hljs-built_in">Array</span>(_len), _key = <span class="hljs-number">0</span>; _key &lt; _len; _key++) {
	      args[_key] = <span class="hljs-built_in">arguments</span>[_key];
	    }

	    <span class="hljs-keyword">this</span>.triggerMethod.apply(<span class="hljs-keyword">this</span>, [<span class="hljs-string">'before:destroy'</span>].concat(args));
	    <span class="hljs-keyword">if</span> (shouldTriggerDetach) {
	      <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'before:detach'</span>, <span class="hljs-keyword">this</span>);
	    }</pre></div></div>
            
        </li>
        
        
        <li id="section-148">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-148">&#182;</a>
              </div>
              <p>unbind UI elements</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    <span class="hljs-keyword">this</span>.unbindUIElements();</pre></div></div>
            
        </li>
        
        
        <li id="section-149">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-149">&#182;</a>
              </div>
              <p>remove the view from the DOM
<a href="https://github.com/jashkenas/backbone/blob/1.2.3/backbone.js#L1235">https://github.com/jashkenas/backbone/blob/1.2.3/backbone.js#L1235</a></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    <span class="hljs-keyword">this</span>._removeElement();

	    <span class="hljs-keyword">if</span> (shouldTriggerDetach) {
	      <span class="hljs-keyword">this</span>._isAttached = <span class="hljs-literal">false</span>;
	      <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'detach'</span>, <span class="hljs-keyword">this</span>);
	    }</pre></div></div>
            
        </li>
        
        
        <li id="section-150">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-150">&#182;</a>
              </div>
              <p>remove children after the remove to prevent extra paints</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    <span class="hljs-keyword">this</span>._removeChildren();

	    <span class="hljs-keyword">this</span>._destroyBehaviors(args);

	    <span class="hljs-keyword">this</span>._isDestroyed = <span class="hljs-literal">true</span>;
	    <span class="hljs-keyword">this</span>._isRendered = <span class="hljs-literal">false</span>;
	    <span class="hljs-keyword">this</span>.triggerMethod.apply(<span class="hljs-keyword">this</span>, [<span class="hljs-string">'destroy'</span>].concat(args));

	    <span class="hljs-keyword">this</span>.stopListening();

	    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
	  },

	  <span class="hljs-attr">bindUIElements</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">bindUIElements</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">this</span>._bindUIElements();
	    <span class="hljs-keyword">this</span>._bindBehaviorUIElements();

	    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-151">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-151">&#182;</a>
              </div>
              <p>This method unbinds the elements specified in the “ui” hash</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  unbindUIElements: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">unbindUIElements</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">this</span>._unbindUIElements();
	    <span class="hljs-keyword">this</span>._unbindBehaviorUIElements();

	    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
	  },

	  <span class="hljs-attr">getUI</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getUI</span>(<span class="hljs-params">name</span>) </span>{
	    <span class="hljs-keyword">this</span>._ensureViewIsIntact();
	    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._getUI(name);
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-152">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-152">&#182;</a>
              </div>
              <p>used as the prefix for child view events
that are forwarded through the layoutview</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  childViewEventPrefix: <span class="hljs-string">'childview'</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-153">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-153">&#182;</a>
              </div>
              <p>import the <code>triggerMethod</code> to trigger events with corresponding
methods if the method exists</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  triggerMethod: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">triggerMethod$$</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> _len2 = <span class="hljs-built_in">arguments</span>.length, args = <span class="hljs-built_in">Array</span>(_len2), _key2 = <span class="hljs-number">0</span>; _key2 &lt; _len2; _key2++) {
	      args[_key2] = <span class="hljs-built_in">arguments</span>[_key2];
	    }

	    <span class="hljs-keyword">var</span> ret = triggerMethod.apply(<span class="hljs-keyword">this</span>, args);

	    <span class="hljs-keyword">this</span>._triggerEventOnBehaviors.apply(<span class="hljs-keyword">this</span>, args);
	    <span class="hljs-keyword">this</span>._triggerEventOnParentLayout.apply(<span class="hljs-keyword">this</span>, args);

	    <span class="hljs-keyword">return</span> ret;
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-154">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-154">&#182;</a>
              </div>
              <p>Cache <code>childViewEvents</code> and <code>childViewTriggers</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  _buildEventProxies: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_buildEventProxies</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">this</span>._childViewEvents = <span class="hljs-keyword">this</span>.getValue(<span class="hljs-keyword">this</span>.getOption(<span class="hljs-string">'childViewEvents'</span>));
	    <span class="hljs-keyword">this</span>._childViewTriggers = <span class="hljs-keyword">this</span>.getValue(<span class="hljs-keyword">this</span>.getOption(<span class="hljs-string">'childViewTriggers'</span>));
	  },

	  <span class="hljs-attr">_triggerEventOnParentLayout</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_triggerEventOnParentLayout</span>(<span class="hljs-params">eventName</span>) </span>{
	    <span class="hljs-keyword">var</span> layoutView = <span class="hljs-keyword">this</span>._parentView();
	    <span class="hljs-keyword">if</span> (!layoutView) {
	      <span class="hljs-keyword">return</span>;
	    }</pre></div></div>
            
        </li>
        
        
        <li id="section-155">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-155">&#182;</a>
              </div>
              <p>invoke triggerMethod on parent view</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    <span class="hljs-keyword">var</span> eventPrefix = layoutView.getOption(<span class="hljs-string">'childViewEventPrefix'</span>);
	    <span class="hljs-keyword">var</span> prefixedEventName = eventPrefix + <span class="hljs-string">':'</span> + eventName;

	    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> _len3 = <span class="hljs-built_in">arguments</span>.length, args = <span class="hljs-built_in">Array</span>(_len3 &gt; <span class="hljs-number">1</span> ? _len3 - <span class="hljs-number">1</span> : <span class="hljs-number">0</span>), _key3 = <span class="hljs-number">1</span>; _key3 &lt; _len3; _key3++) {
	      args[_key3 - <span class="hljs-number">1</span>] = <span class="hljs-built_in">arguments</span>[_key3];
	    }

	    layoutView.triggerMethod.apply(layoutView, [prefixedEventName].concat(args));</pre></div></div>
            
        </li>
        
        
        <li id="section-156">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-156">&#182;</a>
              </div>
              <p>use the parent view’s childViewEvents handler</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    <span class="hljs-keyword">var</span> childViewEvents = layoutView.normalizeMethods(layoutView._childViewEvents);

	    <span class="hljs-keyword">if</span> (!!childViewEvents &amp;&amp; _.isFunction(childViewEvents[eventName])) {
	      childViewEvents[eventName].apply(layoutView, args);
	    }</pre></div></div>
            
        </li>
        
        
        <li id="section-157">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-157">&#182;</a>
              </div>
              <p>use the parent view’s proxyEvent handlers</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    <span class="hljs-keyword">var</span> childViewTriggers = layoutView._childViewTriggers;</pre></div></div>
            
        </li>
        
        
        <li id="section-158">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-158">&#182;</a>
              </div>
              <p>Call the event with the proxy name on the parent layout</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    <span class="hljs-keyword">if</span> (childViewTriggers &amp;&amp; _.isString(childViewTriggers[eventName])) {
	      layoutView.triggerMethod.apply(layoutView, [childViewTriggers[eventName]].concat(args));
	    }
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-159">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-159">&#182;</a>
              </div>
              <p>Walk the _parent tree until we find a view (if one exists).
Returns the parent view hierarchically closest to this view.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  _parentView: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_parentView</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">var</span> parent = <span class="hljs-keyword">this</span>._parent;

	    <span class="hljs-keyword">while</span> (parent) {
	      <span class="hljs-keyword">if</span> (parent <span class="hljs-keyword">instanceof</span> View) {
	        <span class="hljs-keyword">return</span> parent;
	      }
	      parent = parent._parent;
	    }
	  }
	};

	_.extend(ViewMixin, BehaviorsMixin, CommonMixin, DelegateEntityEventsMixin, TriggersMixin, UIMixin);

	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">destroyBackboneView</span>(<span class="hljs-params">view</span>) </span>{
	  <span class="hljs-keyword">if</span> (!view.supportsDestroyLifecycle) {
	    triggerMethodOn(view, <span class="hljs-string">'before:destroy'</span>, view);
	  }

	  <span class="hljs-keyword">var</span> shouldTriggerDetach = !!view._isAttached;

	  <span class="hljs-keyword">if</span> (shouldTriggerDetach) {
	    triggerMethodOn(view, <span class="hljs-string">'before:detach'</span>, view);
	  }

	  view.remove();

	  <span class="hljs-keyword">if</span> (shouldTriggerDetach) {
	    view._isAttached = <span class="hljs-literal">false</span>;
	    triggerMethodOn(view, <span class="hljs-string">'detach'</span>, view);
	  }

	  view._isDestroyed = <span class="hljs-literal">true</span>;

	  <span class="hljs-keyword">if</span> (!view.supportsDestroyLifecycle) {
	    triggerMethodOn(view, <span class="hljs-string">'destroy'</span>, view);
	  }
	}

	<span class="hljs-keyword">var</span> Region = MarionetteObject.extend({
	  <span class="hljs-attr">cidPrefix</span>: <span class="hljs-string">'mnr'</span>,
	  <span class="hljs-attr">replaceElement</span>: <span class="hljs-literal">false</span>,
	  <span class="hljs-attr">_isReplaced</span>: <span class="hljs-literal">false</span>,

	  <span class="hljs-attr">constructor</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">constructor</span>(<span class="hljs-params">options</span>) </span>{
	    <span class="hljs-keyword">this</span>._setOptions(options);
	    <span class="hljs-keyword">this</span>._initEl = <span class="hljs-keyword">this</span>.el = <span class="hljs-keyword">this</span>.getOption(<span class="hljs-string">'el'</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-160">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-160">&#182;</a>
              </div>
              <p>Handle when this.el is passed in as a $ wrapped element.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    <span class="hljs-keyword">this</span>.el = <span class="hljs-keyword">this</span>.el <span class="hljs-keyword">instanceof</span> Backbone.$ ? <span class="hljs-keyword">this</span>.el[<span class="hljs-number">0</span>] : <span class="hljs-keyword">this</span>.el;

	    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.el) {
	      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> MarionetteError({
	        <span class="hljs-attr">name</span>: <span class="hljs-string">'NoElError'</span>,
	        <span class="hljs-attr">message</span>: <span class="hljs-string">'An "el" must be specified for a region.'</span>
	      });
	    }

	    <span class="hljs-keyword">this</span>.$el = <span class="hljs-keyword">this</span>.getEl(<span class="hljs-keyword">this</span>.el);
	    MarionetteObject.call(<span class="hljs-keyword">this</span>, options);
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-161">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-161">&#182;</a>
              </div>
              <p>Displays a backbone view instance inside of the region. Handles calling the <code>render</code>
method for you. Reads content directly from the <code>el</code> attribute. The <code>preventDestroy</code>
option can be used to prevent a view from the old view being destroyed on show.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  show: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">show</span>(<span class="hljs-params">view, options</span>) </span>{
	    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>._ensureElement(options)) {
	      <span class="hljs-keyword">return</span>;
	    }
	    <span class="hljs-keyword">this</span>._ensureView(view);
	    <span class="hljs-keyword">if</span> (view === <span class="hljs-keyword">this</span>.currentView) {
	      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
	    }

	    <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'before:show'</span>, <span class="hljs-keyword">this</span>, view, options);

	    monitorViewEvents(view);

	    <span class="hljs-keyword">this</span>.empty(options);</pre></div></div>
            
        </li>
        
        
        <li id="section-162">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-162">&#182;</a>
              </div>
              <p>We need to listen for if a view is destroyed in a way other than through the region.
If this happens we need to remove the reference to the currentView since once a view
has been destroyed we can not reuse it.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    view.on(<span class="hljs-string">'destroy'</span>, <span class="hljs-keyword">this</span>.empty, <span class="hljs-keyword">this</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-163">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-163">&#182;</a>
              </div>
              <p>Make this region the view’s parent.
It’s important that this parent binding happens before rendering so that any events
the child may trigger during render can also be triggered on the child’s ancestor views.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    view._parent = <span class="hljs-keyword">this</span>;

	    <span class="hljs-keyword">this</span>._renderView(view);

	    <span class="hljs-keyword">this</span>._attachView(view, options);

	    <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'show'</span>, <span class="hljs-keyword">this</span>, view, options);
	    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
	  },
	  <span class="hljs-attr">_renderView</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_renderView</span>(<span class="hljs-params">view</span>) </span>{
	    <span class="hljs-keyword">if</span> (view._isRendered) {
	      <span class="hljs-keyword">return</span>;
	    }

	    <span class="hljs-keyword">if</span> (!view.supportsRenderLifecycle) {
	      triggerMethodOn(view, <span class="hljs-string">'before:render'</span>, view);
	    }

	    view.render();

	    <span class="hljs-keyword">if</span> (!view.supportsRenderLifecycle) {
	      view._isRendered = <span class="hljs-literal">true</span>;
	      triggerMethodOn(view, <span class="hljs-string">'render'</span>, view);
	    }
	  },
	  <span class="hljs-attr">_attachView</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_attachView</span>(<span class="hljs-params">view</span>) </span>{
	    <span class="hljs-keyword">var</span> options = <span class="hljs-built_in">arguments</span>.length &lt;= <span class="hljs-number">1</span> || <span class="hljs-built_in">arguments</span>[<span class="hljs-number">1</span>] === <span class="hljs-literal">undefined</span> ? {} : <span class="hljs-built_in">arguments</span>[<span class="hljs-number">1</span>];

	    <span class="hljs-keyword">var</span> shouldTriggerAttach = !view._isAttached &amp;&amp; isNodeAttached(<span class="hljs-keyword">this</span>.el);
	    <span class="hljs-keyword">var</span> shouldReplaceEl = <span class="hljs-keyword">typeof</span> options.replaceElement === <span class="hljs-string">'undefined'</span> ? !!<span class="hljs-keyword">this</span>.getOption(<span class="hljs-string">'replaceElement'</span>) : !!options.replaceElement;

	    <span class="hljs-keyword">if</span> (shouldTriggerAttach) {
	      triggerMethodOn(view, <span class="hljs-string">'before:attach'</span>, view);
	    }

	    <span class="hljs-keyword">this</span>.attachHtml(view, shouldReplaceEl);

	    <span class="hljs-keyword">if</span> (shouldTriggerAttach) {
	      view._isAttached = <span class="hljs-literal">true</span>;
	      triggerMethodOn(view, <span class="hljs-string">'attach'</span>, view);
	    }

	    <span class="hljs-keyword">this</span>.currentView = view;
	  },
	  <span class="hljs-attr">_ensureElement</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_ensureElement</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">var</span> options = <span class="hljs-built_in">arguments</span>.length &lt;= <span class="hljs-number">0</span> || <span class="hljs-built_in">arguments</span>[<span class="hljs-number">0</span>] === <span class="hljs-literal">undefined</span> ? {} : <span class="hljs-built_in">arguments</span>[<span class="hljs-number">0</span>];

	    <span class="hljs-keyword">if</span> (!_.isObject(<span class="hljs-keyword">this</span>.el)) {
	      <span class="hljs-keyword">this</span>.$el = <span class="hljs-keyword">this</span>.getEl(<span class="hljs-keyword">this</span>.el);
	      <span class="hljs-keyword">this</span>.el = <span class="hljs-keyword">this</span>.$el[<span class="hljs-number">0</span>];
	    }

	    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.$el || <span class="hljs-keyword">this</span>.$el.length === <span class="hljs-number">0</span>) {
	      <span class="hljs-keyword">var</span> allowMissingEl = <span class="hljs-keyword">typeof</span> options.allowMissingEl === <span class="hljs-string">'undefined'</span> ? !!<span class="hljs-keyword">this</span>.getOption(<span class="hljs-string">'allowMissingEl'</span>) : !!options.allowMissingEl;

	      <span class="hljs-keyword">if</span> (allowMissingEl) {
	        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
	      } <span class="hljs-keyword">else</span> {
	        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> MarionetteError(<span class="hljs-string">'An "el" must exist in DOM for this region '</span> + <span class="hljs-keyword">this</span>.cid);
	      }
	    }
	    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
	  },
	  <span class="hljs-attr">_ensureView</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_ensureView</span>(<span class="hljs-params">view</span>) </span>{
	    <span class="hljs-keyword">if</span> (!view) {
	      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> MarionetteError({
	        <span class="hljs-attr">name</span>: <span class="hljs-string">'ViewNotValid'</span>,
	        <span class="hljs-attr">message</span>: <span class="hljs-string">'The view passed is undefined and therefore invalid. You must pass a view instance to show.'</span>
	      });
	    }

	    <span class="hljs-keyword">if</span> (view._isDestroyed) {
	      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> MarionetteError({
	        <span class="hljs-attr">name</span>: <span class="hljs-string">'ViewDestroyedError'</span>,
	        <span class="hljs-attr">message</span>: <span class="hljs-string">'View (cid: "'</span> + view.cid + <span class="hljs-string">'") has already been destroyed and cannot be used.'</span>
	      });
	    }
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-164">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-164">&#182;</a>
              </div>
              <p>Override this method to change how the region finds the DOM element that it manages. Return
a jQuery selector object scoped to a provided parent el or the document if none exists.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  getEl: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getEl</span>(<span class="hljs-params">el</span>) </span>{
	    <span class="hljs-keyword">return</span> Backbone.$(el, <span class="hljs-keyword">this</span>.getValue(<span class="hljs-keyword">this</span>.getOption(<span class="hljs-string">'parentEl'</span>)));
	  },
	  <span class="hljs-attr">_replaceEl</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_replaceEl</span>(<span class="hljs-params">view</span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-165">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-165">&#182;</a>
              </div>
              <p>always restore the el to ensure the regions el is present before replacing</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    <span class="hljs-keyword">this</span>._restoreEl();

	    <span class="hljs-keyword">var</span> parent = <span class="hljs-keyword">this</span>.el.parentNode;

	    parent.replaceChild(view.el, <span class="hljs-keyword">this</span>.el);
	    <span class="hljs-keyword">this</span>._isReplaced = <span class="hljs-literal">true</span>;
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-166">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-166">&#182;</a>
              </div>
              <p>Restore the region’s element in the DOM.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  _restoreEl: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_restoreEl</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.currentView) {
	      <span class="hljs-keyword">return</span>;
	    }

	    <span class="hljs-keyword">var</span> view = <span class="hljs-keyword">this</span>.currentView;
	    <span class="hljs-keyword">var</span> parent = view.el.parentNode;

	    <span class="hljs-keyword">if</span> (!parent) {
	      <span class="hljs-keyword">return</span>;
	    }

	    parent.replaceChild(<span class="hljs-keyword">this</span>.el, view.el);
	    <span class="hljs-keyword">this</span>._isReplaced = <span class="hljs-literal">false</span>;
	  },
	  <span class="hljs-attr">isReplaced</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isReplaced</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">return</span> !!<span class="hljs-keyword">this</span>._isReplaced;
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-167">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-167">&#182;</a>
              </div>
              <p>Override this method to change how the new view is appended to the <code>$el</code> that the
region is managing</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  attachHtml: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">attachHtml</span>(<span class="hljs-params">view, shouldReplace</span>) </span>{
	    <span class="hljs-keyword">if</span> (shouldReplace) {</pre></div></div>
            
        </li>
        
        
        <li id="section-168">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-168">&#182;</a>
              </div>
              <p>replace the region’s node with the view’s node</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	      <span class="hljs-keyword">this</span>._replaceEl(view);
	    } <span class="hljs-keyword">else</span> {
	      <span class="hljs-keyword">this</span>.el.appendChild(view.el);
	    }
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-169">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-169">&#182;</a>
              </div>
              <p>Destroy the current view, if there is one. If there is no current view, it does
nothing and returns immediately.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  empty: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">empty</span>(<span class="hljs-params">options</span>) </span>{
	    <span class="hljs-keyword">var</span> view = <span class="hljs-keyword">this</span>.currentView;</pre></div></div>
            
        </li>
        
        
        <li id="section-170">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-170">&#182;</a>
              </div>
              <p>If there is no view in the region we should not remove anything</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    <span class="hljs-keyword">if</span> (!view) {
	      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
	    }

	    view.off(<span class="hljs-string">'destroy'</span>, <span class="hljs-keyword">this</span>.empty, <span class="hljs-keyword">this</span>);
	    <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'before:empty'</span>, <span class="hljs-keyword">this</span>, view);

	    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._isReplaced) {
	      <span class="hljs-keyword">this</span>._restoreEl();
	    }

	    <span class="hljs-keyword">if</span> (!view._isDestroyed) {
	      <span class="hljs-keyword">this</span>._removeView(view, options);
	    }

	    <span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>.currentView._parent;
	    <span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>.currentView;

	    <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'empty'</span>, <span class="hljs-keyword">this</span>, view);
	    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
	  },
	  <span class="hljs-attr">_removeView</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_removeView</span>(<span class="hljs-params">view</span>) </span>{
	    <span class="hljs-keyword">var</span> _ref = <span class="hljs-built_in">arguments</span>.length &lt;= <span class="hljs-number">1</span> || <span class="hljs-built_in">arguments</span>[<span class="hljs-number">1</span>] === <span class="hljs-literal">undefined</span> ? {} : <span class="hljs-built_in">arguments</span>[<span class="hljs-number">1</span>];

	    <span class="hljs-keyword">var</span> preventDestroy = _ref.preventDestroy;

	    <span class="hljs-keyword">var</span> shouldPreventDestroy = !!preventDestroy;

	    <span class="hljs-keyword">if</span> (shouldPreventDestroy) {
	      <span class="hljs-keyword">this</span>._detachView(view);
	      <span class="hljs-keyword">return</span>;
	    }

	    <span class="hljs-keyword">if</span> (view.destroy) {
	      view.destroy();
	    } <span class="hljs-keyword">else</span> {
	      destroyBackboneView(view);
	    }
	  },
	  <span class="hljs-attr">_detachView</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_detachView</span>(<span class="hljs-params">view</span>) </span>{
	    <span class="hljs-keyword">var</span> shouldTriggerDetach = !!view._isAttached;

	    <span class="hljs-keyword">if</span> (shouldTriggerDetach) {
	      triggerMethodOn(view, <span class="hljs-string">'before:detach'</span>, view);
	    }

	    <span class="hljs-keyword">this</span>.$el.contents().detach();

	    <span class="hljs-keyword">if</span> (shouldTriggerDetach) {
	      view._isAttached = <span class="hljs-literal">false</span>;
	      triggerMethodOn(view, <span class="hljs-string">'detach'</span>, view);
	    }
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-171">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-171">&#182;</a>
              </div>
              <p>Checks whether a view is currently present within the region. Returns <code>true</code> if there is
and <code>false</code> if no view is present.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  hasView: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">hasView</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">return</span> !!<span class="hljs-keyword">this</span>.currentView;
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-172">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-172">&#182;</a>
              </div>
              <p>Reset the region by destroying any existing view and clearing out the cached <code>$el</code>.
The next time a view is shown via this region, the region will re-query the DOM for
the region’s <code>el</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  reset: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">reset</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">this</span>.empty();

	    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.$el) {
	      <span class="hljs-keyword">this</span>.el = <span class="hljs-keyword">this</span>._initEl;
	    }

	    <span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>.$el;
	    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
	  },


	  <span class="hljs-attr">destroy</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">destroy</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">this</span>.reset();
	    <span class="hljs-keyword">return</span> MarionetteObject.prototype.destroy.apply(<span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span>);
	  }
	});

	<span class="hljs-keyword">var</span> RegionsMixin = {
	  <span class="hljs-attr">regionClass</span>: Region,</pre></div></div>
            
        </li>
        
        
        <li id="section-173">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-173">&#182;</a>
              </div>
              <p>Internal method to initialize the regions that have been defined in a
<code>regions</code> attribute on this View.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  _initRegions: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_initRegions</span>(<span class="hljs-params"></span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-174">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-174">&#182;</a>
              </div>
              <p>init regions hash</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    <span class="hljs-keyword">this</span>.regions = <span class="hljs-keyword">this</span>.regions || {};
	    <span class="hljs-keyword">this</span>._regions = {};

	    <span class="hljs-keyword">this</span>.addRegions(<span class="hljs-keyword">this</span>.getValue(<span class="hljs-keyword">this</span>.getOption(<span class="hljs-string">'regions'</span>)));
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-175">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-175">&#182;</a>
              </div>
              <p>Internal method to re-initialize all of the regions by updating
the <code>el</code> that they point to</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  _reInitRegions: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_reInitRegions</span>(<span class="hljs-params"></span>) </span>{
	    _invoke(<span class="hljs-keyword">this</span>._regions, <span class="hljs-string">'reset'</span>);
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-176">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-176">&#182;</a>
              </div>
              <p>Add a single region, by name, to the View</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  addRegion: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addRegion</span>(<span class="hljs-params">name, definition</span>) </span>{
	    <span class="hljs-keyword">var</span> regions = {};
	    regions[name] = definition;
	    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.addRegions(regions)[name];
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-177">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-177">&#182;</a>
              </div>
              <p>Add multiple regions as a {name: definition, name2: def2} object literal</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  addRegions: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addRegions</span>(<span class="hljs-params">regions</span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-178">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-178">&#182;</a>
              </div>
              <p>If there’s nothing to add, stop here.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    <span class="hljs-keyword">if</span> (_.isEmpty(regions)) {
	      <span class="hljs-keyword">return</span>;
	    }</pre></div></div>
            
        </li>
        
        
        <li id="section-179">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-179">&#182;</a>
              </div>
              <p>Normalize region selectors hash to allow
a user to use the @ui. syntax.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    regions = <span class="hljs-keyword">this</span>.normalizeUIValues(regions, [<span class="hljs-string">'selector'</span>, <span class="hljs-string">'el'</span>]);</pre></div></div>
            
        </li>
        
        
        <li id="section-180">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-180">&#182;</a>
              </div>
              <p>Add the regions definitions to the regions property</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    <span class="hljs-keyword">this</span>.regions = _.extend({}, <span class="hljs-keyword">this</span>.regions, regions);

	    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._addRegions(regions);
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-181">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-181">&#182;</a>
              </div>
              <p>internal method to build and add regions</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  _addRegions: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_addRegions</span>(<span class="hljs-params">regionDefinitions</span>) </span>{
	    <span class="hljs-keyword">var</span> _this = <span class="hljs-keyword">this</span>;

	    <span class="hljs-keyword">return</span> _.reduce(regionDefinitions, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">regions, definition, name</span>) </span>{
	      regions[name] = _this._buildRegion(definition);
	      _this._addRegion(regions[name], name);
	      <span class="hljs-keyword">return</span> regions;
	    }, {});
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-182">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-182">&#182;</a>
              </div>
              <p>return the region instance from the definition</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  _buildRegion: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_buildRegion</span>(<span class="hljs-params">definition</span>) </span>{
	    <span class="hljs-keyword">if</span> (definition <span class="hljs-keyword">instanceof</span> Region) {
	      <span class="hljs-keyword">return</span> definition;
	    }

	    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._buildRegionFromDefinition(definition);
	  },

	  <span class="hljs-attr">_buildRegionFromDefinition</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_buildRegionFromDefinition</span>(<span class="hljs-params">definition</span>) </span>{
	    <span class="hljs-keyword">if</span> (_.isString(definition)) {
	      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._buildRegionFromObject({ <span class="hljs-attr">el</span>: definition });
	    }

	    <span class="hljs-keyword">if</span> (_.isFunction(definition)) {
	      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._buildRegionFromRegionClass(definition);
	    }

	    <span class="hljs-keyword">if</span> (_.isObject(definition)) {
	      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._buildRegionFromObject(definition);
	    }

	    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> MarionetteError({
	      <span class="hljs-attr">message</span>: <span class="hljs-string">'Improper region configuration type.'</span>,
	      <span class="hljs-attr">url</span>: <span class="hljs-string">'marionette.region.html#region-configuration-types'</span>
	    });
	  },

	  <span class="hljs-attr">_buildRegionFromObject</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_buildRegionFromObject</span>(<span class="hljs-params">definition</span>) </span>{
	    <span class="hljs-keyword">var</span> RegionClass = definition.regionClass || <span class="hljs-keyword">this</span>.getOption(<span class="hljs-string">'regionClass'</span>);

	    <span class="hljs-keyword">var</span> options = _.omit(definition, <span class="hljs-string">'regionClass'</span>);

	    _.defaults(options, {
	      <span class="hljs-attr">el</span>: definition.selector,
	      <span class="hljs-attr">parentEl</span>: _.partial(_.result, <span class="hljs-keyword">this</span>, <span class="hljs-string">'el'</span>)
	    });

	    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> RegionClass(options);
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-183">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-183">&#182;</a>
              </div>
              <p>Build the region directly from a given <code>RegionClass</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  _buildRegionFromRegionClass: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_buildRegionFromRegionClass</span>(<span class="hljs-params">RegionClass</span>) </span>{
	    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> RegionClass({
	      <span class="hljs-attr">parentEl</span>: _.partial(_.result, <span class="hljs-keyword">this</span>, <span class="hljs-string">'el'</span>)
	    });
	  },

	  <span class="hljs-attr">_addRegion</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_addRegion</span>(<span class="hljs-params">region, name</span>) </span>{
	    <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'before:add:region'</span>, name, region);

	    region._parent = <span class="hljs-keyword">this</span>;

	    <span class="hljs-keyword">this</span>._regions[name] = region;

	    <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'add:region'</span>, name, region);
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-184">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-184">&#182;</a>
              </div>
              <p>Remove a single region from the View, by name</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  removeRegion: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">removeRegion</span>(<span class="hljs-params">name</span>) </span>{
	    <span class="hljs-keyword">var</span> region = <span class="hljs-keyword">this</span>._regions[name];

	    <span class="hljs-keyword">this</span>._removeRegion(region, name);

	    <span class="hljs-keyword">return</span> region;
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-185">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-185">&#182;</a>
              </div>
              <p>Remove all regions from the View</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  removeRegions: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">removeRegions</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">var</span> regions = <span class="hljs-keyword">this</span>.getRegions();

	    _.each(<span class="hljs-keyword">this</span>._regions, _.bind(<span class="hljs-keyword">this</span>._removeRegion, <span class="hljs-keyword">this</span>));

	    <span class="hljs-keyword">return</span> regions;
	  },

	  <span class="hljs-attr">_removeRegion</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_removeRegion</span>(<span class="hljs-params">region, name</span>) </span>{
	    <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'before:remove:region'</span>, name, region);

	    region.empty();
	    region.stopListening();

	    <span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>.regions[name];
	    <span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>._regions[name];

	    <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'remove:region'</span>, name, region);
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-186">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-186">&#182;</a>
              </div>
              <p>Empty all regions in the region manager, but
leave them attached</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  emptyRegions: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">emptyRegions</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">var</span> regions = <span class="hljs-keyword">this</span>.getRegions();
	    _invoke(regions, <span class="hljs-string">'empty'</span>);
	    <span class="hljs-keyword">return</span> regions;
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-187">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-187">&#182;</a>
              </div>
              <p>Checks to see if view contains region
Accepts the region name
hasRegion(‘main’)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  hasRegion: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">hasRegion</span>(<span class="hljs-params">name</span>) </span>{
	    <span class="hljs-keyword">return</span> !!<span class="hljs-keyword">this</span>.getRegion(name);
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-188">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-188">&#182;</a>
              </div>
              <p>Provides access to regions
Accepts the region name
getRegion(‘main’)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  getRegion: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getRegion</span>(<span class="hljs-params">name</span>) </span>{
	    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._regions[name];
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-189">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-189">&#182;</a>
              </div>
              <p>Get all regions</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  getRegions: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getRegions</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">return</span> _.clone(<span class="hljs-keyword">this</span>._regions);
	  },

	  <span class="hljs-attr">showChildView</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">showChildView</span>(<span class="hljs-params">name, view</span>) </span>{
	    <span class="hljs-keyword">var</span> region = <span class="hljs-keyword">this</span>.getRegion(name);

	    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> _len = <span class="hljs-built_in">arguments</span>.length, args = <span class="hljs-built_in">Array</span>(_len &gt; <span class="hljs-number">2</span> ? _len - <span class="hljs-number">2</span> : <span class="hljs-number">0</span>), _key = <span class="hljs-number">2</span>; _key &lt; _len; _key++) {
	      args[_key - <span class="hljs-number">2</span>] = <span class="hljs-built_in">arguments</span>[_key];
	    }

	    <span class="hljs-keyword">return</span> region.show.apply(region, [view].concat(args));
	  },

	  <span class="hljs-attr">getChildView</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getChildView</span>(<span class="hljs-params">name</span>) </span>{
	    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.getRegion(name).currentView;
	  }

	};</pre></div></div>
            
        </li>
        
        
        <li id="section-190">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-190">&#182;</a>
              </div>
              <p>The standard view. Includes view events, automatic rendering
of Underscore templates, nested views, and more.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">var</span> View = Backbone.View.extend({
	  <span class="hljs-attr">constructor</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">constructor</span>(<span class="hljs-params">options</span>) </span>{
	    <span class="hljs-keyword">this</span>.render = _.bind(<span class="hljs-keyword">this</span>.render, <span class="hljs-keyword">this</span>);

	    <span class="hljs-keyword">this</span>._setOptions(options);

	    monitorViewEvents(<span class="hljs-keyword">this</span>);

	    <span class="hljs-keyword">this</span>._initBehaviors();
	    <span class="hljs-keyword">this</span>._initRegions();

	    Backbone.View.prototype.constructor.call(<span class="hljs-keyword">this</span>, <span class="hljs-keyword">this</span>.options);

	    <span class="hljs-keyword">this</span>.delegateEntityEvents();
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-191">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-191">&#182;</a>
              </div>
              <p>Serialize the view’s model <em>or</em> collection, if
it exists, for the template</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  serializeData: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">serializeData</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.model &amp;&amp; !<span class="hljs-keyword">this</span>.collection) {
	      <span class="hljs-keyword">return</span> {};
	    }</pre></div></div>
            
        </li>
        
        
        <li id="section-192">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-192">&#182;</a>
              </div>
              <p>If we have a model, we serialize that</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.model) {
	      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.serializeModel();
	    }</pre></div></div>
            
        </li>
        
        
        <li id="section-193">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-193">&#182;</a>
              </div>
              <p>Otherwise, we serialize the collection,
making it available under the <code>items</code> property</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    <span class="hljs-keyword">return</span> {
	      <span class="hljs-attr">items</span>: <span class="hljs-keyword">this</span>.serializeCollection()
	    };
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-194">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-194">&#182;</a>
              </div>
              <p>Prepares the special <code>model</code> property of a view
for being displayed in the template. By default
we simply clone the attributes. Override this if
you need a custom transformation for your view’s model</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  serializeModel: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">serializeModel</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.model) {
	      <span class="hljs-keyword">return</span> {};
	    }
	    <span class="hljs-keyword">return</span> _.clone(<span class="hljs-keyword">this</span>.model.attributes);
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-195">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-195">&#182;</a>
              </div>
              <p>Serialize a collection by cloning each of
its model’s attributes</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  serializeCollection: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">serializeCollection</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.collection) {
	      <span class="hljs-keyword">return</span> {};
	    }
	    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.collection.map(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">model</span>) </span>{
	      <span class="hljs-keyword">return</span> _.clone(model.attributes);
	    });
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-196">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-196">&#182;</a>
              </div>
              <p>Render the view, defaulting to underscore.js templates.
You can override this in your view definition to provide
a very specific rendering for your view. In general, though,
you should override the <code>Marionette.Renderer</code> object to
change how Marionette renders views.
Subsequent renders after the first will re-render all nested
views.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  render: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">render</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">this</span>._ensureViewIsIntact();

	    <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'before:render'</span>, <span class="hljs-keyword">this</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-197">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-197">&#182;</a>
              </div>
              <p>If this is not the first render call, then we need to
re-initialize the <code>el</code> for each region</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._isRendered) {
	      <span class="hljs-keyword">this</span>._reInitRegions();
	    }

	    <span class="hljs-keyword">this</span>._renderTemplate();
	    <span class="hljs-keyword">this</span>.bindUIElements();

	    <span class="hljs-keyword">this</span>._isRendered = <span class="hljs-literal">true</span>;
	    <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'render'</span>, <span class="hljs-keyword">this</span>);

	    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-198">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-198">&#182;</a>
              </div>
              <p>Internal method to render the template with the serialized data
and template context via the <code>Marionette.Renderer</code> object.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  _renderTemplate: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_renderTemplate</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">var</span> template = <span class="hljs-keyword">this</span>.getTemplate();</pre></div></div>
            
        </li>
        
        
        <li id="section-199">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-199">&#182;</a>
              </div>
              <p>Allow template-less views</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    <span class="hljs-keyword">if</span> (template === <span class="hljs-literal">false</span>) {
	      <span class="hljs-keyword">return</span>;
	    }</pre></div></div>
            
        </li>
        
        
        <li id="section-200">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-200">&#182;</a>
              </div>
              <p>Add in entity data and template context</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    <span class="hljs-keyword">var</span> data = <span class="hljs-keyword">this</span>.mixinTemplateContext(<span class="hljs-keyword">this</span>.serializeData());</pre></div></div>
            
        </li>
        
        
        <li id="section-201">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-201">&#182;</a>
              </div>
              <p>Render and add to el</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    <span class="hljs-keyword">var</span> html = Renderer.render(template, data, <span class="hljs-keyword">this</span>);
	    <span class="hljs-keyword">this</span>.attachElContent(html);
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-202">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-202">&#182;</a>
              </div>
              <p>Get the template for this view
instance. You can set a <code>template</code> attribute in the view
definition or pass a <code>template: &quot;whatever&quot;</code> parameter in
to the constructor options.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  getTemplate: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getTemplate</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.getOption(<span class="hljs-string">'template'</span>);
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-203">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-203">&#182;</a>
              </div>
              <p>Attaches the content of a given view.
This method can be overridden to optimize rendering,
or to render in a non standard way.</p>
<p>For example, using <code>innerHTML</code> instead of <code>$el.html</code></p>
<pre><code class="lang-js">attachElContent(html) {
  <span class="hljs-keyword">this</span>.el.innerHTML = html;
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
}
</code></pre>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  attachElContent: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">attachElContent</span>(<span class="hljs-params">html</span>) </span>{
	    <span class="hljs-keyword">this</span>.$el.html(html);

	    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-204">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-204">&#182;</a>
              </div>
              <p>called by ViewMixin destroy</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  _removeChildren: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_removeChildren</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">this</span>.removeRegions();
	  },


	  <span class="hljs-attr">_getImmediateChildren</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_getImmediateChildren</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">return</span> _.chain(<span class="hljs-keyword">this</span>.getRegions()).map(<span class="hljs-string">'currentView'</span>).compact().value();
	  }
	});

	_.extend(View.prototype, ViewMixin, RegionsMixin);</pre></div></div>
            
        </li>
        
        
        <li id="section-205">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-205">&#182;</a>
              </div>
              <p>A view that iterates over a Backbone.Collection
and renders an individual child view for each model.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">var</span> CollectionView = Backbone.View.extend({</pre></div></div>
            
        </li>
        
        
        <li id="section-206">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-206">&#182;</a>
              </div>
              <p>flag for maintaining the sorted order of the collection</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  sort: <span class="hljs-literal">true</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-207">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-207">&#182;</a>
              </div>
              <p>constructor
option to pass <code>{sort: false}</code> to prevent the <code>CollectionView</code> from
maintaining the sorted order of the collection.
This will fallback onto appending childView’s to the end.</p>
<p>option to pass <code>{comparator: compFunction()}</code> to allow the <code>CollectionView</code>
to use a custom sort order for the collection.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  <span class="hljs-keyword">constructor</span>: function <span class="hljs-keyword">constructor</span>(options) {
	    <span class="hljs-keyword">this</span>.render = _.bind(<span class="hljs-keyword">this</span>.render, <span class="hljs-keyword">this</span>);

	    <span class="hljs-keyword">this</span>._setOptions(options);

	    monitorViewEvents(<span class="hljs-keyword">this</span>);

	    <span class="hljs-keyword">this</span>._initBehaviors();
	    <span class="hljs-keyword">this</span>.once(<span class="hljs-string">'render'</span>, <span class="hljs-keyword">this</span>._initialEvents);
	    <span class="hljs-keyword">this</span>._initChildViewStorage();
	    <span class="hljs-keyword">this</span>._bufferedChildren = [];

	    Backbone.View.prototype.constructor.call(<span class="hljs-keyword">this</span>, <span class="hljs-keyword">this</span>.options);

	    <span class="hljs-keyword">this</span>.delegateEntityEvents();
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-208">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-208">&#182;</a>
              </div>
              <p>Instead of inserting elements one by one into the page, it’s much more performant to insert
elements into a document fragment and then insert that document fragment into the page</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  _startBuffering: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_startBuffering</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">this</span>._isBuffering = <span class="hljs-literal">true</span>;
	  },
	  <span class="hljs-attr">_endBuffering</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_endBuffering</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">var</span> shouldTriggerAttach = !!<span class="hljs-keyword">this</span>._isAttached;
	    <span class="hljs-keyword">var</span> triggerOnChildren = shouldTriggerAttach ? <span class="hljs-keyword">this</span>._getImmediateChildren() : [];

	    <span class="hljs-keyword">this</span>._isBuffering = <span class="hljs-literal">false</span>;

	    _.each(triggerOnChildren, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">child</span>) </span>{
	      triggerMethodOn(child, <span class="hljs-string">'before:attach'</span>, child);
	    });

	    <span class="hljs-keyword">this</span>.attachBuffer(<span class="hljs-keyword">this</span>, <span class="hljs-keyword">this</span>._createBuffer());

	    _.each(triggerOnChildren, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">child</span>) </span>{
	      child._isAttached = <span class="hljs-literal">true</span>;
	      triggerMethodOn(child, <span class="hljs-string">'attach'</span>, child);
	    });

	    <span class="hljs-keyword">this</span>._bufferedChildren = [];
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-209">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-209">&#182;</a>
              </div>
              <p>Configured the initial events that the collection view binds to.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  _initialEvents: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_initialEvents</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.collection) {
	      <span class="hljs-keyword">this</span>.listenTo(<span class="hljs-keyword">this</span>.collection, <span class="hljs-string">'add'</span>, <span class="hljs-keyword">this</span>._onCollectionAdd);
	      <span class="hljs-keyword">this</span>.listenTo(<span class="hljs-keyword">this</span>.collection, <span class="hljs-string">'remove'</span>, <span class="hljs-keyword">this</span>._onCollectionRemove);
	      <span class="hljs-keyword">this</span>.listenTo(<span class="hljs-keyword">this</span>.collection, <span class="hljs-string">'reset'</span>, <span class="hljs-keyword">this</span>.render);

	      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.getOption(<span class="hljs-string">'sort'</span>)) {
	        <span class="hljs-keyword">this</span>.listenTo(<span class="hljs-keyword">this</span>.collection, <span class="hljs-string">'sort'</span>, <span class="hljs-keyword">this</span>._sortViews);
	      }
	    }
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-210">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-210">&#182;</a>
              </div>
              <p>Handle a child added to the collection</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  _onCollectionAdd: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_onCollectionAdd</span>(<span class="hljs-params">child, collection, opts</span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-211">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-211">&#182;</a>
              </div>
              <p><code>index</code> is present when adding with <code>at</code> since BB 1.2; indexOf fallback for &lt; 1.2</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    <span class="hljs-keyword">var</span> index = opts.at !== <span class="hljs-literal">undefined</span> &amp;&amp; (opts.index || collection.indexOf(child));</pre></div></div>
            
        </li>
        
        
        <li id="section-212">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-212">&#182;</a>
              </div>
              <p>When filtered or when there is no initial index, calculate index.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.getOption(<span class="hljs-string">'filter'</span>) || index === <span class="hljs-literal">false</span>) {
	      index = _.indexOf(<span class="hljs-keyword">this</span>._filteredSortedModels(index), child);
	    }

	    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._shouldAddChild(child, index)) {
	      <span class="hljs-keyword">this</span>._destroyEmptyView();
	      <span class="hljs-keyword">var</span> ChildView = <span class="hljs-keyword">this</span>._getChildView(child);
	      <span class="hljs-keyword">this</span>._addChild(child, ChildView, index);
	    }
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-213">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-213">&#182;</a>
              </div>
              <p>get the child view by model it holds, and remove it</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  _onCollectionRemove: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_onCollectionRemove</span>(<span class="hljs-params">model</span>) </span>{
	    <span class="hljs-keyword">var</span> view = <span class="hljs-keyword">this</span>.children.findByModel(model);
	    <span class="hljs-keyword">this</span>._removeChildView(view);
	    <span class="hljs-keyword">this</span>._checkEmpty();
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-214">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-214">&#182;</a>
              </div>
              <p>Render children views. Override this method to provide your own implementation of a
render function for the collection view.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  render: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">render</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">this</span>._ensureViewIsIntact();
	    <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'before:render'</span>, <span class="hljs-keyword">this</span>);
	    <span class="hljs-keyword">this</span>._renderChildren();
	    <span class="hljs-keyword">this</span>._isRendered = <span class="hljs-literal">true</span>;
	    <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'render'</span>, <span class="hljs-keyword">this</span>);
	    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-215">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-215">&#182;</a>
              </div>
              <p>An efficient rendering used for filtering. Instead of modifying the whole DOM for the
collection view, we are only adding or removing the related childrenViews.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  setFilter: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setFilter</span>(<span class="hljs-params">filter</span>) </span>{
	    <span class="hljs-keyword">var</span> _ref = <span class="hljs-built_in">arguments</span>.length &lt;= <span class="hljs-number">1</span> || <span class="hljs-built_in">arguments</span>[<span class="hljs-number">1</span>] === <span class="hljs-literal">undefined</span> ? {} : <span class="hljs-built_in">arguments</span>[<span class="hljs-number">1</span>];

	    <span class="hljs-keyword">var</span> preventRender = _ref.preventRender;

	    <span class="hljs-keyword">var</span> canBeRendered = <span class="hljs-keyword">this</span>._isRendered &amp;&amp; !<span class="hljs-keyword">this</span>._isDestroyed;
	    <span class="hljs-keyword">var</span> filterChanged = <span class="hljs-keyword">this</span>.filter !== filter;
	    <span class="hljs-keyword">var</span> shouldRender = canBeRendered &amp;&amp; filterChanged &amp;&amp; !preventRender;

	    <span class="hljs-keyword">if</span> (shouldRender) {
	      <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'before:apply:filter'</span>, <span class="hljs-keyword">this</span>);
	      <span class="hljs-keyword">var</span> previousModels = <span class="hljs-keyword">this</span>._filteredSortedModels();
	      <span class="hljs-keyword">this</span>.filter = filter;
	      <span class="hljs-keyword">var</span> models = <span class="hljs-keyword">this</span>._filteredSortedModels();
	      <span class="hljs-keyword">this</span>._applyModelDeltas(models, previousModels);
	      <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'apply:filter'</span>, <span class="hljs-keyword">this</span>);
	    } <span class="hljs-keyword">else</span> {
	      <span class="hljs-keyword">this</span>.filter = filter;
	    }
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-216">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-216">&#182;</a>
              </div>
              <p><code>removeFilter</code> is actually an alias for removing filters.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  removeFilter: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">removeFilter</span>(<span class="hljs-params">options</span>) </span>{
	    <span class="hljs-keyword">this</span>.setFilter(<span class="hljs-literal">null</span>, options);
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-217">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-217">&#182;</a>
              </div>
              <p>Calculate and apply difference by cid between <code>models</code> and <code>previousModels</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  _applyModelDeltas: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_applyModelDeltas</span>(<span class="hljs-params">models, previousModels</span>) </span>{
	    <span class="hljs-keyword">var</span> _this = <span class="hljs-keyword">this</span>;

	    <span class="hljs-keyword">var</span> currentIds = {};
	    _.each(models, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">model, index</span>) </span>{
	      <span class="hljs-keyword">var</span> addedChildNotExists = !_this.children.findByModel(model);
	      <span class="hljs-keyword">if</span> (addedChildNotExists) {
	        _this._onCollectionAdd(model, _this.collection, { <span class="hljs-attr">at</span>: index });
	      }
	      currentIds[model.cid] = <span class="hljs-literal">true</span>;
	    });
	    _.each(previousModels, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">prevModel</span>) </span>{
	      <span class="hljs-keyword">var</span> removedChildExists = !currentIds[prevModel.cid] &amp;&amp; _this.children.findByModel(prevModel);
	      <span class="hljs-keyword">if</span> (removedChildExists) {
	        _this._onCollectionRemove(prevModel);
	      }
	    });
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-218">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-218">&#182;</a>
              </div>
              <p>Reorder DOM after sorting. When your element’s rendering do not use their index,
you can pass reorderOnSort: true to only reorder the DOM after a sort instead of
rendering all the collectionView.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  reorder: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">reorder</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">var</span> _this2 = <span class="hljs-keyword">this</span>;

	    <span class="hljs-keyword">var</span> children = <span class="hljs-keyword">this</span>.children;
	    <span class="hljs-keyword">var</span> models = <span class="hljs-keyword">this</span>._filteredSortedModels();
	    <span class="hljs-keyword">var</span> anyModelsAdded = _.some(models, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">model</span>) </span>{
	      <span class="hljs-keyword">return</span> !children.findByModel(model);
	    });</pre></div></div>
            
        </li>
        
        
        <li id="section-219">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-219">&#182;</a>
              </div>
              <p>If there are any new models added due to filtering we need to add child views,
so render as normal.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    <span class="hljs-keyword">if</span> (anyModelsAdded) {
	      <span class="hljs-keyword">this</span>.render();
	    } <span class="hljs-keyword">else</span> {
	      (<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-220">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-220">&#182;</a>
              </div>
              <p>Get the DOM nodes in the same order as the models.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	        <span class="hljs-keyword">var</span> elsToReorder = _.map(models, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">model, index</span>) </span>{
	          <span class="hljs-keyword">var</span> view = children.findByModel(model);
	          view._index = index;
	          <span class="hljs-keyword">return</span> view.el;
	        });</pre></div></div>
            
        </li>
        
        
        <li id="section-221">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-221">&#182;</a>
              </div>
              <p>Find the views that were children before but aren’t in this new ordering.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	        <span class="hljs-keyword">var</span> filteredOutViews = children.filter(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">view</span>) </span>{
	          <span class="hljs-keyword">return</span> !_.contains(elsToReorder, view.el);
	        });

	        _this2.triggerMethod(<span class="hljs-string">'before:reorder'</span>, _this2);</pre></div></div>
            
        </li>
        
        
        <li id="section-222">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-222">&#182;</a>
              </div>
              <p>Since append moves elements that are already in the DOM, appending the elements
will effectively reorder them.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	        _this2._appendReorderedChildren(elsToReorder);</pre></div></div>
            
        </li>
        
        
        <li id="section-223">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-223">&#182;</a>
              </div>
              <p>remove any views that have been filtered out</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	        _.each(filteredOutViews, _.bind(_this2._removeChildView, _this2));
	        _this2._checkEmpty();

	        _this2.triggerMethod(<span class="hljs-string">'reorder'</span>, _this2);
	      })();
	    }
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-224">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-224">&#182;</a>
              </div>
              <p>Render view after sorting. Override this method to change how the view renders
after a <code>sort</code> on the collection.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  resortView: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">resortView</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.getOption(<span class="hljs-string">'reorderOnSort'</span>)) {
	      <span class="hljs-keyword">this</span>.reorder();
	    } <span class="hljs-keyword">else</span> {
	      <span class="hljs-keyword">this</span>._renderChildren();
	    }
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-225">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-225">&#182;</a>
              </div>
              <p>Internal method. This checks for any changes in the order of the collection.
If the index of any view doesn’t match, it will render.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  _sortViews: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_sortViews</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">var</span> _this3 = <span class="hljs-keyword">this</span>;

	    <span class="hljs-keyword">var</span> models = <span class="hljs-keyword">this</span>._filteredSortedModels();</pre></div></div>
            
        </li>
        
        
        <li id="section-226">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-226">&#182;</a>
              </div>
              <p>check for any changes in sort order of views</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    <span class="hljs-keyword">var</span> orderChanged = _.find(models, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item, index</span>) </span>{
	      <span class="hljs-keyword">var</span> view = _this3.children.findByModel(item);
	      <span class="hljs-keyword">return</span> !view || view._index !== index;
	    });

	    <span class="hljs-keyword">if</span> (orderChanged) {
	      <span class="hljs-keyword">this</span>.resortView();
	    }
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-227">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-227">&#182;</a>
              </div>
              <p>Internal reference to what index a <code>emptyView</code> is.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  _emptyViewIndex: <span class="hljs-number">-1</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-228">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-228">&#182;</a>
              </div>
              <p>Internal method. Separated so that CompositeView can append to the childViewContainer
if necessary</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  _appendReorderedChildren: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_appendReorderedChildren</span>(<span class="hljs-params">children</span>) </span>{
	    <span class="hljs-keyword">this</span>.$el.append(children);
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-229">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-229">&#182;</a>
              </div>
              <p>Internal method. Separated so that CompositeView can have more control over events
being triggered, around the rendering process</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  _renderChildren: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_renderChildren</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">this</span>._destroyEmptyView();
	    <span class="hljs-keyword">this</span>._destroyChildren({ <span class="hljs-attr">checkEmpty</span>: <span class="hljs-literal">false</span> });

	    <span class="hljs-keyword">var</span> models = <span class="hljs-keyword">this</span>._filteredSortedModels();
	    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.isEmpty({ <span class="hljs-attr">processedModels</span>: models })) {
	      <span class="hljs-keyword">this</span>._showEmptyView();
	    } <span class="hljs-keyword">else</span> {
	      <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'before:render:children'</span>, <span class="hljs-keyword">this</span>);
	      <span class="hljs-keyword">this</span>._startBuffering();
	      <span class="hljs-keyword">this</span>._showCollection(models);
	      <span class="hljs-keyword">this</span>._endBuffering();
	      <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'render:children'</span>, <span class="hljs-keyword">this</span>);
	    }
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-230">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-230">&#182;</a>
              </div>
              <p>Internal method to loop through collection and show each child view.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  _showCollection: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_showCollection</span>(<span class="hljs-params">models</span>) </span>{
	    <span class="hljs-keyword">var</span> _this4 = <span class="hljs-keyword">this</span>;

	    _.each(models, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">child, index</span>) </span>{
	      <span class="hljs-keyword">var</span> ChildView = _this4._getChildView(child);
	      _this4._addChild(child, ChildView, index);
	    });
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-231">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-231">&#182;</a>
              </div>
              <p>Allow the collection to be sorted by a custom view comparator</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  _filteredSortedModels: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_filteredSortedModels</span>(<span class="hljs-params">addedAt</span>) </span>{
	    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.collection) {
	      <span class="hljs-keyword">return</span> [];
	    }

	    <span class="hljs-keyword">var</span> viewComparator = <span class="hljs-keyword">this</span>.getViewComparator();
	    <span class="hljs-keyword">var</span> models = <span class="hljs-keyword">this</span>.collection.models;
	    addedAt = <span class="hljs-built_in">Math</span>.min(<span class="hljs-built_in">Math</span>.max(addedAt, <span class="hljs-number">0</span>), models.length - <span class="hljs-number">1</span>);

	    <span class="hljs-keyword">if</span> (viewComparator) {
	      <span class="hljs-keyword">var</span> addedModel = <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-232">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-232">&#182;</a>
              </div>
              <p>Preserve <code>at</code> location, even for a sorted view</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	      <span class="hljs-keyword">if</span> (addedAt) {
	        addedModel = models[addedAt];
	        models = models.slice(<span class="hljs-number">0</span>, addedAt).concat(models.slice(addedAt + <span class="hljs-number">1</span>));
	      }
	      models = <span class="hljs-keyword">this</span>._sortModelsBy(models, viewComparator);
	      <span class="hljs-keyword">if</span> (addedModel) {
	        models.splice(addedAt, <span class="hljs-number">0</span>, addedModel);
	      }
	    }</pre></div></div>
            
        </li>
        
        
        <li id="section-233">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-233">&#182;</a>
              </div>
              <p>Filter after sorting in case the filter uses the index</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    models = <span class="hljs-keyword">this</span>._filterModels(models);

	    <span class="hljs-keyword">return</span> models;
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-234">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-234">&#182;</a>
              </div>
              <p>Filter an array of models, if a filter exists</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  _filterModels: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_filterModels</span>(<span class="hljs-params">models</span>) </span>{
	    <span class="hljs-keyword">var</span> _this5 = <span class="hljs-keyword">this</span>;

	    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.getOption(<span class="hljs-string">'filter'</span>)) {
	      models = _.filter(models, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">model, index</span>) </span>{
	        <span class="hljs-keyword">return</span> _this5._shouldAddChild(model, index);
	      });
	    }
	    <span class="hljs-keyword">return</span> models;
	  },
	  <span class="hljs-attr">_sortModelsBy</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_sortModelsBy</span>(<span class="hljs-params">models, comparator</span>) </span>{
	    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> comparator === <span class="hljs-string">'string'</span>) {
	      <span class="hljs-keyword">return</span> _.sortBy(models, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">model</span>) </span>{
	        <span class="hljs-keyword">return</span> model.get(comparator);
	      });
	    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (comparator.length === <span class="hljs-number">1</span>) {
	      <span class="hljs-keyword">return</span> _.sortBy(models, _.bind(comparator, <span class="hljs-keyword">this</span>));
	    } <span class="hljs-keyword">else</span> {
	      <span class="hljs-keyword">return</span> models.sort(_.bind(comparator, <span class="hljs-keyword">this</span>));
	    }
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-235">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-235">&#182;</a>
              </div>
              <p>Internal method to show an empty view in place of a collection of child views,
when the collection is empty</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  _showEmptyView: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_showEmptyView</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">var</span> EmptyView = <span class="hljs-keyword">this</span>.getEmptyView();

	    <span class="hljs-keyword">if</span> (EmptyView &amp;&amp; !<span class="hljs-keyword">this</span>._showingEmptyView) {
	      <span class="hljs-keyword">this</span>._showingEmptyView = <span class="hljs-literal">true</span>;

	      <span class="hljs-keyword">var</span> model = <span class="hljs-keyword">new</span> Backbone.Model();
	      <span class="hljs-keyword">var</span> emptyViewOptions = <span class="hljs-keyword">this</span>.getOption(<span class="hljs-string">'emptyViewOptions'</span>) || <span class="hljs-keyword">this</span>.getOption(<span class="hljs-string">'childViewOptions'</span>);
	      <span class="hljs-keyword">if</span> (_.isFunction(emptyViewOptions)) {
	        emptyViewOptions = emptyViewOptions.call(<span class="hljs-keyword">this</span>, model, <span class="hljs-keyword">this</span>._emptyViewIndex);
	      }

	      <span class="hljs-keyword">var</span> view = <span class="hljs-keyword">this</span>._buildChildView(model, EmptyView, emptyViewOptions);

	      <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'before:render:empty'</span>, <span class="hljs-keyword">this</span>, view);
	      <span class="hljs-keyword">this</span>._addChildView(view, <span class="hljs-number">0</span>);
	      <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'render:empty'</span>, <span class="hljs-keyword">this</span>, view);

	      view._parent = <span class="hljs-keyword">this</span>;
	    }
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-236">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-236">&#182;</a>
              </div>
              <p>Internal method to destroy an existing emptyView instance if one exists. Called when
a collection view has been rendered empty, and then a child is added to the collection.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  _destroyEmptyView: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_destroyEmptyView</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._showingEmptyView) {
	      <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'before:remove:empty'</span>, <span class="hljs-keyword">this</span>);

	      <span class="hljs-keyword">this</span>._destroyChildren();
	      <span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>._showingEmptyView;

	      <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'remove:empty'</span>, <span class="hljs-keyword">this</span>);
	    }
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-237">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-237">&#182;</a>
              </div>
              <p>Retrieve the empty view class</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  getEmptyView: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getEmptyView</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.getOption(<span class="hljs-string">'emptyView'</span>);
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-238">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-238">&#182;</a>
              </div>
              <p>Retrieve the <code>childView</code> class, either from <code>this.options.childView</code> or from
the <code>childView</code> in the object definition. The “options” takes precedence.
The <code>childView</code> property can be either a view class or a function that
returns a view class. If it is a function, it will receive the model that
will be passed to the view instance (created from the returned view class)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  _getChildView: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_getChildView</span>(<span class="hljs-params">child</span>) </span>{
	    <span class="hljs-keyword">var</span> childView = <span class="hljs-keyword">this</span>.getOption(<span class="hljs-string">'childView'</span>);

	    <span class="hljs-keyword">if</span> (!childView) {
	      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> MarionetteError({
	        <span class="hljs-attr">name</span>: <span class="hljs-string">'NoChildViewError'</span>,
	        <span class="hljs-attr">message</span>: <span class="hljs-string">'A "childView" must be specified'</span>
	      });
	    }</pre></div></div>
            
        </li>
        
        
        <li id="section-239">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-239">&#182;</a>
              </div>
              <p>first check if the <code>childView</code> is a view class (the common case)
then check if it’s a function (which we assume that returns a view class)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    <span class="hljs-keyword">if</span> (childView.prototype <span class="hljs-keyword">instanceof</span> Backbone.View || childView === Backbone.View) {
	      <span class="hljs-keyword">return</span> childView;
	    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (_.isFunction(childView)) {
	      <span class="hljs-keyword">return</span> childView.call(<span class="hljs-keyword">this</span>, child);
	    } <span class="hljs-keyword">else</span> {
	      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> MarionetteError({
	        <span class="hljs-attr">name</span>: <span class="hljs-string">'InvalidChildViewError'</span>,
	        <span class="hljs-attr">message</span>: <span class="hljs-string">'"childView" must be a view class or a function that returns a view class'</span>
	      });
	    }
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-240">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-240">&#182;</a>
              </div>
              <p>Render the child’s view and add it to the HTML for the collection view at a given index.
This will also update the indices of later views in the collection in order to keep the
children in sync with the collection.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  _addChild: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_addChild</span>(<span class="hljs-params">child, ChildView, index</span>) </span>{
	    <span class="hljs-keyword">var</span> childViewOptions = <span class="hljs-keyword">this</span>.getValue(<span class="hljs-keyword">this</span>.getOption(<span class="hljs-string">'childViewOptions'</span>), child, index);

	    <span class="hljs-keyword">var</span> view = <span class="hljs-keyword">this</span>._buildChildView(child, ChildView, childViewOptions);</pre></div></div>
            
        </li>
        
        
        <li id="section-241">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-241">&#182;</a>
              </div>
              <p>increment indices of views after this one</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    <span class="hljs-keyword">this</span>._updateIndices(view, <span class="hljs-literal">true</span>, index);

	    <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'before:add:child'</span>, <span class="hljs-keyword">this</span>, view);
	    <span class="hljs-keyword">this</span>._addChildView(view, index);
	    <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'add:child'</span>, <span class="hljs-keyword">this</span>, view);

	    view._parent = <span class="hljs-keyword">this</span>;

	    <span class="hljs-keyword">return</span> view;
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-242">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-242">&#182;</a>
              </div>
              <p>Internal method. This decrements or increments the indices of views after the added/removed
view to keep in sync with the collection.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  _updateIndices: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_updateIndices</span>(<span class="hljs-params">view, increment, index</span>) </span>{
	    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.getOption(<span class="hljs-string">'sort'</span>)) {
	      <span class="hljs-keyword">return</span>;
	    }

	    <span class="hljs-keyword">if</span> (increment) {</pre></div></div>
            
        </li>
        
        
        <li id="section-243">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-243">&#182;</a>
              </div>
              <p>assign the index to the view</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	      view._index = index;
	    }</pre></div></div>
            
        </li>
        
        
        <li id="section-244">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-244">&#182;</a>
              </div>
              <p>update the indexes of views after this one</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    <span class="hljs-keyword">this</span>.children.each(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">laterView</span>) </span>{
	      <span class="hljs-keyword">if</span> (laterView._index &gt;= view._index) {
	        laterView._index += increment ? <span class="hljs-number">1</span> : <span class="hljs-number">-1</span>;
	      }
	    });
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-245">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-245">&#182;</a>
              </div>
              <p>Internal Method. Add the view to children and render it at the given index.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  _addChildView: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_addChildView</span>(<span class="hljs-params">view, index</span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-246">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-246">&#182;</a>
              </div>
              <p>Only trigger attach if already attached and not buffering,
otherwise _endBuffering() or Region#show() handles this.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    <span class="hljs-keyword">var</span> shouldTriggerAttach = !<span class="hljs-keyword">this</span>._isBuffering &amp;&amp; <span class="hljs-keyword">this</span>._isAttached;</pre></div></div>
            
        </li>
        
        
        <li id="section-247">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-247">&#182;</a>
              </div>
              <p>set up the child view event forwarding</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    <span class="hljs-keyword">this</span>._proxyChildEvents(view);</pre></div></div>
            
        </li>
        
        
        <li id="section-248">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-248">&#182;</a>
              </div>
              <p>Store the child view itself so we can properly remove and/or destroy it later</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    <span class="hljs-keyword">this</span>.children.add(view);

	    <span class="hljs-keyword">if</span> (!view.supportsRenderLifecycle) {
	      triggerMethodOn(view, <span class="hljs-string">'before:render'</span>, view);
	    }</pre></div></div>
            
        </li>
        
        
        <li id="section-249">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-249">&#182;</a>
              </div>
              <p>Render view</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    view.render();

	    <span class="hljs-keyword">if</span> (!view.supportsRenderLifecycle) {
	      view._isRendered = <span class="hljs-literal">true</span>;
	      triggerMethodOn(view, <span class="hljs-string">'render'</span>, view);
	    }

	    <span class="hljs-keyword">if</span> (shouldTriggerAttach) {
	      triggerMethodOn(view, <span class="hljs-string">'before:attach'</span>, view);
	    }</pre></div></div>
            
        </li>
        
        
        <li id="section-250">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-250">&#182;</a>
              </div>
              <p>Attach view</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    <span class="hljs-keyword">this</span>.attachHtml(<span class="hljs-keyword">this</span>, view, index);

	    <span class="hljs-keyword">if</span> (shouldTriggerAttach) {
	      view._isAttached = <span class="hljs-literal">true</span>;
	      triggerMethodOn(view, <span class="hljs-string">'attach'</span>, view);
	    }
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-251">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-251">&#182;</a>
              </div>
              <p>Build a <code>childView</code> for a model in the collection.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  _buildChildView: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_buildChildView</span>(<span class="hljs-params">child, ChildViewClass, childViewOptions</span>) </span>{
	    <span class="hljs-keyword">var</span> options = _.extend({ <span class="hljs-attr">model</span>: child }, childViewOptions);
	    <span class="hljs-keyword">var</span> childView = <span class="hljs-keyword">new</span> ChildViewClass(options);
	    monitorViewEvents(childView);
	    <span class="hljs-keyword">return</span> childView;
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-252">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-252">&#182;</a>
              </div>
              <p>Remove the child view and destroy it. This function also updates the indices of later views
in the collection in order to keep the children in sync with the collection.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  _removeChildView: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_removeChildView</span>(<span class="hljs-params">view</span>) </span>{
	    <span class="hljs-keyword">if</span> (!view || view._isDestroyed) {
	      <span class="hljs-keyword">return</span>;
	    }

	    <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'before:remove:child'</span>, <span class="hljs-keyword">this</span>, view);

	    <span class="hljs-keyword">if</span> (view.destroy) {
	      view.destroy();
	    } <span class="hljs-keyword">else</span> {
	      destroyBackboneView(view);
	    }

	    <span class="hljs-keyword">delete</span> view._parent;
	    <span class="hljs-keyword">this</span>.stopListening(view);
	    <span class="hljs-keyword">this</span>.children.remove(view);
	    <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'remove:child'</span>, <span class="hljs-keyword">this</span>, view);</pre></div></div>
            
        </li>
        
        
        <li id="section-253">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-253">&#182;</a>
              </div>
              <p>decrement the index of views after this one</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    <span class="hljs-keyword">this</span>._updateIndices(view, <span class="hljs-literal">false</span>);
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-254">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-254">&#182;</a>
              </div>
              <p>check if the collection is empty or optionally whether an array of pre-processed models is empty</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  isEmpty: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isEmpty</span>(<span class="hljs-params">options</span>) </span>{
	    <span class="hljs-keyword">var</span> models = <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>;
	    <span class="hljs-keyword">if</span> (_.result(options, <span class="hljs-string">'processedModels'</span>)) {
	      models = options.processedModels;
	    } <span class="hljs-keyword">else</span> {
	      models = <span class="hljs-keyword">this</span>.collection ? <span class="hljs-keyword">this</span>.collection.models : [];
	      models = <span class="hljs-keyword">this</span>._filterModels(models);
	    }
	    <span class="hljs-keyword">return</span> models.length === <span class="hljs-number">0</span>;
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-255">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-255">&#182;</a>
              </div>
              <p>If empty, show the empty view</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  _checkEmpty: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_checkEmpty</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.isEmpty()) {
	      <span class="hljs-keyword">this</span>._showEmptyView();
	    }
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-256">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-256">&#182;</a>
              </div>
              <p>You might need to override this if you’ve overridden attachHtml</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  attachBuffer: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">attachBuffer</span>(<span class="hljs-params">collectionView, buffer</span>) </span>{
	    collectionView.$el.append(buffer);
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-257">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-257">&#182;</a>
              </div>
              <p>Create a fragment buffer from the currently buffered children</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  _createBuffer: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_createBuffer</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">var</span> elBuffer = <span class="hljs-built_in">document</span>.createDocumentFragment();
	    _.each(<span class="hljs-keyword">this</span>._bufferedChildren, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">b</span>) </span>{
	      elBuffer.appendChild(b.el);
	    });
	    <span class="hljs-keyword">return</span> elBuffer;
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-258">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-258">&#182;</a>
              </div>
              <p>Append the HTML to the collection’s <code>el</code>. Override this method to do something other
than <code>.append</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  attachHtml: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">attachHtml</span>(<span class="hljs-params">collectionView, childView, index</span>) </span>{
	    <span class="hljs-keyword">if</span> (collectionView._isBuffering) {</pre></div></div>
            
        </li>
        
        
        <li id="section-259">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-259">&#182;</a>
              </div>
              <p>buffering happens on reset events and initial renders
in order to reduce the number of inserts into the
document, which are expensive.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	      collectionView._bufferedChildren.splice(index, <span class="hljs-number">0</span>, childView);
	    } <span class="hljs-keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-260">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-260">&#182;</a>
              </div>
              <p>If we’ve already rendered the main collection, append
the new child into the correct order if we need to. Otherwise
append to the end.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	      <span class="hljs-keyword">if</span> (!collectionView._insertBefore(childView, index)) {
	        collectionView._insertAfter(childView);
	      }
	    }
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-261">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-261">&#182;</a>
              </div>
              <p>Internal method. Check whether we need to insert the view into the correct position.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  _insertBefore: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_insertBefore</span>(<span class="hljs-params">childView, index</span>) </span>{
	    <span class="hljs-keyword">var</span> currentView = <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>;
	    <span class="hljs-keyword">var</span> findPosition = <span class="hljs-keyword">this</span>.getOption(<span class="hljs-string">'sort'</span>) &amp;&amp; index &lt; <span class="hljs-keyword">this</span>.children.length - <span class="hljs-number">1</span>;
	    <span class="hljs-keyword">if</span> (findPosition) {</pre></div></div>
            
        </li>
        
        
        <li id="section-262">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-262">&#182;</a>
              </div>
              <p>Find the view after this one</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	      currentView = <span class="hljs-keyword">this</span>.children.find(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">view</span>) </span>{
	        <span class="hljs-keyword">return</span> view._index === index + <span class="hljs-number">1</span>;
	      });
	    }

	    <span class="hljs-keyword">if</span> (currentView) {
	      currentView.$el.before(childView.el);
	      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
	    }

	    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-263">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-263">&#182;</a>
              </div>
              <p>Internal method. Append a view to the end of the $el</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  _insertAfter: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_insertAfter</span>(<span class="hljs-params">childView</span>) </span>{
	    <span class="hljs-keyword">this</span>.$el.append(childView.el);
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-264">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-264">&#182;</a>
              </div>
              <p>Internal method to set up the <code>children</code> object for storing all of the child views</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  _initChildViewStorage: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_initChildViewStorage</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">this</span>.children = <span class="hljs-keyword">new</span> ChildViewContainer();
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-265">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-265">&#182;</a>
              </div>
              <p>called by ViewMixin destroy</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  _removeChildren: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_removeChildren</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">this</span>._destroyChildren({ <span class="hljs-attr">checkEmpty</span>: <span class="hljs-literal">false</span> });
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-266">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-266">&#182;</a>
              </div>
              <p>Destroy the child views that this collection view is holding on to, if any</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  _destroyChildren: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_destroyChildren</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">var</span> _ref2 = <span class="hljs-built_in">arguments</span>.length &lt;= <span class="hljs-number">0</span> || <span class="hljs-built_in">arguments</span>[<span class="hljs-number">0</span>] === <span class="hljs-literal">undefined</span> ? {} : <span class="hljs-built_in">arguments</span>[<span class="hljs-number">0</span>];

	    <span class="hljs-keyword">var</span> checkEmpty = _ref2.checkEmpty;

	    <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'before:destroy:children'</span>, <span class="hljs-keyword">this</span>);
	    <span class="hljs-keyword">var</span> shouldCheckEmpty = checkEmpty !== <span class="hljs-literal">false</span>;
	    <span class="hljs-keyword">var</span> childViews = <span class="hljs-keyword">this</span>.children.map(_.identity);

	    <span class="hljs-keyword">this</span>.children.each(_.bind(<span class="hljs-keyword">this</span>._removeChildView, <span class="hljs-keyword">this</span>));

	    <span class="hljs-keyword">if</span> (shouldCheckEmpty) {
	      <span class="hljs-keyword">this</span>._checkEmpty();
	    }

	    <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'destroy:children'</span>, <span class="hljs-keyword">this</span>);
	    <span class="hljs-keyword">return</span> childViews;
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-267">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-267">&#182;</a>
              </div>
              <p>Return true if the given child should be shown. Return false otherwise.
The filter will be passed (child, index, collection), where
 ‘child’ is the given model
 ‘index’ is the index of that model in the collection
 ‘collection’ is the collection referenced by this CollectionView</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  _shouldAddChild: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_shouldAddChild</span>(<span class="hljs-params">child, index</span>) </span>{
	    <span class="hljs-keyword">var</span> filter = <span class="hljs-keyword">this</span>.getOption(<span class="hljs-string">'filter'</span>);
	    <span class="hljs-keyword">return</span> !_.isFunction(filter) || filter.call(<span class="hljs-keyword">this</span>, child, index, <span class="hljs-keyword">this</span>.collection);
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-268">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-268">&#182;</a>
              </div>
              <p>Set up the child view event forwarding. Uses a “childview:” prefix in front of all forwarded events.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  _proxyChildEvents: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_proxyChildEvents</span>(<span class="hljs-params">view</span>) </span>{
	    <span class="hljs-keyword">var</span> prefix = <span class="hljs-keyword">this</span>.getOption(<span class="hljs-string">'childViewEventPrefix'</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-269">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-269">&#182;</a>
              </div>
              <p>Forward all child view events through the parent,
prepending “childview:” to the event name</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    <span class="hljs-keyword">this</span>.listenTo(view, <span class="hljs-string">'all'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">eventName</span>) </span>{

	      <span class="hljs-keyword">var</span> childEventName = prefix + <span class="hljs-string">':'</span> + eventName;

	      <span class="hljs-keyword">var</span> childViewEvents = <span class="hljs-keyword">this</span>.normalizeMethods(<span class="hljs-keyword">this</span>._childViewEvents);</pre></div></div>
            
        </li>
        
        
        <li id="section-270">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-270">&#182;</a>
              </div>
              <p>call collectionView childViewEvent if defined</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
	      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> _len = <span class="hljs-built_in">arguments</span>.length, args = <span class="hljs-built_in">Array</span>(_len &gt; <span class="hljs-number">1</span> ? _len - <span class="hljs-number">1</span> : <span class="hljs-number">0</span>), _key = <span class="hljs-number">1</span>; _key &lt; _len; _key++) {
	        args[_key - <span class="hljs-number">1</span>] = <span class="hljs-built_in">arguments</span>[_key];
	      }

	      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> childViewEvents !== <span class="hljs-string">'undefined'</span> &amp;&amp; _.isFunction(childViewEvents[eventName])) {
	        childViewEvents[eventName].apply(<span class="hljs-keyword">this</span>, args);
	      }</pre></div></div>
            
        </li>
        
        
        <li id="section-271">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-271">&#182;</a>
              </div>
              <p>use the parent view’s proxyEvent handlers</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	      <span class="hljs-keyword">var</span> childViewTriggers = <span class="hljs-keyword">this</span>._childViewTriggers;</pre></div></div>
            
        </li>
        
        
        <li id="section-272">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-272">&#182;</a>
              </div>
              <p>Call the event with the proxy name on the parent layout</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	      <span class="hljs-keyword">if</span> (childViewTriggers &amp;&amp; _.isString(childViewTriggers[eventName])) {
	        <span class="hljs-keyword">this</span>.triggerMethod.apply(<span class="hljs-keyword">this</span>, [childViewTriggers[eventName]].concat(args));
	      }

	      <span class="hljs-keyword">this</span>.triggerMethod.apply(<span class="hljs-keyword">this</span>, [childEventName].concat(args));
	    });
	  },
	  <span class="hljs-attr">_getImmediateChildren</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_getImmediateChildren</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">return</span> _.values(<span class="hljs-keyword">this</span>.children._views);
	  },
	  <span class="hljs-attr">getViewComparator</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getViewComparator</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.getOption(<span class="hljs-string">'viewComparator'</span>);
	  }
	});

	_.extend(CollectionView.prototype, ViewMixin);</pre></div></div>
            
        </li>
        
        
        <li id="section-273">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-273">&#182;</a>
              </div>
              <p>Used for rendering a branch-leaf, hierarchical structure.
Extends directly from CollectionView and also renders an
a child view as <code>modelView</code>, for the top leaf
@deprecated</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">var</span> CompositeView = CollectionView.extend({</pre></div></div>
            
        </li>
        
        
        <li id="section-274">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-274">&#182;</a>
              </div>
              <p>Setting up the inheritance chain which allows changes to
Marionette.CollectionView.prototype.constructor which allows overriding
option to pass ‘{sort: false}’ to prevent the CompositeView from
maintaining the sorted order of the collection.
This will fallback onto appending childView’s to the end.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
	  <span class="hljs-keyword">constructor</span>: function <span class="hljs-keyword">constructor</span>() {
	    deprecate(<span class="hljs-string">'CompositeView is deprecated. Convert to View at your earliest convenience'</span>);
	    CollectionView.prototype.constructor.apply(<span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span>);
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-275">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-275">&#182;</a>
              </div>
              <p>Configured the initial events that the composite view
binds to. Override this method to prevent the initial
events, or to add your own initial events.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  _initialEvents: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_initialEvents</span>(<span class="hljs-params"></span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-276">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-276">&#182;</a>
              </div>
              <p>Bind only after composite view is rendered to avoid adding child views
to nonexistent childViewContainer</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
	    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.collection) {
	      <span class="hljs-keyword">this</span>.listenTo(<span class="hljs-keyword">this</span>.collection, <span class="hljs-string">'add'</span>, <span class="hljs-keyword">this</span>._onCollectionAdd);
	      <span class="hljs-keyword">this</span>.listenTo(<span class="hljs-keyword">this</span>.collection, <span class="hljs-string">'remove'</span>, <span class="hljs-keyword">this</span>._onCollectionRemove);
	      <span class="hljs-keyword">this</span>.listenTo(<span class="hljs-keyword">this</span>.collection, <span class="hljs-string">'reset'</span>, <span class="hljs-keyword">this</span>.renderChildren);

	      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.getOption(<span class="hljs-string">'sort'</span>)) {
	        <span class="hljs-keyword">this</span>.listenTo(<span class="hljs-keyword">this</span>.collection, <span class="hljs-string">'sort'</span>, <span class="hljs-keyword">this</span>._sortViews);
	      }
	    }
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-277">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-277">&#182;</a>
              </div>
              <p>Retrieve the <code>childView</code> to be used when rendering each of
the items in the collection. The default is to return
<code>this.childView</code> or Marionette.CompositeView if no <code>childView</code>
has been defined. As happens in CollectionView, <code>childView</code> can
be a function (which should return a view class).</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  _getChildView: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_getChildView</span>(<span class="hljs-params">child</span>) </span>{
	    <span class="hljs-keyword">var</span> childView = <span class="hljs-keyword">this</span>.getOption(<span class="hljs-string">'childView'</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-278">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-278">&#182;</a>
              </div>
              <p>for CompositeView, if <code>childView</code> is not specified, we’ll get the same
composite view class rendered for each child in the collection
then check if the <code>childView</code> is a view class (the common case)
finally check if it’s a function (which we assume that returns a view class)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    <span class="hljs-keyword">if</span> (!childView) {
	      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.constructor;
	    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (childView.prototype <span class="hljs-keyword">instanceof</span> Backbone.View || childView === Backbone.View) {
	      <span class="hljs-keyword">return</span> childView;
	    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (_.isFunction(childView)) {
	      <span class="hljs-keyword">return</span> childView.call(<span class="hljs-keyword">this</span>, child);
	    } <span class="hljs-keyword">else</span> {
	      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> MarionetteError({
	        <span class="hljs-attr">name</span>: <span class="hljs-string">'InvalidChildViewError'</span>,
	        <span class="hljs-attr">message</span>: <span class="hljs-string">'"childView" must be a view class or a function that returns a view class'</span>
	      });
	    }
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-279">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-279">&#182;</a>
              </div>
              <p>Return the serialized model</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  serializeData: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">serializeData</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.serializeModel();
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-280">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-280">&#182;</a>
              </div>
              <p>Renders the model and the collection.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  render: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">render</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">this</span>._ensureViewIsIntact();
	    <span class="hljs-keyword">this</span>._isRendering = <span class="hljs-literal">true</span>;
	    <span class="hljs-keyword">this</span>.resetChildViewContainer();

	    <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'before:render'</span>, <span class="hljs-keyword">this</span>);

	    <span class="hljs-keyword">this</span>._renderTemplate();
	    <span class="hljs-keyword">this</span>.bindUIElements();
	    <span class="hljs-keyword">this</span>.renderChildren();

	    <span class="hljs-keyword">this</span>._isRendering = <span class="hljs-literal">false</span>;
	    <span class="hljs-keyword">this</span>._isRendered = <span class="hljs-literal">true</span>;
	    <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'render'</span>, <span class="hljs-keyword">this</span>);
	    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
	  },
	  <span class="hljs-attr">renderChildren</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">renderChildren</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._isRendered || <span class="hljs-keyword">this</span>._isRendering) {
	      CollectionView.prototype._renderChildren.call(<span class="hljs-keyword">this</span>);
	    }
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-281">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-281">&#182;</a>
              </div>
              <p>You might need to override this if you’ve overridden attachHtml</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  attachBuffer: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">attachBuffer</span>(<span class="hljs-params">compositeView, buffer</span>) </span>{
	    <span class="hljs-keyword">var</span> $container = <span class="hljs-keyword">this</span>.getChildViewContainer(compositeView);
	    $container.append(buffer);
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-282">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-282">&#182;</a>
              </div>
              <p>Internal method. Append a view to the end of the $el.
Overidden from CollectionView to ensure view is appended to
childViewContainer</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  _insertAfter: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_insertAfter</span>(<span class="hljs-params">childView</span>) </span>{
	    <span class="hljs-keyword">var</span> $container = <span class="hljs-keyword">this</span>.getChildViewContainer(<span class="hljs-keyword">this</span>, childView);
	    $container.append(childView.el);
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-283">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-283">&#182;</a>
              </div>
              <p>Internal method. Append reordered childView’.
Overidden from CollectionView to ensure reordered views
are appended to childViewContainer</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  _appendReorderedChildren: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_appendReorderedChildren</span>(<span class="hljs-params">children</span>) </span>{
	    <span class="hljs-keyword">var</span> $container = <span class="hljs-keyword">this</span>.getChildViewContainer(<span class="hljs-keyword">this</span>);
	    $container.append(children);
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-284">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-284">&#182;</a>
              </div>
              <p>Internal method to ensure an <code>$childViewContainer</code> exists, for the
<code>attachHtml</code> method to use.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  getChildViewContainer: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getChildViewContainer</span>(<span class="hljs-params">containerView, childView</span>) </span>{
	    <span class="hljs-keyword">if</span> (!!containerView.$childViewContainer) {
	      <span class="hljs-keyword">return</span> containerView.$childViewContainer;
	    }

	    <span class="hljs-keyword">var</span> container = <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>;
	    <span class="hljs-keyword">var</span> childViewContainer = getOption.call(containerView, <span class="hljs-string">'childViewContainer'</span>);
	    <span class="hljs-keyword">if</span> (childViewContainer) {

	      <span class="hljs-keyword">var</span> selector = getValue.call(containerView, childViewContainer);

	      <span class="hljs-keyword">if</span> (selector.charAt(<span class="hljs-number">0</span>) === <span class="hljs-string">'@'</span> &amp;&amp; containerView.ui) {
	        container = containerView.ui[selector.substr(<span class="hljs-number">4</span>)];
	      } <span class="hljs-keyword">else</span> {
	        container = containerView.$(selector);
	      }

	      <span class="hljs-keyword">if</span> (container.length &lt;= <span class="hljs-number">0</span>) {
	        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> MarionetteError({
	          <span class="hljs-attr">name</span>: <span class="hljs-string">'ChildViewContainerMissingError'</span>,
	          <span class="hljs-attr">message</span>: <span class="hljs-string">'The specified "childViewContainer" was not found: '</span> + containerView.childViewContainer
	        });
	      }
	    } <span class="hljs-keyword">else</span> {
	      container = containerView.$el;
	    }

	    containerView.$childViewContainer = container;
	    <span class="hljs-keyword">return</span> container;
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-285">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-285">&#182;</a>
              </div>
              <p>Internal method to reset the <code>$childViewContainer</code> on render</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  resetChildViewContainer: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">resetChildViewContainer</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.$childViewContainer) {
	      <span class="hljs-keyword">this</span>.$childViewContainer = <span class="hljs-literal">undefined</span>;
	    }
	  }
	});</pre></div></div>
            
        </li>
        
        
        <li id="section-286">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-286">&#182;</a>
              </div>
              <p>To prevent duplication but allow the best View organization
Certain View methods are mixed directly into the deprecated CompositeView</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">var</span> MixinFromView = _.pick(View.prototype, <span class="hljs-string">'serializeModel'</span>, <span class="hljs-string">'getTemplate'</span>, <span class="hljs-string">'_renderTemplate'</span>, <span class="hljs-string">'attachElContent'</span>);
	_.extend(CompositeView.prototype, MixinFromView);

	<span class="hljs-keyword">var</span> Behavior = MarionetteObject.extend({
	  <span class="hljs-attr">cidPrefix</span>: <span class="hljs-string">'mnb'</span>,

	  <span class="hljs-attr">constructor</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">constructor</span>(<span class="hljs-params">options, view</span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-287">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-287">&#182;</a>
              </div>
              <p>Setup reference to the view.
this comes in handle when a behavior
wants to directly talk up the chain
to the view.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    <span class="hljs-keyword">this</span>.view = view;
	    <span class="hljs-keyword">this</span>.defaults = _.clone(_.result(<span class="hljs-keyword">this</span>, <span class="hljs-string">'defaults'</span>, {}));
	    <span class="hljs-keyword">this</span>._setOptions(<span class="hljs-keyword">this</span>.defaults, options);</pre></div></div>
            
        </li>
        
        
        <li id="section-288">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-288">&#182;</a>
              </div>
              <p>Construct an internal UI hash using
the behaviors UI hash and then the view UI hash.
This allows the user to use UI hash elements
defined in the parent view as well as those
defined in the given behavior.
This order will help the reuse and share of a behavior
between multiple views, while letting a view override a
selector under an UI key.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    <span class="hljs-keyword">this</span>.ui = _.extend({}, _.result(<span class="hljs-keyword">this</span>, <span class="hljs-string">'ui'</span>), _.result(view, <span class="hljs-string">'ui'</span>));

	    MarionetteObject.apply(<span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span>);
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-289">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-289">&#182;</a>
              </div>
              <p>proxy behavior $ method to the view
this is useful for doing jquery DOM lookups
scoped to behaviors view.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  $: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">$</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.view.$.apply(<span class="hljs-keyword">this</span>.view, <span class="hljs-built_in">arguments</span>);
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-290">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-290">&#182;</a>
              </div>
              <p>Stops the behavior from listening to events.
Overrides Object#destroy to prevent additional events from being triggered.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  destroy: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">destroy</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">this</span>.stopListening();

	    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
	  },

	  <span class="hljs-attr">proxyViewProperties</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">proxyViewProperties</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">this</span>.$el = <span class="hljs-keyword">this</span>.view.$el;
	    <span class="hljs-keyword">this</span>.el = <span class="hljs-keyword">this</span>.view.el;

	    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
	  },

	  <span class="hljs-attr">bindUIElements</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">bindUIElements</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">this</span>._bindUIElements();

	    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
	  },

	  <span class="hljs-attr">unbindUIElements</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">unbindUIElements</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">this</span>._unbindUIElements();

	    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
	  },

	  <span class="hljs-attr">getUI</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getUI</span>(<span class="hljs-params">name</span>) </span>{
	    <span class="hljs-keyword">this</span>.view._ensureViewIsIntact();
	    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._getUI(name);
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-291">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-291">&#182;</a>
              </div>
              <p>Handle <code>modelEvents</code>, and <code>collectionEvents</code> configuration</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  delegateEntityEvents: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">delegateEntityEvents</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">this</span>._delegateEntityEvents(<span class="hljs-keyword">this</span>.view.model, <span class="hljs-keyword">this</span>.view.collection);

	    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
	  },

	  <span class="hljs-attr">undelegateEntityEvents</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">undelegateEntityEvents</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">this</span>._undelegateEntityEvents(<span class="hljs-keyword">this</span>.view.model, <span class="hljs-keyword">this</span>.view.collection);

	    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
	  },

	  <span class="hljs-attr">getEvents</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getEvents</span>(<span class="hljs-params"></span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-292">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-292">&#182;</a>
              </div>
              <p>Normalize behavior events hash to allow
a user to use the @ui. syntax.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    <span class="hljs-keyword">var</span> behaviorEvents = <span class="hljs-keyword">this</span>.normalizeUIKeys(_.result(<span class="hljs-keyword">this</span>, <span class="hljs-string">'events'</span>));</pre></div></div>
            
        </li>
        
        
        <li id="section-293">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-293">&#182;</a>
              </div>
              <p>binds the handler to the behavior and builds a unique eventName</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    <span class="hljs-keyword">return</span> _.reduce(behaviorEvents, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">events, behaviorHandler, key</span>) </span>{
	      <span class="hljs-keyword">if</span> (!_.isFunction(behaviorHandler)) {
	        behaviorHandler = <span class="hljs-keyword">this</span>[behaviorHandler];
	      }
	      <span class="hljs-keyword">if</span> (!behaviorHandler) {
	        <span class="hljs-keyword">return</span>;
	      }
	      key = getUniqueEventName(key);
	      events[key] = _.bind(behaviorHandler, <span class="hljs-keyword">this</span>);
	      <span class="hljs-keyword">return</span> events;
	    }, {}, <span class="hljs-keyword">this</span>);
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-294">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-294">&#182;</a>
              </div>
              <p>Internal method to build all trigger handlers for a given behavior</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  getTriggers: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getTriggers</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.triggers) {
	      <span class="hljs-keyword">return</span>;
	    }</pre></div></div>
            
        </li>
        
        
        <li id="section-295">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-295">&#182;</a>
              </div>
              <p>Normalize behavior triggers hash to allow
a user to use the @ui. syntax.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    <span class="hljs-keyword">var</span> behaviorTriggers = <span class="hljs-keyword">this</span>.normalizeUIKeys(_.result(<span class="hljs-keyword">this</span>, <span class="hljs-string">'triggers'</span>));

	    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._getViewTriggers(<span class="hljs-keyword">this</span>.view, behaviorTriggers);
	  }

	});

	_.extend(Behavior.prototype, DelegateEntityEventsMixin, TriggersMixin, UIMixin);</pre></div></div>
            
        </li>
        
        
        <li id="section-296">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-296">&#182;</a>
              </div>
              <p>A container for a Marionette application.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">var</span> Application = MarionetteObject.extend({
	  <span class="hljs-attr">cidPrefix</span>: <span class="hljs-string">'mna'</span>,

	  <span class="hljs-attr">constructor</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">constructor</span>(<span class="hljs-params">options</span>) </span>{
	    <span class="hljs-keyword">this</span>._setOptions(options);

	    <span class="hljs-keyword">this</span>._initRegion();

	    MarionetteObject.prototype.constructor.apply(<span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span>);
	  },

	  <span class="hljs-attr">regionClass</span>: Region,

	  <span class="hljs-attr">_initRegion</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_initRegion</span>(<span class="hljs-params">options</span>) </span>{
	    <span class="hljs-keyword">var</span> region = <span class="hljs-keyword">this</span>.getOption(<span class="hljs-string">'region'</span>);
	    <span class="hljs-keyword">var</span> RegionClass = <span class="hljs-keyword">this</span>.getOption(<span class="hljs-string">'regionClass'</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-297">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-297">&#182;</a>
              </div>
              <p>if the region is a string expect an el or selector
and instantiate a region</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    <span class="hljs-keyword">if</span> (_.isString(region)) {
	      <span class="hljs-keyword">this</span>._region = <span class="hljs-keyword">new</span> RegionClass({
	        <span class="hljs-attr">el</span>: region
	      });
	      <span class="hljs-keyword">return</span>;
	    }

	    <span class="hljs-keyword">this</span>._region = region;
	  },

	  <span class="hljs-attr">getRegion</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getRegion</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._region;
	  },

	  <span class="hljs-attr">showView</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">showView</span>(<span class="hljs-params">view</span>) </span>{
	    <span class="hljs-keyword">var</span> region = <span class="hljs-keyword">this</span>.getRegion();

	    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> _len = <span class="hljs-built_in">arguments</span>.length, args = <span class="hljs-built_in">Array</span>(_len &gt; <span class="hljs-number">1</span> ? _len - <span class="hljs-number">1</span> : <span class="hljs-number">0</span>), _key = <span class="hljs-number">1</span>; _key &lt; _len; _key++) {
	      args[_key - <span class="hljs-number">1</span>] = <span class="hljs-built_in">arguments</span>[_key];
	    }

	    <span class="hljs-keyword">return</span> region.show.apply(region, [view].concat(args));
	  },

	  <span class="hljs-attr">getView</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getView</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.getRegion().currentView;
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-298">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-298">&#182;</a>
              </div>
              <p>kick off all of the application’s processes.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  start: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">start</span>(<span class="hljs-params">options</span>) </span>{
	    <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'before:start'</span>, options);
	    <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'start'</span>, options);
	  }

	});

	<span class="hljs-keyword">var</span> AppRouter = Backbone.Router.extend({

	  <span class="hljs-attr">constructor</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">constructor</span>(<span class="hljs-params">options</span>) </span>{
	    <span class="hljs-keyword">this</span>._setOptions(options);

	    Backbone.Router.apply(<span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span>);

	    <span class="hljs-keyword">var</span> appRoutes = <span class="hljs-keyword">this</span>.getOption(<span class="hljs-string">'appRoutes'</span>);
	    <span class="hljs-keyword">var</span> controller = <span class="hljs-keyword">this</span>._getController();
	    <span class="hljs-keyword">this</span>.processAppRoutes(controller, appRoutes);
	    <span class="hljs-keyword">this</span>.on(<span class="hljs-string">'route'</span>, <span class="hljs-keyword">this</span>._processOnRoute, <span class="hljs-keyword">this</span>);
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-299">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-299">&#182;</a>
              </div>
              <p>Similar to route method on a Backbone Router but
method is called on the controller</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  appRoute: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">appRoute</span>(<span class="hljs-params">route, methodName</span>) </span>{
	    <span class="hljs-keyword">var</span> controller = <span class="hljs-keyword">this</span>._getController();
	    <span class="hljs-keyword">this</span>._addAppRoute(controller, route, methodName);
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-300">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-300">&#182;</a>
              </div>
              <p>process the route event and trigger the onRoute
method call, if it exists</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  _processOnRoute: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_processOnRoute</span>(<span class="hljs-params">routeName, routeArgs</span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-301">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-301">&#182;</a>
              </div>
              <p>make sure an onRoute before trying to call it</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	    <span class="hljs-keyword">if</span> (_.isFunction(<span class="hljs-keyword">this</span>.onRoute)) {</pre></div></div>
            
        </li>
        
        
        <li id="section-302">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-302">&#182;</a>
              </div>
              <p>find the path that matches the current route</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	      <span class="hljs-keyword">var</span> routePath = _.invert(<span class="hljs-keyword">this</span>.getOption(<span class="hljs-string">'appRoutes'</span>))[routeName];
	      <span class="hljs-keyword">this</span>.onRoute(routeName, routePath, routeArgs);
	    }
	  },</pre></div></div>
            
        </li>
        
        
        <li id="section-303">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-303">&#182;</a>
              </div>
              <p>Internal method to process the <code>appRoutes</code> for the
router, and turn them in to routes that trigger the
specified method on the specified <code>controller</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	  processAppRoutes: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">processAppRoutes</span>(<span class="hljs-params">controller, appRoutes</span>) </span>{
	    <span class="hljs-keyword">var</span> _this = <span class="hljs-keyword">this</span>;

	    <span class="hljs-keyword">if</span> (!appRoutes) {
	      <span class="hljs-keyword">return</span>;
	    }

	    <span class="hljs-keyword">var</span> routeNames = _.keys(appRoutes).reverse(); <span class="hljs-comment">// Backbone requires reverted order of routes</span>

	    _.each(routeNames, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">route</span>) </span>{
	      _this._addAppRoute(controller, route, appRoutes[route]);
	    });
	  },

	  <span class="hljs-attr">_getController</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_getController</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.getOption(<span class="hljs-string">'controller'</span>);
	  },

	  <span class="hljs-attr">_addAppRoute</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_addAppRoute</span>(<span class="hljs-params">controller, route, methodName</span>) </span>{
	    <span class="hljs-keyword">var</span> method = controller[methodName];

	    <span class="hljs-keyword">if</span> (!method) {
	      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> MarionetteError(<span class="hljs-string">'Method "'</span> + methodName + <span class="hljs-string">'" was not found on the controller'</span>);
	    }

	    <span class="hljs-keyword">this</span>.route(route, methodName, _.bind(method, controller));
	  },

	  <span class="hljs-attr">triggerMethod</span>: triggerMethod
	});

	_.extend(AppRouter.prototype, CommonMixin);</pre></div></div>
            
        </li>
        
        
        <li id="section-304">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-304">&#182;</a>
              </div>
              <p>Placeholder method to be extended by the user.
The method should define the object that stores the behaviors.
i.e.</p>
<pre><code class="lang-js">Marionette.Behaviors.behaviorsLookup: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">return</span> App.Behaviors
}
</code></pre>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">behaviorsLookup</span>(<span class="hljs-params"></span>) </span>{
	  <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> MarionetteError({
	    <span class="hljs-attr">message</span>: <span class="hljs-string">'You must define where your behaviors are stored.'</span>,
	    <span class="hljs-attr">url</span>: <span class="hljs-string">'marionette.behaviors.md#behaviorslookup'</span>
	  });
	}</pre></div></div>
            
        </li>
        
        
        <li id="section-305">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-305">&#182;</a>
              </div>
              <p>Add Feature flags here
e.g. ‘class’ =&gt; false</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">var</span> FEATURES = {};

	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isEnabled</span>(<span class="hljs-params">name</span>) </span>{
	  <span class="hljs-keyword">return</span> !!FEATURES[name];
	}

	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setEnabled</span>(<span class="hljs-params">name, state</span>) </span>{
	  <span class="hljs-keyword">return</span> FEATURES[name] = state;
	}

	<span class="hljs-keyword">var</span> previousMarionette = Backbone.Marionette;
	<span class="hljs-keyword">var</span> Marionette = Backbone.Marionette = {};</pre></div></div>
            
        </li>
        
        
        <li id="section-306">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-306">&#182;</a>
              </div>
              <p>This allows you to run multiple instances of Marionette on the same
webapp. After loading the new version, call <code>noConflict()</code> to
get a reference to it. At the same time the old version will be
returned to Backbone.Marionette.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	Marionette.noConflict = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
	  Backbone.Marionette = previousMarionette;
	  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
	};</pre></div></div>
            
        </li>
        
        
        <li id="section-307">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-307">&#182;</a>
              </div>
              <p>Utilities</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	Marionette.bindEntityEvents = proxy(bindEntityEvents);
	Marionette.unbindEntityEvents = proxy(unbindEntityEvents);
	Marionette.bindRadioEvents = proxy(bindEntityEvents);
	Marionette.unbindRadioEvents = proxy(unbindEntityEvents);
	Marionette.bindRadioRequests = proxy(bindRadioRequests);
	Marionette.unbindRadioRequests = proxy(unbindRadioRequests);
	Marionette.mergeOptions = proxy(mergeOptions);
	Marionette.getOption = proxy(getOption);
	Marionette.normalizeMethods = proxy(normalizeMethods);
	Marionette.extend = extend;
	Marionette.isNodeAttached = isNodeAttached;
	Marionette.deprecate = deprecate;
	Marionette.triggerMethod = proxy(triggerMethod);
	Marionette.triggerMethodOn = triggerMethodOn;
	Marionette.isEnabled = isEnabled;
	Marionette.setEnabled = setEnabled;
	Marionette.monitorViewEvents = monitorViewEvents;

	Marionette.Behaviors = {};
	Marionette.Behaviors.behaviorsLookup = behaviorsLookup;</pre></div></div>
            
        </li>
        
        
        <li id="section-308">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-308">&#182;</a>
              </div>
              <p>Classes</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	Marionette.Application = Application;
	Marionette.AppRouter = AppRouter;
	Marionette.Renderer = Renderer;
	Marionette.TemplateCache = TemplateCache;
	Marionette.View = View;
	Marionette.CollectionView = CollectionView;
	Marionette.CompositeView = CompositeView;
	Marionette.Behavior = Behavior;
	Marionette.Region = Region;
	Marionette.Error = MarionetteError;
	Marionette.Object = MarionetteObject;</pre></div></div>
            
        </li>
        
        
        <li id="section-309">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-309">&#182;</a>
              </div>
              <p>Configuration</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	Marionette.DEV_MODE = <span class="hljs-literal">false</span>;
	Marionette.FEATURES = FEATURES;
	Marionette.VERSION = version;

	<span class="hljs-keyword">return</span> Marionette;

}(Backbone,_,Backbone.Radio,Backbone.ChildViewContainer));</pre></div></div>
            
        </li>
        
        
        <li id="section-310">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-310">&#182;</a>
              </div>
              <h1 id="sourcemappingurl-backbone-marionette-js-map">sourceMappingURL=backbone.marionette.js.map</h1>

            </div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
