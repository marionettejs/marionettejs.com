<!doctype html>
<html lang="en" itemscope itemtype="http://schema.org/WebPage">
<head>
  <meta charset="utf-8">
  <meta name="x-ua-compatible" content="ie=edge">
  <title itemprop="name">backbone.marionette.js</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/apple-touch-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon-180x180.png">
  <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
  <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
  <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
  <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
  <link rel="manifest" href="/manifest.json">
  <meta name="msapplication-TileColor" content="#b91d47">
  <meta name="msapplication-TileImage" content="/mstile-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <link rel="stylesheet" media="all" href="../../styles/docco.860affb898b6e45b.860affb898b6e45b.860affb898b6e45b.860affb898b6e45b.860affb898b6e45b.860affb898b6e45b.860affb898b6e45b.860affb898b6e45b.860affb898b6e45b.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>backbone.marionette.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-comment">/**
* @license
* MarionetteJS (Backbone.Marionette)
* ----------------------------------
* v4.1.2
*
* Copyright (c)2019 Derick Bailey, Muted Solutions, LLC.
* Distributed under MIT license
*
* http://marionettejs.com
*/</span>


(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">global, factory</span>) </span>{
  <span class="hljs-keyword">typeof</span> exports === <span class="hljs-string">'object'</span> &amp;&amp; <span class="hljs-keyword">typeof</span> <span class="hljs-built_in">module</span> !== <span class="hljs-string">'undefined'</span> ? factory(exports, <span class="hljs-built_in">require</span>(<span class="hljs-string">'backbone'</span>), <span class="hljs-built_in">require</span>(<span class="hljs-string">'underscore'</span>), <span class="hljs-built_in">require</span>(<span class="hljs-string">'backbone.radio'</span>)) :
  <span class="hljs-keyword">typeof</span> define === <span class="hljs-string">'function'</span> &amp;&amp; define.amd ? define([<span class="hljs-string">'exports'</span>, <span class="hljs-string">'backbone'</span>, <span class="hljs-string">'underscore'</span>, <span class="hljs-string">'backbone.radio'</span>], factory) :
  (global = global || self, (<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> current = global.Marionette;
    <span class="hljs-keyword">var</span> exports = global.Marionette = {};
    factory(exports, global.Backbone, global._, global.Backbone.Radio);
    exports.noConflict = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{ global.Marionette = current; <span class="hljs-keyword">return</span> exports; };
  }()));
}(<span class="hljs-keyword">this</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">exports, Backbone, _, Radio</span>) </span>{ <span class="hljs-string">'use strict'</span>;

  Backbone = Backbone &amp;&amp; Backbone.hasOwnProperty(<span class="hljs-string">'default'</span>) ? Backbone[<span class="hljs-string">'default'</span>] : Backbone;
  _ = _ &amp;&amp; _.hasOwnProperty(<span class="hljs-string">'default'</span>) ? _[<span class="hljs-string">'default'</span>] : _;
  Radio = Radio &amp;&amp; Radio.hasOwnProperty(<span class="hljs-string">'default'</span>) ? Radio[<span class="hljs-string">'default'</span>] : Radio;

  <span class="hljs-keyword">var</span> version = <span class="hljs-string">"4.1.2"</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p>Internal utility for creating context style global utils</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">var</span> proxy = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">proxy</span>(<span class="hljs-params">method</span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">context</span>) </span>{
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> _len = <span class="hljs-built_in">arguments</span>.length, args = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(_len &gt; <span class="hljs-number">1</span> ? _len - <span class="hljs-number">1</span> : <span class="hljs-number">0</span>), _key = <span class="hljs-number">1</span>; _key &lt; _len; _key++) {
        args[_key - <span class="hljs-number">1</span>] = <span class="hljs-built_in">arguments</span>[_key];
      }

      <span class="hljs-keyword">return</span> method.apply(context, args);
    };
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>Marionette.extend</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
  <span class="hljs-keyword">var</span> extend = Backbone.Model.extend;</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <hr>

            </div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p>Pass in a mapping of events =&gt; functions or function names
and return a mapping of events =&gt; functions</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
  <span class="hljs-keyword">var</span> normalizeMethods = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">normalizeMethods</span>(<span class="hljs-params">hash</span>) </span>{
    <span class="hljs-keyword">var</span> _this = <span class="hljs-keyword">this</span>;

    <span class="hljs-keyword">if</span> (!hash) {
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-keyword">return</span> _.reduce(hash, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">normalizedHash, method, name</span>) </span>{
      <span class="hljs-keyword">if</span> (!_.isFunction(method)) {
        method = _this[method];
      }

      <span class="hljs-keyword">if</span> (method) {
        normalizedHash[name] = method;
      }

      <span class="hljs-keyword">return</span> normalizedHash;
    }, {});
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>Error</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">var</span> errorProps = [<span class="hljs-string">'description'</span>, <span class="hljs-string">'fileName'</span>, <span class="hljs-string">'lineNumber'</span>, <span class="hljs-string">'name'</span>, <span class="hljs-string">'message'</span>, <span class="hljs-string">'number'</span>, <span class="hljs-string">'url'</span>];
  <span class="hljs-keyword">var</span> MarionetteError = extend.call(<span class="hljs-built_in">Error</span>, {
    <span class="hljs-attr">urlRoot</span>: <span class="hljs-string">"http://marionettejs.com/docs/v"</span>.concat(version, <span class="hljs-string">"/"</span>),
    <span class="hljs-attr">url</span>: <span class="hljs-string">''</span>,
    <span class="hljs-attr">constructor</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">constructor</span>(<span class="hljs-params">options</span>) </span>{
      <span class="hljs-keyword">var</span> error = <span class="hljs-built_in">Error</span>.call(<span class="hljs-keyword">this</span>, options.message);

      _.extend(<span class="hljs-keyword">this</span>, _.pick(error, errorProps), _.pick(options, errorProps));

      <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Error</span>.captureStackTrace) {
        <span class="hljs-keyword">this</span>.captureStackTrace();
      }

      <span class="hljs-keyword">this</span>.url = <span class="hljs-keyword">this</span>.urlRoot + <span class="hljs-keyword">this</span>.url;
    },
    <span class="hljs-attr">captureStackTrace</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">captureStackTrace</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-built_in">Error</span>.captureStackTrace(<span class="hljs-keyword">this</span>, MarionetteError);
    },
    <span class="hljs-attr">toString</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">toString</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>.concat(<span class="hljs-keyword">this</span>.name, <span class="hljs-string">": "</span>).concat(<span class="hljs-keyword">this</span>.message, <span class="hljs-string">" See: "</span>).concat(<span class="hljs-keyword">this</span>.url);
    }
  });</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>Bind Entity Events &amp; Unbind Entity Events</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">normalizeBindings</span>(<span class="hljs-params">context, bindings</span>) </span>{
    <span class="hljs-keyword">if</span> (!_.isObject(bindings)) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> MarionetteError({
        <span class="hljs-attr">message</span>: <span class="hljs-string">'Bindings must be an object.'</span>,
        <span class="hljs-attr">url</span>: <span class="hljs-string">'common.html#bindevents'</span>
      });
    }

    <span class="hljs-keyword">return</span> normalizeMethods.call(context, bindings);
  }

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">bindEvents</span>(<span class="hljs-params">entity, bindings</span>) </span>{
    <span class="hljs-keyword">if</span> (!entity || !bindings) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
    }

    <span class="hljs-keyword">this</span>.listenTo(entity, normalizeBindings(<span class="hljs-keyword">this</span>, bindings));
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
  }

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">unbindEvents</span>(<span class="hljs-params">entity, bindings</span>) </span>{
    <span class="hljs-keyword">if</span> (!entity) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
    }

    <span class="hljs-keyword">if</span> (!bindings) {
      <span class="hljs-keyword">this</span>.stopListening(entity);
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
    }

    <span class="hljs-keyword">this</span>.stopListening(entity, normalizeBindings(<span class="hljs-keyword">this</span>, bindings));
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
  } <span class="hljs-comment">// Export Public API</span></pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p>Bind/Unbind Radio Requests</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">normalizeBindings$1</span>(<span class="hljs-params">context, bindings</span>) </span>{
    <span class="hljs-keyword">if</span> (!_.isObject(bindings)) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> MarionetteError({
        <span class="hljs-attr">message</span>: <span class="hljs-string">'Bindings must be an object.'</span>,
        <span class="hljs-attr">url</span>: <span class="hljs-string">'common.html#bindrequests'</span>
      });
    }

    <span class="hljs-keyword">return</span> normalizeMethods.call(context, bindings);
  }

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">bindRequests</span>(<span class="hljs-params">channel, bindings</span>) </span>{
    <span class="hljs-keyword">if</span> (!channel || !bindings) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
    }

    channel.reply(normalizeBindings$<span class="hljs-number">1</span>(<span class="hljs-keyword">this</span>, bindings), <span class="hljs-keyword">this</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
  }

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">unbindRequests</span>(<span class="hljs-params">channel, bindings</span>) </span>{
    <span class="hljs-keyword">if</span> (!channel) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
    }

    <span class="hljs-keyword">if</span> (!bindings) {
      channel.stopReplying(<span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>, <span class="hljs-keyword">this</span>);
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
    }

    channel.stopReplying(normalizeBindings$<span class="hljs-number">1</span>(<span class="hljs-keyword">this</span>, bindings));
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <h2 id="marionette-getoption">Marionette.getOption</h2>

            </div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p>Retrieve an object, function or other value from the
object or its <code>options</code>, with <code>options</code> taking precedence.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">var</span> getOption = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getOption</span>(<span class="hljs-params">optionName</span>) </span>{
    <span class="hljs-keyword">if</span> (!optionName) {
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.options &amp;&amp; <span class="hljs-keyword">this</span>.options[optionName] !== <span class="hljs-literal">undefined</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.options[optionName];
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>[optionName];
    }
  };

  <span class="hljs-keyword">var</span> mergeOptions = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">mergeOptions</span>(<span class="hljs-params">options, keys</span>) </span>{
    <span class="hljs-keyword">var</span> _this = <span class="hljs-keyword">this</span>;

    <span class="hljs-keyword">if</span> (!options) {
      <span class="hljs-keyword">return</span>;
    }

    _.each(keys, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">key</span>) </span>{
      <span class="hljs-keyword">var</span> option = options[key];

      <span class="hljs-keyword">if</span> (option !== <span class="hljs-literal">undefined</span>) {
        _this[key] = option;
      }
    });
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <p>DOM Refresh</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">triggerMethodChildren</span>(<span class="hljs-params">view, event, shouldTrigger</span>) </span>{
    <span class="hljs-keyword">if</span> (!view._getImmediateChildren) {
      <span class="hljs-keyword">return</span>;
    }

    _.each(view._getImmediateChildren(), <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">child</span>) </span>{
      <span class="hljs-keyword">if</span> (!shouldTrigger(child)) {
        <span class="hljs-keyword">return</span>;
      }

      child.triggerMethod(event, child);
    });
  }

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">shouldTriggerAttach</span>(<span class="hljs-params">view</span>) </span>{
    <span class="hljs-keyword">return</span> !view._isAttached;
  }

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">shouldAttach</span>(<span class="hljs-params">view</span>) </span>{
    <span class="hljs-keyword">if</span> (!shouldTriggerAttach(view)) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }

    view._isAttached = <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  }

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">shouldTriggerDetach</span>(<span class="hljs-params">view</span>) </span>{
    <span class="hljs-keyword">return</span> view._isAttached;
  }

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">shouldDetach</span>(<span class="hljs-params">view</span>) </span>{
    view._isAttached = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  }

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">triggerDOMRefresh</span>(<span class="hljs-params">view</span>) </span>{
    <span class="hljs-keyword">if</span> (view._isAttached &amp;&amp; view._isRendered) {
      view.triggerMethod(<span class="hljs-string">'dom:refresh'</span>, view);
    }
  }

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">triggerDOMRemove</span>(<span class="hljs-params">view</span>) </span>{
    <span class="hljs-keyword">if</span> (view._isAttached &amp;&amp; view._isRendered) {
      view.triggerMethod(<span class="hljs-string">'dom:remove'</span>, view);
    }
  }

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">handleBeforeAttach</span>(<span class="hljs-params"></span>) </span>{
    triggerMethodChildren(<span class="hljs-keyword">this</span>, <span class="hljs-string">'before:attach'</span>, shouldTriggerAttach);
  }

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">handleAttach</span>(<span class="hljs-params"></span>) </span>{
    triggerMethodChildren(<span class="hljs-keyword">this</span>, <span class="hljs-string">'attach'</span>, shouldAttach);
    triggerDOMRefresh(<span class="hljs-keyword">this</span>);
  }

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">handleBeforeDetach</span>(<span class="hljs-params"></span>) </span>{
    triggerMethodChildren(<span class="hljs-keyword">this</span>, <span class="hljs-string">'before:detach'</span>, shouldTriggerDetach);
    triggerDOMRemove(<span class="hljs-keyword">this</span>);
  }

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">handleDetach</span>(<span class="hljs-params"></span>) </span>{
    triggerMethodChildren(<span class="hljs-keyword">this</span>, <span class="hljs-string">'detach'</span>, shouldDetach);
  }

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">handleBeforeRender</span>(<span class="hljs-params"></span>) </span>{
    triggerDOMRemove(<span class="hljs-keyword">this</span>);
  }

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">handleRender</span>(<span class="hljs-params"></span>) </span>{
    triggerDOMRefresh(<span class="hljs-keyword">this</span>);
  } <span class="hljs-comment">// Monitor a view's state, propagating attach/detach events to children and firing dom:refresh</span></pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <p>whenever a rendered view is attached or an attached view is rendered.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">monitorViewEvents</span>(<span class="hljs-params">view</span>) </span>{
    <span class="hljs-keyword">if</span> (view._areViewEventsMonitored || view.monitorViewEvents === <span class="hljs-literal">false</span>) {
      <span class="hljs-keyword">return</span>;
    }

    view._areViewEventsMonitored = <span class="hljs-literal">true</span>;
    view.on({
      <span class="hljs-string">'before:attach'</span>: handleBeforeAttach,
      <span class="hljs-string">'attach'</span>: handleAttach,
      <span class="hljs-string">'before:detach'</span>: handleBeforeDetach,
      <span class="hljs-string">'detach'</span>: handleDetach,
      <span class="hljs-string">'before:render'</span>: handleBeforeRender,
      <span class="hljs-string">'render'</span>: handleRender
    });
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <p>Trigger Method</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
  <span class="hljs-keyword">var</span> splitter = <span class="hljs-regexp">/(^|:)(\w)/gi</span>; <span class="hljs-comment">// Only calc getOnMethodName once</span>

  <span class="hljs-keyword">var</span> methodCache = {}; <span class="hljs-comment">// take the event section ("section1:section2:section3")</span></pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <p>and turn it in to uppercase name onSection1Section2Section3</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getEventName</span>(<span class="hljs-params">match, prefix, eventName</span>) </span>{
    <span class="hljs-keyword">return</span> eventName.toUpperCase();
  }

  <span class="hljs-keyword">var</span> getOnMethodName = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getOnMethodName</span>(<span class="hljs-params">event</span>) </span>{
    <span class="hljs-keyword">if</span> (!methodCache[event]) {
      methodCache[event] = <span class="hljs-string">'on'</span> + event.replace(splitter, getEventName);
    }

    <span class="hljs-keyword">return</span> methodCache[event];
  }; <span class="hljs-comment">// Trigger an event and/or a corresponding method name. Examples:</span></pre></div></div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <p><code>this.triggerMethod(&quot;foo&quot;)</code> will trigger the “foo” event and
call the “onFoo” method.</p>
<p><code>this.triggerMethod(&quot;foo:bar&quot;)</code> will trigger the “foo:bar” event and
call the “onFooBar” method.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">triggerMethod</span>(<span class="hljs-params">event</span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              <p>get the method name from the event name</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">var</span> methodName = getOnMethodName(event);
    <span class="hljs-keyword">var</span> method = getOption.call(<span class="hljs-keyword">this</span>, methodName);
    <span class="hljs-keyword">var</span> result; <span class="hljs-comment">// call the onMethodName if it exists</span>

    <span class="hljs-keyword">if</span> (_.isFunction(method)) {</pre></div></div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              <p>pass all args, except the event name</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      result = method.apply(<span class="hljs-keyword">this</span>, _.drop(<span class="hljs-built_in">arguments</span>));
    } <span class="hljs-comment">// trigger the event</span>


    <span class="hljs-keyword">this</span>.trigger.apply(<span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span>);
    <span class="hljs-keyword">return</span> result;
  }

  <span class="hljs-keyword">var</span> Events = {
    <span class="hljs-attr">triggerMethod</span>: triggerMethod
  };

  <span class="hljs-keyword">var</span> CommonMixin = {</pre></div></div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              <p>Imports the “normalizeMethods” to transform hashes of
events=&gt;function references/names to a hash of events=&gt;function references</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    normalizeMethods: normalizeMethods,
    <span class="hljs-attr">_setOptions</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_setOptions</span>(<span class="hljs-params">options, classOptions</span>) </span>{
      <span class="hljs-keyword">this</span>.options = _.extend({}, _.result(<span class="hljs-keyword">this</span>, <span class="hljs-string">'options'</span>), options);
      <span class="hljs-keyword">this</span>.mergeOptions(options, classOptions);
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-19">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-19">&#182;</a>
              </div>
              <p>A handy way to merge passed-in options onto the instance</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    mergeOptions: mergeOptions,</pre></div></div>
            
        </li>
        
        
        <li id="section-20">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-20">&#182;</a>
              </div>
              <p>Enable getting options from this or this.options by name.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    getOption: getOption,</pre></div></div>
            
        </li>
        
        
        <li id="section-21">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-21">&#182;</a>
              </div>
              <p>Enable binding view’s events from another entity.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    bindEvents: bindEvents,</pre></div></div>
            
        </li>
        
        
        <li id="section-22">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-22">&#182;</a>
              </div>
              <p>Enable unbinding view’s events from another entity.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    unbindEvents: unbindEvents,</pre></div></div>
            
        </li>
        
        
        <li id="section-23">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-23">&#182;</a>
              </div>
              <p>Enable binding view’s requests.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    bindRequests: bindRequests,</pre></div></div>
            
        </li>
        
        
        <li id="section-24">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-24">&#182;</a>
              </div>
              <p>Enable unbinding view’s requests.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    unbindRequests: unbindRequests,
    <span class="hljs-attr">triggerMethod</span>: triggerMethod
  };

  _.extend(CommonMixin, Backbone.Events);

  <span class="hljs-keyword">var</span> DestroyMixin = {
    <span class="hljs-attr">_isDestroyed</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">isDestroyed</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isDestroyed</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._isDestroyed;
    },
    <span class="hljs-attr">destroy</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">destroy</span>(<span class="hljs-params">options</span>) </span>{
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._isDestroyed) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
      }

      <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'before:destroy'</span>, <span class="hljs-keyword">this</span>, options);
      <span class="hljs-keyword">this</span>._isDestroyed = <span class="hljs-literal">true</span>;
      <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'destroy'</span>, <span class="hljs-keyword">this</span>, options);
      <span class="hljs-keyword">this</span>.stopListening();
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
    }
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-25">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-25">&#182;</a>
              </div>
              <ul>
<li>channelName</li>
<li>radioEvents</li>
<li>radioRequests</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>
  <span class="hljs-keyword">var</span> RadioMixin = {
    <span class="hljs-attr">_initRadio</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_initRadio</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">var</span> channelName = _.result(<span class="hljs-keyword">this</span>, <span class="hljs-string">'channelName'</span>);

      <span class="hljs-keyword">if</span> (!channelName) {
        <span class="hljs-keyword">return</span>;
      }
      <span class="hljs-comment">/* istanbul ignore next */</span>


      <span class="hljs-keyword">if</span> (!Radio) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> MarionetteError({
          <span class="hljs-attr">message</span>: <span class="hljs-string">'The dependency "backbone.radio" is missing.'</span>,
          <span class="hljs-attr">url</span>: <span class="hljs-string">'backbone.radio.html#marionette-integration'</span>
        });
      }

      <span class="hljs-keyword">var</span> channel = <span class="hljs-keyword">this</span>._channel = Radio.channel(channelName);

      <span class="hljs-keyword">var</span> radioEvents = _.result(<span class="hljs-keyword">this</span>, <span class="hljs-string">'radioEvents'</span>);

      <span class="hljs-keyword">this</span>.bindEvents(channel, radioEvents);

      <span class="hljs-keyword">var</span> radioRequests = _.result(<span class="hljs-keyword">this</span>, <span class="hljs-string">'radioRequests'</span>);

      <span class="hljs-keyword">this</span>.bindRequests(channel, radioRequests);
      <span class="hljs-keyword">this</span>.on(<span class="hljs-string">'destroy'</span>, <span class="hljs-keyword">this</span>._destroyRadio);
    },
    <span class="hljs-attr">_destroyRadio</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_destroyRadio</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">this</span>._channel.stopReplying(<span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>, <span class="hljs-keyword">this</span>);
    },
    <span class="hljs-attr">getChannel</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getChannel</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._channel;
    }
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-26">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-26">&#182;</a>
              </div>
              <p>Object</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">var</span> ClassOptions = [<span class="hljs-string">'channelName'</span>, <span class="hljs-string">'radioEvents'</span>, <span class="hljs-string">'radioRequests'</span>]; <span class="hljs-comment">// Object borrows many conventions and utilities from Backbone.</span>

  <span class="hljs-keyword">var</span> MarionetteObject = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">MarionetteObject</span>(<span class="hljs-params">options</span>) </span>{
    <span class="hljs-keyword">this</span>._setOptions(options, ClassOptions);

    <span class="hljs-keyword">this</span>.cid = _.uniqueId(<span class="hljs-keyword">this</span>.cidPrefix);

    <span class="hljs-keyword">this</span>._initRadio();

    <span class="hljs-keyword">this</span>.initialize.apply(<span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span>);
  };

  MarionetteObject.extend = extend; <span class="hljs-comment">// Object Methods</span></pre></div></div>
            
        </li>
        
        
        <li id="section-27">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-27">&#182;</a>
              </div>
              <hr>

            </div>
            
        </li>
        
        
        <li id="section-28">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-28">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>
  _.extend(MarionetteObject.prototype, CommonMixin, DestroyMixin, RadioMixin, {
    <span class="hljs-attr">cidPrefix</span>: <span class="hljs-string">'mno'</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-29">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-29">&#182;</a>
              </div>
              <p>This is a noop method intended to be overridden</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    initialize: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">initialize</span>(<span class="hljs-params"></span>) </span>{}
  });</pre></div></div>
            
        </li>
        
        
        <li id="section-30">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-30">&#182;</a>
              </div>
              <p>Implementation of the invoke method (<a href="http://underscorejs.org/#invoke">http://underscorejs.org/#invoke</a>) with support for</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">var</span> _invoke = _.invokeMap || _.invoke;</pre></div></div>
            
        </li>
        
        
        <li id="section-31">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-31">&#182;</a>
              </div>
              <ul>
<li>behaviors
Takes care of getting the behavior class
given options and a key.
If a user passes in options.behaviorClass
default to using that.
If a user passes in a Behavior Class directly, use that
Otherwise an error is thrown</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getBehaviorClass</span>(<span class="hljs-params">options</span>) </span>{
    <span class="hljs-keyword">if</span> (options.behaviorClass) {
      <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">BehaviorClass</span>: options.behaviorClass,
        <span class="hljs-attr">options</span>: options
      };
    } <span class="hljs-comment">//treat functions as a Behavior constructor</span>


    <span class="hljs-keyword">if</span> (_.isFunction(options)) {
      <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">BehaviorClass</span>: options,
        <span class="hljs-attr">options</span>: {}
      };
    }

    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> MarionetteError({
      <span class="hljs-attr">message</span>: <span class="hljs-string">'Unable to get behavior class. A Behavior constructor should be passed directly or as behaviorClass property of options'</span>,
      <span class="hljs-attr">url</span>: <span class="hljs-string">'marionette.behavior.html#defining-and-attaching-behaviors'</span>
    });
  } <span class="hljs-comment">// Iterate over the behaviors object, for each behavior</span></pre></div></div>
            
        </li>
        
        
        <li id="section-32">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-32">&#182;</a>
              </div>
              <p>instantiate it and get its grouped behaviors.
This accepts a list of behaviors in either an object or array form</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">parseBehaviors</span>(<span class="hljs-params">view, behaviors, allBehaviors</span>) </span>{
    <span class="hljs-keyword">return</span> _.reduce(behaviors, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">reducedBehaviors, behaviorDefiniton</span>) </span>{
      <span class="hljs-keyword">var</span> _getBehaviorClass = getBehaviorClass(behaviorDefiniton),
          BehaviorClass = _getBehaviorClass.BehaviorClass,
          options = _getBehaviorClass.options;

      <span class="hljs-keyword">var</span> behavior = <span class="hljs-keyword">new</span> BehaviorClass(options, view);
      reducedBehaviors.push(behavior);
      <span class="hljs-keyword">return</span> parseBehaviors(view, _.result(behavior, <span class="hljs-string">'behaviors'</span>), reducedBehaviors);
    }, allBehaviors);
  }

  <span class="hljs-keyword">var</span> BehaviorsMixin = {
    <span class="hljs-attr">_initBehaviors</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_initBehaviors</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">this</span>._behaviors = parseBehaviors(<span class="hljs-keyword">this</span>, _.result(<span class="hljs-keyword">this</span>, <span class="hljs-string">'behaviors'</span>), []);
    },
    <span class="hljs-attr">_getBehaviorTriggers</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_getBehaviorTriggers</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">var</span> triggers = _invoke(<span class="hljs-keyword">this</span>._behaviors, <span class="hljs-string">'_getTriggers'</span>);

      <span class="hljs-keyword">return</span> _.reduce(triggers, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">memo, _triggers</span>) </span>{
        <span class="hljs-keyword">return</span> _.extend(memo, _triggers);
      }, {});
    },
    <span class="hljs-attr">_getBehaviorEvents</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_getBehaviorEvents</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">var</span> events = _invoke(<span class="hljs-keyword">this</span>._behaviors, <span class="hljs-string">'_getEvents'</span>);

      <span class="hljs-keyword">return</span> _.reduce(events, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">memo, _events</span>) </span>{
        <span class="hljs-keyword">return</span> _.extend(memo, _events);
      }, {});
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-33">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-33">&#182;</a>
              </div>
              <p>proxy behavior $el to the view’s $el.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _proxyBehaviorViewProperties: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_proxyBehaviorViewProperties</span>(<span class="hljs-params"></span>) </span>{
      _invoke(<span class="hljs-keyword">this</span>._behaviors, <span class="hljs-string">'proxyViewProperties'</span>);
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-34">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-34">&#182;</a>
              </div>
              <p>delegate modelEvents and collectionEvents</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _delegateBehaviorEntityEvents: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_delegateBehaviorEntityEvents</span>(<span class="hljs-params"></span>) </span>{
      _invoke(<span class="hljs-keyword">this</span>._behaviors, <span class="hljs-string">'delegateEntityEvents'</span>);
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-35">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-35">&#182;</a>
              </div>
              <p>undelegate modelEvents and collectionEvents</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _undelegateBehaviorEntityEvents: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_undelegateBehaviorEntityEvents</span>(<span class="hljs-params"></span>) </span>{
      _invoke(<span class="hljs-keyword">this</span>._behaviors, <span class="hljs-string">'undelegateEntityEvents'</span>);
    },
    <span class="hljs-attr">_destroyBehaviors</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_destroyBehaviors</span>(<span class="hljs-params">options</span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-36">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-36">&#182;</a>
              </div>
              <p>Call destroy on each behavior after
destroying the view.
This unbinds event listeners
that behaviors have registered for.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      _invoke(<span class="hljs-keyword">this</span>._behaviors, <span class="hljs-string">'destroy'</span>, options);
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-37">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-37">&#182;</a>
              </div>
              <p>Remove a behavior</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _removeBehavior: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_removeBehavior</span>(<span class="hljs-params">behavior</span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-38">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-38">&#182;</a>
              </div>
              <p>Don’t worry about the clean up if the view is destroyed</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._isDestroyed) {
        <span class="hljs-keyword">return</span>;
      } <span class="hljs-comment">// Remove behavior-only triggers and events</span>


      <span class="hljs-keyword">this</span>.undelegate(<span class="hljs-string">".trig"</span>.concat(behavior.cid, <span class="hljs-string">" ."</span>).concat(behavior.cid));
      <span class="hljs-keyword">this</span>._behaviors = _.without(<span class="hljs-keyword">this</span>._behaviors, behavior);
    },
    <span class="hljs-attr">_bindBehaviorUIElements</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_bindBehaviorUIElements</span>(<span class="hljs-params"></span>) </span>{
      _invoke(<span class="hljs-keyword">this</span>._behaviors, <span class="hljs-string">'bindUIElements'</span>);
    },
    <span class="hljs-attr">_unbindBehaviorUIElements</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_unbindBehaviorUIElements</span>(<span class="hljs-params"></span>) </span>{
      _invoke(<span class="hljs-keyword">this</span>._behaviors, <span class="hljs-string">'unbindUIElements'</span>);
    },
    <span class="hljs-attr">_triggerEventOnBehaviors</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_triggerEventOnBehaviors</span>(<span class="hljs-params">eventName, view, options</span>) </span>{
      _invoke(<span class="hljs-keyword">this</span>._behaviors, <span class="hljs-string">'triggerMethod'</span>, eventName, view, options);
    }
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-39">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-39">&#182;</a>
              </div>
              <ul>
<li>collectionEvents</li>
<li>modelEvents</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>
  <span class="hljs-keyword">var</span> DelegateEntityEventsMixin = {</pre></div></div>
            
        </li>
        
        
        <li id="section-40">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-40">&#182;</a>
              </div>
              <p>Handle <code>modelEvents</code>, and <code>collectionEvents</code> configuration</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _delegateEntityEvents: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_delegateEntityEvents</span>(<span class="hljs-params">model, collection</span>) </span>{
      <span class="hljs-keyword">if</span> (model) {
        <span class="hljs-keyword">this</span>._modelEvents = _.result(<span class="hljs-keyword">this</span>, <span class="hljs-string">'modelEvents'</span>);
        <span class="hljs-keyword">this</span>.bindEvents(model, <span class="hljs-keyword">this</span>._modelEvents);
      }

      <span class="hljs-keyword">if</span> (collection) {
        <span class="hljs-keyword">this</span>._collectionEvents = _.result(<span class="hljs-keyword">this</span>, <span class="hljs-string">'collectionEvents'</span>);
        <span class="hljs-keyword">this</span>.bindEvents(collection, <span class="hljs-keyword">this</span>._collectionEvents);
      }
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-41">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-41">&#182;</a>
              </div>
              <p>Remove any previously delegate entity events</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _undelegateEntityEvents: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_undelegateEntityEvents</span>(<span class="hljs-params">model, collection</span>) </span>{
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._modelEvents) {
        <span class="hljs-keyword">this</span>.unbindEvents(model, <span class="hljs-keyword">this</span>._modelEvents);
        <span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>._modelEvents;
      }

      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._collectionEvents) {
        <span class="hljs-keyword">this</span>.unbindEvents(collection, <span class="hljs-keyword">this</span>._collectionEvents);
        <span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>._collectionEvents;
      }
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-42">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-42">&#182;</a>
              </div>
              <p>Remove cached event handlers</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _deleteEntityEventHandlers: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_deleteEntityEventHandlers</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>._modelEvents;
      <span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>._collectionEvents;
    }
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-43">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-43">&#182;</a>
              </div>
              <ul>
<li>template</li>
<li>templateContext</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>
  <span class="hljs-keyword">var</span> TemplateRenderMixin = {</pre></div></div>
            
        </li>
        
        
        <li id="section-44">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-44">&#182;</a>
              </div>
              <p>Internal method to render the template with the serialized data
and template context</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _renderTemplate: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_renderTemplate</span>(<span class="hljs-params">template</span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-45">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-45">&#182;</a>
              </div>
              <p>Add in entity data and template context</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">var</span> data = <span class="hljs-keyword">this</span>.mixinTemplateContext(<span class="hljs-keyword">this</span>.serializeData()) || {}; <span class="hljs-comment">// Render and add to el</span>

      <span class="hljs-keyword">var</span> html = <span class="hljs-keyword">this</span>._renderHtml(template, data);

      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> html !== <span class="hljs-string">'undefined'</span>) {
        <span class="hljs-keyword">this</span>.attachElContent(html);
      }
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-46">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-46">&#182;</a>
              </div>
              <p>Get the template for this view instance.
You can set a <code>template</code> attribute in the view definition
or pass a <code>template: TemplateFunction</code> parameter in
to the constructor options.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    getTemplate: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getTemplate</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.template;
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-47">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-47">&#182;</a>
              </div>
              <p>Mix in template context methods. Looks for a
<code>templateContext</code> attribute, which can either be an
object literal, or a function that returns an object
literal. All methods and attributes from this object
are copies to the object passed in.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    mixinTemplateContext: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">mixinTemplateContext</span>(<span class="hljs-params">serializedData</span>) </span>{
      <span class="hljs-keyword">var</span> templateContext = _.result(<span class="hljs-keyword">this</span>, <span class="hljs-string">'templateContext'</span>);

      <span class="hljs-keyword">if</span> (!templateContext) {
        <span class="hljs-keyword">return</span> serializedData;
      }

      <span class="hljs-keyword">if</span> (!serializedData) {
        <span class="hljs-keyword">return</span> templateContext;
      }

      <span class="hljs-keyword">return</span> _.extend({}, serializedData, templateContext);
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-48">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-48">&#182;</a>
              </div>
              <p>Serialize the view’s model <em>or</em> collection, if
it exists, for the template</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    serializeData: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">serializeData</span>(<span class="hljs-params"></span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-49">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-49">&#182;</a>
              </div>
              <p>If we have a model, we serialize that</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.model) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.serializeModel();
      } <span class="hljs-comment">// Otherwise, we serialize the collection,</span></pre></div></div>
            
        </li>
        
        
        <li id="section-50">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-50">&#182;</a>
              </div>
              <p>making it available under the <code>items</code> property</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>

      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.collection) {
        <span class="hljs-keyword">return</span> {
          <span class="hljs-attr">items</span>: <span class="hljs-keyword">this</span>.serializeCollection()
        };
      }
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-51">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-51">&#182;</a>
              </div>
              <p>Prepares the special <code>model</code> property of a view
for being displayed in the template. Override this if
you need a custom transformation for your view’s model</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    serializeModel: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">serializeModel</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.model.attributes;
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-52">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-52">&#182;</a>
              </div>
              <p>Serialize a collection</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    serializeCollection: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">serializeCollection</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">return</span> _.map(<span class="hljs-keyword">this</span>.collection.models, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">model</span>) </span>{
        <span class="hljs-keyword">return</span> model.attributes;
      });
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-53">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-53">&#182;</a>
              </div>
              <p>Renders the data into the template</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _renderHtml: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_renderHtml</span>(<span class="hljs-params">template, data</span>) </span>{
      <span class="hljs-keyword">return</span> template(data);
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-54">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-54">&#182;</a>
              </div>
              <p>Attaches the content of a given view.
This method can be overridden to optimize rendering,
or to render in a non standard way.</p>
<p>For example, using <code>innerHTML</code> instead of <code>$el.html</code></p>
<pre><code class="lang-js">attachElContent(html) {
  <span class="hljs-keyword">this</span>.el.innerHTML = html;
}
</code></pre>

            </div>
            
            <div class="content"><div class='highlight'><pre>    attachElContent: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">attachElContent</span>(<span class="hljs-params">html</span>) </span>{
      <span class="hljs-keyword">this</span>.Dom.setContents(<span class="hljs-keyword">this</span>.el, html, <span class="hljs-keyword">this</span>.$el);
    }
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-55">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-55">&#182;</a>
              </div>
              <p>Borrow event splitter from Backbone</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">var</span> delegateEventSplitter = <span class="hljs-regexp">/^(\S+)\s*(.*)$/</span>; <span class="hljs-comment">// Set event name to be namespaced using a unique index</span></pre></div></div>
            
        </li>
        
        
        <li id="section-56">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-56">&#182;</a>
              </div>
              <p>to generate a non colliding event namespace
<a href="http://api.jquery.com/event.namespace/">http://api.jquery.com/event.namespace/</a></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
  <span class="hljs-keyword">var</span> getNamespacedEventName = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getNamespacedEventName</span>(<span class="hljs-params">eventName, namespace</span>) </span>{
    <span class="hljs-keyword">var</span> match = eventName.match(delegateEventSplitter);
    <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>.concat(match[<span class="hljs-number">1</span>], <span class="hljs-string">"."</span>).concat(namespace, <span class="hljs-string">" "</span>).concat(match[<span class="hljs-number">2</span>]);
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-57">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-57">&#182;</a>
              </div>
              <p>Add Feature flags here
e.g. ‘class’ =&gt; false</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">var</span> FEATURES = {
    <span class="hljs-attr">childViewEventPrefix</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">triggersStopPropagation</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">triggersPreventDefault</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">DEV_MODE</span>: <span class="hljs-literal">false</span>
  };

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isEnabled</span>(<span class="hljs-params">name</span>) </span>{
    <span class="hljs-keyword">return</span> !!FEATURES[name];
  }

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setEnabled</span>(<span class="hljs-params">name, state</span>) </span>{
    <span class="hljs-keyword">return</span> FEATURES[name] = state;
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-58">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-58">&#182;</a>
              </div>
              <p>‘click:foo’</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">buildViewTrigger</span>(<span class="hljs-params">view, triggerDef</span>) </span>{
    <span class="hljs-keyword">if</span> (_.isString(triggerDef)) {
      triggerDef = {
        <span class="hljs-attr">event</span>: triggerDef
      };
    }

    <span class="hljs-keyword">var</span> eventName = triggerDef.event;
    <span class="hljs-keyword">var</span> shouldPreventDefault = !!triggerDef.preventDefault;

    <span class="hljs-keyword">if</span> (isEnabled(<span class="hljs-string">'triggersPreventDefault'</span>)) {
      shouldPreventDefault = triggerDef.preventDefault !== <span class="hljs-literal">false</span>;
    }

    <span class="hljs-keyword">var</span> shouldStopPropagation = !!triggerDef.stopPropagation;

    <span class="hljs-keyword">if</span> (isEnabled(<span class="hljs-string">'triggersStopPropagation'</span>)) {
      shouldStopPropagation = triggerDef.stopPropagation !== <span class="hljs-literal">false</span>;
    }

    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">event</span>) </span>{
      <span class="hljs-keyword">if</span> (shouldPreventDefault) {
        event.preventDefault();
      }

      <span class="hljs-keyword">if</span> (shouldStopPropagation) {
        event.stopPropagation();
      }

      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> _len = <span class="hljs-built_in">arguments</span>.length, args = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(_len &gt; <span class="hljs-number">1</span> ? _len - <span class="hljs-number">1</span> : <span class="hljs-number">0</span>), _key = <span class="hljs-number">1</span>; _key &lt; _len; _key++) {
        args[_key - <span class="hljs-number">1</span>] = <span class="hljs-built_in">arguments</span>[_key];
      }

      view.triggerMethod.apply(view, [eventName, view, event].concat(args));
    };
  }

  <span class="hljs-keyword">var</span> TriggersMixin = {</pre></div></div>
            
        </li>
        
        
        <li id="section-59">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-59">&#182;</a>
              </div>
              <p>Configure <code>triggers</code> to forward DOM events to view
events. <code>triggers: {&quot;click .foo&quot;: &quot;do:foo&quot;}</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _getViewTriggers: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_getViewTriggers</span>(<span class="hljs-params">view, triggers</span>) </span>{
      <span class="hljs-keyword">var</span> _this = <span class="hljs-keyword">this</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-60">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-60">&#182;</a>
              </div>
              <p>Configure the triggers, prevent default
action and stop propagation of DOM events</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">return</span> _.reduce(triggers, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">events, value, key</span>) </span>{
        key = getNamespacedEventName(key, <span class="hljs-string">"trig"</span>.concat(_this.cid));
        events[key] = buildViewTrigger(view, value);
        <span class="hljs-keyword">return</span> events;
      }, {});
    }
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-61">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-61">&#182;</a>
              </div>
              <p>a given key for triggers and events
swaps the @ui with the associated selector.
Returns a new, non-mutated, parsed events hash.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
  <span class="hljs-keyword">var</span> _normalizeUIKeys = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">normalizeUIKeys</span>(<span class="hljs-params">hash, ui</span>) </span>{
    <span class="hljs-keyword">return</span> _.reduce(hash, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">memo, val, key</span>) </span>{
      <span class="hljs-keyword">var</span> normalizedKey = _normalizeUIString(key, ui);

      memo[normalizedKey] = val;
      <span class="hljs-keyword">return</span> memo;
    }, {});
  };

  <span class="hljs-keyword">var</span> uiRegEx = <span class="hljs-regexp">/@ui\.[a-zA-Z-_$0-9]*/g</span>; <span class="hljs-comment">// utility method for parsing @ui. syntax strings</span></pre></div></div>
            
        </li>
        
        
        <li id="section-62">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-62">&#182;</a>
              </div>
              <p>into associated selector</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
  <span class="hljs-keyword">var</span> _normalizeUIString = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">normalizeUIString</span>(<span class="hljs-params">uiString, ui</span>) </span>{
    <span class="hljs-keyword">return</span> uiString.replace(uiRegEx, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">r</span>) </span>{
      <span class="hljs-keyword">return</span> ui[r.slice(<span class="hljs-number">4</span>)];
    });
  }; <span class="hljs-comment">// allows for the use of the @ui. syntax within</span></pre></div></div>
            
        </li>
        
        
        <li id="section-63">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-63">&#182;</a>
              </div>
              <p>a given value for regions
swaps the @ui with the associated selector</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>

  <span class="hljs-keyword">var</span> _normalizeUIValues = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">normalizeUIValues</span>(<span class="hljs-params">hash, ui, property</span>) </span>{
    _.each(hash, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">val, key</span>) </span>{
      <span class="hljs-keyword">if</span> (_.isString(val)) {
        hash[key] = _normalizeUIString(val, ui);
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (val) {
        <span class="hljs-keyword">var</span> propertyVal = val[property];

        <span class="hljs-keyword">if</span> (_.isString(propertyVal)) {
          val[property] = _normalizeUIString(propertyVal, ui);
        }
      }
    });

    <span class="hljs-keyword">return</span> hash;
  };

  <span class="hljs-keyword">var</span> UIMixin = {</pre></div></div>
            
        </li>
        
        
        <li id="section-64">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-64">&#182;</a>
              </div>
              <p>normalize the keys of passed hash with the views <code>ui</code> selectors.
<code>{&quot;@ui.foo&quot;: &quot;bar&quot;}</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    normalizeUIKeys: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">normalizeUIKeys</span>(<span class="hljs-params">hash</span>) </span>{
      <span class="hljs-keyword">var</span> uiBindings = <span class="hljs-keyword">this</span>._getUIBindings();

      <span class="hljs-keyword">return</span> _normalizeUIKeys(hash, uiBindings);
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-65">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-65">&#182;</a>
              </div>
              <p>normalize the passed string with the views <code>ui</code> selectors.
<code>&quot;@ui.bar&quot;</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    normalizeUIString: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">normalizeUIString</span>(<span class="hljs-params">uiString</span>) </span>{
      <span class="hljs-keyword">var</span> uiBindings = <span class="hljs-keyword">this</span>._getUIBindings();

      <span class="hljs-keyword">return</span> _normalizeUIString(uiString, uiBindings);
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-66">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-66">&#182;</a>
              </div>
              <p>normalize the values of passed hash with the views <code>ui</code> selectors.
<code>{foo: &quot;@ui.bar&quot;}</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    normalizeUIValues: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">normalizeUIValues</span>(<span class="hljs-params">hash, property</span>) </span>{
      <span class="hljs-keyword">var</span> uiBindings = <span class="hljs-keyword">this</span>._getUIBindings();

      <span class="hljs-keyword">return</span> _normalizeUIValues(hash, uiBindings, property);
    },
    <span class="hljs-attr">_getUIBindings</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_getUIBindings</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">var</span> uiBindings = _.result(<span class="hljs-keyword">this</span>, <span class="hljs-string">'_uiBindings'</span>);

      <span class="hljs-keyword">return</span> uiBindings || _.result(<span class="hljs-keyword">this</span>, <span class="hljs-string">'ui'</span>);
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-67">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-67">&#182;</a>
              </div>
              <p>This method binds the elements specified in the “ui” hash inside the view’s code with
the associated jQuery selectors.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _bindUIElements: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_bindUIElements</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">var</span> _this = <span class="hljs-keyword">this</span>;

      <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.ui) {
        <span class="hljs-keyword">return</span>;
      } <span class="hljs-comment">// store the ui hash in _uiBindings so they can be reset later</span></pre></div></div>
            
        </li>
        
        
        <li id="section-68">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-68">&#182;</a>
              </div>
              <p>and so re-rendering the view will be able to find the bindings</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>

      <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>._uiBindings) {
        <span class="hljs-keyword">this</span>._uiBindings = <span class="hljs-keyword">this</span>.ui;
      } <span class="hljs-comment">// get the bindings result, as a function or otherwise</span>


      <span class="hljs-keyword">var</span> bindings = _.result(<span class="hljs-keyword">this</span>, <span class="hljs-string">'_uiBindings'</span>); <span class="hljs-comment">// empty the ui so we don't have anything to start with</span>


      <span class="hljs-keyword">this</span>._ui = {}; <span class="hljs-comment">// bind each of the selectors</span>

      _.each(bindings, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">selector, key</span>) </span>{
        _this._ui[key] = _this.$(selector);
      });

      <span class="hljs-keyword">this</span>.ui = <span class="hljs-keyword">this</span>._ui;
    },
    <span class="hljs-attr">_unbindUIElements</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_unbindUIElements</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">var</span> _this2 = <span class="hljs-keyword">this</span>;

      <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.ui || !<span class="hljs-keyword">this</span>._uiBindings) {
        <span class="hljs-keyword">return</span>;
      } <span class="hljs-comment">// delete all of the existing ui bindings</span>


      _.each(<span class="hljs-keyword">this</span>.ui, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">$el, name</span>) </span>{
        <span class="hljs-keyword">delete</span> _this2.ui[name];
      }); <span class="hljs-comment">// reset the ui element to the original bindings configuration</span>


      <span class="hljs-keyword">this</span>.ui = <span class="hljs-keyword">this</span>._uiBindings;
      <span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>._uiBindings;
      <span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>._ui;
    },
    <span class="hljs-attr">_getUI</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_getUI</span>(<span class="hljs-params">name</span>) </span>{
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._ui[name];
    }
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-69">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-69">&#182;</a>
              </div>
              <p>DomApi</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_getEl</span>(<span class="hljs-params">el</span>) </span>{
    <span class="hljs-keyword">return</span> el <span class="hljs-keyword">instanceof</span> Backbone.$ ? el : Backbone.$(el);
  } <span class="hljs-comment">// Static setter</span>


  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setDomApi</span>(<span class="hljs-params">mixin</span>) </span>{
    <span class="hljs-keyword">this</span>.prototype.Dom = _.extend({}, <span class="hljs-keyword">this</span>.prototype.Dom, mixin);
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
  }
  <span class="hljs-keyword">var</span> DomApi = {</pre></div></div>
            
        </li>
        
        
        <li id="section-70">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-70">&#182;</a>
              </div>
              <p>Returns a new HTML DOM node instance</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    createBuffer: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createBuffer</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">return</span> <span class="hljs-built_in">document</span>.createDocumentFragment();
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-71">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-71">&#182;</a>
              </div>
              <p>Returns the document element for a given DOM element</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    getDocumentEl: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getDocumentEl</span>(<span class="hljs-params">el</span>) </span>{
      <span class="hljs-keyword">return</span> el.ownerDocument.documentElement;
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-72">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-72">&#182;</a>
              </div>
              <p>Lookup the <code>selector</code> string
Selector may also be a DOM element
Returns an array-like object of nodes</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    getEl: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getEl</span>(<span class="hljs-params">selector</span>) </span>{
      <span class="hljs-keyword">return</span> _getEl(selector);
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-73">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-73">&#182;</a>
              </div>
              <p>Finds the <code>selector</code> string with the el
Returns an array-like object of nodes</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    findEl: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">findEl</span>(<span class="hljs-params">el, selector</span>) </span>{
      <span class="hljs-keyword">return</span> _getEl(el).find(selector);
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-74">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-74">&#182;</a>
              </div>
              <p>Returns true if the el contains the node childEl</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    hasEl: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">hasEl</span>(<span class="hljs-params">el, childEl</span>) </span>{
      <span class="hljs-keyword">return</span> el.contains(childEl &amp;&amp; childEl.parentNode);
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-75">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-75">&#182;</a>
              </div>
              <p>Detach <code>el</code> from the DOM without removing listeners</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    detachEl: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">detachEl</span>(<span class="hljs-params">el</span>) </span>{
      <span class="hljs-keyword">var</span> _$el = <span class="hljs-built_in">arguments</span>.length &gt; <span class="hljs-number">1</span> &amp;&amp; <span class="hljs-built_in">arguments</span>[<span class="hljs-number">1</span>] !== <span class="hljs-literal">undefined</span> ? <span class="hljs-built_in">arguments</span>[<span class="hljs-number">1</span>] : _getEl(el);

      _$el.detach();
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-76">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-76">&#182;</a>
              </div>
              <p>Remove <code>oldEl</code> from the DOM and put <code>newEl</code> in its place</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    replaceEl: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">replaceEl</span>(<span class="hljs-params">newEl, oldEl</span>) </span>{
      <span class="hljs-keyword">if</span> (newEl === oldEl) {
        <span class="hljs-keyword">return</span>;
      }

      <span class="hljs-keyword">var</span> parent = oldEl.parentNode;

      <span class="hljs-keyword">if</span> (!parent) {
        <span class="hljs-keyword">return</span>;
      }

      parent.replaceChild(newEl, oldEl);
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-77">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-77">&#182;</a>
              </div>
              <p>Swaps the location of <code>el1</code> and <code>el2</code> in the DOM</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    swapEl: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">swapEl</span>(<span class="hljs-params">el1, el2</span>) </span>{
      <span class="hljs-keyword">if</span> (el1 === el2) {
        <span class="hljs-keyword">return</span>;
      }

      <span class="hljs-keyword">var</span> parent1 = el1.parentNode;
      <span class="hljs-keyword">var</span> parent2 = el2.parentNode;

      <span class="hljs-keyword">if</span> (!parent1 || !parent2) {
        <span class="hljs-keyword">return</span>;
      }

      <span class="hljs-keyword">var</span> next1 = el1.nextSibling;
      <span class="hljs-keyword">var</span> next2 = el2.nextSibling;
      parent1.insertBefore(el2, next1);
      parent2.insertBefore(el1, next2);
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-78">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-78">&#182;</a>
              </div>
              <p>Replace the contents of <code>el</code> with the HTML string of <code>html</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    setContents: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setContents</span>(<span class="hljs-params">el, html</span>) </span>{
      <span class="hljs-keyword">var</span> _$el = <span class="hljs-built_in">arguments</span>.length &gt; <span class="hljs-number">2</span> &amp;&amp; <span class="hljs-built_in">arguments</span>[<span class="hljs-number">2</span>] !== <span class="hljs-literal">undefined</span> ? <span class="hljs-built_in">arguments</span>[<span class="hljs-number">2</span>] : _getEl(el);

      _$el.html(html);
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-79">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-79">&#182;</a>
              </div>
              <p>Takes the DOM node <code>el</code> and appends the DOM node <code>contents</code>
to the end of the element’s contents.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    appendContents: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">appendContents</span>(<span class="hljs-params">el, contents</span>) </span>{
      <span class="hljs-keyword">var</span> _ref = <span class="hljs-built_in">arguments</span>.length &gt; <span class="hljs-number">2</span> &amp;&amp; <span class="hljs-built_in">arguments</span>[<span class="hljs-number">2</span>] !== <span class="hljs-literal">undefined</span> ? <span class="hljs-built_in">arguments</span>[<span class="hljs-number">2</span>] : {},
          _ref$_$el = _ref._$el,
          _$el = _ref$_$el === <span class="hljs-keyword">void</span> <span class="hljs-number">0</span> ? _getEl(el) : _ref$_$el,
          _ref$_$contents = _ref._$contents,
          _$contents = _ref$_$contents === <span class="hljs-keyword">void</span> <span class="hljs-number">0</span> ? _getEl(contents) : _ref$_$contents;

      _$el.append(_$contents);
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-80">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-80">&#182;</a>
              </div>
              <p>Does the el have child nodes</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    hasContents: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">hasContents</span>(<span class="hljs-params">el</span>) </span>{
      <span class="hljs-keyword">return</span> !!el &amp;&amp; el.hasChildNodes();
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-81">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-81">&#182;</a>
              </div>
              <p>Remove the inner contents of <code>el</code> from the DOM while leaving
<code>el</code> itself in the DOM.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    detachContents: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">detachContents</span>(<span class="hljs-params">el</span>) </span>{
      <span class="hljs-keyword">var</span> _$el = <span class="hljs-built_in">arguments</span>.length &gt; <span class="hljs-number">1</span> &amp;&amp; <span class="hljs-built_in">arguments</span>[<span class="hljs-number">1</span>] !== <span class="hljs-literal">undefined</span> ? <span class="hljs-built_in">arguments</span>[<span class="hljs-number">1</span>] : _getEl(el);

      _$el.contents().detach();
    }
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-82">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-82">&#182;</a>
              </div>
              <p>ViewMixin</p>
<ul>
<li>behaviors</li>
<li>childViewEventPrefix</li>
<li>childViewEvents</li>
<li>childViewTriggers</li>
<li>collectionEvents</li>
<li>modelEvents</li>
<li>triggers</li>
<li>ui</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>
  <span class="hljs-keyword">var</span> ViewMixin = {
    <span class="hljs-attr">Dom</span>: DomApi,
    <span class="hljs-attr">_isElAttached</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_isElAttached</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">return</span> !!<span class="hljs-keyword">this</span>.el &amp;&amp; <span class="hljs-keyword">this</span>.Dom.hasEl(<span class="hljs-keyword">this</span>.Dom.getDocumentEl(<span class="hljs-keyword">this</span>.el), <span class="hljs-keyword">this</span>.el);
    },
    <span class="hljs-attr">supportsRenderLifecycle</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">supportsDestroyLifecycle</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">_isDestroyed</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">isDestroyed</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isDestroyed</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">return</span> !!<span class="hljs-keyword">this</span>._isDestroyed;
    },
    <span class="hljs-attr">_isRendered</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">isRendered</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isRendered</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">return</span> !!<span class="hljs-keyword">this</span>._isRendered;
    },
    <span class="hljs-attr">_isAttached</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">isAttached</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isAttached</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">return</span> !!<span class="hljs-keyword">this</span>._isAttached;
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-83">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-83">&#182;</a>
              </div>
              <p>Overriding Backbone.View’s <code>delegateEvents</code> to handle
<code>events</code> and <code>triggers</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    delegateEvents: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">delegateEvents</span>(<span class="hljs-params">events</span>) </span>{
      <span class="hljs-keyword">this</span>._proxyBehaviorViewProperties();

      <span class="hljs-keyword">this</span>._buildEventProxies();

      <span class="hljs-keyword">var</span> combinedEvents = _.extend({}, <span class="hljs-keyword">this</span>._getBehaviorEvents(), <span class="hljs-keyword">this</span>._getEvents(events), <span class="hljs-keyword">this</span>._getBehaviorTriggers(), <span class="hljs-keyword">this</span>._getTriggers());

      Backbone.View.prototype.delegateEvents.call(<span class="hljs-keyword">this</span>, combinedEvents);
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-84">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-84">&#182;</a>
              </div>
              <p>Allows Backbone.View events to utilize <code>@ui.</code> selectors</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _getEvents: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_getEvents</span>(<span class="hljs-params">events</span>) </span>{
      <span class="hljs-keyword">if</span> (events) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.normalizeUIKeys(events);
      }

      <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.events) {
        <span class="hljs-keyword">return</span>;
      }

      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.normalizeUIKeys(_.result(<span class="hljs-keyword">this</span>, <span class="hljs-string">'events'</span>));
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-85">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-85">&#182;</a>
              </div>
              <p>Configure <code>triggers</code> to forward DOM events to view
events. <code>triggers: {&quot;click .foo&quot;: &quot;do:foo&quot;}</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _getTriggers: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_getTriggers</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.triggers) {
        <span class="hljs-keyword">return</span>;
      } <span class="hljs-comment">// Allow `triggers` to be configured as a function</span>


      <span class="hljs-keyword">var</span> triggers = <span class="hljs-keyword">this</span>.normalizeUIKeys(_.result(<span class="hljs-keyword">this</span>, <span class="hljs-string">'triggers'</span>)); <span class="hljs-comment">// Configure the triggers, prevent default</span></pre></div></div>
            
        </li>
        
        
        <li id="section-86">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-86">&#182;</a>
              </div>
              <p>action and stop propagation of DOM events</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._getViewTriggers(<span class="hljs-keyword">this</span>, triggers);
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-87">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-87">&#182;</a>
              </div>
              <p>Handle <code>modelEvents</code>, and <code>collectionEvents</code> configuration</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    delegateEntityEvents: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">delegateEntityEvents</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">this</span>._delegateEntityEvents(<span class="hljs-keyword">this</span>.model, <span class="hljs-keyword">this</span>.collection); <span class="hljs-comment">// bind each behaviors model and collection events</span>


      <span class="hljs-keyword">this</span>._delegateBehaviorEntityEvents();

      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-88">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-88">&#182;</a>
              </div>
              <p>Handle unbinding <code>modelEvents</code>, and <code>collectionEvents</code> configuration</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    undelegateEntityEvents: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">undelegateEntityEvents</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">this</span>._undelegateEntityEvents(<span class="hljs-keyword">this</span>.model, <span class="hljs-keyword">this</span>.collection); <span class="hljs-comment">// unbind each behaviors model and collection events</span>


      <span class="hljs-keyword">this</span>._undelegateBehaviorEntityEvents();

      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-89">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-89">&#182;</a>
              </div>
              <p>Handle destroying the view and its children.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    destroy: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">destroy</span>(<span class="hljs-params">options</span>) </span>{
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._isDestroyed || <span class="hljs-keyword">this</span>._isDestroying) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
      }

      <span class="hljs-keyword">this</span>._isDestroying = <span class="hljs-literal">true</span>;
      <span class="hljs-keyword">var</span> shouldTriggerDetach = <span class="hljs-keyword">this</span>._isAttached &amp;&amp; !<span class="hljs-keyword">this</span>._disableDetachEvents;
      <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'before:destroy'</span>, <span class="hljs-keyword">this</span>, options);

      <span class="hljs-keyword">if</span> (shouldTriggerDetach) {
        <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'before:detach'</span>, <span class="hljs-keyword">this</span>);
      } <span class="hljs-comment">// unbind UI elements</span>


      <span class="hljs-keyword">this</span>.unbindUIElements(); <span class="hljs-comment">// remove the view from the DOM</span>

      <span class="hljs-keyword">this</span>._removeElement();

      <span class="hljs-keyword">if</span> (shouldTriggerDetach) {
        <span class="hljs-keyword">this</span>._isAttached = <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'detach'</span>, <span class="hljs-keyword">this</span>);
      } <span class="hljs-comment">// remove children after the remove to prevent extra paints</span>


      <span class="hljs-keyword">this</span>._removeChildren();

      <span class="hljs-keyword">this</span>._isDestroyed = <span class="hljs-literal">true</span>;
      <span class="hljs-keyword">this</span>._isRendered = <span class="hljs-literal">false</span>; <span class="hljs-comment">// Destroy behaviors after _isDestroyed flag</span>

      <span class="hljs-keyword">this</span>._destroyBehaviors(options);

      <span class="hljs-keyword">this</span>._deleteEntityEventHandlers();

      <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'destroy'</span>, <span class="hljs-keyword">this</span>, options);

      <span class="hljs-keyword">this</span>._triggerEventOnBehaviors(<span class="hljs-string">'destroy'</span>, <span class="hljs-keyword">this</span>, options);

      <span class="hljs-keyword">this</span>.stopListening();
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-90">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-90">&#182;</a>
              </div>
              <p>Equates to this.$el.remove</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _removeElement: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_removeElement</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">this</span>.$el.off().removeData();
      <span class="hljs-keyword">this</span>.Dom.detachEl(<span class="hljs-keyword">this</span>.el, <span class="hljs-keyword">this</span>.$el);
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-91">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-91">&#182;</a>
              </div>
              <p>This method binds the elements specified in the “ui” hash</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    bindUIElements: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">bindUIElements</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">this</span>._bindUIElements();

      <span class="hljs-keyword">this</span>._bindBehaviorUIElements();

      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-92">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-92">&#182;</a>
              </div>
              <p>This method unbinds the elements specified in the “ui” hash</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    unbindUIElements: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">unbindUIElements</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">this</span>._unbindUIElements();

      <span class="hljs-keyword">this</span>._unbindBehaviorUIElements();

      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
    },
    <span class="hljs-attr">getUI</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getUI</span>(<span class="hljs-params">name</span>) </span>{
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._getUI(name);
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-93">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-93">&#182;</a>
              </div>
              <p>Cache <code>childViewEvents</code> and <code>childViewTriggers</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _buildEventProxies: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_buildEventProxies</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">this</span>._childViewEvents = <span class="hljs-keyword">this</span>.normalizeMethods(_.result(<span class="hljs-keyword">this</span>, <span class="hljs-string">'childViewEvents'</span>));
      <span class="hljs-keyword">this</span>._childViewTriggers = _.result(<span class="hljs-keyword">this</span>, <span class="hljs-string">'childViewTriggers'</span>);
      <span class="hljs-keyword">this</span>._eventPrefix = <span class="hljs-keyword">this</span>._getEventPrefix();
    },
    <span class="hljs-attr">_getEventPrefix</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_getEventPrefix</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">var</span> defaultPrefix = isEnabled(<span class="hljs-string">'childViewEventPrefix'</span>) ? <span class="hljs-string">'childview'</span> : <span class="hljs-literal">false</span>;

      <span class="hljs-keyword">var</span> prefix = _.result(<span class="hljs-keyword">this</span>, <span class="hljs-string">'childViewEventPrefix'</span>, defaultPrefix);

      <span class="hljs-keyword">return</span> prefix === <span class="hljs-literal">false</span> ? prefix : prefix + <span class="hljs-string">':'</span>;
    },
    <span class="hljs-attr">_proxyChildViewEvents</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_proxyChildViewEvents</span>(<span class="hljs-params">view</span>) </span>{
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._childViewEvents || <span class="hljs-keyword">this</span>._childViewTriggers || <span class="hljs-keyword">this</span>._eventPrefix) {
        <span class="hljs-keyword">this</span>.listenTo(view, <span class="hljs-string">'all'</span>, <span class="hljs-keyword">this</span>._childViewEventHandler);
      }
    },
    <span class="hljs-attr">_childViewEventHandler</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_childViewEventHandler</span>(<span class="hljs-params">eventName</span>) </span>{
      <span class="hljs-keyword">var</span> childViewEvents = <span class="hljs-keyword">this</span>._childViewEvents; <span class="hljs-comment">// call collectionView childViewEvent if defined</span>

      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> _len = <span class="hljs-built_in">arguments</span>.length, args = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(_len &gt; <span class="hljs-number">1</span> ? _len - <span class="hljs-number">1</span> : <span class="hljs-number">0</span>), _key = <span class="hljs-number">1</span>; _key &lt; _len; _key++) {
        args[_key - <span class="hljs-number">1</span>] = <span class="hljs-built_in">arguments</span>[_key];
      }

      <span class="hljs-keyword">if</span> (childViewEvents &amp;&amp; childViewEvents[eventName]) {
        childViewEvents[eventName].apply(<span class="hljs-keyword">this</span>, args);
      } <span class="hljs-comment">// use the parent view's proxyEvent handlers</span>


      <span class="hljs-keyword">var</span> childViewTriggers = <span class="hljs-keyword">this</span>._childViewTriggers; <span class="hljs-comment">// Call the event with the proxy name on the parent layout</span>

      <span class="hljs-keyword">if</span> (childViewTriggers &amp;&amp; childViewTriggers[eventName]) {
        <span class="hljs-keyword">this</span>.triggerMethod.apply(<span class="hljs-keyword">this</span>, [childViewTriggers[eventName]].concat(args));
      }

      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._eventPrefix) {
        <span class="hljs-keyword">this</span>.triggerMethod.apply(<span class="hljs-keyword">this</span>, [<span class="hljs-keyword">this</span>._eventPrefix + eventName].concat(args));
      }
    }
  };

  _.extend(ViewMixin, BehaviorsMixin, CommonMixin, DelegateEntityEventsMixin, TemplateRenderMixin, TriggersMixin, UIMixin);

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">renderView</span>(<span class="hljs-params">view</span>) </span>{
    <span class="hljs-keyword">if</span> (view._isRendered) {
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-keyword">if</span> (!view.supportsRenderLifecycle) {
      view.triggerMethod(<span class="hljs-string">'before:render'</span>, view);
    }

    view.render();
    view._isRendered = <span class="hljs-literal">true</span>;

    <span class="hljs-keyword">if</span> (!view.supportsRenderLifecycle) {
      view.triggerMethod(<span class="hljs-string">'render'</span>, view);
    }
  }
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">destroyView</span>(<span class="hljs-params">view, disableDetachEvents</span>) </span>{
    <span class="hljs-keyword">if</span> (view.destroy) {</pre></div></div>
            
        </li>
        
        
        <li id="section-94">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-94">&#182;</a>
              </div>
              <p>Attach flag for public destroy function internal check</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      view._disableDetachEvents = disableDetachEvents;
      view.destroy();
      <span class="hljs-keyword">return</span>;
    } <span class="hljs-comment">// Destroy for non-Marionette Views</span>


    <span class="hljs-keyword">if</span> (!view.supportsDestroyLifecycle) {
      view.triggerMethod(<span class="hljs-string">'before:destroy'</span>, view);
    }

    <span class="hljs-keyword">var</span> shouldTriggerDetach = view._isAttached &amp;&amp; !disableDetachEvents;

    <span class="hljs-keyword">if</span> (shouldTriggerDetach) {
      view.triggerMethod(<span class="hljs-string">'before:detach'</span>, view);
    }

    view.remove();

    <span class="hljs-keyword">if</span> (shouldTriggerDetach) {
      view._isAttached = <span class="hljs-literal">false</span>;
      view.triggerMethod(<span class="hljs-string">'detach'</span>, view);
    }

    view._isDestroyed = <span class="hljs-literal">true</span>;

    <span class="hljs-keyword">if</span> (!view.supportsDestroyLifecycle) {
      view.triggerMethod(<span class="hljs-string">'destroy'</span>, view);
    }
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-95">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-95">&#182;</a>
              </div>
              <p>Region</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">var</span> classErrorName = <span class="hljs-string">'RegionError'</span>;
  <span class="hljs-keyword">var</span> ClassOptions$<span class="hljs-number">1</span> = [<span class="hljs-string">'allowMissingEl'</span>, <span class="hljs-string">'parentEl'</span>, <span class="hljs-string">'replaceElement'</span>];

  <span class="hljs-keyword">var</span> Region = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Region</span>(<span class="hljs-params">options</span>) </span>{
    <span class="hljs-keyword">this</span>._setOptions(options, ClassOptions$<span class="hljs-number">1</span>);

    <span class="hljs-keyword">this</span>.cid = _.uniqueId(<span class="hljs-keyword">this</span>.cidPrefix); <span class="hljs-comment">// getOption necessary because options.el may be passed as undefined</span>

    <span class="hljs-keyword">this</span>._initEl = <span class="hljs-keyword">this</span>.el = <span class="hljs-keyword">this</span>.getOption(<span class="hljs-string">'el'</span>); <span class="hljs-comment">// Handle when this.el is passed in as a $ wrapped element.</span>

    <span class="hljs-keyword">this</span>.el = <span class="hljs-keyword">this</span>.el <span class="hljs-keyword">instanceof</span> Backbone.$ ? <span class="hljs-keyword">this</span>.el[<span class="hljs-number">0</span>] : <span class="hljs-keyword">this</span>.el;
    <span class="hljs-keyword">this</span>.$el = <span class="hljs-keyword">this</span>._getEl(<span class="hljs-keyword">this</span>.el);
    <span class="hljs-keyword">this</span>.initialize.apply(<span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span>);
  };

  Region.extend = extend;
  Region.setDomApi = setDomApi; <span class="hljs-comment">// Region Methods</span></pre></div></div>
            
        </li>
        
        
        <li id="section-96">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-96">&#182;</a>
              </div>
              <hr>

            </div>
            
        </li>
        
        
        <li id="section-97">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-97">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>
  _.extend(Region.prototype, CommonMixin, {
    <span class="hljs-attr">Dom</span>: DomApi,
    <span class="hljs-attr">cidPrefix</span>: <span class="hljs-string">'mnr'</span>,
    <span class="hljs-attr">replaceElement</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">_isReplaced</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">_isSwappingView</span>: <span class="hljs-literal">false</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-98">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-98">&#182;</a>
              </div>
              <p>This is a noop method intended to be overridden</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    initialize: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">initialize</span>(<span class="hljs-params"></span>) </span>{},</pre></div></div>
            
        </li>
        
        
        <li id="section-99">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-99">&#182;</a>
              </div>
              <p>Displays a view instance inside of the region. If necessary handles calling the <code>render</code>
method for you. Reads content directly from the <code>el</code> attribute.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    show: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">show</span>(<span class="hljs-params">view, options</span>) </span>{
      <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>._ensureElement(options)) {
        <span class="hljs-keyword">return</span>;
      }

      view = <span class="hljs-keyword">this</span>._getView(view, options);

      <span class="hljs-keyword">if</span> (view === <span class="hljs-keyword">this</span>.currentView) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
      }

      <span class="hljs-keyword">if</span> (view._isShown) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> MarionetteError({
          <span class="hljs-attr">name</span>: classErrorName,
          <span class="hljs-attr">message</span>: <span class="hljs-string">'View is already shown in a Region or CollectionView'</span>,
          <span class="hljs-attr">url</span>: <span class="hljs-string">'marionette.region.html#showing-a-view'</span>
        });
      }

      <span class="hljs-keyword">this</span>._isSwappingView = !!<span class="hljs-keyword">this</span>.currentView;
      <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'before:show'</span>, <span class="hljs-keyword">this</span>, view, options); <span class="hljs-comment">// Assume an attached view is already in the region for pre-existing DOM</span>

      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.currentView || !view._isAttached) {
        <span class="hljs-keyword">this</span>.empty(options);
      }

      <span class="hljs-keyword">this</span>._setupChildView(view);

      <span class="hljs-keyword">this</span>.currentView = view;
      renderView(view);

      <span class="hljs-keyword">this</span>._attachView(view, options);

      <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'show'</span>, <span class="hljs-keyword">this</span>, view, options);
      <span class="hljs-keyword">this</span>._isSwappingView = <span class="hljs-literal">false</span>;
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
    },
    <span class="hljs-attr">_getEl</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_getEl</span>(<span class="hljs-params">el</span>) </span>{
      <span class="hljs-keyword">if</span> (!el) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> MarionetteError({
          <span class="hljs-attr">name</span>: classErrorName,
          <span class="hljs-attr">message</span>: <span class="hljs-string">'An "el" must be specified for a region.'</span>,
          <span class="hljs-attr">url</span>: <span class="hljs-string">'marionette.region.html#additional-options'</span>
        });
      }

      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.getEl(el);
    },
    <span class="hljs-attr">_setEl</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_setEl</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">this</span>.$el = <span class="hljs-keyword">this</span>._getEl(<span class="hljs-keyword">this</span>.el);

      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.$el.length) {
        <span class="hljs-keyword">this</span>.el = <span class="hljs-keyword">this</span>.$el[<span class="hljs-number">0</span>];
      } <span class="hljs-comment">// Make sure the $el contains only the el</span>


      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.$el.length &gt; <span class="hljs-number">1</span>) {
        <span class="hljs-keyword">this</span>.$el = <span class="hljs-keyword">this</span>.Dom.getEl(<span class="hljs-keyword">this</span>.el);
      }
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-100">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-100">&#182;</a>
              </div>
              <p>Set the <code>el</code> of the region and move any current view to the new <code>el</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _setElement: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_setElement</span>(<span class="hljs-params">el</span>) </span>{
      <span class="hljs-keyword">if</span> (el === <span class="hljs-keyword">this</span>.el) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
      }

      <span class="hljs-keyword">var</span> shouldReplace = <span class="hljs-keyword">this</span>._isReplaced;

      <span class="hljs-keyword">this</span>._restoreEl();

      <span class="hljs-keyword">this</span>.el = el;

      <span class="hljs-keyword">this</span>._setEl();

      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.currentView) {
        <span class="hljs-keyword">var</span> view = <span class="hljs-keyword">this</span>.currentView;

        <span class="hljs-keyword">if</span> (shouldReplace) {
          <span class="hljs-keyword">this</span>._replaceEl(view);
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-keyword">this</span>.attachHtml(view);
        }
      }

      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
    },
    <span class="hljs-attr">_setupChildView</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_setupChildView</span>(<span class="hljs-params">view</span>) </span>{
      monitorViewEvents(view);

      <span class="hljs-keyword">this</span>._proxyChildViewEvents(view); <span class="hljs-comment">// We need to listen for if a view is destroyed in a way other than through the region.</span></pre></div></div>
            
        </li>
        
        
        <li id="section-101">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-101">&#182;</a>
              </div>
              <p>If this happens we need to remove the reference to the currentView since once a view
has been destroyed we can not reuse it.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>

      view.on(<span class="hljs-string">'destroy'</span>, <span class="hljs-keyword">this</span>._empty, <span class="hljs-keyword">this</span>);
    },
    <span class="hljs-attr">_proxyChildViewEvents</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_proxyChildViewEvents</span>(<span class="hljs-params">view</span>) </span>{
      <span class="hljs-keyword">var</span> parentView = <span class="hljs-keyword">this</span>._parentView;

      <span class="hljs-keyword">if</span> (!parentView) {
        <span class="hljs-keyword">return</span>;
      }

      parentView._proxyChildViewEvents(view);
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-102">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-102">&#182;</a>
              </div>
              <p>If the regions parent view is not monitoring its attach/detach events</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _shouldDisableMonitoring: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_shouldDisableMonitoring</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._parentView &amp;&amp; <span class="hljs-keyword">this</span>._parentView.monitorViewEvents === <span class="hljs-literal">false</span>;
    },
    <span class="hljs-attr">_isElAttached</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_isElAttached</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.Dom.hasEl(<span class="hljs-keyword">this</span>.Dom.getDocumentEl(<span class="hljs-keyword">this</span>.el), <span class="hljs-keyword">this</span>.el);
    },
    <span class="hljs-attr">_attachView</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_attachView</span>(<span class="hljs-params">view</span>) </span>{
      <span class="hljs-keyword">var</span> _ref = <span class="hljs-built_in">arguments</span>.length &gt; <span class="hljs-number">1</span> &amp;&amp; <span class="hljs-built_in">arguments</span>[<span class="hljs-number">1</span>] !== <span class="hljs-literal">undefined</span> ? <span class="hljs-built_in">arguments</span>[<span class="hljs-number">1</span>] : {},
          replaceElement = _ref.replaceElement;

      <span class="hljs-keyword">var</span> shouldTriggerAttach = !view._isAttached &amp;&amp; <span class="hljs-keyword">this</span>._isElAttached() &amp;&amp; !<span class="hljs-keyword">this</span>._shouldDisableMonitoring();
      <span class="hljs-keyword">var</span> shouldReplaceEl = <span class="hljs-keyword">typeof</span> replaceElement === <span class="hljs-string">'undefined'</span> ? !!_.result(<span class="hljs-keyword">this</span>, <span class="hljs-string">'replaceElement'</span>) : !!replaceElement;

      <span class="hljs-keyword">if</span> (shouldTriggerAttach) {
        view.triggerMethod(<span class="hljs-string">'before:attach'</span>, view);
      }

      <span class="hljs-keyword">if</span> (shouldReplaceEl) {
        <span class="hljs-keyword">this</span>._replaceEl(view);
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">this</span>.attachHtml(view);
      }

      <span class="hljs-keyword">if</span> (shouldTriggerAttach) {
        view._isAttached = <span class="hljs-literal">true</span>;
        view.triggerMethod(<span class="hljs-string">'attach'</span>, view);
      } <span class="hljs-comment">// Corresponds that view is shown in a marionette Region or CollectionView</span>


      view._isShown = <span class="hljs-literal">true</span>;
    },
    <span class="hljs-attr">_ensureElement</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_ensureElement</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">var</span> options = <span class="hljs-built_in">arguments</span>.length &gt; <span class="hljs-number">0</span> &amp;&amp; <span class="hljs-built_in">arguments</span>[<span class="hljs-number">0</span>] !== <span class="hljs-literal">undefined</span> ? <span class="hljs-built_in">arguments</span>[<span class="hljs-number">0</span>] : {};

      <span class="hljs-keyword">if</span> (!_.isObject(<span class="hljs-keyword">this</span>.el)) {
        <span class="hljs-keyword">this</span>._setEl();
      }

      <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.$el || <span class="hljs-keyword">this</span>.$el.length === <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">var</span> allowMissingEl = <span class="hljs-keyword">typeof</span> options.allowMissingEl === <span class="hljs-string">'undefined'</span> ? !!_.result(<span class="hljs-keyword">this</span>, <span class="hljs-string">'allowMissingEl'</span>) : !!options.allowMissingEl;

        <span class="hljs-keyword">if</span> (allowMissingEl) {
          <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> MarionetteError({
            <span class="hljs-attr">name</span>: classErrorName,
            <span class="hljs-attr">message</span>: <span class="hljs-string">"An \"el\" must exist in DOM for this region "</span>.concat(<span class="hljs-keyword">this</span>.cid),
            <span class="hljs-attr">url</span>: <span class="hljs-string">'marionette.region.html#additional-options'</span>
          });
        }
      }

      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    },
    <span class="hljs-attr">_getView</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_getView</span>(<span class="hljs-params">view</span>) </span>{
      <span class="hljs-keyword">if</span> (!view) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> MarionetteError({
          <span class="hljs-attr">name</span>: classErrorName,
          <span class="hljs-attr">message</span>: <span class="hljs-string">'The view passed is undefined and therefore invalid. You must pass a view instance to show.'</span>,
          <span class="hljs-attr">url</span>: <span class="hljs-string">'marionette.region.html#showing-a-view'</span>
        });
      }

      <span class="hljs-keyword">if</span> (view._isDestroyed) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> MarionetteError({
          <span class="hljs-attr">name</span>: classErrorName,
          <span class="hljs-attr">message</span>: <span class="hljs-string">"View (cid: \""</span>.concat(view.cid, <span class="hljs-string">"\") has already been destroyed and cannot be used."</span>),
          <span class="hljs-attr">url</span>: <span class="hljs-string">'marionette.region.html#showing-a-view'</span>
        });
      }

      <span class="hljs-keyword">if</span> (view <span class="hljs-keyword">instanceof</span> Backbone.View) {
        <span class="hljs-keyword">return</span> view;
      }

      <span class="hljs-keyword">var</span> viewOptions = <span class="hljs-keyword">this</span>._getViewOptions(view);

      <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> View(viewOptions);
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-103">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-103">&#182;</a>
              </div>
              <p>This allows for a template or a static string to be
used as a template</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _getViewOptions: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_getViewOptions</span>(<span class="hljs-params">viewOptions</span>) </span>{
      <span class="hljs-keyword">if</span> (_.isFunction(viewOptions)) {
        <span class="hljs-keyword">return</span> {
          <span class="hljs-attr">template</span>: viewOptions
        };
      }

      <span class="hljs-keyword">if</span> (_.isObject(viewOptions)) {
        <span class="hljs-keyword">return</span> viewOptions;
      }

      <span class="hljs-keyword">var</span> template = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">template</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> viewOptions;
      };

      <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">template</span>: template
      };
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-104">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-104">&#182;</a>
              </div>
              <p>Override this method to change how the region finds the DOM element that it manages. Return
a jQuery selector object scoped to a provided parent el or the document if none exists.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    getEl: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getEl</span>(<span class="hljs-params">el</span>) </span>{
      <span class="hljs-keyword">var</span> context = _.result(<span class="hljs-keyword">this</span>, <span class="hljs-string">'parentEl'</span>);

      <span class="hljs-keyword">if</span> (context &amp;&amp; _.isString(el)) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.Dom.findEl(context, el);
      }

      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.Dom.getEl(el);
    },
    <span class="hljs-attr">_replaceEl</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_replaceEl</span>(<span class="hljs-params">view</span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-105">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-105">&#182;</a>
              </div>
              <p>Always restore the el to ensure the regions el is present before replacing</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">this</span>._restoreEl();

      view.on(<span class="hljs-string">'before:destroy'</span>, <span class="hljs-keyword">this</span>._restoreEl, <span class="hljs-keyword">this</span>);
      <span class="hljs-keyword">this</span>.Dom.replaceEl(view.el, <span class="hljs-keyword">this</span>.el);
      <span class="hljs-keyword">this</span>._isReplaced = <span class="hljs-literal">true</span>;
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-106">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-106">&#182;</a>
              </div>
              <p>Restore the region’s element in the DOM.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _restoreEl: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_restoreEl</span>(<span class="hljs-params"></span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-107">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-107">&#182;</a>
              </div>
              <p>There is nothing to replace</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>._isReplaced) {
        <span class="hljs-keyword">return</span>;
      }

      <span class="hljs-keyword">var</span> view = <span class="hljs-keyword">this</span>.currentView;

      <span class="hljs-keyword">if</span> (!view) {
        <span class="hljs-keyword">return</span>;
      }

      <span class="hljs-keyword">this</span>._detachView(view);

      <span class="hljs-keyword">this</span>._isReplaced = <span class="hljs-literal">false</span>;
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-108">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-108">&#182;</a>
              </div>
              <p>Check to see if the region’s el was replaced.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    isReplaced: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isReplaced</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">return</span> !!<span class="hljs-keyword">this</span>._isReplaced;
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-109">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-109">&#182;</a>
              </div>
              <p>Check to see if a view is being swapped by another</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    isSwappingView: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isSwappingView</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">return</span> !!<span class="hljs-keyword">this</span>._isSwappingView;
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-110">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-110">&#182;</a>
              </div>
              <p>Override this method to change how the new view is appended to the <code>$el</code> that the
region is managing</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    attachHtml: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">attachHtml</span>(<span class="hljs-params">view</span>) </span>{
      <span class="hljs-keyword">this</span>.Dom.appendContents(<span class="hljs-keyword">this</span>.el, view.el, {
        <span class="hljs-attr">_$el</span>: <span class="hljs-keyword">this</span>.$el,
        <span class="hljs-attr">_$contents</span>: view.$el
      });
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-111">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-111">&#182;</a>
              </div>
              <p>Destroy the current view, if there is one. If there is no current view,
it will detach any html inside the region’s <code>el</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    empty: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">empty</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">var</span> options = <span class="hljs-built_in">arguments</span>.length &gt; <span class="hljs-number">0</span> &amp;&amp; <span class="hljs-built_in">arguments</span>[<span class="hljs-number">0</span>] !== <span class="hljs-literal">undefined</span> ? <span class="hljs-built_in">arguments</span>[<span class="hljs-number">0</span>] : {
        <span class="hljs-attr">allowMissingEl</span>: <span class="hljs-literal">true</span>
      };
      <span class="hljs-keyword">var</span> view = <span class="hljs-keyword">this</span>.currentView; <span class="hljs-comment">// If there is no view in the region we should only detach current html</span>

      <span class="hljs-keyword">if</span> (!view) {
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._ensureElement(options)) {
          <span class="hljs-keyword">this</span>.detachHtml();
        }

        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
      }

      <span class="hljs-keyword">this</span>._empty(view, <span class="hljs-literal">true</span>);

      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
    },
    <span class="hljs-attr">_empty</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_empty</span>(<span class="hljs-params">view, shouldDestroy</span>) </span>{
      view.off(<span class="hljs-string">'destroy'</span>, <span class="hljs-keyword">this</span>._empty, <span class="hljs-keyword">this</span>);
      <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'before:empty'</span>, <span class="hljs-keyword">this</span>, view);

      <span class="hljs-keyword">this</span>._restoreEl();

      <span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>.currentView;

      <span class="hljs-keyword">if</span> (!view._isDestroyed) {
        <span class="hljs-keyword">if</span> (shouldDestroy) {
          <span class="hljs-keyword">this</span>.removeView(view);
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-keyword">this</span>._detachView(view);
        }

        view._isShown = <span class="hljs-literal">false</span>;

        <span class="hljs-keyword">this</span>._stopChildViewEvents(view);
      }

      <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'empty'</span>, <span class="hljs-keyword">this</span>, view);
    },
    <span class="hljs-attr">_stopChildViewEvents</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_stopChildViewEvents</span>(<span class="hljs-params">view</span>) </span>{
      <span class="hljs-keyword">var</span> parentView = <span class="hljs-keyword">this</span>._parentView;

      <span class="hljs-keyword">if</span> (!parentView) {
        <span class="hljs-keyword">return</span>;
      }

      <span class="hljs-keyword">this</span>._parentView.stopListening(view);
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-112">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-112">&#182;</a>
              </div>
              <p>Non-Marionette safe view.destroy</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    destroyView: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">destroyView$1</span>(<span class="hljs-params">view</span>) </span>{
      <span class="hljs-keyword">if</span> (view._isDestroyed) {
        <span class="hljs-keyword">return</span> view;
      }

      destroyView(view, <span class="hljs-keyword">this</span>._shouldDisableMonitoring());

      <span class="hljs-keyword">return</span> view;
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-113">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-113">&#182;</a>
              </div>
              <p>Override this method to determine what happens when the view
is removed from the region when the view is not being detached</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    removeView: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">removeView</span>(<span class="hljs-params">view</span>) </span>{
      <span class="hljs-keyword">this</span>.destroyView(view);
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-114">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-114">&#182;</a>
              </div>
              <p>Empties the Region without destroying the view
Returns the detached view</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    detachView: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">detachView</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">var</span> view = <span class="hljs-keyword">this</span>.currentView;

      <span class="hljs-keyword">if</span> (!view) {
        <span class="hljs-keyword">return</span>;
      }

      <span class="hljs-keyword">this</span>._empty(view);

      <span class="hljs-keyword">return</span> view;
    },
    <span class="hljs-attr">_detachView</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_detachView</span>(<span class="hljs-params">view</span>) </span>{
      <span class="hljs-keyword">var</span> shouldTriggerDetach = view._isAttached &amp;&amp; !<span class="hljs-keyword">this</span>._shouldDisableMonitoring();
      <span class="hljs-keyword">var</span> shouldRestoreEl = <span class="hljs-keyword">this</span>._isReplaced;

      <span class="hljs-keyword">if</span> (shouldTriggerDetach) {
        view.triggerMethod(<span class="hljs-string">'before:detach'</span>, view);
      }

      <span class="hljs-keyword">if</span> (shouldRestoreEl) {
        <span class="hljs-keyword">this</span>.Dom.replaceEl(<span class="hljs-keyword">this</span>.el, view.el);
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">this</span>.detachHtml();
      }

      <span class="hljs-keyword">if</span> (shouldTriggerDetach) {
        view._isAttached = <span class="hljs-literal">false</span>;
        view.triggerMethod(<span class="hljs-string">'detach'</span>, view);
      }
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-115">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-115">&#182;</a>
              </div>
              <p>Override this method to change how the region detaches current content</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    detachHtml: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">detachHtml</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">this</span>.Dom.detachContents(<span class="hljs-keyword">this</span>.el, <span class="hljs-keyword">this</span>.$el);
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-116">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-116">&#182;</a>
              </div>
              <p>Checks whether a view is currently present within the region. Returns <code>true</code> if there is
and <code>false</code> if no view is present.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    hasView: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">hasView</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">return</span> !!<span class="hljs-keyword">this</span>.currentView;
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-117">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-117">&#182;</a>
              </div>
              <p>Reset the region by destroying any existing view and clearing out the cached <code>$el</code>.
The next time a view is shown via this region, the region will re-query the DOM for
the region’s <code>el</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    reset: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">reset</span>(<span class="hljs-params">options</span>) </span>{
      <span class="hljs-keyword">this</span>.empty(options);
      <span class="hljs-keyword">this</span>.el = <span class="hljs-keyword">this</span>._initEl;
      <span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>.$el;
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
    },
    <span class="hljs-attr">_isDestroyed</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">isDestroyed</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isDestroyed</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._isDestroyed;
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-118">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-118">&#182;</a>
              </div>
              <p>Destroy the region, remove any child view
and remove the region from any associated view</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    destroy: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">destroy</span>(<span class="hljs-params">options</span>) </span>{
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._isDestroyed) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
      }

      <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'before:destroy'</span>, <span class="hljs-keyword">this</span>, options);
      <span class="hljs-keyword">this</span>._isDestroyed = <span class="hljs-literal">true</span>;
      <span class="hljs-keyword">this</span>.reset(options);

      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._name) {
        <span class="hljs-keyword">this</span>._parentView._removeReferences(<span class="hljs-keyword">this</span>._name);
      }

      <span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>._parentView;
      <span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>._name;
      <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'destroy'</span>, <span class="hljs-keyword">this</span>, options);
      <span class="hljs-keyword">this</span>.stopListening();
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
    }
  });

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">buildRegion</span> (<span class="hljs-params">definition, defaults</span>) </span>{
    <span class="hljs-keyword">if</span> (definition <span class="hljs-keyword">instanceof</span> Region) {
      <span class="hljs-keyword">return</span> definition;
    }

    <span class="hljs-keyword">if</span> (_.isString(definition)) {
      <span class="hljs-keyword">return</span> buildRegionFromObject(defaults, {
        <span class="hljs-attr">el</span>: definition
      });
    }

    <span class="hljs-keyword">if</span> (_.isFunction(definition)) {
      <span class="hljs-keyword">return</span> buildRegionFromObject(defaults, {
        <span class="hljs-attr">regionClass</span>: definition
      });
    }

    <span class="hljs-keyword">if</span> (_.isObject(definition)) {
      <span class="hljs-keyword">return</span> buildRegionFromObject(defaults, definition);
    }

    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> MarionetteError({
      <span class="hljs-attr">message</span>: <span class="hljs-string">'Improper region configuration type.'</span>,
      <span class="hljs-attr">url</span>: <span class="hljs-string">'marionette.region.html#defining-regions'</span>
    });
  }

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">buildRegionFromObject</span>(<span class="hljs-params">defaults, definition</span>) </span>{
    <span class="hljs-keyword">var</span> options = _.extend({}, defaults, definition);

    <span class="hljs-keyword">var</span> RegionClass = options.regionClass;
    <span class="hljs-keyword">delete</span> options.regionClass;
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> RegionClass(options);
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-119">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-119">&#182;</a>
              </div>
              <ul>
<li>regions</li>
<li>regionClass</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>
  <span class="hljs-keyword">var</span> RegionsMixin = {
    <span class="hljs-attr">regionClass</span>: Region,</pre></div></div>
            
        </li>
        
        
        <li id="section-120">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-120">&#182;</a>
              </div>
              <p>Internal method to initialize the regions that have been defined in a
<code>regions</code> attribute on this View.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _initRegions: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_initRegions</span>(<span class="hljs-params"></span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-121">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-121">&#182;</a>
              </div>
              <p>init regions hash</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">this</span>.regions = <span class="hljs-keyword">this</span>.regions || {};
      <span class="hljs-keyword">this</span>._regions = {};
      <span class="hljs-keyword">this</span>.addRegions(_.result(<span class="hljs-keyword">this</span>, <span class="hljs-string">'regions'</span>));
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-122">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-122">&#182;</a>
              </div>
              <p>Internal method to re-initialize all of the regions by updating
the <code>el</code> that they point to</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _reInitRegions: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_reInitRegions</span>(<span class="hljs-params"></span>) </span>{
      _invoke(<span class="hljs-keyword">this</span>._regions, <span class="hljs-string">'reset'</span>);
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-123">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-123">&#182;</a>
              </div>
              <p>Add a single region, by name, to the View</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    addRegion: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addRegion</span>(<span class="hljs-params">name, definition</span>) </span>{
      <span class="hljs-keyword">var</span> regions = {};
      regions[name] = definition;
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.addRegions(regions)[name];
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-124">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-124">&#182;</a>
              </div>
              <p>Add multiple regions as a {name: definition, name2: def2} object literal</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    addRegions: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addRegions</span>(<span class="hljs-params">regions</span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-125">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-125">&#182;</a>
              </div>
              <p>If there’s nothing to add, stop here.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">if</span> (_.isEmpty(regions)) {
        <span class="hljs-keyword">return</span>;
      } <span class="hljs-comment">// Normalize region selectors hash to allow</span></pre></div></div>
            
        </li>
        
        
        <li id="section-126">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-126">&#182;</a>
              </div>
              <p>a user to use the @ui. syntax.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>

      regions = <span class="hljs-keyword">this</span>.normalizeUIValues(regions, <span class="hljs-string">'el'</span>); <span class="hljs-comment">// Add the regions definitions to the regions property</span>

      <span class="hljs-keyword">this</span>.regions = _.extend({}, <span class="hljs-keyword">this</span>.regions, regions);
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._addRegions(regions);
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-127">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-127">&#182;</a>
              </div>
              <p>internal method to build and add regions</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _addRegions: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_addRegions</span>(<span class="hljs-params">regionDefinitions</span>) </span>{
      <span class="hljs-keyword">var</span> _this = <span class="hljs-keyword">this</span>;

      <span class="hljs-keyword">var</span> defaults = {
        <span class="hljs-attr">regionClass</span>: <span class="hljs-keyword">this</span>.regionClass,
        <span class="hljs-attr">parentEl</span>: _.partial(_.result, <span class="hljs-keyword">this</span>, <span class="hljs-string">'el'</span>)
      };
      <span class="hljs-keyword">return</span> _.reduce(regionDefinitions, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">regions, definition, name</span>) </span>{
        regions[name] = buildRegion(definition, defaults);

        _this._addRegion(regions[name], name);

        <span class="hljs-keyword">return</span> regions;
      }, {});
    },
    <span class="hljs-attr">_addRegion</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_addRegion</span>(<span class="hljs-params">region, name</span>) </span>{
      <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'before:add:region'</span>, <span class="hljs-keyword">this</span>, name, region);
      region._parentView = <span class="hljs-keyword">this</span>;
      region._name = name;
      <span class="hljs-keyword">this</span>._regions[name] = region;
      <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'add:region'</span>, <span class="hljs-keyword">this</span>, name, region);
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-128">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-128">&#182;</a>
              </div>
              <p>Remove a single region from the View, by name</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    removeRegion: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">removeRegion</span>(<span class="hljs-params">name</span>) </span>{
      <span class="hljs-keyword">var</span> region = <span class="hljs-keyword">this</span>._regions[name];

      <span class="hljs-keyword">this</span>._removeRegion(region, name);

      <span class="hljs-keyword">return</span> region;
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-129">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-129">&#182;</a>
              </div>
              <p>Remove all regions from the View</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    removeRegions: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">removeRegions</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">var</span> regions = <span class="hljs-keyword">this</span>._getRegions();

      _.each(<span class="hljs-keyword">this</span>._regions, <span class="hljs-keyword">this</span>._removeRegion.bind(<span class="hljs-keyword">this</span>));

      <span class="hljs-keyword">return</span> regions;
    },
    <span class="hljs-attr">_removeRegion</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_removeRegion</span>(<span class="hljs-params">region, name</span>) </span>{
      <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'before:remove:region'</span>, <span class="hljs-keyword">this</span>, name, region);
      region.destroy();
      <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'remove:region'</span>, <span class="hljs-keyword">this</span>, name, region);
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-130">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-130">&#182;</a>
              </div>
              <p>Called in a region’s destroy</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _removeReferences: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_removeReferences</span>(<span class="hljs-params">name</span>) </span>{
      <span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>.regions[name];
      <span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>._regions[name];
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-131">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-131">&#182;</a>
              </div>
              <p>Empty all regions in the region manager, but
leave them attached</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    emptyRegions: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">emptyRegions</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">var</span> regions = <span class="hljs-keyword">this</span>.getRegions();

      _invoke(regions, <span class="hljs-string">'empty'</span>);

      <span class="hljs-keyword">return</span> regions;
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-132">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-132">&#182;</a>
              </div>
              <p>Checks to see if view contains region
Accepts the region name
hasRegion(‘main’)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    hasRegion: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">hasRegion</span>(<span class="hljs-params">name</span>) </span>{
      <span class="hljs-keyword">return</span> !!<span class="hljs-keyword">this</span>.getRegion(name);
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-133">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-133">&#182;</a>
              </div>
              <p>Provides access to regions
Accepts the region name
getRegion(‘main’)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    getRegion: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getRegion</span>(<span class="hljs-params">name</span>) </span>{
      <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>._isRendered) {
        <span class="hljs-keyword">this</span>.render();
      }

      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._regions[name];
    },
    <span class="hljs-attr">_getRegions</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_getRegions</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">return</span> _.clone(<span class="hljs-keyword">this</span>._regions);
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-134">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-134">&#182;</a>
              </div>
              <p>Get all regions</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    getRegions: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getRegions</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>._isRendered) {
        <span class="hljs-keyword">this</span>.render();
      }

      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._getRegions();
    },
    <span class="hljs-attr">showChildView</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">showChildView</span>(<span class="hljs-params">name, view, options</span>) </span>{
      <span class="hljs-keyword">var</span> region = <span class="hljs-keyword">this</span>.getRegion(name);
      region.show(view, options);
      <span class="hljs-keyword">return</span> view;
    },
    <span class="hljs-attr">detachChildView</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">detachChildView</span>(<span class="hljs-params">name</span>) </span>{
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.getRegion(name).detachView();
    },
    <span class="hljs-attr">getChildView</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getChildView</span>(<span class="hljs-params">name</span>) </span>{
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.getRegion(name).currentView;
    }
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-135">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-135">&#182;</a>
              </div>
              <p>Static setter for the renderer</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setRenderer</span>(<span class="hljs-params">renderer</span>) </span>{
    <span class="hljs-keyword">this</span>.prototype._renderHtml = renderer;
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-136">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-136">&#182;</a>
              </div>
              <p>View</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">var</span> ClassOptions$<span class="hljs-number">2</span> = [<span class="hljs-string">'behaviors'</span>, <span class="hljs-string">'childViewEventPrefix'</span>, <span class="hljs-string">'childViewEvents'</span>, <span class="hljs-string">'childViewTriggers'</span>, <span class="hljs-string">'collectionEvents'</span>, <span class="hljs-string">'events'</span>, <span class="hljs-string">'modelEvents'</span>, <span class="hljs-string">'regionClass'</span>, <span class="hljs-string">'regions'</span>, <span class="hljs-string">'template'</span>, <span class="hljs-string">'templateContext'</span>, <span class="hljs-string">'triggers'</span>, <span class="hljs-string">'ui'</span>]; <span class="hljs-comment">// Used by _getImmediateChildren</span>

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">childReducer</span>(<span class="hljs-params">children, region</span>) </span>{
    <span class="hljs-keyword">if</span> (region.currentView) {
      children.push(region.currentView);
    }

    <span class="hljs-keyword">return</span> children;
  } <span class="hljs-comment">// The standard view. Includes view events, automatic rendering</span></pre></div></div>
            
        </li>
        
        
        <li id="section-137">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-137">&#182;</a>
              </div>
              <p>templates, nested views, and more.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>

  <span class="hljs-keyword">var</span> View = Backbone.View.extend({
    <span class="hljs-attr">constructor</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">constructor</span>(<span class="hljs-params">options</span>) </span>{
      <span class="hljs-keyword">this</span>._setOptions(options, ClassOptions$<span class="hljs-number">2</span>);

      monitorViewEvents(<span class="hljs-keyword">this</span>);

      <span class="hljs-keyword">this</span>._initBehaviors();

      <span class="hljs-keyword">this</span>._initRegions();

      Backbone.View.prototype.constructor.apply(<span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span>);
      <span class="hljs-keyword">this</span>.delegateEntityEvents();

      <span class="hljs-keyword">this</span>._triggerEventOnBehaviors(<span class="hljs-string">'initialize'</span>, <span class="hljs-keyword">this</span>, options);
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-138">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-138">&#182;</a>
              </div>
              <p>Overriding Backbone.View’s <code>setElement</code> to handle
if an el was previously defined. If so, the view might be
rendered or attached on setElement.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    setElement: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setElement</span>(<span class="hljs-params"></span>) </span>{
      Backbone.View.prototype.setElement.apply(<span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span>);
      <span class="hljs-keyword">this</span>._isRendered = <span class="hljs-keyword">this</span>.Dom.hasContents(<span class="hljs-keyword">this</span>.el);
      <span class="hljs-keyword">this</span>._isAttached = <span class="hljs-keyword">this</span>._isElAttached();

      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._isRendered) {
        <span class="hljs-keyword">this</span>.bindUIElements();
      }

      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-139">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-139">&#182;</a>
              </div>
              <p>If a template is available, renders it into the view’s <code>el</code>
Re-inits regions and binds UI.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    render: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">render</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">var</span> template = <span class="hljs-keyword">this</span>.getTemplate();

      <span class="hljs-keyword">if</span> (template === <span class="hljs-literal">false</span> || <span class="hljs-keyword">this</span>._isDestroyed) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
      }

      <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'before:render'</span>, <span class="hljs-keyword">this</span>); <span class="hljs-comment">// If this is not the first render call, then we need to</span></pre></div></div>
            
        </li>
        
        
        <li id="section-140">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-140">&#182;</a>
              </div>
              <p>re-initialize the <code>el</code> for each region</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._isRendered) {
        <span class="hljs-keyword">this</span>._reInitRegions();
      }

      <span class="hljs-keyword">this</span>._renderTemplate(template);

      <span class="hljs-keyword">this</span>.bindUIElements();
      <span class="hljs-keyword">this</span>._isRendered = <span class="hljs-literal">true</span>;
      <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'render'</span>, <span class="hljs-keyword">this</span>);
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-141">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-141">&#182;</a>
              </div>
              <p>called by ViewMixin destroy</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _removeChildren: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_removeChildren</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">this</span>.removeRegions();
    },
    <span class="hljs-attr">_getImmediateChildren</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_getImmediateChildren</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">return</span> _.reduce(<span class="hljs-keyword">this</span>._regions, childReducer, []);
    }
  }, {
    <span class="hljs-attr">setRenderer</span>: setRenderer,
    <span class="hljs-attr">setDomApi</span>: setDomApi
  });

  _.extend(View.prototype, ViewMixin, RegionsMixin);</pre></div></div>
            
        </li>
        
        
        <li id="section-142">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-142">&#182;</a>
              </div>
              <p>shut down child views.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
  <span class="hljs-keyword">var</span> Container = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Container</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">this</span>._init();
  }; <span class="hljs-comment">// Mix in methods from Underscore, for iteration, and other</span></pre></div></div>
            
        </li>
        
        
        <li id="section-143">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-143">&#182;</a>
              </div>
              <p>collection related features.
Borrowing this code from Backbone.Collection:
<a href="https://github.com/jashkenas/backbone/blob/1.1.2/backbone.js#L962">https://github.com/jashkenas/backbone/blob/1.1.2/backbone.js#L962</a></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>

  <span class="hljs-keyword">var</span> methods = [<span class="hljs-string">'forEach'</span>, <span class="hljs-string">'each'</span>, <span class="hljs-string">'map'</span>, <span class="hljs-string">'find'</span>, <span class="hljs-string">'detect'</span>, <span class="hljs-string">'filter'</span>, <span class="hljs-string">'select'</span>, <span class="hljs-string">'reject'</span>, <span class="hljs-string">'every'</span>, <span class="hljs-string">'all'</span>, <span class="hljs-string">'some'</span>, <span class="hljs-string">'any'</span>, <span class="hljs-string">'include'</span>, <span class="hljs-string">'contains'</span>, <span class="hljs-string">'invoke'</span>, <span class="hljs-string">'toArray'</span>, <span class="hljs-string">'first'</span>, <span class="hljs-string">'initial'</span>, <span class="hljs-string">'rest'</span>, <span class="hljs-string">'last'</span>, <span class="hljs-string">'without'</span>, <span class="hljs-string">'isEmpty'</span>, <span class="hljs-string">'pluck'</span>, <span class="hljs-string">'reduce'</span>, <span class="hljs-string">'partition'</span>];

  _.each(methods, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">method</span>) </span>{
    Container.prototype[method] = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> _len = <span class="hljs-built_in">arguments</span>.length, args = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(_len), _key = <span class="hljs-number">0</span>; _key &lt; _len; _key++) {
        args[_key] = <span class="hljs-built_in">arguments</span>[_key];
      }

      <span class="hljs-keyword">return</span> _[method].apply(_, [<span class="hljs-keyword">this</span>._views].concat(args));
    };
  });

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">stringComparator</span>(<span class="hljs-params">comparator, view</span>) </span>{
    <span class="hljs-keyword">return</span> view.model &amp;&amp; view.model.get(comparator);
  } <span class="hljs-comment">// Container Methods</span></pre></div></div>
            
        </li>
        
        
        <li id="section-144">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-144">&#182;</a>
              </div>
              <hr>

            </div>
            
        </li>
        
        
        <li id="section-145">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-145">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>

  _.extend(Container.prototype, {</pre></div></div>
            
        </li>
        
        
        <li id="section-146">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-146">&#182;</a>
              </div>
              <p>Initializes an empty container</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _init: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_init</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">this</span>._views = [];
      <span class="hljs-keyword">this</span>._viewsByCid = {};
      <span class="hljs-keyword">this</span>._indexByModel = {};

      <span class="hljs-keyword">this</span>._updateLength();
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-147">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-147">&#182;</a>
              </div>
              <p>Add a view to this container. Stores the view
by <code>cid</code> and makes it searchable by the model
cid (and model itself). Additionally it stores
the view by index in the _views array</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _add: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_add</span>(<span class="hljs-params">view</span>) </span>{
      <span class="hljs-keyword">var</span> index = <span class="hljs-built_in">arguments</span>.length &gt; <span class="hljs-number">1</span> &amp;&amp; <span class="hljs-built_in">arguments</span>[<span class="hljs-number">1</span>] !== <span class="hljs-literal">undefined</span> ? <span class="hljs-built_in">arguments</span>[<span class="hljs-number">1</span>] : <span class="hljs-keyword">this</span>._views.length;

      <span class="hljs-keyword">this</span>._addViewIndexes(view); <span class="hljs-comment">// add to end by default</span>


      <span class="hljs-keyword">this</span>._views.splice(index, <span class="hljs-number">0</span>, view);

      <span class="hljs-keyword">this</span>._updateLength();
    },
    <span class="hljs-attr">_addViewIndexes</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_addViewIndexes</span>(<span class="hljs-params">view</span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-148">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-148">&#182;</a>
              </div>
              <p>store the view</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">this</span>._viewsByCid[view.cid] = view; <span class="hljs-comment">// index it by model</span>

      <span class="hljs-keyword">if</span> (view.model) {
        <span class="hljs-keyword">this</span>._indexByModel[view.model.cid] = view;
      }
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-149">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-149">&#182;</a>
              </div>
              <p>Sort (mutate) and return the array of the child views.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _sort: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_sort</span>(<span class="hljs-params">comparator, context</span>) </span>{
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> comparator === <span class="hljs-string">'string'</span>) {
        comparator = _.partial(stringComparator, comparator);
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._sortBy(comparator);
      }

      <span class="hljs-keyword">if</span> (comparator.length === <span class="hljs-number">1</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._sortBy(comparator.bind(context));
      }

      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._views.sort(comparator.bind(context));
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-150">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-150">&#182;</a>
              </div>
              <p>Makes <code>_.sortBy</code> mutate the array to match <code>this._views.sort</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _sortBy: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_sortBy</span>(<span class="hljs-params">comparator</span>) </span>{
      <span class="hljs-keyword">var</span> sortedViews = _.sortBy(<span class="hljs-keyword">this</span>._views, comparator);

      <span class="hljs-keyword">this</span>._set(sortedViews);

      <span class="hljs-keyword">return</span> sortedViews;
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-151">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-151">&#182;</a>
              </div>
              <p>Replace array contents without overwriting the reference.
Should not add/remove views</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _set: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_set</span>(<span class="hljs-params">views, shouldReset</span>) </span>{
      <span class="hljs-keyword">this</span>._views.length = <span class="hljs-number">0</span>;

      <span class="hljs-keyword">this</span>._views.push.apply(<span class="hljs-keyword">this</span>._views, views.slice(<span class="hljs-number">0</span>));

      <span class="hljs-keyword">if</span> (shouldReset) {
        <span class="hljs-keyword">this</span>._viewsByCid = {};
        <span class="hljs-keyword">this</span>._indexByModel = {};

        _.each(views, <span class="hljs-keyword">this</span>._addViewIndexes.bind(<span class="hljs-keyword">this</span>));

        <span class="hljs-keyword">this</span>._updateLength();
      }
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-152">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-152">&#182;</a>
              </div>
              <p>Swap views by index</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _swap: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_swap</span>(<span class="hljs-params">view1, view2</span>) </span>{
      <span class="hljs-keyword">var</span> view1Index = <span class="hljs-keyword">this</span>.findIndexByView(view1);
      <span class="hljs-keyword">var</span> view2Index = <span class="hljs-keyword">this</span>.findIndexByView(view2);

      <span class="hljs-keyword">if</span> (view1Index === <span class="hljs-number">-1</span> || view2Index === <span class="hljs-number">-1</span>) {
        <span class="hljs-keyword">return</span>;
      }

      <span class="hljs-keyword">var</span> swapView = <span class="hljs-keyword">this</span>._views[view1Index];
      <span class="hljs-keyword">this</span>._views[view1Index] = <span class="hljs-keyword">this</span>._views[view2Index];
      <span class="hljs-keyword">this</span>._views[view2Index] = swapView;
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-153">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-153">&#182;</a>
              </div>
              <p>Find a view by the model that was attached to it.
Uses the model’s <code>cid</code> to find it.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    findByModel: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">findByModel</span>(<span class="hljs-params">model</span>) </span>{
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.findByModelCid(model.cid);
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-154">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-154">&#182;</a>
              </div>
              <p>Find a view by the <code>cid</code> of the model that was attached to it.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    findByModelCid: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">findByModelCid</span>(<span class="hljs-params">modelCid</span>) </span>{
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._indexByModel[modelCid];
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-155">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-155">&#182;</a>
              </div>
              <p>Find a view by index.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    findByIndex: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">findByIndex</span>(<span class="hljs-params">index</span>) </span>{
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._views[index];
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-156">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-156">&#182;</a>
              </div>
              <p>Find the index of a view instance</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    findIndexByView: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">findIndexByView</span>(<span class="hljs-params">view</span>) </span>{
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._views.indexOf(view);
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-157">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-157">&#182;</a>
              </div>
              <p>Retrieve a view by its <code>cid</code> directly</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    findByCid: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">findByCid</span>(<span class="hljs-params">cid</span>) </span>{
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._viewsByCid[cid];
    },
    <span class="hljs-attr">hasView</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">hasView</span>(<span class="hljs-params">view</span>) </span>{
      <span class="hljs-keyword">return</span> !!<span class="hljs-keyword">this</span>.findByCid(view.cid);
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-158">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-158">&#182;</a>
              </div>
              <p>Remove a view and clean up index references.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _remove: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_remove</span>(<span class="hljs-params">view</span>) </span>{
      <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>._viewsByCid[view.cid]) {
        <span class="hljs-keyword">return</span>;
      } <span class="hljs-comment">// delete model index</span>


      <span class="hljs-keyword">if</span> (view.model) {
        <span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>._indexByModel[view.model.cid];
      } <span class="hljs-comment">// remove the view from the container</span>


      <span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>._viewsByCid[view.cid];
      <span class="hljs-keyword">var</span> index = <span class="hljs-keyword">this</span>.findIndexByView(view);

      <span class="hljs-keyword">this</span>._views.splice(index, <span class="hljs-number">1</span>);

      <span class="hljs-keyword">this</span>._updateLength();
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-159">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-159">&#182;</a>
              </div>
              <p>Update the <code>.length</code> attribute on this container</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _updateLength: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_updateLength</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">this</span>.length = <span class="hljs-keyword">this</span>._views.length;
    }
  });</pre></div></div>
            
        </li>
        
        
        <li id="section-160">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-160">&#182;</a>
              </div>
              <p>Collection View</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">var</span> classErrorName$<span class="hljs-number">1</span> = <span class="hljs-string">'CollectionViewError'</span>;
  <span class="hljs-keyword">var</span> ClassOptions$<span class="hljs-number">3</span> = [<span class="hljs-string">'behaviors'</span>, <span class="hljs-string">'childView'</span>, <span class="hljs-string">'childViewContainer'</span>, <span class="hljs-string">'childViewEventPrefix'</span>, <span class="hljs-string">'childViewEvents'</span>, <span class="hljs-string">'childViewOptions'</span>, <span class="hljs-string">'childViewTriggers'</span>, <span class="hljs-string">'collectionEvents'</span>, <span class="hljs-string">'emptyView'</span>, <span class="hljs-string">'emptyViewOptions'</span>, <span class="hljs-string">'events'</span>, <span class="hljs-string">'modelEvents'</span>, <span class="hljs-string">'sortWithCollection'</span>, <span class="hljs-string">'template'</span>, <span class="hljs-string">'templateContext'</span>, <span class="hljs-string">'triggers'</span>, <span class="hljs-string">'ui'</span>, <span class="hljs-string">'viewComparator'</span>, <span class="hljs-string">'viewFilter'</span>]; <span class="hljs-comment">// A view that iterates over a Backbone.Collection</span></pre></div></div>
            
        </li>
        
        
        <li id="section-161">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-161">&#182;</a>
              </div>
              <p>and renders an individual child view for each model.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
  <span class="hljs-keyword">var</span> CollectionView = Backbone.View.extend({</pre></div></div>
            
        </li>
        
        
        <li id="section-162">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-162">&#182;</a>
              </div>
              <p>flag for maintaining the sorted order of the collection</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    sortWithCollection: <span class="hljs-literal">true</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-163">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-163">&#182;</a>
              </div>
              <p>constructor</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">constructor</span>: function <span class="hljs-keyword">constructor</span>(options) {
      <span class="hljs-keyword">this</span>._setOptions(options, ClassOptions$<span class="hljs-number">3</span>);

      monitorViewEvents(<span class="hljs-keyword">this</span>);

      <span class="hljs-keyword">this</span>._initChildViewStorage();

      <span class="hljs-keyword">this</span>._initBehaviors();

      Backbone.View.prototype.constructor.apply(<span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span>); <span class="hljs-comment">// Init empty region</span>

      <span class="hljs-keyword">this</span>.getEmptyRegion();
      <span class="hljs-keyword">this</span>.delegateEntityEvents();

      <span class="hljs-keyword">this</span>._triggerEventOnBehaviors(<span class="hljs-string">'initialize'</span>, <span class="hljs-keyword">this</span>, options);
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-164">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-164">&#182;</a>
              </div>
              <p>Internal method to set up the <code>children</code> object for storing all of the child views
<code>_children</code> represents all child views
<code>children</code> represents only views filtered to be shown</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _initChildViewStorage: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_initChildViewStorage</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">this</span>._children = <span class="hljs-keyword">new</span> Container();
      <span class="hljs-keyword">this</span>.children = <span class="hljs-keyword">new</span> Container();
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-165">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-165">&#182;</a>
              </div>
              <p>Create an region to show the emptyView</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    getEmptyRegion: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getEmptyRegion</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">var</span> $emptyEl = <span class="hljs-keyword">this</span>.$container || <span class="hljs-keyword">this</span>.$el;

      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._emptyRegion &amp;&amp; !<span class="hljs-keyword">this</span>._emptyRegion.isDestroyed()) {
        <span class="hljs-keyword">this</span>._emptyRegion._setElement($emptyEl[<span class="hljs-number">0</span>]);

        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._emptyRegion;
      }

      <span class="hljs-keyword">this</span>._emptyRegion = <span class="hljs-keyword">new</span> Region({
        <span class="hljs-attr">el</span>: $emptyEl[<span class="hljs-number">0</span>],
        <span class="hljs-attr">replaceElement</span>: <span class="hljs-literal">false</span>
      });
      <span class="hljs-keyword">this</span>._emptyRegion._parentView = <span class="hljs-keyword">this</span>;
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._emptyRegion;
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-166">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-166">&#182;</a>
              </div>
              <p>Configured the initial events that the collection view binds to.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _initialEvents: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_initialEvents</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._isRendered) {
        <span class="hljs-keyword">return</span>;
      }

      <span class="hljs-keyword">this</span>.listenTo(<span class="hljs-keyword">this</span>.collection, {
        <span class="hljs-string">'sort'</span>: <span class="hljs-keyword">this</span>._onCollectionSort,
        <span class="hljs-string">'reset'</span>: <span class="hljs-keyword">this</span>._onCollectionReset,
        <span class="hljs-string">'update'</span>: <span class="hljs-keyword">this</span>._onCollectionUpdate
      });
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-167">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-167">&#182;</a>
              </div>
              <p>Internal method. This checks for any changes in the order of the collection.
If the index of any view doesn’t match, it will re-sort.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _onCollectionSort: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_onCollectionSort</span>(<span class="hljs-params">collection, _ref</span>) </span>{
      <span class="hljs-keyword">var</span> add = _ref.add,
          merge = _ref.merge,
          remove = _ref.remove;

      <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.sortWithCollection || <span class="hljs-keyword">this</span>.viewComparator === <span class="hljs-literal">false</span>) {
        <span class="hljs-keyword">return</span>;
      } <span class="hljs-comment">// If the data is changing we will handle the sort later in `_onCollectionUpdate`</span>


      <span class="hljs-keyword">if</span> (add || remove || merge) {
        <span class="hljs-keyword">return</span>;
      } <span class="hljs-comment">// If the only thing happening here is sorting, sort.</span>


      <span class="hljs-keyword">this</span>.sort();
    },
    <span class="hljs-attr">_onCollectionReset</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_onCollectionReset</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">this</span>._destroyChildren();

      <span class="hljs-keyword">this</span>._addChildModels(<span class="hljs-keyword">this</span>.collection.models);

      <span class="hljs-keyword">this</span>.sort();
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-168">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-168">&#182;</a>
              </div>
              <p>Handle collection update model additions and  removals</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _onCollectionUpdate: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_onCollectionUpdate</span>(<span class="hljs-params">collection, options</span>) </span>{
      <span class="hljs-keyword">var</span> changes = options.changes; <span class="hljs-comment">// Remove first since it'll be a shorter array lookup.</span>

      <span class="hljs-keyword">var</span> removedViews = changes.removed.length &amp;&amp; <span class="hljs-keyword">this</span>._removeChildModels(changes.removed);

      <span class="hljs-keyword">this</span>._addedViews = changes.added.length &amp;&amp; <span class="hljs-keyword">this</span>._addChildModels(changes.added);

      <span class="hljs-keyword">this</span>._detachChildren(removedViews);

      <span class="hljs-keyword">this</span>.sort(); <span class="hljs-comment">// Destroy removed child views after all of the render is complete</span>

      <span class="hljs-keyword">this</span>._removeChildViews(removedViews);
    },
    <span class="hljs-attr">_removeChildModels</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_removeChildModels</span>(<span class="hljs-params">models</span>) </span>{
      <span class="hljs-keyword">var</span> _this = <span class="hljs-keyword">this</span>;

      <span class="hljs-keyword">return</span> _.reduce(models, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">views, model</span>) </span>{
        <span class="hljs-keyword">var</span> removeView = _this._removeChildModel(model);

        <span class="hljs-keyword">if</span> (removeView) {
          views.push(removeView);
        }

        <span class="hljs-keyword">return</span> views;
      }, []);
    },
    <span class="hljs-attr">_removeChildModel</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_removeChildModel</span>(<span class="hljs-params">model</span>) </span>{
      <span class="hljs-keyword">var</span> view = <span class="hljs-keyword">this</span>._children.findByModel(model);

      <span class="hljs-keyword">if</span> (view) {
        <span class="hljs-keyword">this</span>._removeChild(view);
      }

      <span class="hljs-keyword">return</span> view;
    },
    <span class="hljs-attr">_removeChild</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_removeChild</span>(<span class="hljs-params">view</span>) </span>{
      <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'before:remove:child'</span>, <span class="hljs-keyword">this</span>, view);

      <span class="hljs-keyword">this</span>.children._remove(view);

      <span class="hljs-keyword">this</span>._children._remove(view);

      <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'remove:child'</span>, <span class="hljs-keyword">this</span>, view);
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-169">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-169">&#182;</a>
              </div>
              <p>Added views are returned for consistency with _removeChildModels</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _addChildModels: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_addChildModels</span>(<span class="hljs-params">models</span>) </span>{
      <span class="hljs-keyword">return</span> _.map(models, <span class="hljs-keyword">this</span>._addChildModel.bind(<span class="hljs-keyword">this</span>));
    },
    <span class="hljs-attr">_addChildModel</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_addChildModel</span>(<span class="hljs-params">model</span>) </span>{
      <span class="hljs-keyword">var</span> view = <span class="hljs-keyword">this</span>._createChildView(model);

      <span class="hljs-keyword">this</span>._addChild(view);

      <span class="hljs-keyword">return</span> view;
    },
    <span class="hljs-attr">_createChildView</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_createChildView</span>(<span class="hljs-params">model</span>) </span>{
      <span class="hljs-keyword">var</span> ChildView = <span class="hljs-keyword">this</span>._getChildView(model);

      <span class="hljs-keyword">var</span> childViewOptions = <span class="hljs-keyword">this</span>._getChildViewOptions(model);

      <span class="hljs-keyword">var</span> view = <span class="hljs-keyword">this</span>.buildChildView(model, ChildView, childViewOptions);
      <span class="hljs-keyword">return</span> view;
    },
    <span class="hljs-attr">_addChild</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_addChild</span>(<span class="hljs-params">view, index</span>) </span>{
      <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'before:add:child'</span>, <span class="hljs-keyword">this</span>, view);

      <span class="hljs-keyword">this</span>._setupChildView(view);

      <span class="hljs-keyword">this</span>._children._add(view, index);

      <span class="hljs-keyword">this</span>.children._add(view, index);

      <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'add:child'</span>, <span class="hljs-keyword">this</span>, view);
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-170">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-170">&#182;</a>
              </div>
              <p>Retrieve the <code>childView</code> class
The <code>childView</code> property can be either a view class or a function that
returns a view class. If it is a function, it will receive the model that
will be passed to the view instance (created from the returned view class)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _getChildView: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_getChildView</span>(<span class="hljs-params">child</span>) </span>{
      <span class="hljs-keyword">var</span> childView = <span class="hljs-keyword">this</span>.childView;

      <span class="hljs-keyword">if</span> (!childView) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> MarionetteError({
          <span class="hljs-attr">name</span>: classErrorName$<span class="hljs-number">1</span>,
          <span class="hljs-attr">message</span>: <span class="hljs-string">'A "childView" must be specified'</span>,
          <span class="hljs-attr">url</span>: <span class="hljs-string">'marionette.collectionview.html#collectionviews-childview'</span>
        });
      }

      childView = <span class="hljs-keyword">this</span>._getView(childView, child);

      <span class="hljs-keyword">if</span> (!childView) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> MarionetteError({
          <span class="hljs-attr">name</span>: classErrorName$<span class="hljs-number">1</span>,
          <span class="hljs-attr">message</span>: <span class="hljs-string">'"childView" must be a view class or a function that returns a view class'</span>,
          <span class="hljs-attr">url</span>: <span class="hljs-string">'marionette.collectionview.html#collectionviews-childview'</span>
        });
      }

      <span class="hljs-keyword">return</span> childView;
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-171">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-171">&#182;</a>
              </div>
              <p>First check if the <code>view</code> is a view class (the common case)
Then check if it’s a function (which we assume that returns a view class)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _getView: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_getView</span>(<span class="hljs-params">view, child</span>) </span>{
      <span class="hljs-keyword">if</span> (view.prototype <span class="hljs-keyword">instanceof</span> Backbone.View || view === Backbone.View) {
        <span class="hljs-keyword">return</span> view;
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (_.isFunction(view)) {
        <span class="hljs-keyword">return</span> view.call(<span class="hljs-keyword">this</span>, child);
      }
    },
    <span class="hljs-attr">_getChildViewOptions</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_getChildViewOptions</span>(<span class="hljs-params">child</span>) </span>{
      <span class="hljs-keyword">if</span> (_.isFunction(<span class="hljs-keyword">this</span>.childViewOptions)) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.childViewOptions(child);
      }

      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.childViewOptions;
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-172">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-172">&#182;</a>
              </div>
              <p>Build a <code>childView</code> for a model in the collection.
Override to customize the build</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    buildChildView: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">buildChildView</span>(<span class="hljs-params">child, ChildViewClass, childViewOptions</span>) </span>{
      <span class="hljs-keyword">var</span> options = _.extend({
        <span class="hljs-attr">model</span>: child
      }, childViewOptions);

      <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> ChildViewClass(options);
    },
    <span class="hljs-attr">_setupChildView</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_setupChildView</span>(<span class="hljs-params">view</span>) </span>{
      monitorViewEvents(view); <span class="hljs-comment">// We need to listen for if a view is destroyed in a way other</span></pre></div></div>
            
        </li>
        
        
        <li id="section-173">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-173">&#182;</a>
              </div>
              <p>than through the CollectionView.
If this happens we need to remove the reference to the view
since once a view has been destroyed we can not reuse it.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
      view.on(<span class="hljs-string">'destroy'</span>, <span class="hljs-keyword">this</span>.removeChildView, <span class="hljs-keyword">this</span>); <span class="hljs-comment">// set up the child view event forwarding</span>

      <span class="hljs-keyword">this</span>._proxyChildViewEvents(view);
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-174">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-174">&#182;</a>
              </div>
              <p>used by ViewMixin’s <code>_childViewEventHandler</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _getImmediateChildren: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_getImmediateChildren</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.children._views;
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-175">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-175">&#182;</a>
              </div>
              <p>Overriding Backbone.View’s <code>setElement</code> to handle
if an el was previously defined. If so, the view might be
attached on setElement.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    setElement: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setElement</span>(<span class="hljs-params"></span>) </span>{
      Backbone.View.prototype.setElement.apply(<span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span>);
      <span class="hljs-keyword">this</span>._isAttached = <span class="hljs-keyword">this</span>._isElAttached();
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-176">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-176">&#182;</a>
              </div>
              <p>Render children views.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    render: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">render</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._isDestroyed) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
      }

      <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'before:render'</span>, <span class="hljs-keyword">this</span>);

      <span class="hljs-keyword">this</span>._destroyChildren();

      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.collection) {
        <span class="hljs-keyword">this</span>._addChildModels(<span class="hljs-keyword">this</span>.collection.models);

        <span class="hljs-keyword">this</span>._initialEvents();
      }

      <span class="hljs-keyword">var</span> template = <span class="hljs-keyword">this</span>.getTemplate();

      <span class="hljs-keyword">if</span> (template) {
        <span class="hljs-keyword">this</span>._renderTemplate(template);

        <span class="hljs-keyword">this</span>.bindUIElements();
      }

      <span class="hljs-keyword">this</span>._getChildViewContainer();

      <span class="hljs-keyword">this</span>.sort();
      <span class="hljs-keyword">this</span>._isRendered = <span class="hljs-literal">true</span>;
      <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'render'</span>, <span class="hljs-keyword">this</span>);
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-177">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-177">&#182;</a>
              </div>
              <p>Get a container within the template to add the children within</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _getChildViewContainer: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_getChildViewContainer</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">var</span> childViewContainer = _.result(<span class="hljs-keyword">this</span>, <span class="hljs-string">'childViewContainer'</span>);

      <span class="hljs-keyword">this</span>.$container = childViewContainer ? <span class="hljs-keyword">this</span>.$(childViewContainer) : <span class="hljs-keyword">this</span>.$el;

      <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.$container.length) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> MarionetteError({
          <span class="hljs-attr">name</span>: classErrorName$<span class="hljs-number">1</span>,
          <span class="hljs-attr">message</span>: <span class="hljs-string">"The specified \"childViewContainer\" was not found: "</span>.concat(childViewContainer),
          <span class="hljs-attr">url</span>: <span class="hljs-string">'marionette.collectionview.html#defining-the-childviewcontainer'</span>
        });
      }
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-178">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-178">&#182;</a>
              </div>
              <p>Sorts the children then filters and renders the results.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    sort: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sort</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">this</span>._sortChildren();

      <span class="hljs-keyword">this</span>.filter();
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-179">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-179">&#182;</a>
              </div>
              <p>Sorts views by viewComparator and sets the children to the new order</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _sortChildren: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_sortChildren</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>._children.length) {
        <span class="hljs-keyword">return</span>;
      }

      <span class="hljs-keyword">var</span> viewComparator = <span class="hljs-keyword">this</span>.getComparator();

      <span class="hljs-keyword">if</span> (!viewComparator) {
        <span class="hljs-keyword">return</span>;
      } <span class="hljs-comment">// If children are sorted prevent added to end perf</span>


      <span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>._addedViews;
      <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'before:sort'</span>, <span class="hljs-keyword">this</span>);

      <span class="hljs-keyword">this</span>._children._sort(viewComparator, <span class="hljs-keyword">this</span>);

      <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'sort'</span>, <span class="hljs-keyword">this</span>);
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-180">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-180">&#182;</a>
              </div>
              <p>Sets the view’s <code>viewComparator</code> and applies the sort if the view is ready.
To prevent the render pass <code>{ preventRender: true }</code> as the 2nd argument.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    setComparator: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setComparator</span>(<span class="hljs-params">comparator</span>) </span>{
      <span class="hljs-keyword">var</span> _ref2 = <span class="hljs-built_in">arguments</span>.length &gt; <span class="hljs-number">1</span> &amp;&amp; <span class="hljs-built_in">arguments</span>[<span class="hljs-number">1</span>] !== <span class="hljs-literal">undefined</span> ? <span class="hljs-built_in">arguments</span>[<span class="hljs-number">1</span>] : {},
          preventRender = _ref2.preventRender;

      <span class="hljs-keyword">var</span> comparatorChanged = <span class="hljs-keyword">this</span>.viewComparator !== comparator;
      <span class="hljs-keyword">var</span> shouldSort = comparatorChanged &amp;&amp; !preventRender;
      <span class="hljs-keyword">this</span>.viewComparator = comparator;

      <span class="hljs-keyword">if</span> (shouldSort) {
        <span class="hljs-keyword">this</span>.sort();
      }

      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-181">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-181">&#182;</a>
              </div>
              <p>Clears the <code>viewComparator</code> and follows the same rules for rendering as <code>setComparator</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    removeComparator: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">removeComparator</span>(<span class="hljs-params">options</span>) </span>{
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.setComparator(<span class="hljs-literal">null</span>, options);
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-182">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-182">&#182;</a>
              </div>
              <p>If viewComparator is overriden it will be returned here.
Additionally override this function to provide custom
viewComparator logic</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    getComparator: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getComparator</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.viewComparator) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.viewComparator;
      }

      <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.sortWithCollection || <span class="hljs-keyword">this</span>.viewComparator === <span class="hljs-literal">false</span> || !<span class="hljs-keyword">this</span>.collection) {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
      }

      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._viewComparator;
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-183">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-183">&#182;</a>
              </div>
              <p>Default internal view comparator that order the views by
the order of the collection</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _viewComparator: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_viewComparator</span>(<span class="hljs-params">view</span>) </span>{
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.collection.indexOf(view.model);
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-184">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-184">&#182;</a>
              </div>
              <p>This method filters the children views and renders the results</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    filter: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">filter</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._isDestroyed) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
      }

      <span class="hljs-keyword">this</span>._filterChildren();

      <span class="hljs-keyword">this</span>._renderChildren();

      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
    },
    <span class="hljs-attr">_filterChildren</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_filterChildren</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">var</span> _this2 = <span class="hljs-keyword">this</span>;

      <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>._children.length) {
        <span class="hljs-keyword">return</span>;
      }

      <span class="hljs-keyword">var</span> viewFilter = <span class="hljs-keyword">this</span>._getFilter();

      <span class="hljs-keyword">if</span> (!viewFilter) {
        <span class="hljs-keyword">var</span> shouldReset = <span class="hljs-keyword">this</span>.children.length !== <span class="hljs-keyword">this</span>._children.length;

        <span class="hljs-keyword">this</span>.children._set(<span class="hljs-keyword">this</span>._children._views, shouldReset);

        <span class="hljs-keyword">return</span>;
      } <span class="hljs-comment">// If children are filtered prevent added to end perf</span>


      <span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>._addedViews;
      <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'before:filter'</span>, <span class="hljs-keyword">this</span>);
      <span class="hljs-keyword">var</span> attachViews = [];
      <span class="hljs-keyword">var</span> detachViews = [];

      _.each(<span class="hljs-keyword">this</span>._children._views, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">view, key, children</span>) </span>{
        (viewFilter.call(_this2, view, key, children) ? attachViews : detachViews).push(view);
      });

      <span class="hljs-keyword">this</span>._detachChildren(detachViews); <span class="hljs-comment">// reset children</span>


      <span class="hljs-keyword">this</span>.children._set(attachViews, <span class="hljs-literal">true</span>);

      <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'filter'</span>, <span class="hljs-keyword">this</span>, attachViews, detachViews);
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-185">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-185">&#182;</a>
              </div>
              <p>This method returns a function for the viewFilter</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _getFilter: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_getFilter</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">var</span> viewFilter = <span class="hljs-keyword">this</span>.getFilter();

      <span class="hljs-keyword">if</span> (!viewFilter) {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
      }

      <span class="hljs-keyword">if</span> (_.isFunction(viewFilter)) {
        <span class="hljs-keyword">return</span> viewFilter;
      } <span class="hljs-comment">// Support filter predicates `{ fooFlag: true }`</span>


      <span class="hljs-keyword">if</span> (_.isObject(viewFilter)) {
        <span class="hljs-keyword">var</span> matcher = _.matches(viewFilter);

        <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">view</span>) </span>{
          <span class="hljs-keyword">return</span> matcher(view.model &amp;&amp; view.model.attributes);
        };
      } <span class="hljs-comment">// Filter by model attribute</span>


      <span class="hljs-keyword">if</span> (_.isString(viewFilter)) {
        <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">view</span>) </span>{
          <span class="hljs-keyword">return</span> view.model &amp;&amp; view.model.get(viewFilter);
        };
      }

      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> MarionetteError({
        <span class="hljs-attr">name</span>: classErrorName$<span class="hljs-number">1</span>,
        <span class="hljs-attr">message</span>: <span class="hljs-string">'"viewFilter" must be a function, predicate object literal, a string indicating a model attribute, or falsy'</span>,
        <span class="hljs-attr">url</span>: <span class="hljs-string">'marionette.collectionview.html#defining-the-viewfilter'</span>
      });
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-186">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-186">&#182;</a>
              </div>
              <p>Override this function to provide custom
viewFilter logic</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    getFilter: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getFilter</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.viewFilter;
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-187">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-187">&#182;</a>
              </div>
              <p>Sets the view’s <code>viewFilter</code> and applies the filter if the view is ready.
To prevent the render pass <code>{ preventRender: true }</code> as the 2nd argument.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    setFilter: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setFilter</span>(<span class="hljs-params">filter</span>) </span>{
      <span class="hljs-keyword">var</span> _ref3 = <span class="hljs-built_in">arguments</span>.length &gt; <span class="hljs-number">1</span> &amp;&amp; <span class="hljs-built_in">arguments</span>[<span class="hljs-number">1</span>] !== <span class="hljs-literal">undefined</span> ? <span class="hljs-built_in">arguments</span>[<span class="hljs-number">1</span>] : {},
          preventRender = _ref3.preventRender;

      <span class="hljs-keyword">var</span> filterChanged = <span class="hljs-keyword">this</span>.viewFilter !== filter;
      <span class="hljs-keyword">var</span> shouldRender = filterChanged &amp;&amp; !preventRender;
      <span class="hljs-keyword">this</span>.viewFilter = filter;

      <span class="hljs-keyword">if</span> (shouldRender) {
        <span class="hljs-keyword">this</span>.filter();
      }

      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-188">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-188">&#182;</a>
              </div>
              <p>Clears the <code>viewFilter</code> and follows the same rules for rendering as <code>setFilter</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    removeFilter: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">removeFilter</span>(<span class="hljs-params">options</span>) </span>{
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.setFilter(<span class="hljs-literal">null</span>, options);
    },
    <span class="hljs-attr">_detachChildren</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_detachChildren</span>(<span class="hljs-params">detachingViews</span>) </span>{
      _.each(detachingViews, <span class="hljs-keyword">this</span>._detachChildView.bind(<span class="hljs-keyword">this</span>));
    },
    <span class="hljs-attr">_detachChildView</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_detachChildView</span>(<span class="hljs-params">view</span>) </span>{
      <span class="hljs-keyword">var</span> shouldTriggerDetach = view._isAttached &amp;&amp; <span class="hljs-keyword">this</span>.monitorViewEvents !== <span class="hljs-literal">false</span>;

      <span class="hljs-keyword">if</span> (shouldTriggerDetach) {
        view.triggerMethod(<span class="hljs-string">'before:detach'</span>, view);
      }

      <span class="hljs-keyword">this</span>.detachHtml(view);

      <span class="hljs-keyword">if</span> (shouldTriggerDetach) {
        view._isAttached = <span class="hljs-literal">false</span>;
        view.triggerMethod(<span class="hljs-string">'detach'</span>, view);
      }

      view._isShown = <span class="hljs-literal">false</span>;
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-189">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-189">&#182;</a>
              </div>
              <p>Override this method to change how the collectionView detaches a child view</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    detachHtml: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">detachHtml</span>(<span class="hljs-params">view</span>) </span>{
      <span class="hljs-keyword">this</span>.Dom.detachEl(view.el, view.$el);
    },
    <span class="hljs-attr">_renderChildren</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_renderChildren</span>(<span class="hljs-params"></span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-190">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-190">&#182;</a>
              </div>
              <p>If there are unrendered views prevent add to end perf</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._hasUnrenderedViews) {
        <span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>._addedViews;
        <span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>._hasUnrenderedViews;
      }

      <span class="hljs-keyword">var</span> views = <span class="hljs-keyword">this</span>._addedViews || <span class="hljs-keyword">this</span>.children._views;
      <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'before:render:children'</span>, <span class="hljs-keyword">this</span>, views);

      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.isEmpty()) {
        <span class="hljs-keyword">this</span>._showEmptyView();
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">this</span>._destroyEmptyView();

        <span class="hljs-keyword">var</span> els = <span class="hljs-keyword">this</span>._getBuffer(views);

        <span class="hljs-keyword">this</span>._attachChildren(els, views);
      }

      <span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>._addedViews;
      <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'render:children'</span>, <span class="hljs-keyword">this</span>, views);
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-191">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-191">&#182;</a>
              </div>
              <p>Renders each view and creates a fragment buffer from them</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _getBuffer: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_getBuffer</span>(<span class="hljs-params">views</span>) </span>{
      <span class="hljs-keyword">var</span> _this3 = <span class="hljs-keyword">this</span>;

      <span class="hljs-keyword">var</span> elBuffer = <span class="hljs-keyword">this</span>.Dom.createBuffer();

      _.each(views, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">view</span>) </span>{
        renderView(view); <span class="hljs-comment">// corresponds that view is shown in a Region or CollectionView</span>

        view._isShown = <span class="hljs-literal">true</span>;

        _this3.Dom.appendContents(elBuffer, view.el, {
          <span class="hljs-attr">_$contents</span>: view.$el
        });
      });

      <span class="hljs-keyword">return</span> elBuffer;
    },
    <span class="hljs-attr">_attachChildren</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_attachChildren</span>(<span class="hljs-params">els, views</span>) </span>{
      <span class="hljs-keyword">var</span> shouldTriggerAttach = <span class="hljs-keyword">this</span>._isAttached &amp;&amp; <span class="hljs-keyword">this</span>.monitorViewEvents !== <span class="hljs-literal">false</span>;
      views = shouldTriggerAttach ? views : [];

      _.each(views, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">view</span>) </span>{
        <span class="hljs-keyword">if</span> (view._isAttached) {
          <span class="hljs-keyword">return</span>;
        }

        view.triggerMethod(<span class="hljs-string">'before:attach'</span>, view);
      });

      <span class="hljs-keyword">this</span>.attachHtml(els, <span class="hljs-keyword">this</span>.$container);

      _.each(views, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">view</span>) </span>{
        <span class="hljs-keyword">if</span> (view._isAttached) {
          <span class="hljs-keyword">return</span>;
        }

        view._isAttached = <span class="hljs-literal">true</span>;
        view.triggerMethod(<span class="hljs-string">'attach'</span>, view);
      });
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-192">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-192">&#182;</a>
              </div>
              <p>Override this method to do something other than <code>.append</code>.
You can attach any HTML at this point including the els.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    attachHtml: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">attachHtml</span>(<span class="hljs-params">els, $container</span>) </span>{
      <span class="hljs-keyword">this</span>.Dom.appendContents($container[<span class="hljs-number">0</span>], els, {
        <span class="hljs-attr">_$el</span>: $container
      });
    },
    <span class="hljs-attr">isEmpty</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isEmpty</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">return</span> !<span class="hljs-keyword">this</span>.children.length;
    },
    <span class="hljs-attr">_showEmptyView</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_showEmptyView</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">var</span> EmptyView = <span class="hljs-keyword">this</span>._getEmptyView();

      <span class="hljs-keyword">if</span> (!EmptyView) {
        <span class="hljs-keyword">return</span>;
      }

      <span class="hljs-keyword">var</span> options = <span class="hljs-keyword">this</span>._getEmptyViewOptions();

      <span class="hljs-keyword">var</span> emptyRegion = <span class="hljs-keyword">this</span>.getEmptyRegion();
      emptyRegion.show(<span class="hljs-keyword">new</span> EmptyView(options));
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-193">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-193">&#182;</a>
              </div>
              <p>Retrieve the empty view class</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _getEmptyView: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_getEmptyView</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">var</span> emptyView = <span class="hljs-keyword">this</span>.emptyView;

      <span class="hljs-keyword">if</span> (!emptyView) {
        <span class="hljs-keyword">return</span>;
      }

      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._getView(emptyView);
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-194">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-194">&#182;</a>
              </div>
              <p>Remove the emptyView</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _destroyEmptyView: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_destroyEmptyView</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">var</span> emptyRegion = <span class="hljs-keyword">this</span>.getEmptyRegion(); <span class="hljs-comment">// Only empty if a view is show so the region</span></pre></div></div>
            
        </li>
        
        
        <li id="section-195">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-195">&#182;</a>
              </div>
              <p>doesn’t detach any other unrelated HTML</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
      <span class="hljs-keyword">if</span> (emptyRegion.hasView()) {
        emptyRegion.empty();
      }
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-196">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-196">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>    _getEmptyViewOptions: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_getEmptyViewOptions</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">var</span> emptyViewOptions = <span class="hljs-keyword">this</span>.emptyViewOptions || <span class="hljs-keyword">this</span>.childViewOptions;

      <span class="hljs-keyword">if</span> (_.isFunction(emptyViewOptions)) {
        <span class="hljs-keyword">return</span> emptyViewOptions.call(<span class="hljs-keyword">this</span>);
      }

      <span class="hljs-keyword">return</span> emptyViewOptions;
    },
    <span class="hljs-attr">swapChildViews</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">swapChildViews</span>(<span class="hljs-params">view1, view2</span>) </span>{
      <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>._children.hasView(view1) || !<span class="hljs-keyword">this</span>._children.hasView(view2)) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> MarionetteError({
          <span class="hljs-attr">name</span>: classErrorName$<span class="hljs-number">1</span>,
          <span class="hljs-attr">message</span>: <span class="hljs-string">'Both views must be children of the collection view to swap.'</span>,
          <span class="hljs-attr">url</span>: <span class="hljs-string">'marionette.collectionview.html#swapping-child-views'</span>
        });
      }

      <span class="hljs-keyword">this</span>._children._swap(view1, view2);

      <span class="hljs-keyword">this</span>.Dom.swapEl(view1.el, view2.el); <span class="hljs-comment">// If the views are not filtered the same, refilter</span>

      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.children.hasView(view1) !== <span class="hljs-keyword">this</span>.children.hasView(view2)) {
        <span class="hljs-keyword">this</span>.filter();
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">this</span>.children._swap(view1, view2);
      }

      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-197">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-197">&#182;</a>
              </div>
              <p>Render the child’s view and add it to the HTML for the collection view at a given index, based on the current sort</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    addChildView: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addChildView</span>(<span class="hljs-params">view, index</span>) </span>{
      <span class="hljs-keyword">var</span> options = <span class="hljs-built_in">arguments</span>.length &gt; <span class="hljs-number">2</span> &amp;&amp; <span class="hljs-built_in">arguments</span>[<span class="hljs-number">2</span>] !== <span class="hljs-literal">undefined</span> ? <span class="hljs-built_in">arguments</span>[<span class="hljs-number">2</span>] : {};

      <span class="hljs-keyword">if</span> (!view || view._isDestroyed) {
        <span class="hljs-keyword">return</span> view;
      }

      <span class="hljs-keyword">if</span> (view._isShown) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> MarionetteError({
          <span class="hljs-attr">name</span>: classErrorName$<span class="hljs-number">1</span>,
          <span class="hljs-attr">message</span>: <span class="hljs-string">'View is already shown in a Region or CollectionView'</span>,
          <span class="hljs-attr">url</span>: <span class="hljs-string">'marionette.region.html#showing-a-view'</span>
        });
      }

      <span class="hljs-keyword">if</span> (_.isObject(index)) {
        options = index;
      } <span class="hljs-comment">// If options has defined index we should use it</span>


      <span class="hljs-keyword">if</span> (options.index != <span class="hljs-literal">null</span>) {
        index = options.index;
      }

      <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>._isRendered) {
        <span class="hljs-keyword">this</span>.render();
      }

      <span class="hljs-keyword">this</span>._addChild(view, index);

      <span class="hljs-keyword">if</span> (options.preventRender) {
        <span class="hljs-keyword">this</span>._hasUnrenderedViews = <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">return</span> view;
      }

      <span class="hljs-keyword">var</span> hasIndex = <span class="hljs-keyword">typeof</span> index !== <span class="hljs-string">'undefined'</span>;
      <span class="hljs-keyword">var</span> isAddedToEnd = !hasIndex || index &gt;= <span class="hljs-keyword">this</span>._children.length; <span class="hljs-comment">// Only cache views if added to the end and there is no unrendered views</span>

      <span class="hljs-keyword">if</span> (isAddedToEnd &amp;&amp; !<span class="hljs-keyword">this</span>._hasUnrenderedViews) {
        <span class="hljs-keyword">this</span>._addedViews = [view];
      }

      <span class="hljs-keyword">if</span> (hasIndex) {
        <span class="hljs-keyword">this</span>._renderChildren();
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">this</span>.sort();
      }

      <span class="hljs-keyword">return</span> view;
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-198">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-198">&#182;</a>
              </div>
              <p>Detach a view from the children.  Best used when adding a
childView from <code>addChildView</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    detachChildView: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">detachChildView</span>(<span class="hljs-params">view</span>) </span>{
      <span class="hljs-keyword">this</span>.removeChildView(view, {
        <span class="hljs-attr">shouldDetach</span>: <span class="hljs-literal">true</span>
      });
      <span class="hljs-keyword">return</span> view;
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-199">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-199">&#182;</a>
              </div>
              <p>Remove the child view and destroy it.  Best used when adding a
childView from <code>addChildView</code>
The options argument is for internal use only</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    removeChildView: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">removeChildView</span>(<span class="hljs-params">view, options</span>) </span>{
      <span class="hljs-keyword">if</span> (!view) {
        <span class="hljs-keyword">return</span> view;
      }

      <span class="hljs-keyword">this</span>._removeChildView(view, options);

      <span class="hljs-keyword">this</span>._removeChild(view);

      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.isEmpty()) {
        <span class="hljs-keyword">this</span>._showEmptyView();
      }

      <span class="hljs-keyword">return</span> view;
    },
    <span class="hljs-attr">_removeChildViews</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_removeChildViews</span>(<span class="hljs-params">views</span>) </span>{
      _.each(views, <span class="hljs-keyword">this</span>._removeChildView.bind(<span class="hljs-keyword">this</span>));
    },
    <span class="hljs-attr">_removeChildView</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_removeChildView</span>(<span class="hljs-params">view</span>) </span>{
      <span class="hljs-keyword">var</span> _ref4 = <span class="hljs-built_in">arguments</span>.length &gt; <span class="hljs-number">1</span> &amp;&amp; <span class="hljs-built_in">arguments</span>[<span class="hljs-number">1</span>] !== <span class="hljs-literal">undefined</span> ? <span class="hljs-built_in">arguments</span>[<span class="hljs-number">1</span>] : {},
          shouldDetach = _ref4.shouldDetach;

      view.off(<span class="hljs-string">'destroy'</span>, <span class="hljs-keyword">this</span>.removeChildView, <span class="hljs-keyword">this</span>);

      <span class="hljs-keyword">if</span> (shouldDetach) {
        <span class="hljs-keyword">this</span>._detachChildView(view);
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">this</span>._destroyChildView(view);
      }

      <span class="hljs-keyword">this</span>.stopListening(view);
    },
    <span class="hljs-attr">_destroyChildView</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_destroyChildView</span>(<span class="hljs-params">view</span>) </span>{
      <span class="hljs-keyword">if</span> (view._isDestroyed) {
        <span class="hljs-keyword">return</span>;
      }

      <span class="hljs-keyword">var</span> shouldDisableEvents = <span class="hljs-keyword">this</span>.monitorViewEvents === <span class="hljs-literal">false</span>;
      destroyView(view, shouldDisableEvents);
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-200">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-200">&#182;</a>
              </div>
              <p>called by ViewMixin destroy</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _removeChildren: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_removeChildren</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">this</span>._destroyChildren();

      <span class="hljs-keyword">var</span> emptyRegion = <span class="hljs-keyword">this</span>.getEmptyRegion();
      emptyRegion.destroy();
      <span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>._addedViews;
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-201">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-201">&#182;</a>
              </div>
              <p>Destroy the child views that this collection view is holding on to, if any</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _destroyChildren: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_destroyChildren</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>._children.length) {
        <span class="hljs-keyword">return</span>;
      }

      <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'before:destroy:children'</span>, <span class="hljs-keyword">this</span>);

      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.monitorViewEvents === <span class="hljs-literal">false</span>) {
        <span class="hljs-keyword">this</span>.Dom.detachContents(<span class="hljs-keyword">this</span>.el, <span class="hljs-keyword">this</span>.$el);
      }

      <span class="hljs-keyword">this</span>._removeChildViews(<span class="hljs-keyword">this</span>._children._views); <span class="hljs-comment">// After all children have been destroyed re-init the container</span>


      <span class="hljs-keyword">this</span>._children._init();

      <span class="hljs-keyword">this</span>.children._init();

      <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'destroy:children'</span>, <span class="hljs-keyword">this</span>);
    }
  }, {
    <span class="hljs-attr">setDomApi</span>: setDomApi,
    <span class="hljs-attr">setRenderer</span>: setRenderer
  });

  _.extend(CollectionView.prototype, ViewMixin);</pre></div></div>
            
        </li>
        
        
        <li id="section-202">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-202">&#182;</a>
              </div>
              <p>Behavior</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">var</span> ClassOptions$<span class="hljs-number">4</span> = [<span class="hljs-string">'collectionEvents'</span>, <span class="hljs-string">'events'</span>, <span class="hljs-string">'modelEvents'</span>, <span class="hljs-string">'triggers'</span>, <span class="hljs-string">'ui'</span>];

  <span class="hljs-keyword">var</span> Behavior = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Behavior</span>(<span class="hljs-params">options, view</span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-203">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-203">&#182;</a>
              </div>
              <p>Setup reference to the view.
this comes in handle when a behavior
wants to directly talk up the chain
to the view.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">this</span>.view = view;

    <span class="hljs-keyword">this</span>._setOptions(options, ClassOptions$<span class="hljs-number">4</span>);

    <span class="hljs-keyword">this</span>.cid = _.uniqueId(<span class="hljs-keyword">this</span>.cidPrefix); <span class="hljs-comment">// Construct an internal UI hash using the behaviors UI</span></pre></div></div>
            
        </li>
        
        
        <li id="section-204">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-204">&#182;</a>
              </div>
              <p>hash combined and overridden by the view UI hash.
This allows the user to use UI hash elements defined
in the parent view as well as those defined in the behavior.
This order will help the reuse and share of a behavior
between multiple views, while letting a view override
a selector under an UI key.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
    <span class="hljs-keyword">this</span>.ui = _.extend({}, _.result(<span class="hljs-keyword">this</span>, <span class="hljs-string">'ui'</span>), _.result(view, <span class="hljs-string">'ui'</span>)); <span class="hljs-comment">// Proxy view triggers</span>

    <span class="hljs-keyword">this</span>.listenTo(view, <span class="hljs-string">'all'</span>, <span class="hljs-keyword">this</span>.triggerMethod);
    <span class="hljs-keyword">this</span>.initialize.apply(<span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span>);
  };

  Behavior.extend = extend; <span class="hljs-comment">// Behavior Methods</span></pre></div></div>
            
        </li>
        
        
        <li id="section-205">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-205">&#182;</a>
              </div>
              <hr>

            </div>
            
        </li>
        
        
        <li id="section-206">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-206">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>
  _.extend(Behavior.prototype, CommonMixin, DelegateEntityEventsMixin, TriggersMixin, UIMixin, {
    <span class="hljs-attr">cidPrefix</span>: <span class="hljs-string">'mnb'</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-207">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-207">&#182;</a>
              </div>
              <p>This is a noop method intended to be overridden</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    initialize: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">initialize</span>(<span class="hljs-params"></span>) </span>{},</pre></div></div>
            
        </li>
        
        
        <li id="section-208">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-208">&#182;</a>
              </div>
              <p>proxy behavior $ method to the view
this is useful for doing jquery DOM lookups
scoped to behaviors view.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    $: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">$</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.view.$.apply(<span class="hljs-keyword">this</span>.view, <span class="hljs-built_in">arguments</span>);
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-209">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-209">&#182;</a>
              </div>
              <p>Stops the behavior from listening to events.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    destroy: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">destroy</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">this</span>.stopListening();

      <span class="hljs-keyword">this</span>.view._removeBehavior(<span class="hljs-keyword">this</span>);

      <span class="hljs-keyword">this</span>._deleteEntityEventHandlers();

      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
    },
    <span class="hljs-attr">proxyViewProperties</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">proxyViewProperties</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">this</span>.$el = <span class="hljs-keyword">this</span>.view.$el;
      <span class="hljs-keyword">this</span>.el = <span class="hljs-keyword">this</span>.view.el;
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
    },
    <span class="hljs-attr">bindUIElements</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">bindUIElements</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">this</span>._bindUIElements();

      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
    },
    <span class="hljs-attr">unbindUIElements</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">unbindUIElements</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">this</span>._unbindUIElements();

      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
    },
    <span class="hljs-attr">getUI</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getUI</span>(<span class="hljs-params">name</span>) </span>{
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._getUI(name);
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-210">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-210">&#182;</a>
              </div>
              <p>Handle <code>modelEvents</code>, and <code>collectionEvents</code> configuration</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    delegateEntityEvents: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">delegateEntityEvents</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">this</span>._delegateEntityEvents(<span class="hljs-keyword">this</span>.view.model, <span class="hljs-keyword">this</span>.view.collection);

      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
    },
    <span class="hljs-attr">undelegateEntityEvents</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">undelegateEntityEvents</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">this</span>._undelegateEntityEvents(<span class="hljs-keyword">this</span>.view.model, <span class="hljs-keyword">this</span>.view.collection);

      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
    },
    <span class="hljs-attr">_getEvents</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_getEvents</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">var</span> _this = <span class="hljs-keyword">this</span>;

      <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.events) {
        <span class="hljs-keyword">return</span>;
      } <span class="hljs-comment">// Normalize behavior events hash to allow</span></pre></div></div>
            
        </li>
        
        
        <li id="section-211">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-211">&#182;</a>
              </div>
              <p>a user to use the @ui. syntax.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>

      <span class="hljs-keyword">var</span> behaviorEvents = <span class="hljs-keyword">this</span>.normalizeUIKeys(_.result(<span class="hljs-keyword">this</span>, <span class="hljs-string">'events'</span>)); <span class="hljs-comment">// binds the handler to the behavior and builds a unique eventName</span>

      <span class="hljs-keyword">return</span> _.reduce(behaviorEvents, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">events, behaviorHandler, key</span>) </span>{
        <span class="hljs-keyword">if</span> (!_.isFunction(behaviorHandler)) {
          behaviorHandler = _this[behaviorHandler];
        }

        <span class="hljs-keyword">if</span> (!behaviorHandler) {
          <span class="hljs-keyword">return</span> events;
        }

        key = getNamespacedEventName(key, _this.cid);
        events[key] = behaviorHandler.bind(_this);
        <span class="hljs-keyword">return</span> events;
      }, {});
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-212">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-212">&#182;</a>
              </div>
              <p>Internal method to build all trigger handlers for a given behavior</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _getTriggers: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_getTriggers</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.triggers) {
        <span class="hljs-keyword">return</span>;
      } <span class="hljs-comment">// Normalize behavior triggers hash to allow</span></pre></div></div>
            
        </li>
        
        
        <li id="section-213">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-213">&#182;</a>
              </div>
              <p>a user to use the @ui. syntax.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>

      <span class="hljs-keyword">var</span> behaviorTriggers = <span class="hljs-keyword">this</span>.normalizeUIKeys(_.result(<span class="hljs-keyword">this</span>, <span class="hljs-string">'triggers'</span>));
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._getViewTriggers(<span class="hljs-keyword">this</span>.view, behaviorTriggers);
    }
  });</pre></div></div>
            
        </li>
        
        
        <li id="section-214">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-214">&#182;</a>
              </div>
              <p>Application</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">var</span> ClassOptions$<span class="hljs-number">5</span> = [<span class="hljs-string">'channelName'</span>, <span class="hljs-string">'radioEvents'</span>, <span class="hljs-string">'radioRequests'</span>, <span class="hljs-string">'region'</span>, <span class="hljs-string">'regionClass'</span>];

  <span class="hljs-keyword">var</span> Application = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Application</span>(<span class="hljs-params">options</span>) </span>{
    <span class="hljs-keyword">this</span>._setOptions(options, ClassOptions$<span class="hljs-number">5</span>);

    <span class="hljs-keyword">this</span>.cid = _.uniqueId(<span class="hljs-keyword">this</span>.cidPrefix);

    <span class="hljs-keyword">this</span>._initRegion();

    <span class="hljs-keyword">this</span>._initRadio();

    <span class="hljs-keyword">this</span>.initialize.apply(<span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span>);
  };

  Application.extend = extend; <span class="hljs-comment">// Application Methods</span></pre></div></div>
            
        </li>
        
        
        <li id="section-215">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-215">&#182;</a>
              </div>
              <hr>

            </div>
            
        </li>
        
        
        <li id="section-216">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-216">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>
  _.extend(Application.prototype, CommonMixin, DestroyMixin, RadioMixin, {
    <span class="hljs-attr">cidPrefix</span>: <span class="hljs-string">'mna'</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-217">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-217">&#182;</a>
              </div>
              <p>This is a noop method intended to be overridden</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    initialize: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">initialize</span>(<span class="hljs-params"></span>) </span>{},</pre></div></div>
            
        </li>
        
        
        <li id="section-218">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-218">&#182;</a>
              </div>
              <p>Kick off all of the application’s processes.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    start: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">start</span>(<span class="hljs-params">options</span>) </span>{
      <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'before:start'</span>, <span class="hljs-keyword">this</span>, options);
      <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'start'</span>, <span class="hljs-keyword">this</span>, options);
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
    },
    <span class="hljs-attr">regionClass</span>: Region,
    <span class="hljs-attr">_initRegion</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_initRegion</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">var</span> region = <span class="hljs-keyword">this</span>.region;

      <span class="hljs-keyword">if</span> (!region) {
        <span class="hljs-keyword">return</span>;
      }

      <span class="hljs-keyword">var</span> defaults = {
        <span class="hljs-attr">regionClass</span>: <span class="hljs-keyword">this</span>.regionClass
      };
      <span class="hljs-keyword">this</span>._region = buildRegion(region, defaults);
    },
    <span class="hljs-attr">getRegion</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getRegion</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._region;
    },
    <span class="hljs-attr">showView</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">showView</span>(<span class="hljs-params">view</span>) </span>{
      <span class="hljs-keyword">var</span> region = <span class="hljs-keyword">this</span>.getRegion();

      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> _len = <span class="hljs-built_in">arguments</span>.length, args = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(_len &gt; <span class="hljs-number">1</span> ? _len - <span class="hljs-number">1</span> : <span class="hljs-number">0</span>), _key = <span class="hljs-number">1</span>; _key &lt; _len; _key++) {
        args[_key - <span class="hljs-number">1</span>] = <span class="hljs-built_in">arguments</span>[_key];
      }

      region.show.apply(region, [view].concat(args));
      <span class="hljs-keyword">return</span> view;
    },
    <span class="hljs-attr">getView</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getView</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.getRegion().currentView;
    }
  });

  <span class="hljs-keyword">var</span> bindEvents$<span class="hljs-number">1</span> = proxy(bindEvents);
  <span class="hljs-keyword">var</span> unbindEvents$<span class="hljs-number">1</span> = proxy(unbindEvents);
  <span class="hljs-keyword">var</span> bindRequests$<span class="hljs-number">1</span> = proxy(bindRequests);
  <span class="hljs-keyword">var</span> unbindRequests$<span class="hljs-number">1</span> = proxy(unbindRequests);
  <span class="hljs-keyword">var</span> mergeOptions$<span class="hljs-number">1</span> = proxy(mergeOptions);
  <span class="hljs-keyword">var</span> getOption$<span class="hljs-number">1</span> = proxy(getOption);
  <span class="hljs-keyword">var</span> normalizeMethods$<span class="hljs-number">1</span> = proxy(normalizeMethods);
  <span class="hljs-keyword">var</span> triggerMethod$<span class="hljs-number">1</span> = proxy(triggerMethod); <span class="hljs-comment">// Configuration</span>

  <span class="hljs-keyword">var</span> setDomApi$<span class="hljs-number">1</span> = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setDomApi</span>(<span class="hljs-params">mixin</span>) </span>{
    CollectionView.setDomApi(mixin);
    Region.setDomApi(mixin);
    View.setDomApi(mixin);
  };
  <span class="hljs-keyword">var</span> setRenderer$<span class="hljs-number">1</span> = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setRenderer</span>(<span class="hljs-params">renderer</span>) </span>{
    CollectionView.setRenderer(renderer);
    View.setRenderer(renderer);
  };
  <span class="hljs-keyword">var</span> backbone_marionette = {
    <span class="hljs-attr">View</span>: View,
    <span class="hljs-attr">CollectionView</span>: CollectionView,
    <span class="hljs-attr">MnObject</span>: MarionetteObject,
    <span class="hljs-attr">Object</span>: MarionetteObject,
    <span class="hljs-attr">Region</span>: Region,
    <span class="hljs-attr">Behavior</span>: Behavior,
    <span class="hljs-attr">Application</span>: Application,
    <span class="hljs-attr">isEnabled</span>: isEnabled,
    <span class="hljs-attr">setEnabled</span>: setEnabled,
    <span class="hljs-attr">monitorViewEvents</span>: monitorViewEvents,
    <span class="hljs-attr">Events</span>: Events,
    <span class="hljs-attr">extend</span>: extend,
    <span class="hljs-attr">DomApi</span>: DomApi,
    <span class="hljs-attr">VERSION</span>: version
  };

  exports.Application = Application;
  exports.Behavior = Behavior;
  exports.CollectionView = CollectionView;
  exports.DomApi = DomApi;
  exports.Events = Events;
  exports.MnObject = MarionetteObject;
  exports.Region = Region;
  exports.VERSION = version;
  exports.View = View;
  exports.bindEvents = bindEvents$<span class="hljs-number">1</span>;
  exports.bindRequests = bindRequests$<span class="hljs-number">1</span>;
  exports.default = backbone_marionette;
  exports.extend = extend;
  exports.getOption = getOption$<span class="hljs-number">1</span>;
  exports.isEnabled = isEnabled;
  exports.mergeOptions = mergeOptions$<span class="hljs-number">1</span>;
  exports.monitorViewEvents = monitorViewEvents;
  exports.normalizeMethods = normalizeMethods$<span class="hljs-number">1</span>;
  exports.setDomApi = setDomApi$<span class="hljs-number">1</span>;
  exports.setEnabled = setEnabled;
  exports.setRenderer = setRenderer$<span class="hljs-number">1</span>;
  exports.triggerMethod = triggerMethod$<span class="hljs-number">1</span>;
  exports.unbindEvents = unbindEvents$<span class="hljs-number">1</span>;
  exports.unbindRequests = unbindRequests$<span class="hljs-number">1</span>;

  <span class="hljs-built_in">Object</span>.defineProperty(exports, <span class="hljs-string">'__esModule'</span>, { <span class="hljs-attr">value</span>: <span class="hljs-literal">true</span> });

}));
<span class="hljs-keyword">this</span> &amp;&amp; <span class="hljs-keyword">this</span>.Marionette &amp;&amp; (<span class="hljs-keyword">this</span>.Mn = <span class="hljs-keyword">this</span>.Marionette);</pre></div></div>
            
        </li>
        
        
        <li id="section-219">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-219">&#182;</a>
              </div>
              <h1 id="sourcemappingurl-backbone-marionette-js-map">sourceMappingURL=backbone.marionette.js.map</h1>

            </div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
