<!doctype html>
<html lang="en" itemscope itemtype="http://schema.org/WebPage">
<head>
  <meta charset="utf-8">
  <meta name="x-ua-compatible" content="ie=edge">
  <title itemprop="name">backbone.marionette.js</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/apple-touch-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon-180x180.png">
  <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
  <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
  <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
  <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
  <link rel="manifest" href="/manifest.json">
  <meta name="msapplication-TileColor" content="#b91d47">
  <meta name="msapplication-TileImage" content="/mstile-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <link rel="stylesheet" media="all" href="../../styles/docco.860affb898b6e45b.860affb898b6e45b.860affb898b6e45b.860affb898b6e45b.860affb898b6e45b.860affb898b6e45b.860affb898b6e45b.860affb898b6e45b.860affb898b6e45b.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>backbone.marionette.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-comment">/**
* @license
* MarionetteJS (Backbone.Marionette)
* ----------------------------------
* v3.4.2
*
* Copyright (c)2017 Derick Bailey, Muted Solutions, LLC.
* Distributed under MIT license
*
* http://marionettejs.com
*/</span>


(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">global, factory</span>) </span>{
	<span class="hljs-keyword">typeof</span> exports === <span class="hljs-string">'object'</span> &amp;&amp; <span class="hljs-keyword">typeof</span> <span class="hljs-built_in">module</span> !== <span class="hljs-string">'undefined'</span> ? <span class="hljs-built_in">module</span>.exports = factory(<span class="hljs-built_in">require</span>(<span class="hljs-string">'backbone'</span>), <span class="hljs-built_in">require</span>(<span class="hljs-string">'underscore'</span>), <span class="hljs-built_in">require</span>(<span class="hljs-string">'backbone.radio'</span>)) :
	<span class="hljs-keyword">typeof</span> define === <span class="hljs-string">'function'</span> &amp;&amp; define.amd ? define([<span class="hljs-string">'backbone'</span>, <span class="hljs-string">'underscore'</span>, <span class="hljs-string">'backbone.radio'</span>], factory) :
	(global.Marionette = factory(global.Backbone,global._,global.Backbone.Radio));
}(<span class="hljs-keyword">this</span>, (<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">Backbone,_,Radio</span>) </span>{ <span class="hljs-string">'use strict'</span>;

Backbone = Backbone &amp;&amp; Backbone.hasOwnProperty(<span class="hljs-string">'default'</span>) ? Backbone[<span class="hljs-string">'default'</span>] : Backbone;
_ = _ &amp;&amp; _.hasOwnProperty(<span class="hljs-string">'default'</span>) ? _[<span class="hljs-string">'default'</span>] : _;
Radio = Radio &amp;&amp; Radio.hasOwnProperty(<span class="hljs-string">'default'</span>) ? Radio[<span class="hljs-string">'default'</span>] : Radio;

<span class="hljs-keyword">var</span> version = <span class="hljs-string">"3.4.2"</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p>Internal utility for creating context style global utils</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">var</span> proxy = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">proxy</span>(<span class="hljs-params">method</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">context</span>) </span>{
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> _len = <span class="hljs-built_in">arguments</span>.length, args = <span class="hljs-built_in">Array</span>(_len &gt; <span class="hljs-number">1</span> ? _len - <span class="hljs-number">1</span> : <span class="hljs-number">0</span>), _key = <span class="hljs-number">1</span>; _key &lt; _len; _key++) {
      args[_key - <span class="hljs-number">1</span>] = <span class="hljs-built_in">arguments</span>[_key];
    }

    <span class="hljs-keyword">return</span> method.apply(context, args);
  };
};</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <h2 id="marionette-extend">Marionette.extend</h2>

            </div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p>Borrow the Backbone <code>extend</code> method so we can use it as needed</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">var</span> extend = Backbone.Model.extend;

<span class="hljs-comment">/* global console */</span>

<span class="hljs-keyword">var</span> deprecate = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">deprecate</span>(<span class="hljs-params">message, test</span>) </span>{
  <span class="hljs-keyword">if</span> (_.isObject(message)) {
    message = message.prev + <span class="hljs-string">' is going to be removed in the future. '</span> + <span class="hljs-string">'Please use '</span> + message.next + <span class="hljs-string">' instead.'</span> + (message.url ? <span class="hljs-string">' See: '</span> + message.url : <span class="hljs-string">''</span>);
  }

  <span class="hljs-keyword">if</span> (!Marionette.DEV_MODE) {
    <span class="hljs-keyword">return</span>;
  }

  <span class="hljs-keyword">if</span> ((test === <span class="hljs-literal">undefined</span> || !test) &amp;&amp; !deprecate._cache[message]) {
    deprecate._warn(<span class="hljs-string">'Deprecation warning: '</span> + message);
    deprecate._cache[message] = <span class="hljs-literal">true</span>;
  }
};

<span class="hljs-comment">/* istanbul ignore next: can't clear console */</span>
deprecate._console = <span class="hljs-keyword">typeof</span> <span class="hljs-built_in">console</span> !== <span class="hljs-string">'undefined'</span> ? <span class="hljs-built_in">console</span> : {};
deprecate._warn = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">var</span> warn = deprecate._console.warn || deprecate._console.log || _.noop;
  <span class="hljs-keyword">return</span> warn.apply(deprecate._console, <span class="hljs-built_in">arguments</span>);
};
deprecate._cache = {};</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <h2 id="marionette-isnodeattached">Marionette.isNodeAttached</h2>

            </div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p>Determine if <code>el</code> is a child of the document</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">var</span> isNodeAttached = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isNodeAttached</span>(<span class="hljs-params">el</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-built_in">document</span>.documentElement.contains(el &amp;&amp; el.parentNode);
};</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <p>Merge <code>keys</code> from <code>options</code> onto <code>this</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">var</span> mergeOptions = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">mergeOptions</span>(<span class="hljs-params">options, keys</span>) </span>{
  <span class="hljs-keyword">var</span> _this = <span class="hljs-keyword">this</span>;

  <span class="hljs-keyword">if</span> (!options) {
    <span class="hljs-keyword">return</span>;
  }

  _.each(keys, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">key</span>) </span>{
    <span class="hljs-keyword">var</span> option = options[key];
    <span class="hljs-keyword">if</span> (option !== <span class="hljs-literal">undefined</span>) {
      _this[key] = option;
    }
  });
};</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <h2 id="marionette-getoption">Marionette.getOption</h2>

            </div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <p>Retrieve an object, function or other value from the
object or its <code>options</code>, with <code>options</code> taking precedence.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">var</span> getOption = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getOption</span>(<span class="hljs-params">optionName</span>) </span>{
  <span class="hljs-keyword">if</span> (!optionName) {
    <span class="hljs-keyword">return</span>;
  }
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.options &amp;&amp; <span class="hljs-keyword">this</span>.options[optionName] !== <span class="hljs-literal">undefined</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.options[optionName];
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>[optionName];
  }
};</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <h2 id="marionette-normalizemethods">Marionette.normalizeMethods</h2>

            </div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <p>Pass in a mapping of events =&gt; functions or function names
and return a mapping of events =&gt; functions</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">var</span> normalizeMethods = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">normalizeMethods</span>(<span class="hljs-params">hash</span>) </span>{
  <span class="hljs-keyword">var</span> _this = <span class="hljs-keyword">this</span>;

  <span class="hljs-keyword">return</span> _.reduce(hash, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">normalizedHash, method, name</span>) </span>{
    <span class="hljs-keyword">if</span> (!_.isFunction(method)) {
      method = _this[method];
    }
    <span class="hljs-keyword">if</span> (method) {
      normalizedHash[name] = method;
    }
    <span class="hljs-keyword">return</span> normalizedHash;
  }, {});
};</pre></div></div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              <h2 id="trigger-method">Trigger Method</h2>

            </div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              <p>split the event name on the “:”</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">var</span> splitter = <span class="hljs-regexp">/(^|:)(\w)/gi</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-19">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-19">&#182;</a>
              </div>
              <p>take the event section (“section1:section2:section3”)
and turn it in to uppercase name onSection1Section2Section3</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getEventName</span>(<span class="hljs-params">match, prefix, eventName</span>) </span>{
  <span class="hljs-keyword">return</span> eventName.toUpperCase();
}

<span class="hljs-keyword">var</span> getOnMethodName = _.memoize(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">event</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-string">'on'</span> + event.replace(splitter, getEventName);
});</pre></div></div>
            
        </li>
        
        
        <li id="section-20">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-20">&#182;</a>
              </div>
              <p>Trigger an event and/or a corresponding method name. Examples:</p>
<p><code>this.triggerMethod(&quot;foo&quot;)</code> will trigger the “foo” event and
call the “onFoo” method.</p>
<p><code>this.triggerMethod(&quot;foo:bar&quot;)</code> will trigger the “foo:bar” event and
call the “onFooBar” method.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">triggerMethod</span>(<span class="hljs-params">event</span>) </span>{
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> _len = <span class="hljs-built_in">arguments</span>.length, args = <span class="hljs-built_in">Array</span>(_len &gt; <span class="hljs-number">1</span> ? _len - <span class="hljs-number">1</span> : <span class="hljs-number">0</span>), _key = <span class="hljs-number">1</span>; _key &lt; _len; _key++) {
    args[_key - <span class="hljs-number">1</span>] = <span class="hljs-built_in">arguments</span>[_key];
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-21">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-21">&#182;</a>
              </div>
              <p>get the method name from the event name</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">var</span> methodName = getOnMethodName(event);
  <span class="hljs-keyword">var</span> method = getOption.call(<span class="hljs-keyword">this</span>, methodName);
  <span class="hljs-keyword">var</span> result = <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-22">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-22">&#182;</a>
              </div>
              <p>call the onMethodName if it exists</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">if</span> (_.isFunction(method)) {</pre></div></div>
            
        </li>
        
        
        <li id="section-23">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-23">&#182;</a>
              </div>
              <p>pass all args, except the event name</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    result = method.apply(<span class="hljs-keyword">this</span>, args);
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-24">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-24">&#182;</a>
              </div>
              <p>trigger the event</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">this</span>.trigger.apply(<span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span>);

  <span class="hljs-keyword">return</span> result;
}</pre></div></div>
            
        </li>
        
        
        <li id="section-25">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-25">&#182;</a>
              </div>
              <p>triggerMethodOn invokes triggerMethod on a specific context</p>
<p>e.g. <code>Marionette.triggerMethodOn(view, &#39;show&#39;)</code>
will trigger a “show” event or invoke onShow the view.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">triggerMethodOn</span>(<span class="hljs-params">context</span>) </span>{
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> _len2 = <span class="hljs-built_in">arguments</span>.length, args = <span class="hljs-built_in">Array</span>(_len2 &gt; <span class="hljs-number">1</span> ? _len2 - <span class="hljs-number">1</span> : <span class="hljs-number">0</span>), _key2 = <span class="hljs-number">1</span>; _key2 &lt; _len2; _key2++) {
    args[_key2 - <span class="hljs-number">1</span>] = <span class="hljs-built_in">arguments</span>[_key2];
  }

  <span class="hljs-keyword">if</span> (_.isFunction(context.triggerMethod)) {
    <span class="hljs-keyword">return</span> context.triggerMethod.apply(context, args);
  }

  <span class="hljs-keyword">return</span> triggerMethod.apply(context, args);
}</pre></div></div>
            
        </li>
        
        
        <li id="section-26">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-26">&#182;</a>
              </div>
              <h2 id="dom-refresh">DOM Refresh</h2>

            </div>
            
        </li>
        
        
        <li id="section-27">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-27">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-28">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-28">&#182;</a>
              </div>
              <p>Trigger method on children unless a pure Backbone.View</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">triggerMethodChildren</span>(<span class="hljs-params">view, event, shouldTrigger</span>) </span>{
  <span class="hljs-keyword">if</span> (!view._getImmediateChildren) {
    <span class="hljs-keyword">return</span>;
  }
  _.each(view._getImmediateChildren(), <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">child</span>) </span>{
    <span class="hljs-keyword">if</span> (!shouldTrigger(child)) {
      <span class="hljs-keyword">return</span>;
    }
    triggerMethodOn(child, event, child);
  });
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">shouldTriggerAttach</span>(<span class="hljs-params">view</span>) </span>{
  <span class="hljs-keyword">return</span> !view._isAttached;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">shouldAttach</span>(<span class="hljs-params">view</span>) </span>{
  <span class="hljs-keyword">if</span> (!shouldTriggerAttach(view)) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }
  view._isAttached = <span class="hljs-literal">true</span>;
  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">shouldTriggerDetach</span>(<span class="hljs-params">view</span>) </span>{
  <span class="hljs-keyword">return</span> view._isAttached;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">shouldDetach</span>(<span class="hljs-params">view</span>) </span>{
  <span class="hljs-keyword">if</span> (!shouldTriggerDetach(view)) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }
  view._isAttached = <span class="hljs-literal">false</span>;
  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">triggerDOMRefresh</span>(<span class="hljs-params">view</span>) </span>{
  <span class="hljs-keyword">if</span> (view._isAttached &amp;&amp; view._isRendered) {
    triggerMethodOn(view, <span class="hljs-string">'dom:refresh'</span>, view);
  }
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">triggerDOMRemove</span>(<span class="hljs-params">view</span>) </span>{
  <span class="hljs-keyword">if</span> (view._isAttached &amp;&amp; view._isRendered) {
    triggerMethodOn(view, <span class="hljs-string">'dom:remove'</span>, view);
  }
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">handleBeforeAttach</span>(<span class="hljs-params"></span>) </span>{
  triggerMethodChildren(<span class="hljs-keyword">this</span>, <span class="hljs-string">'before:attach'</span>, shouldTriggerAttach);
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">handleAttach</span>(<span class="hljs-params"></span>) </span>{
  triggerMethodChildren(<span class="hljs-keyword">this</span>, <span class="hljs-string">'attach'</span>, shouldAttach);
  triggerDOMRefresh(<span class="hljs-keyword">this</span>);
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">handleBeforeDetach</span>(<span class="hljs-params"></span>) </span>{
  triggerMethodChildren(<span class="hljs-keyword">this</span>, <span class="hljs-string">'before:detach'</span>, shouldTriggerDetach);
  triggerDOMRemove(<span class="hljs-keyword">this</span>);
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">handleDetach</span>(<span class="hljs-params"></span>) </span>{
  triggerMethodChildren(<span class="hljs-keyword">this</span>, <span class="hljs-string">'detach'</span>, shouldDetach);
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">handleBeforeRender</span>(<span class="hljs-params"></span>) </span>{
  triggerDOMRemove(<span class="hljs-keyword">this</span>);
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">handleRender</span>(<span class="hljs-params"></span>) </span>{
  triggerDOMRefresh(<span class="hljs-keyword">this</span>);
}</pre></div></div>
            
        </li>
        
        
        <li id="section-29">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-29">&#182;</a>
              </div>
              <p>Monitor a view’s state, propagating attach/detach events to children and firing dom:refresh
whenever a rendered view is attached or an attached view is rendered.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">monitorViewEvents</span>(<span class="hljs-params">view</span>) </span>{
  <span class="hljs-keyword">if</span> (view._areViewEventsMonitored || view.monitorViewEvents === <span class="hljs-literal">false</span>) {
    <span class="hljs-keyword">return</span>;
  }

  view._areViewEventsMonitored = <span class="hljs-literal">true</span>;

  view.on({
    <span class="hljs-string">'before:attach'</span>: handleBeforeAttach,
    <span class="hljs-string">'attach'</span>: handleAttach,
    <span class="hljs-string">'before:detach'</span>: handleBeforeDetach,
    <span class="hljs-string">'detach'</span>: handleDetach,
    <span class="hljs-string">'before:render'</span>: handleBeforeRender,
    <span class="hljs-string">'render'</span>: handleRender
  });
}</pre></div></div>
            
        </li>
        
        
        <li id="section-30">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-30">&#182;</a>
              </div>
              <h2 id="error">Error</h2>

            </div>
            
        </li>
        
        
        <li id="section-31">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-31">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>
<span class="hljs-keyword">var</span> errorProps = [<span class="hljs-string">'description'</span>, <span class="hljs-string">'fileName'</span>, <span class="hljs-string">'lineNumber'</span>, <span class="hljs-string">'name'</span>, <span class="hljs-string">'message'</span>, <span class="hljs-string">'number'</span>];

<span class="hljs-keyword">var</span> MarionetteError = extend.call(<span class="hljs-built_in">Error</span>, {
  <span class="hljs-attr">urlRoot</span>: <span class="hljs-string">'http://marionettejs.com/docs/v'</span> + version + <span class="hljs-string">'/'</span>,

  <span class="hljs-attr">constructor</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">constructor</span>(<span class="hljs-params">message, options</span>) </span>{
    <span class="hljs-keyword">if</span> (_.isObject(message)) {
      options = message;
      message = options.message;
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!options) {
      options = {};
    }

    <span class="hljs-keyword">var</span> error = <span class="hljs-built_in">Error</span>.call(<span class="hljs-keyword">this</span>, message);
    _.extend(<span class="hljs-keyword">this</span>, _.pick(error, errorProps), _.pick(options, errorProps));

    <span class="hljs-keyword">this</span>.captureStackTrace();

    <span class="hljs-keyword">if</span> (options.url) {
      <span class="hljs-keyword">this</span>.url = <span class="hljs-keyword">this</span>.urlRoot + options.url;
    }
  },
  <span class="hljs-attr">captureStackTrace</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">captureStackTrace</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Error</span>.captureStackTrace) {
      <span class="hljs-built_in">Error</span>.captureStackTrace(<span class="hljs-keyword">this</span>, MarionetteError);
    }
  },
  <span class="hljs-attr">toString</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">toString</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.name + <span class="hljs-string">': '</span> + <span class="hljs-keyword">this</span>.message + (<span class="hljs-keyword">this</span>.url ? <span class="hljs-string">' See: '</span> + <span class="hljs-keyword">this</span>.url : <span class="hljs-string">''</span>);
  }
});

MarionetteError.extend = extend;</pre></div></div>
            
        </li>
        
        
        <li id="section-32">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-32">&#182;</a>
              </div>
              <h2 id="bind-entity-events-unbind-entity-events">Bind Entity Events &amp; Unbind Entity Events</h2>

            </div>
            
        </li>
        
        
        <li id="section-33">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-33">&#182;</a>
              </div>
              <p>These methods are used to bind/unbind a backbone “entity” (e.g. collection/model)
to methods on a target object.</p>
<p>The first parameter, <code>target</code>, must have the Backbone.Events module mixed in.</p>
<p>The second parameter is the <code>entity</code> (Backbone.Model, Backbone.Collection or
any object that has Backbone.Events mixed in) to bind the events from.</p>
<p>The third parameter is a hash of { “event:name”: “eventHandler” }
configuration. Multiple handlers can be separated by a space. A
function can be supplied instead of a string handler name.</p>

            </div>
            
        </li>
        
        
        <li id="section-34">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-34">&#182;</a>
              </div>
              <p>Bind/unbind the event to handlers specified as a string of
handler names on the target object</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">bindFromStrings</span>(<span class="hljs-params">target, entity, evt, methods, actionName</span>) </span>{
  <span class="hljs-keyword">var</span> methodNames = methods.split(<span class="hljs-regexp">/\s+/</span>);

  _.each(methodNames, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">methodName</span>) </span>{
    <span class="hljs-keyword">var</span> method = target[methodName];
    <span class="hljs-keyword">if</span> (!method) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> MarionetteError(<span class="hljs-string">'Method "'</span> + methodName + <span class="hljs-string">'" was configured as an event handler, but does not exist.'</span>);
    }

    target[actionName](entity, evt, method);
  });
}</pre></div></div>
            
        </li>
        
        
        <li id="section-35">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-35">&#182;</a>
              </div>
              <p>generic looping function</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">iterateEvents</span>(<span class="hljs-params">target, entity, bindings, actionName</span>) </span>{
  <span class="hljs-keyword">if</span> (!entity || !bindings) {
    <span class="hljs-keyword">return</span>;
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-36">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-36">&#182;</a>
              </div>
              <p>type-check bindings</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">if</span> (!_.isObject(bindings)) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> MarionetteError({
      <span class="hljs-attr">message</span>: <span class="hljs-string">'Bindings must be an object.'</span>,
      <span class="hljs-attr">url</span>: <span class="hljs-string">'marionette.functions.html#marionettebindevents'</span>
    });
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-37">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-37">&#182;</a>
              </div>
              <p>iterate the bindings and bind/unbind them</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _.each(bindings, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">method, evt</span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-38">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-38">&#182;</a>
              </div>
              <p>allow for a list of method names as a string</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">if</span> (_.isString(method)) {
      bindFromStrings(target, entity, evt, method, actionName);
      <span class="hljs-keyword">return</span>;
    }

    target[actionName](entity, evt, method);
  });
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">bindEvents</span>(<span class="hljs-params">entity, bindings</span>) </span>{
  iterateEvents(<span class="hljs-keyword">this</span>, entity, bindings, <span class="hljs-string">'listenTo'</span>);
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">unbindEvents</span>(<span class="hljs-params">entity, bindings</span>) </span>{
  iterateEvents(<span class="hljs-keyword">this</span>, entity, bindings, <span class="hljs-string">'stopListening'</span>);
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
}</pre></div></div>
            
        </li>
        
        
        <li id="section-39">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-39">&#182;</a>
              </div>
              <h2 id="bind-unbind-radio-requests">Bind/Unbind Radio Requests</h2>

            </div>
            
        </li>
        
        
        <li id="section-40">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-40">&#182;</a>
              </div>
              <p>These methods are used to bind/unbind a backbone.radio request
to methods on a target object.</p>
<p>The first parameter, <code>target</code>, will set the context of the reply method</p>
<p>The second parameter is the <code>Radio.channel</code> to bind the reply to.</p>
<p>The third parameter is a hash of { “request:name”: “replyHandler” }
configuration. A function can be supplied instead of a string handler name.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">iterateReplies</span>(<span class="hljs-params">target, channel, bindings, actionName</span>) </span>{
  <span class="hljs-keyword">if</span> (!channel || !bindings) {
    <span class="hljs-keyword">return</span>;
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-41">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-41">&#182;</a>
              </div>
              <p>type-check bindings</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">if</span> (!_.isObject(bindings)) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> MarionetteError({
      <span class="hljs-attr">message</span>: <span class="hljs-string">'Bindings must be an object.'</span>,
      <span class="hljs-attr">url</span>: <span class="hljs-string">'marionette.functions.html#marionettebindrequests'</span>
    });
  }

  <span class="hljs-keyword">var</span> normalizedRadioRequests = normalizeMethods.call(target, bindings);

  channel[actionName](normalizedRadioRequests, target);
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">bindRequests</span>(<span class="hljs-params">channel, bindings</span>) </span>{
  iterateReplies(<span class="hljs-keyword">this</span>, channel, bindings, <span class="hljs-string">'reply'</span>);
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">unbindRequests</span>(<span class="hljs-params">channel, bindings</span>) </span>{
  iterateReplies(<span class="hljs-keyword">this</span>, channel, bindings, <span class="hljs-string">'stopReplying'</span>);
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
}</pre></div></div>
            
        </li>
        
        
        <li id="section-42">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-42">&#182;</a>
              </div>
              <p>Internal utility for setting options consistently across Mn</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">var</span> setOptions = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setOptions</span>(<span class="hljs-params">options</span>) </span>{
  <span class="hljs-keyword">this</span>.options = _.extend({}, _.result(<span class="hljs-keyword">this</span>, <span class="hljs-string">'options'</span>), options);
};

<span class="hljs-keyword">var</span> CommonMixin = {</pre></div></div>
            
        </li>
        
        
        <li id="section-43">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-43">&#182;</a>
              </div>
              <p>Imports the “normalizeMethods” to transform hashes of
events=&gt;function references/names to a hash of events=&gt;function references</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  normalizeMethods: normalizeMethods,

  <span class="hljs-attr">_setOptions</span>: setOptions,</pre></div></div>
            
        </li>
        
        
        <li id="section-44">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-44">&#182;</a>
              </div>
              <p>A handy way to merge passed-in options onto the instance</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  mergeOptions: mergeOptions,</pre></div></div>
            
        </li>
        
        
        <li id="section-45">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-45">&#182;</a>
              </div>
              <p>Enable getting options from this or this.options by name.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  getOption: getOption,</pre></div></div>
            
        </li>
        
        
        <li id="section-46">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-46">&#182;</a>
              </div>
              <p>Enable binding view’s events from another entity.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  bindEvents: bindEvents,</pre></div></div>
            
        </li>
        
        
        <li id="section-47">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-47">&#182;</a>
              </div>
              <p>Enable unbinding view’s events from another entity.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  unbindEvents: unbindEvents
};</pre></div></div>
            
        </li>
        
        
        <li id="section-48">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-48">&#182;</a>
              </div>
              <p>MixinOptions</p>
<ul>
<li>channelName</li>
<li>radioEvents</li>
<li>radioRequests</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>
<span class="hljs-keyword">var</span> RadioMixin = {
  <span class="hljs-attr">_initRadio</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_initRadio</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> channelName = _.result(<span class="hljs-keyword">this</span>, <span class="hljs-string">'channelName'</span>);

    <span class="hljs-keyword">if</span> (!channelName) {
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-comment">/* istanbul ignore next */</span>
    <span class="hljs-keyword">if</span> (!Radio) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> MarionetteError({
        <span class="hljs-attr">name</span>: <span class="hljs-string">'BackboneRadioMissing'</span>,
        <span class="hljs-attr">message</span>: <span class="hljs-string">'The dependency "backbone.radio" is missing.'</span>
      });
    }

    <span class="hljs-keyword">var</span> channel = <span class="hljs-keyword">this</span>._channel = Radio.channel(channelName);

    <span class="hljs-keyword">var</span> radioEvents = _.result(<span class="hljs-keyword">this</span>, <span class="hljs-string">'radioEvents'</span>);
    <span class="hljs-keyword">this</span>.bindEvents(channel, radioEvents);

    <span class="hljs-keyword">var</span> radioRequests = _.result(<span class="hljs-keyword">this</span>, <span class="hljs-string">'radioRequests'</span>);
    <span class="hljs-keyword">this</span>.bindRequests(channel, radioRequests);

    <span class="hljs-keyword">this</span>.on(<span class="hljs-string">'destroy'</span>, <span class="hljs-keyword">this</span>._destroyRadio);
  },
  <span class="hljs-attr">_destroyRadio</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_destroyRadio</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">this</span>._channel.stopReplying(<span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>, <span class="hljs-keyword">this</span>);
  },
  <span class="hljs-attr">getChannel</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getChannel</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._channel;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-49">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-49">&#182;</a>
              </div>
              <p>Proxy <code>bindEvents</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  bindEvents: bindEvents,</pre></div></div>
            
        </li>
        
        
        <li id="section-50">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-50">&#182;</a>
              </div>
              <p>Proxy <code>unbindEvents</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  unbindEvents: unbindEvents,</pre></div></div>
            
        </li>
        
        
        <li id="section-51">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-51">&#182;</a>
              </div>
              <p>Proxy <code>bindRequests</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  bindRequests: bindRequests,</pre></div></div>
            
        </li>
        
        
        <li id="section-52">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-52">&#182;</a>
              </div>
              <p>Proxy <code>unbindRequests</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  unbindRequests: unbindRequests

};</pre></div></div>
            
        </li>
        
        
        <li id="section-53">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-53">&#182;</a>
              </div>
              <h2 id="object">Object</h2>

            </div>
            
        </li>
        
        
        <li id="section-54">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-54">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>
<span class="hljs-keyword">var</span> ClassOptions = [<span class="hljs-string">'channelName'</span>, <span class="hljs-string">'radioEvents'</span>, <span class="hljs-string">'radioRequests'</span>];</pre></div></div>
            
        </li>
        
        
        <li id="section-55">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-55">&#182;</a>
              </div>
              <p>A Base Class that other Classes should descend from.
Object borrows many conventions and utilities from Backbone.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">var</span> MarionetteObject = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">MarionetteObject</span>(<span class="hljs-params">options</span>) </span>{
  <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.hasOwnProperty(<span class="hljs-string">'options'</span>)) {
    <span class="hljs-keyword">this</span>._setOptions(options);
  }
  <span class="hljs-keyword">this</span>.mergeOptions(options, ClassOptions);
  <span class="hljs-keyword">this</span>._setCid();
  <span class="hljs-keyword">this</span>._initRadio();
  <span class="hljs-keyword">this</span>.initialize.apply(<span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span>);
};

MarionetteObject.extend = extend;</pre></div></div>
            
        </li>
        
        
        <li id="section-56">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-56">&#182;</a>
              </div>
              <h2 id="object-methods">Object Methods</h2>

            </div>
            
        </li>
        
        
        <li id="section-57">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-57">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-58">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-58">&#182;</a>
              </div>
              <p>Ensure it can trigger events with Backbone.Events</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>_.extend(MarionetteObject.prototype, Backbone.Events, CommonMixin, RadioMixin, {
  <span class="hljs-attr">cidPrefix</span>: <span class="hljs-string">'mno'</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-59">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-59">&#182;</a>
              </div>
              <p>for parity with Marionette.AbstractView lifecyle</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _isDestroyed: <span class="hljs-literal">false</span>,

  <span class="hljs-attr">isDestroyed</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isDestroyed</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._isDestroyed;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-60">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-60">&#182;</a>
              </div>
              <p>this is a noop method intended to be overridden by classes that extend from this base</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  initialize: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">initialize</span>(<span class="hljs-params"></span>) </span>{},
  <span class="hljs-attr">_setCid</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_setCid</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.cid) {
      <span class="hljs-keyword">return</span>;
    }
    <span class="hljs-keyword">this</span>.cid = _.uniqueId(<span class="hljs-keyword">this</span>.cidPrefix);
  },
  <span class="hljs-attr">destroy</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">destroy</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._isDestroyed) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
    }

    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> _len = <span class="hljs-built_in">arguments</span>.length, args = <span class="hljs-built_in">Array</span>(_len), _key = <span class="hljs-number">0</span>; _key &lt; _len; _key++) {
      args[_key] = <span class="hljs-built_in">arguments</span>[_key];
    }

    <span class="hljs-keyword">this</span>.triggerMethod.apply(<span class="hljs-keyword">this</span>, [<span class="hljs-string">'before:destroy'</span>, <span class="hljs-keyword">this</span>].concat(args));

    <span class="hljs-keyword">this</span>._isDestroyed = <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">this</span>.triggerMethod.apply(<span class="hljs-keyword">this</span>, [<span class="hljs-string">'destroy'</span>, <span class="hljs-keyword">this</span>].concat(args));
    <span class="hljs-keyword">this</span>.stopListening();

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
  },


  <span class="hljs-attr">triggerMethod</span>: triggerMethod
});</pre></div></div>
            
        </li>
        
        
        <li id="section-61">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-61">&#182;</a>
              </div>
              <h2 id="template-cache">Template Cache</h2>

            </div>
            
        </li>
        
        
        <li id="section-62">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-62">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-63">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-63">&#182;</a>
              </div>
              <p>Manage templates stored in <code>&lt;script&gt;</code> blocks,
caching them for faster access.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">var</span> TemplateCache = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">TemplateCache</span>(<span class="hljs-params">templateId</span>) </span>{
  <span class="hljs-keyword">this</span>.templateId = templateId;
};</pre></div></div>
            
        </li>
        
        
        <li id="section-64">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-64">&#182;</a>
              </div>
              <p>TemplateCache object-level methods. Manage the template
caches from these method calls instead of creating
your own TemplateCache instances</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>_.extend(TemplateCache, {

  <span class="hljs-attr">templateCaches</span>: {},</pre></div></div>
            
        </li>
        
        
        <li id="section-65">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-65">&#182;</a>
              </div>
              <p>Get the specified template by id. Either
retrieves the cached version, or loads it
from the DOM.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  get: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">get</span>(<span class="hljs-params">templateId, options</span>) </span>{
    <span class="hljs-keyword">var</span> cachedTemplate = <span class="hljs-keyword">this</span>.templateCaches[templateId];

    <span class="hljs-keyword">if</span> (!cachedTemplate) {
      cachedTemplate = <span class="hljs-keyword">new</span> TemplateCache(templateId);
      <span class="hljs-keyword">this</span>.templateCaches[templateId] = cachedTemplate;
    }

    <span class="hljs-keyword">return</span> cachedTemplate.load(options);
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-66">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-66">&#182;</a>
              </div>
              <p>Clear templates from the cache. If no arguments
are specified, clears all templates:
<code>clear()</code></p>
<p>If arguments are specified, clears each of the
specified templates from the cache:
<code>clear(&quot;#t1&quot;, &quot;#t2&quot;, &quot;...&quot;)</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  clear: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">clear</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> i = <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>;

    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> _len = <span class="hljs-built_in">arguments</span>.length, args = <span class="hljs-built_in">Array</span>(_len), _key = <span class="hljs-number">0</span>; _key &lt; _len; _key++) {
      args[_key] = <span class="hljs-built_in">arguments</span>[_key];
    }

    <span class="hljs-keyword">var</span> length = args.length;

    <span class="hljs-keyword">if</span> (length &gt; <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; length; i++) {
        <span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>.templateCaches[args[i]];
      }
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">this</span>.templateCaches = {};
    }
  }
});</pre></div></div>
            
        </li>
        
        
        <li id="section-67">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-67">&#182;</a>
              </div>
              <p>TemplateCache instance methods, allowing each
template cache object to manage its own state
and know whether or not it has been loaded</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>_.extend(TemplateCache.prototype, {</pre></div></div>
            
        </li>
        
        
        <li id="section-68">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-68">&#182;</a>
              </div>
              <p>Internal method to load the template</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  load: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">load</span>(<span class="hljs-params">options</span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-69">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-69">&#182;</a>
              </div>
              <p>Guard clause to prevent loading this template more than once</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.compiledTemplate) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.compiledTemplate;
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-70">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-70">&#182;</a>
              </div>
              <p>Load the template and compile it</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">var</span> template = <span class="hljs-keyword">this</span>.loadTemplate(<span class="hljs-keyword">this</span>.templateId, options);
    <span class="hljs-keyword">this</span>.compiledTemplate = <span class="hljs-keyword">this</span>.compileTemplate(template, options);

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.compiledTemplate;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-71">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-71">&#182;</a>
              </div>
              <p>Load a template from the DOM, by default. Override
this method to provide your own template retrieval
For asynchronous loading with AMD/RequireJS, consider
using a template-loader plugin as described here:
<a href="https://github.com/marionettejs/backbone.marionette/wiki/Using-marionette-with-requirejs">https://github.com/marionettejs/backbone.marionette/wiki/Using-marionette-with-requirejs</a></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  loadTemplate: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">loadTemplate</span>(<span class="hljs-params">templateId, options</span>) </span>{
    <span class="hljs-keyword">var</span> $template = Backbone.$(templateId);

    <span class="hljs-keyword">if</span> (!$template.length) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> MarionetteError({
        <span class="hljs-attr">name</span>: <span class="hljs-string">'NoTemplateError'</span>,
        <span class="hljs-attr">message</span>: <span class="hljs-string">'Could not find template: "'</span> + templateId + <span class="hljs-string">'"'</span>
      });
    }
    <span class="hljs-keyword">return</span> $template.html();
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-72">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-72">&#182;</a>
              </div>
              <p>Pre-compile the template before caching it. Override
this method if you do not need to pre-compile a template
(JST / RequireJS for example) or if you want to change
the template engine used (Handebars, etc).</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  compileTemplate: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compileTemplate</span>(<span class="hljs-params">rawTemplate, options</span>) </span>{
    <span class="hljs-keyword">return</span> _.template(rawTemplate, options);
  }
});</pre></div></div>
            
        </li>
        
        
        <li id="section-73">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-73">&#182;</a>
              </div>
              <p>Implementation of the invoke method (<a href="http://underscorejs.org/#invoke">http://underscorejs.org/#invoke</a>) with support for
lodash v3, v4, and underscore.js</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">var</span> _invoke = _.invokeMap || _.invoke;</pre></div></div>
            
        </li>
        
        
        <li id="section-74">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-74">&#182;</a>
              </div>
              <p>MixinOptions</p>
<ul>
<li>behaviors</li>
</ul>

            </div>
            
        </li>
        
        
        <li id="section-75">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-75">&#182;</a>
              </div>
              <p>Takes care of getting the behavior class
given options and a key.
If a user passes in options.behaviorClass
default to using that.
If a user passes in a Behavior Class directly, use that
Otherwise delegate the lookup to the users <code>behaviorsLookup</code> implementation.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getBehaviorClass</span>(<span class="hljs-params">options, key</span>) </span>{
  <span class="hljs-keyword">if</span> (options.behaviorClass) {
    <span class="hljs-keyword">return</span> options.behaviorClass;</pre></div></div>
            
        </li>
        
        
        <li id="section-76">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-76">&#182;</a>
              </div>
              <p>treat functions as a Behavior constructor</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (_.isFunction(options)) {
    <span class="hljs-keyword">return</span> options;
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-77">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-77">&#182;</a>
              </div>
              <p>behaviorsLookup can be either a flat object or a method</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">if</span> (_.isFunction(Marionette.Behaviors.behaviorsLookup)) {
    <span class="hljs-keyword">return</span> Marionette.Behaviors.behaviorsLookup(options, key)[key];
  }

  <span class="hljs-keyword">return</span> Marionette.Behaviors.behaviorsLookup[key];
}</pre></div></div>
            
        </li>
        
        
        <li id="section-78">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-78">&#182;</a>
              </div>
              <p>Iterate over the behaviors object, for each behavior
instantiate it and get its grouped behaviors.
This accepts a list of behaviors in either an object or array form</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">parseBehaviors</span>(<span class="hljs-params">view, behaviors</span>) </span>{
  <span class="hljs-keyword">return</span> _.chain(behaviors).map(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">options, key</span>) </span>{
    <span class="hljs-keyword">var</span> BehaviorClass = getBehaviorClass(options, key);</pre></div></div>
            
        </li>
        
        
        <li id="section-79">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-79">&#182;</a>
              </div>
              <p>if we’re passed a class directly instead of an object</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">var</span> _options = options === BehaviorClass ? {} : options;
    <span class="hljs-keyword">var</span> behavior = <span class="hljs-keyword">new</span> BehaviorClass(_options, view);
    <span class="hljs-keyword">var</span> nestedBehaviors = parseBehaviors(view, _.result(behavior, <span class="hljs-string">'behaviors'</span>));

    <span class="hljs-keyword">return</span> [behavior].concat(nestedBehaviors);
  }).flatten().value();
}

<span class="hljs-keyword">var</span> BehaviorsMixin = {
  <span class="hljs-attr">_initBehaviors</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_initBehaviors</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">this</span>._behaviors = <span class="hljs-keyword">this</span>._getBehaviors();
  },
  <span class="hljs-attr">_getBehaviors</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_getBehaviors</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> behaviors = _.result(<span class="hljs-keyword">this</span>, <span class="hljs-string">'behaviors'</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-80">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-80">&#182;</a>
              </div>
              <p>Behaviors defined on a view can be a flat object literal
or it can be a function that returns an object.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">return</span> _.isObject(behaviors) ? parseBehaviors(<span class="hljs-keyword">this</span>, behaviors) : {};
  },
  <span class="hljs-attr">_getBehaviorTriggers</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_getBehaviorTriggers</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> triggers = _invoke(<span class="hljs-keyword">this</span>._behaviors, <span class="hljs-string">'getTriggers'</span>);
    <span class="hljs-keyword">return</span> _.reduce(triggers, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">memo, _triggers</span>) </span>{
      <span class="hljs-keyword">return</span> _.extend(memo, _triggers);
    }, {});
  },
  <span class="hljs-attr">_getBehaviorEvents</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_getBehaviorEvents</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> events = _invoke(<span class="hljs-keyword">this</span>._behaviors, <span class="hljs-string">'getEvents'</span>);
    <span class="hljs-keyword">return</span> _.reduce(events, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">memo, _events</span>) </span>{
      <span class="hljs-keyword">return</span> _.extend(memo, _events);
    }, {});
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-81">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-81">&#182;</a>
              </div>
              <p>proxy behavior $el to the view’s $el.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _proxyBehaviorViewProperties: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_proxyBehaviorViewProperties</span>(<span class="hljs-params"></span>) </span>{
    _invoke(<span class="hljs-keyword">this</span>._behaviors, <span class="hljs-string">'proxyViewProperties'</span>);
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-82">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-82">&#182;</a>
              </div>
              <p>delegate modelEvents and collectionEvents</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _delegateBehaviorEntityEvents: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_delegateBehaviorEntityEvents</span>(<span class="hljs-params"></span>) </span>{
    _invoke(<span class="hljs-keyword">this</span>._behaviors, <span class="hljs-string">'delegateEntityEvents'</span>);
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-83">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-83">&#182;</a>
              </div>
              <p>undelegate modelEvents and collectionEvents</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _undelegateBehaviorEntityEvents: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_undelegateBehaviorEntityEvents</span>(<span class="hljs-params"></span>) </span>{
    _invoke(<span class="hljs-keyword">this</span>._behaviors, <span class="hljs-string">'undelegateEntityEvents'</span>);
  },
  <span class="hljs-attr">_destroyBehaviors</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_destroyBehaviors</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> _len = <span class="hljs-built_in">arguments</span>.length, args = <span class="hljs-built_in">Array</span>(_len), _key = <span class="hljs-number">0</span>; _key &lt; _len; _key++) {
      args[_key] = <span class="hljs-built_in">arguments</span>[_key];
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-84">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-84">&#182;</a>
              </div>
              <p>Call destroy on each behavior after
destroying the view.
This unbinds event listeners
that behaviors have registered for.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _invoke.apply(<span class="hljs-literal">undefined</span>, [<span class="hljs-keyword">this</span>._behaviors, <span class="hljs-string">'destroy'</span>].concat(args));
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-85">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-85">&#182;</a>
              </div>
              <p>Remove a behavior</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _removeBehavior: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_removeBehavior</span>(<span class="hljs-params">behavior</span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-86">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-86">&#182;</a>
              </div>
              <p>Don’t worry about the clean up if the view is destroyed</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._isDestroyed) {
      <span class="hljs-keyword">return</span>;
    }
    <span class="hljs-keyword">this</span>._behaviors = _.without(<span class="hljs-keyword">this</span>._behaviors, behavior);
  },
  <span class="hljs-attr">_bindBehaviorUIElements</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_bindBehaviorUIElements</span>(<span class="hljs-params"></span>) </span>{
    _invoke(<span class="hljs-keyword">this</span>._behaviors, <span class="hljs-string">'bindUIElements'</span>);
  },
  <span class="hljs-attr">_unbindBehaviorUIElements</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_unbindBehaviorUIElements</span>(<span class="hljs-params"></span>) </span>{
    _invoke(<span class="hljs-keyword">this</span>._behaviors, <span class="hljs-string">'unbindUIElements'</span>);
  },
  <span class="hljs-attr">_triggerEventOnBehaviors</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_triggerEventOnBehaviors</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> behaviors = <span class="hljs-keyword">this</span>._behaviors;</pre></div></div>
            
        </li>
        
        
        <li id="section-87">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-87">&#182;</a>
              </div>
              <p>Use good ol’ for as this is a very hot function</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, length = behaviors &amp;&amp; behaviors.length; i &lt; length; i++) {
      triggerMethod.apply(behaviors[i], <span class="hljs-built_in">arguments</span>);
    }
  }
};</pre></div></div>
            
        </li>
        
        
        <li id="section-88">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-88">&#182;</a>
              </div>
              <p>MixinOptions</p>
<ul>
<li>collectionEvents</li>
<li>modelEvents</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>
<span class="hljs-keyword">var</span> DelegateEntityEventsMixin = {</pre></div></div>
            
        </li>
        
        
        <li id="section-89">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-89">&#182;</a>
              </div>
              <p>Handle <code>modelEvents</code>, and <code>collectionEvents</code> configuration</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _delegateEntityEvents: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_delegateEntityEvents</span>(<span class="hljs-params">model, collection</span>) </span>{
    <span class="hljs-keyword">this</span>._undelegateEntityEvents(model, collection);

    <span class="hljs-keyword">var</span> modelEvents = _.result(<span class="hljs-keyword">this</span>, <span class="hljs-string">'modelEvents'</span>);
    bindEvents.call(<span class="hljs-keyword">this</span>, model, modelEvents);

    <span class="hljs-keyword">var</span> collectionEvents = _.result(<span class="hljs-keyword">this</span>, <span class="hljs-string">'collectionEvents'</span>);
    bindEvents.call(<span class="hljs-keyword">this</span>, collection, collectionEvents);
  },
  <span class="hljs-attr">_undelegateEntityEvents</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_undelegateEntityEvents</span>(<span class="hljs-params">model, collection</span>) </span>{
    <span class="hljs-keyword">var</span> modelEvents = _.result(<span class="hljs-keyword">this</span>, <span class="hljs-string">'modelEvents'</span>);
    unbindEvents.call(<span class="hljs-keyword">this</span>, model, modelEvents);

    <span class="hljs-keyword">var</span> collectionEvents = _.result(<span class="hljs-keyword">this</span>, <span class="hljs-string">'collectionEvents'</span>);
    unbindEvents.call(<span class="hljs-keyword">this</span>, collection, collectionEvents);
  }
};</pre></div></div>
            
        </li>
        
        
        <li id="section-90">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-90">&#182;</a>
              </div>
              <p>Borrow event splitter from Backbone</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">var</span> delegateEventSplitter = <span class="hljs-regexp">/^(\S+)\s*(.*)$/</span>;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">uniqueName</span>(<span class="hljs-params">eventName, selector</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-string">''</span> + eventName + _.uniqueId(<span class="hljs-string">'.evt'</span>) + <span class="hljs-string">' '</span> + selector;
}</pre></div></div>
            
        </li>
        
        
        <li id="section-91">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-91">&#182;</a>
              </div>
              <p>Set event name to be namespaced using a unique index
to generate a non colliding event namespace
<a href="http://api.jquery.com/event.namespace/">http://api.jquery.com/event.namespace/</a></p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">var</span> getUniqueEventName = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getUniqueEventName</span>(<span class="hljs-params">eventName</span>) </span>{
  <span class="hljs-keyword">var</span> match = eventName.match(delegateEventSplitter);
  <span class="hljs-keyword">return</span> uniqueName(match[<span class="hljs-number">1</span>], match[<span class="hljs-number">2</span>]);
};</pre></div></div>
            
        </li>
        
        
        <li id="section-92">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-92">&#182;</a>
              </div>
              <p>Add Feature flags here
e.g. ‘class’ =&gt; false</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">var</span> FEATURES = {
  <span class="hljs-attr">childViewEventPrefix</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">triggersStopPropagation</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">triggersPreventDefault</span>: <span class="hljs-literal">true</span>
};

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isEnabled</span>(<span class="hljs-params">name</span>) </span>{
  <span class="hljs-keyword">return</span> !!FEATURES[name];
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setEnabled</span>(<span class="hljs-params">name, state</span>) </span>{
  <span class="hljs-keyword">return</span> FEATURES[name] = state;
}</pre></div></div>
            
        </li>
        
        
        <li id="section-93">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-93">&#182;</a>
              </div>
              <p>Internal method to create an event handler for a given <code>triggerDef</code> like
‘click:foo’</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">buildViewTrigger</span>(<span class="hljs-params">view, triggerDef</span>) </span>{
  <span class="hljs-keyword">if</span> (_.isString(triggerDef)) {
    triggerDef = { <span class="hljs-attr">event</span>: triggerDef };
  }

  <span class="hljs-keyword">var</span> eventName = triggerDef.event;

  <span class="hljs-keyword">var</span> shouldPreventDefault = !!triggerDef.preventDefault;

  <span class="hljs-keyword">if</span> (isEnabled(<span class="hljs-string">'triggersPreventDefault'</span>)) {
    shouldPreventDefault = triggerDef.preventDefault !== <span class="hljs-literal">false</span>;
  }

  <span class="hljs-keyword">var</span> shouldStopPropagation = !!triggerDef.stopPropagation;

  <span class="hljs-keyword">if</span> (isEnabled(<span class="hljs-string">'triggersStopPropagation'</span>)) {
    shouldStopPropagation = triggerDef.stopPropagation !== <span class="hljs-literal">false</span>;
  }

  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">event</span>) </span>{
    <span class="hljs-keyword">if</span> (shouldPreventDefault) {
      event.preventDefault();
    }

    <span class="hljs-keyword">if</span> (shouldStopPropagation) {
      event.stopPropagation();
    }

    view.triggerMethod(eventName, view, event);
  };
}

<span class="hljs-keyword">var</span> TriggersMixin = {</pre></div></div>
            
        </li>
        
        
        <li id="section-94">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-94">&#182;</a>
              </div>
              <p>Configure <code>triggers</code> to forward DOM events to view
events. <code>triggers: {&quot;click .foo&quot;: &quot;do:foo&quot;}</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _getViewTriggers: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_getViewTriggers</span>(<span class="hljs-params">view, triggers</span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-95">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-95">&#182;</a>
              </div>
              <p>Configure the triggers, prevent default
action and stop propagation of DOM events</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">return</span> _.reduce(triggers, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">events, value, key</span>) </span>{
      key = getUniqueEventName(key);
      events[key] = buildViewTrigger(view, value);
      <span class="hljs-keyword">return</span> events;
    }, {});
  }
};</pre></div></div>
            
        </li>
        
        
        <li id="section-96">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-96">&#182;</a>
              </div>
              <p>allows for the use of the @ui. syntax within
a given key for triggers and events
swaps the @ui with the associated selector.
Returns a new, non-mutated, parsed events hash.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">var</span> _normalizeUIKeys = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_normalizeUIKeys</span>(<span class="hljs-params">hash, ui</span>) </span>{
  <span class="hljs-keyword">return</span> _.reduce(hash, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">memo, val, key</span>) </span>{
    <span class="hljs-keyword">var</span> normalizedKey = _normalizeUIString(key, ui);
    memo[normalizedKey] = val;
    <span class="hljs-keyword">return</span> memo;
  }, {});
};</pre></div></div>
            
        </li>
        
        
        <li id="section-97">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-97">&#182;</a>
              </div>
              <p>utility method for parsing @ui. syntax strings
into associated selector</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">var</span> _normalizeUIString = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_normalizeUIString</span>(<span class="hljs-params">uiString, ui</span>) </span>{
  <span class="hljs-keyword">return</span> uiString.replace(<span class="hljs-regexp">/@ui\.[a-zA-Z-_$0-9]*/g</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">r</span>) </span>{
    <span class="hljs-keyword">return</span> ui[r.slice(<span class="hljs-number">4</span>)];
  });
};</pre></div></div>
            
        </li>
        
        
        <li id="section-98">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-98">&#182;</a>
              </div>
              <p>allows for the use of the @ui. syntax within
a given value for regions
swaps the @ui with the associated selector</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">var</span> _normalizeUIValues = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_normalizeUIValues</span>(<span class="hljs-params">hash, ui, properties</span>) </span>{
  _.each(hash, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">val, key</span>) </span>{
    <span class="hljs-keyword">if</span> (_.isString(val)) {
      hash[key] = _normalizeUIString(val, ui);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (_.isObject(val) &amp;&amp; _.isArray(properties)) {
      _.extend(val, _normalizeUIValues(_.pick(val, properties), ui));
      <span class="hljs-comment">/* Value is an object, and we got an array of embedded property names to normalize. */</span>
      _.each(properties, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">property</span>) </span>{
        <span class="hljs-keyword">var</span> propertyVal = val[property];
        <span class="hljs-keyword">if</span> (_.isString(propertyVal)) {
          val[property] = _normalizeUIString(propertyVal, ui);
        }
      });
    }
  });
  <span class="hljs-keyword">return</span> hash;
};

<span class="hljs-keyword">var</span> UIMixin = {</pre></div></div>
            
        </li>
        
        
        <li id="section-99">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-99">&#182;</a>
              </div>
              <p>normalize the keys of passed hash with the views <code>ui</code> selectors.
<code>{&quot;@ui.foo&quot;: &quot;bar&quot;}</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  normalizeUIKeys: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">normalizeUIKeys</span>(<span class="hljs-params">hash</span>) </span>{
    <span class="hljs-keyword">var</span> uiBindings = <span class="hljs-keyword">this</span>._getUIBindings();
    <span class="hljs-keyword">return</span> _normalizeUIKeys(hash, uiBindings);
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-100">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-100">&#182;</a>
              </div>
              <p>normalize the passed string with the views <code>ui</code> selectors.
<code>&quot;@ui.bar&quot;</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  normalizeUIString: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">normalizeUIString</span>(<span class="hljs-params">uiString</span>) </span>{
    <span class="hljs-keyword">var</span> uiBindings = <span class="hljs-keyword">this</span>._getUIBindings();
    <span class="hljs-keyword">return</span> _normalizeUIString(uiString, uiBindings);
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-101">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-101">&#182;</a>
              </div>
              <p>normalize the values of passed hash with the views <code>ui</code> selectors.
<code>{foo: &quot;@ui.bar&quot;}</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  normalizeUIValues: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">normalizeUIValues</span>(<span class="hljs-params">hash, properties</span>) </span>{
    <span class="hljs-keyword">var</span> uiBindings = <span class="hljs-keyword">this</span>._getUIBindings();
    <span class="hljs-keyword">return</span> _normalizeUIValues(hash, uiBindings, properties);
  },
  <span class="hljs-attr">_getUIBindings</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_getUIBindings</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> uiBindings = _.result(<span class="hljs-keyword">this</span>, <span class="hljs-string">'_uiBindings'</span>);
    <span class="hljs-keyword">var</span> ui = _.result(<span class="hljs-keyword">this</span>, <span class="hljs-string">'ui'</span>);
    <span class="hljs-keyword">return</span> uiBindings || ui;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-102">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-102">&#182;</a>
              </div>
              <p>This method binds the elements specified in the “ui” hash inside the view’s code with
the associated jQuery selectors.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _bindUIElements: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_bindUIElements</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> _this = <span class="hljs-keyword">this</span>;

    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.ui) {
      <span class="hljs-keyword">return</span>;
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-103">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-103">&#182;</a>
              </div>
              <p>store the ui hash in _uiBindings so they can be reset later
and so re-rendering the view will be able to find the bindings</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>._uiBindings) {
      <span class="hljs-keyword">this</span>._uiBindings = <span class="hljs-keyword">this</span>.ui;
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-104">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-104">&#182;</a>
              </div>
              <p>get the bindings result, as a function or otherwise</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">var</span> bindings = _.result(<span class="hljs-keyword">this</span>, <span class="hljs-string">'_uiBindings'</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-105">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-105">&#182;</a>
              </div>
              <p>empty the ui so we don’t have anything to start with</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">this</span>._ui = {};</pre></div></div>
            
        </li>
        
        
        <li id="section-106">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-106">&#182;</a>
              </div>
              <p>bind each of the selectors</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _.each(bindings, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">selector, key</span>) </span>{
      _this._ui[key] = _this.$(selector);
    });

    <span class="hljs-keyword">this</span>.ui = <span class="hljs-keyword">this</span>._ui;
  },
  <span class="hljs-attr">_unbindUIElements</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_unbindUIElements</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> _this2 = <span class="hljs-keyword">this</span>;

    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.ui || !<span class="hljs-keyword">this</span>._uiBindings) {
      <span class="hljs-keyword">return</span>;
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-107">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-107">&#182;</a>
              </div>
              <p>delete all of the existing ui bindings</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _.each(<span class="hljs-keyword">this</span>.ui, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">$el, name</span>) </span>{
      <span class="hljs-keyword">delete</span> _this2.ui[name];
    });</pre></div></div>
            
        </li>
        
        
        <li id="section-108">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-108">&#182;</a>
              </div>
              <p>reset the ui element to the original bindings configuration</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">this</span>.ui = <span class="hljs-keyword">this</span>._uiBindings;
    <span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>._uiBindings;
    <span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>._ui;
  },
  <span class="hljs-attr">_getUI</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_getUI</span>(<span class="hljs-params">name</span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._ui[name];
  }
};</pre></div></div>
            
        </li>
        
        
        <li id="section-109">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-109">&#182;</a>
              </div>
              <h2 id="domapi">DomApi</h2>
<p>Performant method for returning the jQuery instance</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_getEl</span>(<span class="hljs-params">el</span>) </span>{
  <span class="hljs-keyword">return</span> el <span class="hljs-keyword">instanceof</span> Backbone.$ ? el : Backbone.$(el);
}</pre></div></div>
            
        </li>
        
        
        <li id="section-110">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-110">&#182;</a>
              </div>
              <p>Static setter</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setDomApi</span>(<span class="hljs-params">mixin</span>) </span>{
  <span class="hljs-keyword">this</span>.prototype.Dom = _.extend({}, <span class="hljs-keyword">this</span>.prototype.Dom, mixin);
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
}

<span class="hljs-keyword">var</span> DomApi = {</pre></div></div>
            
        </li>
        
        
        <li id="section-111">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-111">&#182;</a>
              </div>
              <p>Returns a new HTML DOM node instance</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  createBuffer: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createBuffer</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">document</span>.createDocumentFragment();
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-112">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-112">&#182;</a>
              </div>
              <p>Lookup the <code>selector</code> string
Selector may also be a DOM element
Returns an array-like object of nodes</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  getEl: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getEl</span>(<span class="hljs-params">selector</span>) </span>{
    <span class="hljs-keyword">return</span> _getEl(selector);
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-113">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-113">&#182;</a>
              </div>
              <p>Finds the <code>selector</code> string with the el
Returns an array-like object of nodes</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  findEl: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">findEl</span>(<span class="hljs-params">el, selector</span>) </span>{
    <span class="hljs-keyword">var</span> _$el = <span class="hljs-built_in">arguments</span>.length &gt; <span class="hljs-number">2</span> &amp;&amp; <span class="hljs-built_in">arguments</span>[<span class="hljs-number">2</span>] !== <span class="hljs-literal">undefined</span> ? <span class="hljs-built_in">arguments</span>[<span class="hljs-number">2</span>] : _getEl(el);

    <span class="hljs-keyword">return</span> _$el.find(selector);
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-114">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-114">&#182;</a>
              </div>
              <p>Returns true if the el contains the node childEl</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  hasEl: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">hasEl</span>(<span class="hljs-params">el, childEl</span>) </span>{
    <span class="hljs-keyword">return</span> el.contains(childEl &amp;&amp; childEl.parentNode);
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-115">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-115">&#182;</a>
              </div>
              <p>Detach <code>el</code> from the DOM without removing listeners</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  detachEl: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">detachEl</span>(<span class="hljs-params">el</span>) </span>{
    <span class="hljs-keyword">var</span> _$el = <span class="hljs-built_in">arguments</span>.length &gt; <span class="hljs-number">1</span> &amp;&amp; <span class="hljs-built_in">arguments</span>[<span class="hljs-number">1</span>] !== <span class="hljs-literal">undefined</span> ? <span class="hljs-built_in">arguments</span>[<span class="hljs-number">1</span>] : _getEl(el);

    _$el.detach();
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-116">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-116">&#182;</a>
              </div>
              <p>Remove <code>oldEl</code> from the DOM and put <code>newEl</code> in its place</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  replaceEl: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">replaceEl</span>(<span class="hljs-params">newEl, oldEl</span>) </span>{
    <span class="hljs-keyword">if</span> (newEl === oldEl) {
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-keyword">var</span> parent = oldEl.parentNode;

    <span class="hljs-keyword">if</span> (!parent) {
      <span class="hljs-keyword">return</span>;
    }

    parent.replaceChild(newEl, oldEl);
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-117">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-117">&#182;</a>
              </div>
              <p>Swaps the location of <code>el1</code> and <code>el2</code> in the DOM</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  swapEl: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">swapEl</span>(<span class="hljs-params">el1, el2</span>) </span>{
    <span class="hljs-keyword">if</span> (el1 === el2) {
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-keyword">var</span> parent1 = el1.parentNode;
    <span class="hljs-keyword">var</span> parent2 = el2.parentNode;

    <span class="hljs-keyword">if</span> (!parent1 || !parent2) {
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-keyword">var</span> next1 = el1.nextSibling;
    <span class="hljs-keyword">var</span> next2 = el2.nextSibling;

    parent1.insertBefore(el2, next1);
    parent2.insertBefore(el1, next2);
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-118">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-118">&#182;</a>
              </div>
              <p>Replace the contents of <code>el</code> with the HTML string of <code>html</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  setContents: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setContents</span>(<span class="hljs-params">el, html</span>) </span>{
    <span class="hljs-keyword">var</span> _$el = <span class="hljs-built_in">arguments</span>.length &gt; <span class="hljs-number">2</span> &amp;&amp; <span class="hljs-built_in">arguments</span>[<span class="hljs-number">2</span>] !== <span class="hljs-literal">undefined</span> ? <span class="hljs-built_in">arguments</span>[<span class="hljs-number">2</span>] : _getEl(el);

    _$el.html(html);
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-119">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-119">&#182;</a>
              </div>
              <p>Takes the DOM node <code>el</code> and appends the DOM node <code>contents</code>
to the end of the element’s contents.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  appendContents: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">appendContents</span>(<span class="hljs-params">el, contents</span>) </span>{
    <span class="hljs-keyword">var</span> _ref = <span class="hljs-built_in">arguments</span>.length &gt; <span class="hljs-number">2</span> &amp;&amp; <span class="hljs-built_in">arguments</span>[<span class="hljs-number">2</span>] !== <span class="hljs-literal">undefined</span> ? <span class="hljs-built_in">arguments</span>[<span class="hljs-number">2</span>] : {},
        _ref$_$el = _ref._$el,
        _$el = _ref$_$el === <span class="hljs-literal">undefined</span> ? _getEl(el) : _ref$_$el,
        _ref$_$contents = _ref._$contents,
        _$contents = _ref$_$contents === <span class="hljs-literal">undefined</span> ? _getEl(contents) : _ref$_$contents;

    _$el.append(_$contents);
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-120">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-120">&#182;</a>
              </div>
              <p>Does the el have child nodes</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  hasContents: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">hasContents</span>(<span class="hljs-params">el</span>) </span>{
    <span class="hljs-keyword">return</span> el.hasChildNodes();
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-121">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-121">&#182;</a>
              </div>
              <p>Remove the inner contents of <code>el</code> from the DOM while leaving
<code>el</code> itself in the DOM.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  detachContents: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">detachContents</span>(<span class="hljs-params">el</span>) </span>{
    <span class="hljs-keyword">var</span> _$el = <span class="hljs-built_in">arguments</span>.length &gt; <span class="hljs-number">1</span> &amp;&amp; <span class="hljs-built_in">arguments</span>[<span class="hljs-number">1</span>] !== <span class="hljs-literal">undefined</span> ? <span class="hljs-built_in">arguments</span>[<span class="hljs-number">1</span>] : _getEl(el);

    _$el.contents().detach();
  }
};</pre></div></div>
            
        </li>
        
        
        <li id="section-122">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-122">&#182;</a>
              </div>
              <h2 id="viewmixin">ViewMixin</h2>

            </div>
            
        </li>
        
        
        <li id="section-123">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-123">&#182;</a>
              </div>
              <p>MixinOptions</p>
<ul>
<li>behaviors</li>
<li>childViewEventPrefix</li>
<li>childViewEvents</li>
<li>childViewTriggers</li>
<li>collectionEvents</li>
<li>modelEvents</li>
<li>triggers</li>
<li>ui</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>

<span class="hljs-keyword">var</span> ViewMixin = {
  <span class="hljs-attr">Dom</span>: DomApi,

  <span class="hljs-attr">supportsRenderLifecycle</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">supportsDestroyLifecycle</span>: <span class="hljs-literal">true</span>,

  <span class="hljs-attr">_isDestroyed</span>: <span class="hljs-literal">false</span>,

  <span class="hljs-attr">isDestroyed</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isDestroyed</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> !!<span class="hljs-keyword">this</span>._isDestroyed;
  },


  <span class="hljs-attr">_isRendered</span>: <span class="hljs-literal">false</span>,

  <span class="hljs-attr">isRendered</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isRendered</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> !!<span class="hljs-keyword">this</span>._isRendered;
  },


  <span class="hljs-attr">_isAttached</span>: <span class="hljs-literal">false</span>,

  <span class="hljs-attr">isAttached</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isAttached</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> !!<span class="hljs-keyword">this</span>._isAttached;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-124">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-124">&#182;</a>
              </div>
              <p>Overriding Backbone.View’s <code>delegateEvents</code> to handle
<code>events</code> and <code>triggers</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  delegateEvents: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">delegateEvents</span>(<span class="hljs-params">eventsArg</span>) </span>{

    <span class="hljs-keyword">this</span>._proxyBehaviorViewProperties();
    <span class="hljs-keyword">this</span>._buildEventProxies();

    <span class="hljs-keyword">var</span> viewEvents = <span class="hljs-keyword">this</span>._getEvents(eventsArg);

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> eventsArg === <span class="hljs-string">'undefined'</span>) {
      <span class="hljs-keyword">this</span>.events = viewEvents;
    }

    <span class="hljs-keyword">var</span> combinedEvents = _.extend({}, <span class="hljs-keyword">this</span>._getBehaviorEvents(), viewEvents, <span class="hljs-keyword">this</span>._getBehaviorTriggers(), <span class="hljs-keyword">this</span>.getTriggers());

    Backbone.View.prototype.delegateEvents.call(<span class="hljs-keyword">this</span>, combinedEvents);

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
  },
  <span class="hljs-attr">_getEvents</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_getEvents</span>(<span class="hljs-params">eventsArg</span>) </span>{
    <span class="hljs-keyword">var</span> events = eventsArg || <span class="hljs-keyword">this</span>.events;

    <span class="hljs-keyword">if</span> (_.isFunction(events)) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.normalizeUIKeys(events.call(<span class="hljs-keyword">this</span>));
    }

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.normalizeUIKeys(events);
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-125">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-125">&#182;</a>
              </div>
              <p>Configure <code>triggers</code> to forward DOM events to view
events. <code>triggers: {&quot;click .foo&quot;: &quot;do:foo&quot;}</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  getTriggers: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getTriggers</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.triggers) {
      <span class="hljs-keyword">return</span>;
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-126">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-126">&#182;</a>
              </div>
              <p>Allow <code>triggers</code> to be configured as a function</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">var</span> triggers = <span class="hljs-keyword">this</span>.normalizeUIKeys(_.result(<span class="hljs-keyword">this</span>, <span class="hljs-string">'triggers'</span>));</pre></div></div>
            
        </li>
        
        
        <li id="section-127">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-127">&#182;</a>
              </div>
              <p>Configure the triggers, prevent default
action and stop propagation of DOM events</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._getViewTriggers(<span class="hljs-keyword">this</span>, triggers);
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-128">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-128">&#182;</a>
              </div>
              <p>Handle <code>modelEvents</code>, and <code>collectionEvents</code> configuration</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  delegateEntityEvents: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">delegateEntityEvents</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">this</span>._delegateEntityEvents(<span class="hljs-keyword">this</span>.model, <span class="hljs-keyword">this</span>.collection);</pre></div></div>
            
        </li>
        
        
        <li id="section-129">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-129">&#182;</a>
              </div>
              <p>bind each behaviors model and collection events</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">this</span>._delegateBehaviorEntityEvents();

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-130">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-130">&#182;</a>
              </div>
              <p>Handle unbinding <code>modelEvents</code>, and <code>collectionEvents</code> configuration</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  undelegateEntityEvents: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">undelegateEntityEvents</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">this</span>._undelegateEntityEvents(<span class="hljs-keyword">this</span>.model, <span class="hljs-keyword">this</span>.collection);</pre></div></div>
            
        </li>
        
        
        <li id="section-131">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-131">&#182;</a>
              </div>
              <p>unbind each behaviors model and collection events</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">this</span>._undelegateBehaviorEntityEvents();

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-132">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-132">&#182;</a>
              </div>
              <p>Handle destroying the view and its children.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  destroy: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">destroy</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._isDestroyed) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
    }
    <span class="hljs-keyword">var</span> shouldTriggerDetach = <span class="hljs-keyword">this</span>._isAttached &amp;&amp; !<span class="hljs-keyword">this</span>._shouldDisableEvents;

    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> _len = <span class="hljs-built_in">arguments</span>.length, args = <span class="hljs-built_in">Array</span>(_len), _key = <span class="hljs-number">0</span>; _key &lt; _len; _key++) {
      args[_key] = <span class="hljs-built_in">arguments</span>[_key];
    }

    <span class="hljs-keyword">this</span>.triggerMethod.apply(<span class="hljs-keyword">this</span>, [<span class="hljs-string">'before:destroy'</span>, <span class="hljs-keyword">this</span>].concat(args));
    <span class="hljs-keyword">if</span> (shouldTriggerDetach) {
      <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'before:detach'</span>, <span class="hljs-keyword">this</span>);
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-133">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-133">&#182;</a>
              </div>
              <p>unbind UI elements</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">this</span>.unbindUIElements();</pre></div></div>
            
        </li>
        
        
        <li id="section-134">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-134">&#182;</a>
              </div>
              <p>remove the view from the DOM</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">this</span>._removeElement();

    <span class="hljs-keyword">if</span> (shouldTriggerDetach) {
      <span class="hljs-keyword">this</span>._isAttached = <span class="hljs-literal">false</span>;
      <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'detach'</span>, <span class="hljs-keyword">this</span>);
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-135">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-135">&#182;</a>
              </div>
              <p>remove children after the remove to prevent extra paints</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">this</span>._removeChildren();

    <span class="hljs-keyword">this</span>._isDestroyed = <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">this</span>._isRendered = <span class="hljs-literal">false</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-136">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-136">&#182;</a>
              </div>
              <p>Destroy behaviors after _isDestroyed flag</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">this</span>._destroyBehaviors.apply(<span class="hljs-keyword">this</span>, args);

    <span class="hljs-keyword">this</span>.triggerMethod.apply(<span class="hljs-keyword">this</span>, [<span class="hljs-string">'destroy'</span>, <span class="hljs-keyword">this</span>].concat(args));

    <span class="hljs-keyword">this</span>.stopListening();

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-137">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-137">&#182;</a>
              </div>
              <p>Equates to this.$el.remove</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _removeElement: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_removeElement</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">this</span>.$el.off().removeData();
    <span class="hljs-keyword">this</span>.Dom.detachEl(<span class="hljs-keyword">this</span>.el, <span class="hljs-keyword">this</span>.$el);
  },
  <span class="hljs-attr">bindUIElements</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">bindUIElements</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">this</span>._bindUIElements();
    <span class="hljs-keyword">this</span>._bindBehaviorUIElements();

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-138">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-138">&#182;</a>
              </div>
              <p>This method unbinds the elements specified in the “ui” hash</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  unbindUIElements: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">unbindUIElements</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">this</span>._unbindUIElements();
    <span class="hljs-keyword">this</span>._unbindBehaviorUIElements();

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
  },
  <span class="hljs-attr">getUI</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getUI</span>(<span class="hljs-params">name</span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._getUI(name);
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-139">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-139">&#182;</a>
              </div>
              <p>used as the prefix for child view events
that are forwarded through the layoutview</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  childViewEventPrefix: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">childViewEventPrefix</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> isEnabled(<span class="hljs-string">'childViewEventPrefix'</span>) ? <span class="hljs-string">'childview'</span> : <span class="hljs-literal">false</span>;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-140">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-140">&#182;</a>
              </div>
              <p>import the <code>triggerMethod</code> to trigger events with corresponding
methods if the method exists</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  triggerMethod: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">triggerMethod$$1</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> ret = triggerMethod.apply(<span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span>);

    <span class="hljs-keyword">this</span>._triggerEventOnBehaviors.apply(<span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span>);

    <span class="hljs-keyword">return</span> ret;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-141">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-141">&#182;</a>
              </div>
              <p>Cache <code>childViewEvents</code> and <code>childViewTriggers</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _buildEventProxies: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_buildEventProxies</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">this</span>._childViewEvents = _.result(<span class="hljs-keyword">this</span>, <span class="hljs-string">'childViewEvents'</span>);
    <span class="hljs-keyword">this</span>._childViewTriggers = _.result(<span class="hljs-keyword">this</span>, <span class="hljs-string">'childViewTriggers'</span>);
  },
  <span class="hljs-attr">_proxyChildViewEvents</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_proxyChildViewEvents</span>(<span class="hljs-params">view</span>) </span>{
    <span class="hljs-keyword">this</span>.listenTo(view, <span class="hljs-string">'all'</span>, <span class="hljs-keyword">this</span>._childViewEventHandler);
  },
  <span class="hljs-attr">_childViewEventHandler</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_childViewEventHandler</span>(<span class="hljs-params">eventName</span>) </span>{
    <span class="hljs-keyword">var</span> childViewEvents = <span class="hljs-keyword">this</span>.normalizeMethods(<span class="hljs-keyword">this</span>._childViewEvents);</pre></div></div>
            
        </li>
        
        
        <li id="section-142">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-142">&#182;</a>
              </div>
              <p>call collectionView childViewEvent if defined</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> _len2 = <span class="hljs-built_in">arguments</span>.length, args = <span class="hljs-built_in">Array</span>(_len2 &gt; <span class="hljs-number">1</span> ? _len2 - <span class="hljs-number">1</span> : <span class="hljs-number">0</span>), _key2 = <span class="hljs-number">1</span>; _key2 &lt; _len2; _key2++) {
      args[_key2 - <span class="hljs-number">1</span>] = <span class="hljs-built_in">arguments</span>[_key2];
    }

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> childViewEvents !== <span class="hljs-string">'undefined'</span> &amp;&amp; _.isFunction(childViewEvents[eventName])) {
      childViewEvents[eventName].apply(<span class="hljs-keyword">this</span>, args);
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-143">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-143">&#182;</a>
              </div>
              <p>use the parent view’s proxyEvent handlers</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">var</span> childViewTriggers = <span class="hljs-keyword">this</span>._childViewTriggers;</pre></div></div>
            
        </li>
        
        
        <li id="section-144">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-144">&#182;</a>
              </div>
              <p>Call the event with the proxy name on the parent layout</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">if</span> (childViewTriggers &amp;&amp; _.isString(childViewTriggers[eventName])) {
      <span class="hljs-keyword">this</span>.triggerMethod.apply(<span class="hljs-keyword">this</span>, [childViewTriggers[eventName]].concat(args));
    }

    <span class="hljs-keyword">var</span> prefix = _.result(<span class="hljs-keyword">this</span>, <span class="hljs-string">'childViewEventPrefix'</span>);

    <span class="hljs-keyword">if</span> (prefix !== <span class="hljs-literal">false</span>) {
      <span class="hljs-keyword">var</span> childEventName = prefix + <span class="hljs-string">':'</span> + eventName;

      <span class="hljs-keyword">this</span>.triggerMethod.apply(<span class="hljs-keyword">this</span>, [childEventName].concat(args));
    }
  }
};

_.extend(ViewMixin, BehaviorsMixin, CommonMixin, DelegateEntityEventsMixin, TriggersMixin, UIMixin);

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">renderView</span>(<span class="hljs-params">view</span>) </span>{
  <span class="hljs-keyword">if</span> (view._isRendered) {
    <span class="hljs-keyword">return</span>;
  }

  <span class="hljs-keyword">if</span> (!view.supportsRenderLifecycle) {
    triggerMethodOn(view, <span class="hljs-string">'before:render'</span>, view);
  }

  view.render();

  <span class="hljs-keyword">if</span> (!view.supportsRenderLifecycle) {
    view._isRendered = <span class="hljs-literal">true</span>;
    triggerMethodOn(view, <span class="hljs-string">'render'</span>, view);
  }
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">destroyView</span>(<span class="hljs-params">view</span>) </span>{
  <span class="hljs-keyword">if</span> (view.destroy) {
    view.destroy();
    <span class="hljs-keyword">return</span>;
  }

  <span class="hljs-keyword">if</span> (!view.supportsDestroyLifecycle) {
    triggerMethodOn(view, <span class="hljs-string">'before:destroy'</span>, view);
  }

  <span class="hljs-keyword">var</span> shouldTriggerDetach = view._isAttached &amp;&amp; !view._shouldDisableEvents;

  <span class="hljs-keyword">if</span> (shouldTriggerDetach) {
    triggerMethodOn(view, <span class="hljs-string">'before:detach'</span>, view);
  }

  view.remove();

  <span class="hljs-keyword">if</span> (shouldTriggerDetach) {
    view._isAttached = <span class="hljs-literal">false</span>;
    triggerMethodOn(view, <span class="hljs-string">'detach'</span>, view);
  }

  view._isDestroyed = <span class="hljs-literal">true</span>;

  <span class="hljs-keyword">if</span> (!view.supportsDestroyLifecycle) {
    triggerMethodOn(view, <span class="hljs-string">'destroy'</span>, view);
  }
}</pre></div></div>
            
        </li>
        
        
        <li id="section-145">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-145">&#182;</a>
              </div>
              <h2 id="region">Region</h2>

            </div>
            
        </li>
        
        
        <li id="section-146">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-146">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>
<span class="hljs-keyword">var</span> ClassOptions$<span class="hljs-number">2</span> = [<span class="hljs-string">'allowMissingEl'</span>, <span class="hljs-string">'parentEl'</span>, <span class="hljs-string">'replaceElement'</span>];

<span class="hljs-keyword">var</span> Region = MarionetteObject.extend({
  <span class="hljs-attr">Dom</span>: DomApi,

  <span class="hljs-attr">cidPrefix</span>: <span class="hljs-string">'mnr'</span>,
  <span class="hljs-attr">replaceElement</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-attr">_isReplaced</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-attr">_isSwappingView</span>: <span class="hljs-literal">false</span>,

  <span class="hljs-attr">constructor</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">constructor</span>(<span class="hljs-params">options</span>) </span>{
    <span class="hljs-keyword">this</span>._setOptions(options);

    <span class="hljs-keyword">this</span>.mergeOptions(options, ClassOptions$<span class="hljs-number">2</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-147">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-147">&#182;</a>
              </div>
              <p>getOption necessary because options.el may be passed as undefined</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">this</span>._initEl = <span class="hljs-keyword">this</span>.el = <span class="hljs-keyword">this</span>.getOption(<span class="hljs-string">'el'</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-148">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-148">&#182;</a>
              </div>
              <p>Handle when this.el is passed in as a $ wrapped element.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">this</span>.el = <span class="hljs-keyword">this</span>.el <span class="hljs-keyword">instanceof</span> Backbone.$ ? <span class="hljs-keyword">this</span>.el[<span class="hljs-number">0</span>] : <span class="hljs-keyword">this</span>.el;

    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.el) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> MarionetteError({
        <span class="hljs-attr">name</span>: <span class="hljs-string">'NoElError'</span>,
        <span class="hljs-attr">message</span>: <span class="hljs-string">'An "el" must be specified for a region.'</span>
      });
    }

    <span class="hljs-keyword">this</span>.$el = <span class="hljs-keyword">this</span>.getEl(<span class="hljs-keyword">this</span>.el);
    MarionetteObject.call(<span class="hljs-keyword">this</span>, options);
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-149">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-149">&#182;</a>
              </div>
              <p>Displays a backbone view instance inside of the region. Handles calling the <code>render</code>
method for you. Reads content directly from the <code>el</code> attribute. The <code>preventDestroy</code>
option can be used to prevent a view from the old view being destroyed on show.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  show: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">show</span>(<span class="hljs-params">view, options</span>) </span>{
    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>._ensureElement(options)) {
      <span class="hljs-keyword">return</span>;
    }

    view = <span class="hljs-keyword">this</span>._getView(view, options);

    <span class="hljs-keyword">if</span> (view === <span class="hljs-keyword">this</span>.currentView) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
    }

    <span class="hljs-keyword">this</span>._isSwappingView = !!<span class="hljs-keyword">this</span>.currentView;

    <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'before:show'</span>, <span class="hljs-keyword">this</span>, view, options);</pre></div></div>
            
        </li>
        
        
        <li id="section-150">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-150">&#182;</a>
              </div>
              <p>Assume an attached view is already in the region for pre-existing DOM</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">if</span> (!view._isAttached) {
      <span class="hljs-keyword">this</span>.empty(options);
    }

    <span class="hljs-keyword">this</span>._setupChildView(view);

    <span class="hljs-keyword">this</span>.currentView = view;

    renderView(view);

    <span class="hljs-keyword">this</span>._attachView(view, options);

    <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'show'</span>, <span class="hljs-keyword">this</span>, view, options);

    <span class="hljs-keyword">this</span>._isSwappingView = <span class="hljs-literal">false</span>;

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
  },
  <span class="hljs-attr">_setupChildView</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_setupChildView</span>(<span class="hljs-params">view</span>) </span>{
    monitorViewEvents(view);

    <span class="hljs-keyword">this</span>._proxyChildViewEvents(view);</pre></div></div>
            
        </li>
        
        
        <li id="section-151">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-151">&#182;</a>
              </div>
              <p>We need to listen for if a view is destroyed in a way other than through the region.
If this happens we need to remove the reference to the currentView since once a view
has been destroyed we can not reuse it.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    view.on(<span class="hljs-string">'destroy'</span>, <span class="hljs-keyword">this</span>._empty, <span class="hljs-keyword">this</span>);
  },
  <span class="hljs-attr">_proxyChildViewEvents</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_proxyChildViewEvents</span>(<span class="hljs-params">view</span>) </span>{
    <span class="hljs-keyword">var</span> parentView = <span class="hljs-keyword">this</span>._parentView;

    <span class="hljs-keyword">if</span> (!parentView) {
      <span class="hljs-keyword">return</span>;
    }

    parentView._proxyChildViewEvents(view);
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-152">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-152">&#182;</a>
              </div>
              <p>If the regions parent view is not monitoring its attach/detach events</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _shouldDisableMonitoring: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_shouldDisableMonitoring</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._parentView &amp;&amp; <span class="hljs-keyword">this</span>._parentView.monitorViewEvents === <span class="hljs-literal">false</span>;
  },
  <span class="hljs-attr">_attachView</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_attachView</span>(<span class="hljs-params">view</span>) </span>{
    <span class="hljs-keyword">var</span> options = <span class="hljs-built_in">arguments</span>.length &gt; <span class="hljs-number">1</span> &amp;&amp; <span class="hljs-built_in">arguments</span>[<span class="hljs-number">1</span>] !== <span class="hljs-literal">undefined</span> ? <span class="hljs-built_in">arguments</span>[<span class="hljs-number">1</span>] : {};

    <span class="hljs-keyword">var</span> shouldTriggerAttach = !view._isAttached &amp;&amp; isNodeAttached(<span class="hljs-keyword">this</span>.el) &amp;&amp; !<span class="hljs-keyword">this</span>._shouldDisableMonitoring();
    <span class="hljs-keyword">var</span> shouldReplaceEl = <span class="hljs-keyword">typeof</span> options.replaceElement === <span class="hljs-string">'undefined'</span> ? !!_.result(<span class="hljs-keyword">this</span>, <span class="hljs-string">'replaceElement'</span>) : !!options.replaceElement;

    <span class="hljs-keyword">if</span> (shouldTriggerAttach) {
      triggerMethodOn(view, <span class="hljs-string">'before:attach'</span>, view);
    }

    <span class="hljs-keyword">if</span> (shouldReplaceEl) {
      <span class="hljs-keyword">this</span>._replaceEl(view);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">this</span>.attachHtml(view);
    }

    <span class="hljs-keyword">if</span> (shouldTriggerAttach) {
      view._isAttached = <span class="hljs-literal">true</span>;
      triggerMethodOn(view, <span class="hljs-string">'attach'</span>, view);
    }
  },
  <span class="hljs-attr">_ensureElement</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_ensureElement</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> options = <span class="hljs-built_in">arguments</span>.length &gt; <span class="hljs-number">0</span> &amp;&amp; <span class="hljs-built_in">arguments</span>[<span class="hljs-number">0</span>] !== <span class="hljs-literal">undefined</span> ? <span class="hljs-built_in">arguments</span>[<span class="hljs-number">0</span>] : {};

    <span class="hljs-keyword">if</span> (!_.isObject(<span class="hljs-keyword">this</span>.el)) {
      <span class="hljs-keyword">this</span>.$el = <span class="hljs-keyword">this</span>.getEl(<span class="hljs-keyword">this</span>.el);
      <span class="hljs-keyword">this</span>.el = <span class="hljs-keyword">this</span>.$el[<span class="hljs-number">0</span>];</pre></div></div>
            
        </li>
        
        
        <li id="section-153">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-153">&#182;</a>
              </div>
              <p>Make sure the $el contains only the el</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">this</span>.$el = <span class="hljs-keyword">this</span>.Dom.getEl(<span class="hljs-keyword">this</span>.el);
    }

    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.$el || <span class="hljs-keyword">this</span>.$el.length === <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">var</span> allowMissingEl = <span class="hljs-keyword">typeof</span> options.allowMissingEl === <span class="hljs-string">'undefined'</span> ? !!_.result(<span class="hljs-keyword">this</span>, <span class="hljs-string">'allowMissingEl'</span>) : !!options.allowMissingEl;

      <span class="hljs-keyword">if</span> (allowMissingEl) {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> MarionetteError(<span class="hljs-string">'An "el" must exist in DOM for this region '</span> + <span class="hljs-keyword">this</span>.cid);
      }
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  },
  <span class="hljs-attr">_getView</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_getView</span>(<span class="hljs-params">view</span>) </span>{
    <span class="hljs-keyword">if</span> (!view) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> MarionetteError({
        <span class="hljs-attr">name</span>: <span class="hljs-string">'ViewNotValid'</span>,
        <span class="hljs-attr">message</span>: <span class="hljs-string">'The view passed is undefined and therefore invalid. You must pass a view instance to show.'</span>
      });
    }

    <span class="hljs-keyword">if</span> (view._isDestroyed) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> MarionetteError({
        <span class="hljs-attr">name</span>: <span class="hljs-string">'ViewDestroyedError'</span>,
        <span class="hljs-attr">message</span>: <span class="hljs-string">'View (cid: "'</span> + view.cid + <span class="hljs-string">'") has already been destroyed and cannot be used.'</span>
      });
    }

    <span class="hljs-keyword">if</span> (view <span class="hljs-keyword">instanceof</span> Backbone.View) {
      <span class="hljs-keyword">return</span> view;
    }

    <span class="hljs-keyword">var</span> viewOptions = <span class="hljs-keyword">this</span>._getViewOptions(view);

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> View(viewOptions);
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-154">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-154">&#182;</a>
              </div>
              <p>This allows for a template or a static string to be
used as a template</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _getViewOptions: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_getViewOptions</span>(<span class="hljs-params">viewOptions</span>) </span>{
    <span class="hljs-keyword">if</span> (_.isFunction(viewOptions)) {
      <span class="hljs-keyword">return</span> { <span class="hljs-attr">template</span>: viewOptions };
    }

    <span class="hljs-keyword">if</span> (_.isObject(viewOptions)) {
      <span class="hljs-keyword">return</span> viewOptions;
    }

    <span class="hljs-keyword">var</span> template = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">template</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">return</span> viewOptions;
    };

    <span class="hljs-keyword">return</span> { <span class="hljs-attr">template</span>: template };
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-155">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-155">&#182;</a>
              </div>
              <p>Override this method to change how the region finds the DOM element that it manages. Return
a jQuery selector object scoped to a provided parent el or the document if none exists.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  getEl: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getEl</span>(<span class="hljs-params">el</span>) </span>{
    <span class="hljs-keyword">var</span> context = _.result(<span class="hljs-keyword">this</span>, <span class="hljs-string">'parentEl'</span>);

    <span class="hljs-keyword">if</span> (context &amp;&amp; _.isString(el)) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.Dom.findEl(context, el);
    }

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.Dom.getEl(el);
  },
  <span class="hljs-attr">_replaceEl</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_replaceEl</span>(<span class="hljs-params">view</span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-156">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-156">&#182;</a>
              </div>
              <p>always restore the el to ensure the regions el is present before replacing</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">this</span>._restoreEl();

    view.on(<span class="hljs-string">'before:destroy'</span>, <span class="hljs-keyword">this</span>._restoreEl, <span class="hljs-keyword">this</span>);

    <span class="hljs-keyword">this</span>.Dom.replaceEl(view.el, <span class="hljs-keyword">this</span>.el);

    <span class="hljs-keyword">this</span>._isReplaced = <span class="hljs-literal">true</span>;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-157">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-157">&#182;</a>
              </div>
              <p>Restore the region’s element in the DOM.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _restoreEl: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_restoreEl</span>(<span class="hljs-params"></span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-158">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-158">&#182;</a>
              </div>
              <p>There is nothing to replace</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>._isReplaced) {
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-keyword">var</span> view = <span class="hljs-keyword">this</span>.currentView;

    <span class="hljs-keyword">if</span> (!view) {
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-keyword">this</span>._detachView(view);

    <span class="hljs-keyword">this</span>._isReplaced = <span class="hljs-literal">false</span>;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-159">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-159">&#182;</a>
              </div>
              <p>Check to see if the region’s el was replaced.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  isReplaced: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isReplaced</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> !!<span class="hljs-keyword">this</span>._isReplaced;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-160">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-160">&#182;</a>
              </div>
              <p>Check to see if a view is being swapped by another</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  isSwappingView: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isSwappingView</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> !!<span class="hljs-keyword">this</span>._isSwappingView;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-161">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-161">&#182;</a>
              </div>
              <p>Override this method to change how the new view is appended to the <code>$el</code> that the
region is managing</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  attachHtml: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">attachHtml</span>(<span class="hljs-params">view</span>) </span>{
    <span class="hljs-keyword">this</span>.Dom.appendContents(<span class="hljs-keyword">this</span>.el, view.el, { <span class="hljs-attr">_$el</span>: <span class="hljs-keyword">this</span>.$el, <span class="hljs-attr">_$contents</span>: view.$el });
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-162">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-162">&#182;</a>
              </div>
              <p>Destroy the current view, if there is one. If there is no current view, it does
nothing and returns immediately.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  empty: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">empty</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> options = <span class="hljs-built_in">arguments</span>.length &gt; <span class="hljs-number">0</span> &amp;&amp; <span class="hljs-built_in">arguments</span>[<span class="hljs-number">0</span>] !== <span class="hljs-literal">undefined</span> ? <span class="hljs-built_in">arguments</span>[<span class="hljs-number">0</span>] : { <span class="hljs-attr">allowMissingEl</span>: <span class="hljs-literal">true</span> };

    <span class="hljs-keyword">var</span> view = <span class="hljs-keyword">this</span>.currentView;</pre></div></div>
            
        </li>
        
        
        <li id="section-163">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-163">&#182;</a>
              </div>
              <p>If there is no view in the region we should only detach current html</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">if</span> (!view) {
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._ensureElement(options)) {
        <span class="hljs-keyword">this</span>.detachHtml();
      }
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
    }

    <span class="hljs-keyword">var</span> shouldDestroy = !options.preventDestroy;

    <span class="hljs-keyword">if</span> (!shouldDestroy) {
      deprecate(<span class="hljs-string">'The preventDestroy option is deprecated. Use Region#detachView'</span>);
    }

    <span class="hljs-keyword">this</span>._empty(view, shouldDestroy);
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
  },
  <span class="hljs-attr">_empty</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_empty</span>(<span class="hljs-params">view, shouldDestroy</span>) </span>{
    view.off(<span class="hljs-string">'destroy'</span>, <span class="hljs-keyword">this</span>._empty, <span class="hljs-keyword">this</span>);
    <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'before:empty'</span>, <span class="hljs-keyword">this</span>, view);

    <span class="hljs-keyword">this</span>._restoreEl();

    <span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>.currentView;

    <span class="hljs-keyword">if</span> (!view._isDestroyed) {
      <span class="hljs-keyword">if</span> (shouldDestroy) {
        <span class="hljs-keyword">this</span>.removeView(view);
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">this</span>._detachView(view);
      }
      <span class="hljs-keyword">this</span>._stopChildViewEvents(view);
    }

    <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'empty'</span>, <span class="hljs-keyword">this</span>, view);
  },
  <span class="hljs-attr">_stopChildViewEvents</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_stopChildViewEvents</span>(<span class="hljs-params">view</span>) </span>{
    <span class="hljs-keyword">var</span> parentView = <span class="hljs-keyword">this</span>._parentView;

    <span class="hljs-keyword">if</span> (!parentView) {
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-keyword">this</span>._parentView.stopListening(view);
  },
  <span class="hljs-attr">destroyView</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">destroyView$$1</span>(<span class="hljs-params">view</span>) </span>{
    <span class="hljs-keyword">if</span> (view._isDestroyed) {
      <span class="hljs-keyword">return</span> view;
    }

    view._shouldDisableEvents = <span class="hljs-keyword">this</span>._shouldDisableMonitoring();
    destroyView(view);
    <span class="hljs-keyword">return</span> view;
  },
  <span class="hljs-attr">removeView</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">removeView</span>(<span class="hljs-params">view</span>) </span>{
    <span class="hljs-keyword">this</span>.destroyView(view);
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-164">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-164">&#182;</a>
              </div>
              <p>Empties the Region without destroying the view
Returns the detached view</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  detachView: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">detachView</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> view = <span class="hljs-keyword">this</span>.currentView;

    <span class="hljs-keyword">if</span> (!view) {
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-keyword">this</span>._empty(view);

    <span class="hljs-keyword">return</span> view;
  },
  <span class="hljs-attr">_detachView</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_detachView</span>(<span class="hljs-params">view</span>) </span>{
    <span class="hljs-keyword">var</span> shouldTriggerDetach = view._isAttached &amp;&amp; !<span class="hljs-keyword">this</span>._shouldDisableMonitoring();
    <span class="hljs-keyword">var</span> shouldRestoreEl = <span class="hljs-keyword">this</span>._isReplaced;
    <span class="hljs-keyword">if</span> (shouldTriggerDetach) {
      triggerMethodOn(view, <span class="hljs-string">'before:detach'</span>, view);
    }

    <span class="hljs-keyword">if</span> (shouldRestoreEl) {
      <span class="hljs-keyword">this</span>.Dom.replaceEl(<span class="hljs-keyword">this</span>.el, view.el);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">this</span>.detachHtml();
    }

    <span class="hljs-keyword">if</span> (shouldTriggerDetach) {
      view._isAttached = <span class="hljs-literal">false</span>;
      triggerMethodOn(view, <span class="hljs-string">'detach'</span>, view);
    }
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-165">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-165">&#182;</a>
              </div>
              <p>Override this method to change how the region detaches current content</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  detachHtml: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">detachHtml</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">this</span>.Dom.detachContents(<span class="hljs-keyword">this</span>.el, <span class="hljs-keyword">this</span>.$el);
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-166">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-166">&#182;</a>
              </div>
              <p>Checks whether a view is currently present within the region. Returns <code>true</code> if there is
and <code>false</code> if no view is present.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  hasView: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">hasView</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> !!<span class="hljs-keyword">this</span>.currentView;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-167">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-167">&#182;</a>
              </div>
              <p>Reset the region by destroying any existing view and clearing out the cached <code>$el</code>.
The next time a view is shown via this region, the region will re-query the DOM for
the region’s <code>el</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  reset: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">reset</span>(<span class="hljs-params">options</span>) </span>{
    <span class="hljs-keyword">this</span>.empty(options);

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.$el) {
      <span class="hljs-keyword">this</span>.el = <span class="hljs-keyword">this</span>._initEl;
    }

    <span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>.$el;
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
  },
  <span class="hljs-attr">destroy</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">destroy</span>(<span class="hljs-params">options</span>) </span>{
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._isDestroyed) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
    }

    <span class="hljs-keyword">this</span>.reset(options);

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._name) {
      <span class="hljs-keyword">this</span>._parentView._removeReferences(<span class="hljs-keyword">this</span>._name);
    }
    <span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>._parentView;
    <span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>._name;

    <span class="hljs-keyword">return</span> MarionetteObject.prototype.destroy.apply(<span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span>);
  }
}, {
  <span class="hljs-attr">setDomApi</span>: setDomApi
});</pre></div></div>
            
        </li>
        
        
        <li id="section-168">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-168">&#182;</a>
              </div>
              <p>return the region instance from the definition</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">var</span> buildRegion = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">definition, defaults</span>) </span>{
  <span class="hljs-keyword">if</span> (definition <span class="hljs-keyword">instanceof</span> Region) {
    <span class="hljs-keyword">return</span> definition;
  }

  <span class="hljs-keyword">return</span> buildRegionFromDefinition(definition, defaults);
};

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">buildRegionFromDefinition</span>(<span class="hljs-params">definition, defaults</span>) </span>{
  <span class="hljs-keyword">var</span> opts = _.extend({}, defaults);

  <span class="hljs-keyword">if</span> (_.isString(definition)) {
    _.extend(opts, { <span class="hljs-attr">el</span>: definition });

    <span class="hljs-keyword">return</span> buildRegionFromObject(opts);
  }

  <span class="hljs-keyword">if</span> (_.isFunction(definition)) {
    _.extend(opts, { <span class="hljs-attr">regionClass</span>: definition });

    <span class="hljs-keyword">return</span> buildRegionFromObject(opts);
  }

  <span class="hljs-keyword">if</span> (_.isObject(definition)) {
    <span class="hljs-keyword">if</span> (definition.selector) {
      deprecate(<span class="hljs-string">'The selector option on a Region definition object is deprecated. Use el to pass a selector string'</span>);
    }

    _.extend(opts, { <span class="hljs-attr">el</span>: definition.selector }, definition);

    <span class="hljs-keyword">return</span> buildRegionFromObject(opts);
  }

  <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> MarionetteError({
    <span class="hljs-attr">message</span>: <span class="hljs-string">'Improper region configuration type.'</span>,
    <span class="hljs-attr">url</span>: <span class="hljs-string">'marionette.region.html#region-configuration-types'</span>
  });
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">buildRegionFromObject</span>(<span class="hljs-params">definition</span>) </span>{
  <span class="hljs-keyword">var</span> RegionClass = definition.regionClass;

  <span class="hljs-keyword">var</span> options = _.omit(definition, <span class="hljs-string">'regionClass'</span>);

  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> RegionClass(options);
}</pre></div></div>
            
        </li>
        
        
        <li id="section-169">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-169">&#182;</a>
              </div>
              <p>MixinOptions</p>
<ul>
<li>regions</li>
<li>regionClass</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>
<span class="hljs-keyword">var</span> RegionsMixin = {
  <span class="hljs-attr">regionClass</span>: Region,</pre></div></div>
            
        </li>
        
        
        <li id="section-170">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-170">&#182;</a>
              </div>
              <p>Internal method to initialize the regions that have been defined in a
<code>regions</code> attribute on this View.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _initRegions: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_initRegions</span>(<span class="hljs-params"></span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-171">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-171">&#182;</a>
              </div>
              <p>init regions hash</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">this</span>.regions = <span class="hljs-keyword">this</span>.regions || {};
    <span class="hljs-keyword">this</span>._regions = {};

    <span class="hljs-keyword">this</span>.addRegions(_.result(<span class="hljs-keyword">this</span>, <span class="hljs-string">'regions'</span>));
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-172">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-172">&#182;</a>
              </div>
              <p>Internal method to re-initialize all of the regions by updating
the <code>el</code> that they point to</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _reInitRegions: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_reInitRegions</span>(<span class="hljs-params"></span>) </span>{
    _invoke(<span class="hljs-keyword">this</span>._regions, <span class="hljs-string">'reset'</span>);
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-173">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-173">&#182;</a>
              </div>
              <p>Add a single region, by name, to the View</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  addRegion: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addRegion</span>(<span class="hljs-params">name, definition</span>) </span>{
    <span class="hljs-keyword">var</span> regions = {};
    regions[name] = definition;
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.addRegions(regions)[name];
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-174">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-174">&#182;</a>
              </div>
              <p>Add multiple regions as a {name: definition, name2: def2} object literal</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  addRegions: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addRegions</span>(<span class="hljs-params">regions</span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-175">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-175">&#182;</a>
              </div>
              <p>If there’s nothing to add, stop here.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">if</span> (_.isEmpty(regions)) {
      <span class="hljs-keyword">return</span>;
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-176">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-176">&#182;</a>
              </div>
              <p>Normalize region selectors hash to allow
a user to use the @ui. syntax.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    regions = <span class="hljs-keyword">this</span>.normalizeUIValues(regions, [<span class="hljs-string">'selector'</span>, <span class="hljs-string">'el'</span>]);</pre></div></div>
            
        </li>
        
        
        <li id="section-177">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-177">&#182;</a>
              </div>
              <p>Add the regions definitions to the regions property</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">this</span>.regions = _.extend({}, <span class="hljs-keyword">this</span>.regions, regions);

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._addRegions(regions);
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-178">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-178">&#182;</a>
              </div>
              <p>internal method to build and add regions</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _addRegions: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_addRegions</span>(<span class="hljs-params">regionDefinitions</span>) </span>{
    <span class="hljs-keyword">var</span> _this = <span class="hljs-keyword">this</span>;

    <span class="hljs-keyword">var</span> defaults = {
      <span class="hljs-attr">regionClass</span>: <span class="hljs-keyword">this</span>.regionClass,
      <span class="hljs-attr">parentEl</span>: _.partial(_.result, <span class="hljs-keyword">this</span>, <span class="hljs-string">'el'</span>)
    };

    <span class="hljs-keyword">return</span> _.reduce(regionDefinitions, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">regions, definition, name</span>) </span>{
      regions[name] = buildRegion(definition, defaults);
      _this._addRegion(regions[name], name);
      <span class="hljs-keyword">return</span> regions;
    }, {});
  },
  <span class="hljs-attr">_addRegion</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_addRegion</span>(<span class="hljs-params">region, name</span>) </span>{
    <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'before:add:region'</span>, <span class="hljs-keyword">this</span>, name, region);

    region._parentView = <span class="hljs-keyword">this</span>;
    region._name = name;

    <span class="hljs-keyword">this</span>._regions[name] = region;

    <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'add:region'</span>, <span class="hljs-keyword">this</span>, name, region);
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-179">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-179">&#182;</a>
              </div>
              <p>Remove a single region from the View, by name</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  removeRegion: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">removeRegion</span>(<span class="hljs-params">name</span>) </span>{
    <span class="hljs-keyword">var</span> region = <span class="hljs-keyword">this</span>._regions[name];

    <span class="hljs-keyword">this</span>._removeRegion(region, name);

    <span class="hljs-keyword">return</span> region;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-180">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-180">&#182;</a>
              </div>
              <p>Remove all regions from the View</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  removeRegions: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">removeRegions</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> regions = <span class="hljs-keyword">this</span>._getRegions();

    _.each(<span class="hljs-keyword">this</span>._regions, _.bind(<span class="hljs-keyword">this</span>._removeRegion, <span class="hljs-keyword">this</span>));

    <span class="hljs-keyword">return</span> regions;
  },
  <span class="hljs-attr">_removeRegion</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_removeRegion</span>(<span class="hljs-params">region, name</span>) </span>{
    <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'before:remove:region'</span>, <span class="hljs-keyword">this</span>, name, region);

    region.destroy();

    <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'remove:region'</span>, <span class="hljs-keyword">this</span>, name, region);
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-181">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-181">&#182;</a>
              </div>
              <p>Called in a region’s destroy</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _removeReferences: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_removeReferences</span>(<span class="hljs-params">name</span>) </span>{
    <span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>.regions[name];
    <span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>._regions[name];
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-182">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-182">&#182;</a>
              </div>
              <p>Empty all regions in the region manager, but
leave them attached</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  emptyRegions: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">emptyRegions</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> regions = <span class="hljs-keyword">this</span>.getRegions();
    _invoke(regions, <span class="hljs-string">'empty'</span>);
    <span class="hljs-keyword">return</span> regions;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-183">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-183">&#182;</a>
              </div>
              <p>Checks to see if view contains region
Accepts the region name
hasRegion(‘main’)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  hasRegion: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">hasRegion</span>(<span class="hljs-params">name</span>) </span>{
    <span class="hljs-keyword">return</span> !!<span class="hljs-keyword">this</span>.getRegion(name);
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-184">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-184">&#182;</a>
              </div>
              <p>Provides access to regions
Accepts the region name
getRegion(‘main’)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  getRegion: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getRegion</span>(<span class="hljs-params">name</span>) </span>{
    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>._isRendered) {
      <span class="hljs-keyword">this</span>.render();
    }
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._regions[name];
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-185">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-185">&#182;</a>
              </div>
              <p>Get all regions</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _getRegions: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_getRegions</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> _.clone(<span class="hljs-keyword">this</span>._regions);
  },
  <span class="hljs-attr">getRegions</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getRegions</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>._isRendered) {
      <span class="hljs-keyword">this</span>.render();
    }
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._getRegions();
  },
  <span class="hljs-attr">showChildView</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">showChildView</span>(<span class="hljs-params">name, view</span>) </span>{
    <span class="hljs-keyword">var</span> region = <span class="hljs-keyword">this</span>.getRegion(name);

    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> _len = <span class="hljs-built_in">arguments</span>.length, args = <span class="hljs-built_in">Array</span>(_len &gt; <span class="hljs-number">2</span> ? _len - <span class="hljs-number">2</span> : <span class="hljs-number">0</span>), _key = <span class="hljs-number">2</span>; _key &lt; _len; _key++) {
      args[_key - <span class="hljs-number">2</span>] = <span class="hljs-built_in">arguments</span>[_key];
    }

    <span class="hljs-keyword">return</span> region.show.apply(region, [view].concat(args));
  },
  <span class="hljs-attr">detachChildView</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">detachChildView</span>(<span class="hljs-params">name</span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.getRegion(name).detachView();
  },
  <span class="hljs-attr">getChildView</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getChildView</span>(<span class="hljs-params">name</span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.getRegion(name).currentView;
  }
};</pre></div></div>
            
        </li>
        
        
        <li id="section-186">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-186">&#182;</a>
              </div>
              <h2 id="renderer">Renderer</h2>

            </div>
            
        </li>
        
        
        <li id="section-187">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-187">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-188">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-188">&#182;</a>
              </div>
              <p>Render a template with data by passing in the template
selector and the data to render.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">var</span> Renderer = {</pre></div></div>
            
        </li>
        
        
        <li id="section-189">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-189">&#182;</a>
              </div>
              <p>Render a template with data. The <code>template</code> parameter is
passed to the <code>TemplateCache</code> object to retrieve the
template function. Override this method to provide your own
custom rendering and template handling for all of Marionette.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  render: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">render</span>(<span class="hljs-params">template, data</span>) </span>{
    <span class="hljs-keyword">if</span> (!template) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> MarionetteError({
        <span class="hljs-attr">name</span>: <span class="hljs-string">'TemplateNotFoundError'</span>,
        <span class="hljs-attr">message</span>: <span class="hljs-string">'Cannot render the template since its false, null or undefined.'</span>
      });
    }

    <span class="hljs-keyword">var</span> templateFunc = _.isFunction(template) ? template : TemplateCache.get(template);

    <span class="hljs-keyword">return</span> templateFunc(data);
  }
};</pre></div></div>
            
        </li>
        
        
        <li id="section-190">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-190">&#182;</a>
              </div>
              <h2 id="view">View</h2>

            </div>
            
        </li>
        
        
        <li id="section-191">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-191">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>
<span class="hljs-keyword">var</span> ClassOptions$<span class="hljs-number">1</span> = [<span class="hljs-string">'behaviors'</span>, <span class="hljs-string">'childViewEventPrefix'</span>, <span class="hljs-string">'childViewEvents'</span>, <span class="hljs-string">'childViewTriggers'</span>, <span class="hljs-string">'collectionEvents'</span>, <span class="hljs-string">'events'</span>, <span class="hljs-string">'modelEvents'</span>, <span class="hljs-string">'regionClass'</span>, <span class="hljs-string">'regions'</span>, <span class="hljs-string">'template'</span>, <span class="hljs-string">'templateContext'</span>, <span class="hljs-string">'triggers'</span>, <span class="hljs-string">'ui'</span>];</pre></div></div>
            
        </li>
        
        
        <li id="section-192">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-192">&#182;</a>
              </div>
              <p>The standard view. Includes view events, automatic rendering
of Underscore templates, nested views, and more.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">var</span> View = Backbone.View.extend({
  <span class="hljs-attr">constructor</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">constructor</span>(<span class="hljs-params">options</span>) </span>{
    <span class="hljs-keyword">this</span>.render = _.bind(<span class="hljs-keyword">this</span>.render, <span class="hljs-keyword">this</span>);

    <span class="hljs-keyword">this</span>._setOptions(options);

    <span class="hljs-keyword">this</span>.mergeOptions(options, ClassOptions$<span class="hljs-number">1</span>);

    monitorViewEvents(<span class="hljs-keyword">this</span>);

    <span class="hljs-keyword">this</span>._initBehaviors();
    <span class="hljs-keyword">this</span>._initRegions();

    <span class="hljs-keyword">var</span> args = <span class="hljs-built_in">Array</span>.prototype.slice.call(<span class="hljs-built_in">arguments</span>);
    args[<span class="hljs-number">0</span>] = <span class="hljs-keyword">this</span>.options;
    Backbone.View.prototype.constructor.apply(<span class="hljs-keyword">this</span>, args);

    <span class="hljs-keyword">this</span>.delegateEntityEvents();

    <span class="hljs-keyword">this</span>._triggerEventOnBehaviors(<span class="hljs-string">'initialize'</span>, <span class="hljs-keyword">this</span>);
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-193">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-193">&#182;</a>
              </div>
              <p>Serialize the view’s model <em>or</em> collection, if
it exists, for the template</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  serializeData: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">serializeData</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.model &amp;&amp; !<span class="hljs-keyword">this</span>.collection) {
      <span class="hljs-keyword">return</span> {};
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-194">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-194">&#182;</a>
              </div>
              <p>If we have a model, we serialize that</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.model) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.serializeModel();
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-195">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-195">&#182;</a>
              </div>
              <p>Otherwise, we serialize the collection,
making it available under the <code>items</code> property</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">items</span>: <span class="hljs-keyword">this</span>.serializeCollection()
    };
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-196">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-196">&#182;</a>
              </div>
              <p>Prepares the special <code>model</code> property of a view
for being displayed in the template. By default
we simply clone the attributes. Override this if
you need a custom transformation for your view’s model</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  serializeModel: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">serializeModel</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.model) {
      <span class="hljs-keyword">return</span> {};
    }
    <span class="hljs-keyword">return</span> _.clone(<span class="hljs-keyword">this</span>.model.attributes);
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-197">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-197">&#182;</a>
              </div>
              <p>Serialize a collection by cloning each of
its model’s attributes</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  serializeCollection: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">serializeCollection</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.collection) {
      <span class="hljs-keyword">return</span> {};
    }
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.collection.map(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">model</span>) </span>{
      <span class="hljs-keyword">return</span> _.clone(model.attributes);
    });
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-198">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-198">&#182;</a>
              </div>
              <p>Overriding Backbone.View’s <code>setElement</code> to handle
if an el was previously defined. If so, the view might be
rendered or attached on setElement.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  setElement: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setElement</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> hasEl = !!<span class="hljs-keyword">this</span>.el;

    Backbone.View.prototype.setElement.apply(<span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span>);

    <span class="hljs-keyword">if</span> (hasEl) {
      <span class="hljs-keyword">this</span>._isRendered = <span class="hljs-keyword">this</span>.Dom.hasContents(<span class="hljs-keyword">this</span>.el);
      <span class="hljs-keyword">this</span>._isAttached = isNodeAttached(<span class="hljs-keyword">this</span>.el);
    }

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._isRendered) {
      <span class="hljs-keyword">this</span>.bindUIElements();
    }

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-199">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-199">&#182;</a>
              </div>
              <p>Render the view, defaulting to underscore.js templates.
You can override this in your view definition to provide
a very specific rendering for your view. In general, though,
you should override the <code>Marionette.Renderer</code> object to
change how Marionette renders views.
Subsequent renders after the first will re-render all nested
views.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  render: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">render</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._isDestroyed) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
    }

    <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'before:render'</span>, <span class="hljs-keyword">this</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-200">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-200">&#182;</a>
              </div>
              <p>If this is not the first render call, then we need to
re-initialize the <code>el</code> for each region</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._isRendered) {
      <span class="hljs-keyword">this</span>._reInitRegions();
    }

    <span class="hljs-keyword">this</span>._renderTemplate();
    <span class="hljs-keyword">this</span>.bindUIElements();

    <span class="hljs-keyword">this</span>._isRendered = <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'render'</span>, <span class="hljs-keyword">this</span>);

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-201">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-201">&#182;</a>
              </div>
              <p>Internal method to render the template with the serialized data
and template context via the <code>Marionette.Renderer</code> object.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _renderTemplate: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_renderTemplate</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> template = <span class="hljs-keyword">this</span>.getTemplate();</pre></div></div>
            
        </li>
        
        
        <li id="section-202">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-202">&#182;</a>
              </div>
              <p>Allow template-less views</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">if</span> (template === <span class="hljs-literal">false</span>) {
      deprecate(<span class="hljs-string">'template:false is deprecated.  Use _.noop.'</span>);
      <span class="hljs-keyword">return</span>;
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-203">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-203">&#182;</a>
              </div>
              <p>Add in entity data and template context</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">var</span> data = <span class="hljs-keyword">this</span>.mixinTemplateContext(<span class="hljs-keyword">this</span>.serializeData());</pre></div></div>
            
        </li>
        
        
        <li id="section-204">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-204">&#182;</a>
              </div>
              <p>Render and add to el</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">var</span> html = <span class="hljs-keyword">this</span>._renderHtml(template, data);
    <span class="hljs-keyword">this</span>.attachElContent(html);
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-205">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-205">&#182;</a>
              </div>
              <p>Renders the data into the template</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _renderHtml: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_renderHtml</span>(<span class="hljs-params">template, data</span>) </span>{
    <span class="hljs-keyword">return</span> Renderer.render(template, data, <span class="hljs-keyword">this</span>);
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-206">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-206">&#182;</a>
              </div>
              <p>Get the template for this view
instance. You can set a <code>template</code> attribute in the view
definition or pass a <code>template: &quot;whatever&quot;</code> parameter in
to the constructor options.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  getTemplate: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getTemplate</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.template;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-207">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-207">&#182;</a>
              </div>
              <p>Mix in template context methods. Looks for a
<code>templateContext</code> attribute, which can either be an
object literal, or a function that returns an object
literal. All methods and attributes from this object
are copies to the object passed in.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  mixinTemplateContext: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">mixinTemplateContext</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> target = <span class="hljs-built_in">arguments</span>.length &gt; <span class="hljs-number">0</span> &amp;&amp; <span class="hljs-built_in">arguments</span>[<span class="hljs-number">0</span>] !== <span class="hljs-literal">undefined</span> ? <span class="hljs-built_in">arguments</span>[<span class="hljs-number">0</span>] : {};

    <span class="hljs-keyword">var</span> templateContext = _.result(<span class="hljs-keyword">this</span>, <span class="hljs-string">'templateContext'</span>);
    <span class="hljs-keyword">return</span> _.extend(target, templateContext);
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-208">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-208">&#182;</a>
              </div>
              <p>Attaches the content of a given view.
This method can be overridden to optimize rendering,
or to render in a non standard way.</p>
<p>For example, using <code>innerHTML</code> instead of <code>$el.html</code></p>
<pre><code class="lang-js">attachElContent(html) {
  <span class="hljs-keyword">this</span>.el.innerHTML = html;
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
}
</code></pre>

            </div>
            
            <div class="content"><div class='highlight'><pre>  attachElContent: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">attachElContent</span>(<span class="hljs-params">html</span>) </span>{
    <span class="hljs-keyword">this</span>.Dom.setContents(<span class="hljs-keyword">this</span>.el, html, <span class="hljs-keyword">this</span>.$el);

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-209">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-209">&#182;</a>
              </div>
              <p>called by ViewMixin destroy</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _removeChildren: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_removeChildren</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">this</span>.removeRegions();
  },
  <span class="hljs-attr">_getImmediateChildren</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_getImmediateChildren</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> _.chain(<span class="hljs-keyword">this</span>._getRegions()).map(<span class="hljs-string">'currentView'</span>).compact().value();
  }
}, {</pre></div></div>
            
        </li>
        
        
        <li id="section-210">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-210">&#182;</a>
              </div>
              <p>Sets the renderer for the Marionette.View class</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  setRenderer: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setRenderer</span>(<span class="hljs-params">renderer</span>) </span>{
    <span class="hljs-keyword">this</span>.prototype._renderHtml = renderer;
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
  },


  <span class="hljs-attr">setDomApi</span>: setDomApi
});

_.extend(View.prototype, ViewMixin, RegionsMixin);</pre></div></div>
            
        </li>
        
        
        <li id="section-211">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-211">&#182;</a>
              </div>
              <p>Mix in methods from Underscore, for iteration, and other
collection related features.
Borrowing this code from Backbone.Collection:
<a href="https://github.com/jashkenas/backbone/blob/1.1.2/backbone.js#L962">https://github.com/jashkenas/backbone/blob/1.1.2/backbone.js#L962</a></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
<span class="hljs-keyword">var</span> methods = [<span class="hljs-string">'forEach'</span>, <span class="hljs-string">'each'</span>, <span class="hljs-string">'map'</span>, <span class="hljs-string">'find'</span>, <span class="hljs-string">'detect'</span>, <span class="hljs-string">'filter'</span>, <span class="hljs-string">'select'</span>, <span class="hljs-string">'reject'</span>, <span class="hljs-string">'every'</span>, <span class="hljs-string">'all'</span>, <span class="hljs-string">'some'</span>, <span class="hljs-string">'any'</span>, <span class="hljs-string">'include'</span>, <span class="hljs-string">'contains'</span>, <span class="hljs-string">'invoke'</span>, <span class="hljs-string">'toArray'</span>, <span class="hljs-string">'first'</span>, <span class="hljs-string">'initial'</span>, <span class="hljs-string">'rest'</span>, <span class="hljs-string">'last'</span>, <span class="hljs-string">'without'</span>, <span class="hljs-string">'isEmpty'</span>, <span class="hljs-string">'pluck'</span>, <span class="hljs-string">'reduce'</span>, <span class="hljs-string">'partition'</span>];

<span class="hljs-keyword">var</span> emulateCollection = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">emulateCollection</span>(<span class="hljs-params">object, listProperty</span>) </span>{
  _.each(methods, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">method</span>) </span>{
    object[method] = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">var</span> list = _.result(<span class="hljs-keyword">this</span>, listProperty);
      <span class="hljs-keyword">var</span> args = <span class="hljs-built_in">Array</span>.prototype.slice.call(<span class="hljs-built_in">arguments</span>);
      <span class="hljs-keyword">return</span> _[method].apply(_, [list].concat(args));
    };
  });
};</pre></div></div>
            
        </li>
        
        
        <li id="section-212">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-212">&#182;</a>
              </div>
              <p>Provide a container to store, retrieve and
shut down child views.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">var</span> Container = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Container</span>(<span class="hljs-params">views</span>) </span>{
  <span class="hljs-keyword">this</span>._views = {};
  <span class="hljs-keyword">this</span>._indexByModel = {};
  <span class="hljs-keyword">this</span>._indexByCustom = {};
  <span class="hljs-keyword">this</span>._updateLength();

  _.each(views, _.bind(<span class="hljs-keyword">this</span>.add, <span class="hljs-keyword">this</span>));
};

emulateCollection(Container.prototype, <span class="hljs-string">'_getViews'</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-213">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-213">&#182;</a>
              </div>
              <h2 id="container-methods">Container Methods</h2>

            </div>
            
        </li>
        
        
        <li id="section-214">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-214">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>
_.extend(Container.prototype, {
  <span class="hljs-attr">_getViews</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_getViews</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> _.values(<span class="hljs-keyword">this</span>._views);
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-215">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-215">&#182;</a>
              </div>
              <p>Add a view to this container. Stores the view
by <code>cid</code> and makes it searchable by the model
cid (and model itself). Optionally specify
a custom key to store an retrieve the view.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  add: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">add</span>(<span class="hljs-params">view, customIndex</span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._add(view, customIndex)._updateLength();
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-216">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-216">&#182;</a>
              </div>
              <p>To be used when avoiding call _updateLength
When you are done adding all your new views
call _updateLength</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _add: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_add</span>(<span class="hljs-params">view, customIndex</span>) </span>{
    <span class="hljs-keyword">var</span> viewCid = view.cid;</pre></div></div>
            
        </li>
        
        
        <li id="section-217">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-217">&#182;</a>
              </div>
              <p>store the view</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">this</span>._views[viewCid] = view;</pre></div></div>
            
        </li>
        
        
        <li id="section-218">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-218">&#182;</a>
              </div>
              <p>index it by model</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">if</span> (view.model) {
      <span class="hljs-keyword">this</span>._indexByModel[view.model.cid] = viewCid;
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-219">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-219">&#182;</a>
              </div>
              <p>index by custom</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">if</span> (customIndex) {
      <span class="hljs-keyword">this</span>._indexByCustom[customIndex] = viewCid;
    }

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-220">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-220">&#182;</a>
              </div>
              <p>Find a view by the model that was attached to
it. Uses the model’s <code>cid</code> to find it.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  findByModel: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">findByModel</span>(<span class="hljs-params">model</span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.findByModelCid(model.cid);
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-221">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-221">&#182;</a>
              </div>
              <p>Find a view by the <code>cid</code> of the model that was attached to
it. Uses the model’s <code>cid</code> to find the view <code>cid</code> and
retrieve the view using it.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  findByModelCid: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">findByModelCid</span>(<span class="hljs-params">modelCid</span>) </span>{
    <span class="hljs-keyword">var</span> viewCid = <span class="hljs-keyword">this</span>._indexByModel[modelCid];
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.findByCid(viewCid);
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-222">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-222">&#182;</a>
              </div>
              <p>Find a view by a custom indexer.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  findByCustom: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">findByCustom</span>(<span class="hljs-params">index</span>) </span>{
    <span class="hljs-keyword">var</span> viewCid = <span class="hljs-keyword">this</span>._indexByCustom[index];
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.findByCid(viewCid);
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-223">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-223">&#182;</a>
              </div>
              <p>Find by index. This is not guaranteed to be a
stable index.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  findByIndex: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">findByIndex</span>(<span class="hljs-params">index</span>) </span>{
    <span class="hljs-keyword">return</span> _.values(<span class="hljs-keyword">this</span>._views)[index];
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-224">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-224">&#182;</a>
              </div>
              <p>retrieve a view by its <code>cid</code> directly</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  findByCid: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">findByCid</span>(<span class="hljs-params">cid</span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._views[cid];
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-225">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-225">&#182;</a>
              </div>
              <p>Remove a view</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  remove: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">remove</span>(<span class="hljs-params">view</span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._remove(view)._updateLength();
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-226">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-226">&#182;</a>
              </div>
              <p>To be used when avoiding call _updateLength
When you are done adding all your new views
call _updateLength</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _remove: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_remove</span>(<span class="hljs-params">view</span>) </span>{
    <span class="hljs-keyword">var</span> viewCid = view.cid;</pre></div></div>
            
        </li>
        
        
        <li id="section-227">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-227">&#182;</a>
              </div>
              <p>delete model index</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">if</span> (view.model) {
      <span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>._indexByModel[view.model.cid];
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-228">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-228">&#182;</a>
              </div>
              <p>delete custom index</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _.some(<span class="hljs-keyword">this</span>._indexByCustom, _.bind(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">cid, key</span>) </span>{
      <span class="hljs-keyword">if</span> (cid === viewCid) {
        <span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>._indexByCustom[key];
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
      }
    }, <span class="hljs-keyword">this</span>));</pre></div></div>
            
        </li>
        
        
        <li id="section-229">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-229">&#182;</a>
              </div>
              <p>remove the view from the container</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>._views[viewCid];

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-230">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-230">&#182;</a>
              </div>
              <p>Update the <code>.length</code> attribute on this container</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _updateLength: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_updateLength</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">this</span>.length = _.size(<span class="hljs-keyword">this</span>._views);

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
  }
});</pre></div></div>
            
        </li>
        
        
        <li id="section-231">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-231">&#182;</a>
              </div>
              <h2 id="collection-view">Collection View</h2>

            </div>
            
        </li>
        
        
        <li id="section-232">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-232">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>
<span class="hljs-keyword">var</span> ClassOptions$<span class="hljs-number">3</span> = [<span class="hljs-string">'behaviors'</span>, <span class="hljs-string">'childView'</span>, <span class="hljs-string">'childViewEventPrefix'</span>, <span class="hljs-string">'childViewEvents'</span>, <span class="hljs-string">'childViewOptions'</span>, <span class="hljs-string">'childViewTriggers'</span>, <span class="hljs-string">'collectionEvents'</span>, <span class="hljs-string">'events'</span>, <span class="hljs-string">'filter'</span>, <span class="hljs-string">'emptyView'</span>, <span class="hljs-string">'emptyViewOptions'</span>, <span class="hljs-string">'modelEvents'</span>, <span class="hljs-string">'reorderOnSort'</span>, <span class="hljs-string">'sort'</span>, <span class="hljs-string">'triggers'</span>, <span class="hljs-string">'ui'</span>, <span class="hljs-string">'viewComparator'</span>];</pre></div></div>
            
        </li>
        
        
        <li id="section-233">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-233">&#182;</a>
              </div>
              <p>A view that iterates over a Backbone.Collection
and renders an individual child view for each model.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">var</span> CollectionView = Backbone.View.extend({</pre></div></div>
            
        </li>
        
        
        <li id="section-234">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-234">&#182;</a>
              </div>
              <p>flag for maintaining the sorted order of the collection</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  sort: <span class="hljs-literal">true</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-235">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-235">&#182;</a>
              </div>
              <p>constructor
option to pass <code>{sort: false}</code> to prevent the <code>CollectionView</code> from
maintaining the sorted order of the collection.
This will fallback onto appending childView’s to the end.</p>
<p>option to pass <code>{viewComparator: compFunction()}</code> to allow the <code>CollectionView</code>
to use a custom sort order for the collection.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">constructor</span>: function <span class="hljs-keyword">constructor</span>(options) {
    <span class="hljs-keyword">this</span>.render = _.bind(<span class="hljs-keyword">this</span>.render, <span class="hljs-keyword">this</span>);

    <span class="hljs-keyword">this</span>._setOptions(options);

    <span class="hljs-keyword">this</span>.mergeOptions(options, ClassOptions$<span class="hljs-number">3</span>);

    monitorViewEvents(<span class="hljs-keyword">this</span>);

    <span class="hljs-keyword">this</span>._initBehaviors();
    <span class="hljs-keyword">this</span>.once(<span class="hljs-string">'render'</span>, <span class="hljs-keyword">this</span>._initialEvents);
    <span class="hljs-keyword">this</span>._initChildViewStorage();
    <span class="hljs-keyword">this</span>._bufferedChildren = [];

    <span class="hljs-keyword">var</span> args = <span class="hljs-built_in">Array</span>.prototype.slice.call(<span class="hljs-built_in">arguments</span>);
    args[<span class="hljs-number">0</span>] = <span class="hljs-keyword">this</span>.options;
    Backbone.View.prototype.constructor.apply(<span class="hljs-keyword">this</span>, args);

    <span class="hljs-keyword">this</span>.delegateEntityEvents();

    <span class="hljs-keyword">this</span>._triggerEventOnBehaviors(<span class="hljs-string">'initialize'</span>, <span class="hljs-keyword">this</span>);
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-236">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-236">&#182;</a>
              </div>
              <p>Instead of inserting elements one by one into the page, it’s much more performant to insert
elements into a document fragment and then insert that document fragment into the page</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _startBuffering: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_startBuffering</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">this</span>._isBuffering = <span class="hljs-literal">true</span>;
  },
  <span class="hljs-attr">_endBuffering</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_endBuffering</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> shouldTriggerAttach = <span class="hljs-keyword">this</span>._isAttached &amp;&amp; <span class="hljs-keyword">this</span>.monitorViewEvents !== <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">var</span> triggerOnChildren = shouldTriggerAttach ? <span class="hljs-keyword">this</span>._getImmediateChildren() : [];

    <span class="hljs-keyword">this</span>._isBuffering = <span class="hljs-literal">false</span>;

    _.each(triggerOnChildren, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">child</span>) </span>{
      triggerMethodOn(child, <span class="hljs-string">'before:attach'</span>, child);
    });

    <span class="hljs-keyword">this</span>.attachBuffer(<span class="hljs-keyword">this</span>, <span class="hljs-keyword">this</span>._createBuffer());

    _.each(triggerOnChildren, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">child</span>) </span>{
      child._isAttached = <span class="hljs-literal">true</span>;
      triggerMethodOn(child, <span class="hljs-string">'attach'</span>, child);
    });

    <span class="hljs-keyword">this</span>._bufferedChildren = [];
  },
  <span class="hljs-attr">_getImmediateChildren</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_getImmediateChildren</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> _.values(<span class="hljs-keyword">this</span>.children._views);
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-237">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-237">&#182;</a>
              </div>
              <p>Configured the initial events that the collection view binds to.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _initialEvents: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_initialEvents</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.collection) {
      <span class="hljs-keyword">this</span>.listenTo(<span class="hljs-keyword">this</span>.collection, <span class="hljs-string">'add'</span>, <span class="hljs-keyword">this</span>._onCollectionAdd);
      <span class="hljs-keyword">this</span>.listenTo(<span class="hljs-keyword">this</span>.collection, <span class="hljs-string">'update'</span>, <span class="hljs-keyword">this</span>._onCollectionUpdate);
      <span class="hljs-keyword">this</span>.listenTo(<span class="hljs-keyword">this</span>.collection, <span class="hljs-string">'reset'</span>, <span class="hljs-keyword">this</span>.render);

      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.sort) {
        <span class="hljs-keyword">this</span>.listenTo(<span class="hljs-keyword">this</span>.collection, <span class="hljs-string">'sort'</span>, <span class="hljs-keyword">this</span>._sortViews);
      }
    }
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-238">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-238">&#182;</a>
              </div>
              <p>Handle a child added to the collection</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _onCollectionAdd: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_onCollectionAdd</span>(<span class="hljs-params">child, collection, opts</span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-239">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-239">&#182;</a>
              </div>
              <p><code>index</code> is present when adding with <code>at</code> since BB 1.2; indexOf fallback for &lt; 1.2</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">var</span> index = opts.at !== <span class="hljs-literal">undefined</span> &amp;&amp; (opts.index || collection.indexOf(child));</pre></div></div>
            
        </li>
        
        
        <li id="section-240">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-240">&#182;</a>
              </div>
              <p>When filtered or when there is no initial index, calculate index.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.filter || index === <span class="hljs-literal">false</span>) {
      index = _.indexOf(<span class="hljs-keyword">this</span>._filteredSortedModels(index), child);
    }

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._shouldAddChild(child, index)) {
      <span class="hljs-keyword">this</span>._destroyEmptyView();
      <span class="hljs-keyword">this</span>._addChild(child, index);
    }
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-241">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-241">&#182;</a>
              </div>
              <p>Handle collection update model removals</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _onCollectionUpdate: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_onCollectionUpdate</span>(<span class="hljs-params">collection, options</span>) </span>{
    <span class="hljs-keyword">var</span> changes = options.changes;
    <span class="hljs-keyword">this</span>._removeChildModels(changes.removed);
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-242">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-242">&#182;</a>
              </div>
              <p>Remove the child views and destroy them.
This function also updates the indices of later views
in the collection in order to keep the children in sync with the collection.
“models” is an array of models and the corresponding views
will be removed and destroyed from the CollectionView</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _removeChildModels: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_removeChildModels</span>(<span class="hljs-params">models</span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-243">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-243">&#182;</a>
              </div>
              <p>Used to determine where to update the remaining
sibling view indices after these views are removed.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">var</span> removedViews = <span class="hljs-keyword">this</span>._getRemovedViews(models);

    <span class="hljs-keyword">if</span> (!removedViews.length) {
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-keyword">this</span>.children._updateLength();</pre></div></div>
            
        </li>
        
        
        <li id="section-244">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-244">&#182;</a>
              </div>
              <p>decrement the index of views after this one</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">this</span>._updateIndices(removedViews, <span class="hljs-literal">false</span>);

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.isEmpty()) {
      <span class="hljs-keyword">this</span>._showEmptyView();
    }
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-245">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-245">&#182;</a>
              </div>
              <p>Returns the views that will be used for re-indexing
through CollectionView#_updateIndices.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _getRemovedViews: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_getRemovedViews</span>(<span class="hljs-params">models</span>) </span>{
    <span class="hljs-keyword">var</span> _this = <span class="hljs-keyword">this</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-246">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-246">&#182;</a>
              </div>
              <p>Returning a view means something was removed.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">return</span> _.reduce(models, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">removingViews, model</span>) </span>{
      <span class="hljs-keyword">var</span> view = model &amp;&amp; _this.children.findByModel(model);

      <span class="hljs-keyword">if</span> (!view || view._isDestroyed) {
        <span class="hljs-keyword">return</span> removingViews;
      }

      _this._removeChildView(view);

      removingViews.push(view);

      <span class="hljs-keyword">return</span> removingViews;
    }, []);
  },
  <span class="hljs-attr">_removeChildView</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_removeChildView</span>(<span class="hljs-params">view</span>) </span>{
    <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'before:remove:child'</span>, <span class="hljs-keyword">this</span>, view);

    <span class="hljs-keyword">this</span>.children._remove(view);
    view._shouldDisableEvents = <span class="hljs-keyword">this</span>.monitorViewEvents === <span class="hljs-literal">false</span>;
    destroyView(view);

    <span class="hljs-keyword">this</span>.stopListening(view);
    <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'remove:child'</span>, <span class="hljs-keyword">this</span>, view);
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-247">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-247">&#182;</a>
              </div>
              <p>Overriding Backbone.View’s <code>setElement</code> to handle
if an el was previously defined. If so, the view might be
attached on setElement.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  setElement: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setElement</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> hasEl = !!<span class="hljs-keyword">this</span>.el;

    Backbone.View.prototype.setElement.apply(<span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span>);

    <span class="hljs-keyword">if</span> (hasEl) {
      <span class="hljs-keyword">this</span>._isAttached = isNodeAttached(<span class="hljs-keyword">this</span>.el);
    }

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-248">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-248">&#182;</a>
              </div>
              <p>Render children views. Override this method to provide your own implementation of a
render function for the collection view.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  render: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">render</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._isDestroyed) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
    }
    <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'before:render'</span>, <span class="hljs-keyword">this</span>);
    <span class="hljs-keyword">this</span>._renderChildren();
    <span class="hljs-keyword">this</span>._isRendered = <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'render'</span>, <span class="hljs-keyword">this</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-249">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-249">&#182;</a>
              </div>
              <p>An efficient rendering used for filtering. Instead of modifying the whole DOM for the
collection view, we are only adding or removing the related childrenViews.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  setFilter: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setFilter</span>(<span class="hljs-params">filter</span>) </span>{
    <span class="hljs-keyword">var</span> _ref = <span class="hljs-built_in">arguments</span>.length &gt; <span class="hljs-number">1</span> &amp;&amp; <span class="hljs-built_in">arguments</span>[<span class="hljs-number">1</span>] !== <span class="hljs-literal">undefined</span> ? <span class="hljs-built_in">arguments</span>[<span class="hljs-number">1</span>] : {},
        preventRender = _ref.preventRender;

    <span class="hljs-keyword">var</span> canBeRendered = <span class="hljs-keyword">this</span>._isRendered &amp;&amp; !<span class="hljs-keyword">this</span>._isDestroyed;
    <span class="hljs-keyword">var</span> filterChanged = <span class="hljs-keyword">this</span>.filter !== filter;
    <span class="hljs-keyword">var</span> shouldRender = canBeRendered &amp;&amp; filterChanged &amp;&amp; !preventRender;

    <span class="hljs-keyword">if</span> (shouldRender) {
      <span class="hljs-keyword">var</span> previousModels = <span class="hljs-keyword">this</span>._filteredSortedModels();
      <span class="hljs-keyword">this</span>.filter = filter;
      <span class="hljs-keyword">var</span> models = <span class="hljs-keyword">this</span>._filteredSortedModels();
      <span class="hljs-keyword">this</span>._applyModelDeltas(models, previousModels);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">this</span>.filter = filter;
    }

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-250">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-250">&#182;</a>
              </div>
              <p><code>removeFilter</code> is actually an alias for removing filters.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  removeFilter: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">removeFilter</span>(<span class="hljs-params">options</span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.setFilter(<span class="hljs-literal">null</span>, options);
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-251">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-251">&#182;</a>
              </div>
              <p>Calculate and apply difference by cid between <code>models</code> and <code>previousModels</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _applyModelDeltas: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_applyModelDeltas</span>(<span class="hljs-params">models, previousModels</span>) </span>{
    <span class="hljs-keyword">var</span> _this2 = <span class="hljs-keyword">this</span>;

    <span class="hljs-keyword">var</span> currentIds = {};
    _.each(models, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">model, index</span>) </span>{
      <span class="hljs-keyword">var</span> addedChildNotExists = !_this2.children.findByModel(model);
      <span class="hljs-keyword">if</span> (addedChildNotExists) {
        _this2._onCollectionAdd(model, _this2.collection, { <span class="hljs-attr">at</span>: index });
      }
      currentIds[model.cid] = <span class="hljs-literal">true</span>;
    });

    <span class="hljs-keyword">var</span> removeModels = _.filter(previousModels, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">prevModel</span>) </span>{
      <span class="hljs-keyword">return</span> !currentIds[prevModel.cid] &amp;&amp; _this2.children.findByModel(prevModel);
    });

    <span class="hljs-keyword">this</span>._removeChildModels(removeModels);
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-252">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-252">&#182;</a>
              </div>
              <p>Reorder DOM after sorting. When your element’s rendering do not use their index,
you can pass reorderOnSort: true to only reorder the DOM after a sort instead of
rendering all the collectionView.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  reorder: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">reorder</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> _this3 = <span class="hljs-keyword">this</span>;

    <span class="hljs-keyword">var</span> children = <span class="hljs-keyword">this</span>.children;
    <span class="hljs-keyword">var</span> models = <span class="hljs-keyword">this</span>._filteredSortedModels();

    <span class="hljs-keyword">if</span> (!models.length &amp;&amp; <span class="hljs-keyword">this</span>._showingEmptyView) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
    }

    <span class="hljs-keyword">var</span> anyModelsAdded = _.some(models, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">model</span>) </span>{
      <span class="hljs-keyword">return</span> !children.findByModel(model);
    });</pre></div></div>
            
        </li>
        
        
        <li id="section-253">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-253">&#182;</a>
              </div>
              <p>If there are any new models added due to filtering we need to add child views,
so render as normal.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">if</span> (anyModelsAdded) {
      <span class="hljs-keyword">this</span>.render();
    } <span class="hljs-keyword">else</span> {

      <span class="hljs-keyword">var</span> filteredOutModels = [];</pre></div></div>
            
        </li>
        
        
        <li id="section-254">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-254">&#182;</a>
              </div>
              <p>Get the DOM nodes in the same order as the models and
find the model that were children before but aren’t in this new order.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">var</span> elsToReorder = _.reduce(<span class="hljs-keyword">this</span>.children._views, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">viewEls, view</span>) </span>{
        <span class="hljs-keyword">var</span> index = _.indexOf(models, view.model);

        <span class="hljs-keyword">if</span> (index === <span class="hljs-number">-1</span>) {
          filteredOutModels.push(view.model);
          <span class="hljs-keyword">return</span> viewEls;
        }

        view._index = index;

        viewEls[index] = view.el;

        <span class="hljs-keyword">return</span> viewEls;
      }, <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(models.length));

      <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'before:reorder'</span>, <span class="hljs-keyword">this</span>);

      <span class="hljs-keyword">var</span> elBuffer = <span class="hljs-keyword">this</span>.Dom.createBuffer();

      _.each(elsToReorder, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">el</span>) </span>{
        _this3.Dom.appendContents(elBuffer, el);
      });</pre></div></div>
            
        </li>
        
        
        <li id="section-255">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-255">&#182;</a>
              </div>
              <p>Since append moves elements that are already in the DOM, appending the elements
will effectively reorder them.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">this</span>._appendReorderedChildren(elBuffer);</pre></div></div>
            
        </li>
        
        
        <li id="section-256">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-256">&#182;</a>
              </div>
              <p>remove any views that have been filtered out</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">this</span>._removeChildModels(filteredOutModels);

      <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'reorder'</span>, <span class="hljs-keyword">this</span>);
    }
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-257">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-257">&#182;</a>
              </div>
              <p>Render view after sorting. Override this method to change how the view renders
after a <code>sort</code> on the collection.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  resortView: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">resortView</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.reorderOnSort) {
      <span class="hljs-keyword">this</span>.reorder();
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">this</span>._renderChildren();
    }
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-258">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-258">&#182;</a>
              </div>
              <p>Internal method. This checks for any changes in the order of the collection.
If the index of any view doesn’t match, it will render.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _sortViews: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_sortViews</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> _this4 = <span class="hljs-keyword">this</span>;

    <span class="hljs-keyword">var</span> models = <span class="hljs-keyword">this</span>._filteredSortedModels();</pre></div></div>
            
        </li>
        
        
        <li id="section-259">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-259">&#182;</a>
              </div>
              <p>check for any changes in sort order of views</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">var</span> orderChanged = _.find(models, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item, index</span>) </span>{
      <span class="hljs-keyword">var</span> view = _this4.children.findByModel(item);
      <span class="hljs-keyword">return</span> !view || view._index !== index;
    });

    <span class="hljs-keyword">if</span> (orderChanged) {
      <span class="hljs-keyword">this</span>.resortView();
    }
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-260">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-260">&#182;</a>
              </div>
              <p>Internal reference to what index a <code>emptyView</code> is.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _emptyViewIndex: <span class="hljs-number">-1</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-261">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-261">&#182;</a>
              </div>
              <p>Internal method. Separated so that CompositeView can append to the childViewContainer
if necessary</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _appendReorderedChildren: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_appendReorderedChildren</span>(<span class="hljs-params">children</span>) </span>{
    <span class="hljs-keyword">this</span>.Dom.appendContents(<span class="hljs-keyword">this</span>.el, children, { <span class="hljs-attr">_$el</span>: <span class="hljs-keyword">this</span>.$el });
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-262">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-262">&#182;</a>
              </div>
              <p>Internal method. Separated so that CompositeView can have more control over events
being triggered, around the rendering process</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _renderChildren: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_renderChildren</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._isRendered) {
      <span class="hljs-keyword">this</span>._destroyEmptyView();
      <span class="hljs-keyword">this</span>._destroyChildren();
    }

    <span class="hljs-keyword">var</span> models = <span class="hljs-keyword">this</span>._filteredSortedModels();
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.isEmpty({ <span class="hljs-attr">processedModels</span>: models })) {
      <span class="hljs-keyword">this</span>._showEmptyView();
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'before:render:children'</span>, <span class="hljs-keyword">this</span>);
      <span class="hljs-keyword">this</span>._startBuffering();
      <span class="hljs-keyword">this</span>._showCollection(models);
      <span class="hljs-keyword">this</span>._endBuffering();
      <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'render:children'</span>, <span class="hljs-keyword">this</span>);
    }
  },
  <span class="hljs-attr">_createView</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_createView</span>(<span class="hljs-params">model, index</span>) </span>{
    <span class="hljs-keyword">var</span> ChildView = <span class="hljs-keyword">this</span>._getChildView(model);
    <span class="hljs-keyword">var</span> childViewOptions = <span class="hljs-keyword">this</span>._getChildViewOptions(model, index);
    <span class="hljs-keyword">var</span> view = <span class="hljs-keyword">this</span>.buildChildView(model, ChildView, childViewOptions);
    <span class="hljs-keyword">return</span> view;
  },
  <span class="hljs-attr">_setupChildView</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_setupChildView</span>(<span class="hljs-params">view, index</span>) </span>{
    monitorViewEvents(view);</pre></div></div>
            
        </li>
        
        
        <li id="section-263">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-263">&#182;</a>
              </div>
              <p>set up the child view event forwarding</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">this</span>._proxyChildViewEvents(view);

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.sort) {
      view._index = index;
    }
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-264">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-264">&#182;</a>
              </div>
              <p>Internal method to loop through collection and show each child view.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _showCollection: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_showCollection</span>(<span class="hljs-params">models</span>) </span>{
    _.each(models, _.bind(<span class="hljs-keyword">this</span>._addChild, <span class="hljs-keyword">this</span>));
    <span class="hljs-keyword">this</span>.children._updateLength();
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-265">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-265">&#182;</a>
              </div>
              <p>Allow the collection to be sorted by a custom view comparator</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _filteredSortedModels: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_filteredSortedModels</span>(<span class="hljs-params">addedAt</span>) </span>{
    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.collection || !<span class="hljs-keyword">this</span>.collection.length) {
      <span class="hljs-keyword">return</span> [];
    }

    <span class="hljs-keyword">var</span> viewComparator = <span class="hljs-keyword">this</span>.getViewComparator();
    <span class="hljs-keyword">var</span> models = <span class="hljs-keyword">this</span>.collection.models;
    addedAt = <span class="hljs-built_in">Math</span>.min(<span class="hljs-built_in">Math</span>.max(addedAt, <span class="hljs-number">0</span>), models.length - <span class="hljs-number">1</span>);

    <span class="hljs-keyword">if</span> (viewComparator) {
      <span class="hljs-keyword">var</span> addedModel = <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-266">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-266">&#182;</a>
              </div>
              <p>Preserve <code>at</code> location, even for a sorted view</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">if</span> (addedAt) {
        addedModel = models[addedAt];
        models = models.slice(<span class="hljs-number">0</span>, addedAt).concat(models.slice(addedAt + <span class="hljs-number">1</span>));
      }
      models = <span class="hljs-keyword">this</span>._sortModelsBy(models, viewComparator);
      <span class="hljs-keyword">if</span> (addedModel) {
        models.splice(addedAt, <span class="hljs-number">0</span>, addedModel);
      }
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-267">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-267">&#182;</a>
              </div>
              <p>Filter after sorting in case the filter uses the index</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    models = <span class="hljs-keyword">this</span>._filterModels(models);

    <span class="hljs-keyword">return</span> models;
  },
  <span class="hljs-attr">getViewComparator</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getViewComparator</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.viewComparator;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-268">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-268">&#182;</a>
              </div>
              <p>Filter an array of models, if a filter exists</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _filterModels: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_filterModels</span>(<span class="hljs-params">models</span>) </span>{
    <span class="hljs-keyword">var</span> _this5 = <span class="hljs-keyword">this</span>;

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.filter) {
      models = _.filter(models, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">model, index</span>) </span>{
        <span class="hljs-keyword">return</span> _this5._shouldAddChild(model, index);
      });
    }
    <span class="hljs-keyword">return</span> models;
  },
  <span class="hljs-attr">_sortModelsBy</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_sortModelsBy</span>(<span class="hljs-params">models, comparator</span>) </span>{
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> comparator === <span class="hljs-string">'string'</span>) {
      <span class="hljs-keyword">return</span> _.sortBy(models, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">model</span>) </span>{
        <span class="hljs-keyword">return</span> model.get(comparator);
      });
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (comparator.length === <span class="hljs-number">1</span>) {
      <span class="hljs-keyword">return</span> _.sortBy(models, _.bind(comparator, <span class="hljs-keyword">this</span>));
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">return</span> _.clone(models).sort(_.bind(comparator, <span class="hljs-keyword">this</span>));
    }
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-269">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-269">&#182;</a>
              </div>
              <p>Internal method to show an empty view in place of a collection of child views,
when the collection is empty</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _showEmptyView: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_showEmptyView</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> EmptyView = <span class="hljs-keyword">this</span>._getEmptyView();

    <span class="hljs-keyword">if</span> (EmptyView &amp;&amp; !<span class="hljs-keyword">this</span>._showingEmptyView) {
      <span class="hljs-keyword">this</span>._showingEmptyView = <span class="hljs-literal">true</span>;

      <span class="hljs-keyword">var</span> model = <span class="hljs-keyword">new</span> Backbone.Model();
      <span class="hljs-keyword">var</span> emptyViewOptions = <span class="hljs-keyword">this</span>.emptyViewOptions || <span class="hljs-keyword">this</span>.childViewOptions;
      <span class="hljs-keyword">if</span> (_.isFunction(emptyViewOptions)) {
        emptyViewOptions = emptyViewOptions.call(<span class="hljs-keyword">this</span>, model, <span class="hljs-keyword">this</span>._emptyViewIndex);
      }

      <span class="hljs-keyword">var</span> view = <span class="hljs-keyword">this</span>.buildChildView(model, EmptyView, emptyViewOptions);

      <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'before:render:empty'</span>, <span class="hljs-keyword">this</span>, view);
      <span class="hljs-keyword">this</span>.addChildView(view, <span class="hljs-number">0</span>);
      <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'render:empty'</span>, <span class="hljs-keyword">this</span>, view);
    }
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-270">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-270">&#182;</a>
              </div>
              <p>Internal method to destroy an existing emptyView instance if one exists. Called when
a collection view has been rendered empty, and then a child is added to the collection.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _destroyEmptyView: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_destroyEmptyView</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._showingEmptyView) {
      <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'before:remove:empty'</span>, <span class="hljs-keyword">this</span>);

      <span class="hljs-keyword">this</span>._destroyChildren();
      <span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>._showingEmptyView;

      <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'remove:empty'</span>, <span class="hljs-keyword">this</span>);
    }
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-271">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-271">&#182;</a>
              </div>
              <p>Retrieve the empty view class</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _getEmptyView: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_getEmptyView</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> emptyView = <span class="hljs-keyword">this</span>.emptyView;

    <span class="hljs-keyword">if</span> (!emptyView) {
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._getView(emptyView);
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-272">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-272">&#182;</a>
              </div>
              <p>Retrieve the <code>childView</code> class
The <code>childView</code> property can be either a view class or a function that
returns a view class. If it is a function, it will receive the model that
will be passed to the view instance (created from the returned view class)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _getChildView: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_getChildView</span>(<span class="hljs-params">child</span>) </span>{
    <span class="hljs-keyword">var</span> childView = <span class="hljs-keyword">this</span>.childView;

    <span class="hljs-keyword">if</span> (!childView) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> MarionetteError({
        <span class="hljs-attr">name</span>: <span class="hljs-string">'NoChildViewError'</span>,
        <span class="hljs-attr">message</span>: <span class="hljs-string">'A "childView" must be specified'</span>
      });
    }

    childView = <span class="hljs-keyword">this</span>._getView(childView, child);

    <span class="hljs-keyword">if</span> (!childView) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> MarionetteError({
        <span class="hljs-attr">name</span>: <span class="hljs-string">'InvalidChildViewError'</span>,
        <span class="hljs-attr">message</span>: <span class="hljs-string">'"childView" must be a view class or a function that returns a view class'</span>
      });
    }

    <span class="hljs-keyword">return</span> childView;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-273">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-273">&#182;</a>
              </div>
              <p>First check if the <code>view</code> is a view class (the common case)
Then check if it’s a function (which we assume that returns a view class)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _getView: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_getView</span>(<span class="hljs-params">view, child</span>) </span>{
    <span class="hljs-keyword">if</span> (view.prototype <span class="hljs-keyword">instanceof</span> Backbone.View || view === Backbone.View) {
      <span class="hljs-keyword">return</span> view;
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (_.isFunction(view)) {
      <span class="hljs-keyword">return</span> view.call(<span class="hljs-keyword">this</span>, child);
    }
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-274">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-274">&#182;</a>
              </div>
              <p>Internal method for building and adding a child view</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _addChild: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_addChild</span>(<span class="hljs-params">child, index</span>) </span>{
    <span class="hljs-keyword">var</span> view = <span class="hljs-keyword">this</span>._createView(child, index);
    <span class="hljs-keyword">this</span>.addChildView(view, index);

    <span class="hljs-keyword">return</span> view;
  },
  <span class="hljs-attr">_getChildViewOptions</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_getChildViewOptions</span>(<span class="hljs-params">child, index</span>) </span>{
    <span class="hljs-keyword">if</span> (_.isFunction(<span class="hljs-keyword">this</span>.childViewOptions)) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.childViewOptions(child, index);
    }

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.childViewOptions;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-275">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-275">&#182;</a>
              </div>
              <p>Render the child’s view and add it to the HTML for the collection view at a given index.
This will also update the indices of later views in the collection in order to keep the
children in sync with the collection.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  addChildView: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addChildView</span>(<span class="hljs-params">view, index</span>) </span>{
    <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'before:add:child'</span>, <span class="hljs-keyword">this</span>, view);
    <span class="hljs-keyword">this</span>._setupChildView(view, index);</pre></div></div>
            
        </li>
        
        
        <li id="section-276">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-276">&#182;</a>
              </div>
              <p>Store the child view itself so we can properly remove and/or destroy it later</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._isBuffering) {</pre></div></div>
            
        </li>
        
        
        <li id="section-277">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-277">&#182;</a>
              </div>
              <p>Add to children, but don’t update children’s length.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">this</span>.children._add(view);
    } <span class="hljs-keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-278">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-278">&#182;</a>
              </div>
              <p>increment indices of views after this one</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">this</span>._updateIndices(view, <span class="hljs-literal">true</span>);
      <span class="hljs-keyword">this</span>.children.add(view);
    }

    renderView(view);

    <span class="hljs-keyword">this</span>._attachView(view, index);

    <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'add:child'</span>, <span class="hljs-keyword">this</span>, view);

    <span class="hljs-keyword">return</span> view;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-279">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-279">&#182;</a>
              </div>
              <p>Internal method. This decrements or increments the indices of views after the added/removed
view to keep in sync with the collection.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _updateIndices: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_updateIndices</span>(<span class="hljs-params">views, increment</span>) </span>{
    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.sort) {
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-keyword">if</span> (!increment) {
      _.each(_.sortBy(<span class="hljs-keyword">this</span>.children._views, <span class="hljs-string">'_index'</span>), <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">view, index</span>) </span>{
        view._index = index;
      });

      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-keyword">var</span> view = _.isArray(views) ? _.max(views, <span class="hljs-string">'_index'</span>) : views;

    <span class="hljs-keyword">if</span> (_.isObject(view)) {</pre></div></div>
            
        </li>
        
        
        <li id="section-280">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-280">&#182;</a>
              </div>
              <p>update the indexes of views after this one</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      _.each(<span class="hljs-keyword">this</span>.children._views, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">laterView</span>) </span>{
        <span class="hljs-keyword">if</span> (laterView._index &gt;= view._index) {
          laterView._index += <span class="hljs-number">1</span>;
        }
      });
    }
  },
  <span class="hljs-attr">_attachView</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_attachView</span>(<span class="hljs-params">view, index</span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-281">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-281">&#182;</a>
              </div>
              <p>Only trigger attach if already attached and not buffering,
otherwise _endBuffering() or Region#show() handles this.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">var</span> shouldTriggerAttach = !view._isAttached &amp;&amp; !<span class="hljs-keyword">this</span>._isBuffering &amp;&amp; <span class="hljs-keyword">this</span>._isAttached &amp;&amp; <span class="hljs-keyword">this</span>.monitorViewEvents !== <span class="hljs-literal">false</span>;

    <span class="hljs-keyword">if</span> (shouldTriggerAttach) {
      triggerMethodOn(view, <span class="hljs-string">'before:attach'</span>, view);
    }

    <span class="hljs-keyword">this</span>.attachHtml(<span class="hljs-keyword">this</span>, view, index);

    <span class="hljs-keyword">if</span> (shouldTriggerAttach) {
      view._isAttached = <span class="hljs-literal">true</span>;
      triggerMethodOn(view, <span class="hljs-string">'attach'</span>, view);
    }
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-282">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-282">&#182;</a>
              </div>
              <p>Build a <code>childView</code> for a model in the collection.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  buildChildView: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">buildChildView</span>(<span class="hljs-params">child, ChildViewClass, childViewOptions</span>) </span>{
    <span class="hljs-keyword">var</span> options = _.extend({ <span class="hljs-attr">model</span>: child }, childViewOptions);
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> ChildViewClass(options);
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-283">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-283">&#182;</a>
              </div>
              <p>Remove the child view and destroy it. This function also updates the indices of later views
in the collection in order to keep the children in sync with the collection.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  removeChildView: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">removeChildView</span>(<span class="hljs-params">view</span>) </span>{
    <span class="hljs-keyword">if</span> (!view || view._isDestroyed) {
      <span class="hljs-keyword">return</span> view;
    }

    <span class="hljs-keyword">this</span>._removeChildView(view);
    <span class="hljs-keyword">this</span>.children._updateLength();</pre></div></div>
            
        </li>
        
        
        <li id="section-284">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-284">&#182;</a>
              </div>
              <p>decrement the index of views after this one</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">this</span>._updateIndices(view, <span class="hljs-literal">false</span>);
    <span class="hljs-keyword">return</span> view;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-285">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-285">&#182;</a>
              </div>
              <p>check if the collection is empty or optionally whether an array of pre-processed models is empty</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  isEmpty: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isEmpty</span>(<span class="hljs-params">options</span>) </span>{
    <span class="hljs-keyword">var</span> models = <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>;
    <span class="hljs-keyword">if</span> (_.result(options, <span class="hljs-string">'processedModels'</span>)) {
      models = options.processedModels;
    } <span class="hljs-keyword">else</span> {
      models = <span class="hljs-keyword">this</span>.collection ? <span class="hljs-keyword">this</span>.collection.models : [];
      models = <span class="hljs-keyword">this</span>._filterModels(models);
    }
    <span class="hljs-keyword">return</span> models.length === <span class="hljs-number">0</span>;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-286">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-286">&#182;</a>
              </div>
              <p>You might need to override this if you’ve overridden attachHtml</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  attachBuffer: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">attachBuffer</span>(<span class="hljs-params">collectionView, buffer</span>) </span>{
    <span class="hljs-keyword">this</span>.Dom.appendContents(collectionView.el, buffer, { <span class="hljs-attr">_$el</span>: collectionView.$el });
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-287">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-287">&#182;</a>
              </div>
              <p>Create a fragment buffer from the currently buffered children</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _createBuffer: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_createBuffer</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> _this6 = <span class="hljs-keyword">this</span>;

    <span class="hljs-keyword">var</span> elBuffer = <span class="hljs-keyword">this</span>.Dom.createBuffer();
    _.each(<span class="hljs-keyword">this</span>._bufferedChildren, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">b</span>) </span>{
      _this6.Dom.appendContents(elBuffer, b.el, { <span class="hljs-attr">_$contents</span>: b.$el });
    });
    <span class="hljs-keyword">return</span> elBuffer;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-288">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-288">&#182;</a>
              </div>
              <p>Append the HTML to the collection’s <code>el</code>. Override this method to do something other
than <code>.append</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  attachHtml: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">attachHtml</span>(<span class="hljs-params">collectionView, childView, index</span>) </span>{
    <span class="hljs-keyword">if</span> (collectionView._isBuffering) {</pre></div></div>
            
        </li>
        
        
        <li id="section-289">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-289">&#182;</a>
              </div>
              <p>buffering happens on reset events and initial renders
in order to reduce the number of inserts into the
document, which are expensive.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      collectionView._bufferedChildren.splice(index, <span class="hljs-number">0</span>, childView);
    } <span class="hljs-keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-290">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-290">&#182;</a>
              </div>
              <p>If we’ve already rendered the main collection, append
the new child into the correct order if we need to. Otherwise
append to the end.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">if</span> (!collectionView._insertBefore(childView, index)) {
        collectionView._insertAfter(childView);
      }
    }
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-291">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-291">&#182;</a>
              </div>
              <p>Internal method. Check whether we need to insert the view into the correct position.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _insertBefore: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_insertBefore</span>(<span class="hljs-params">childView, index</span>) </span>{
    <span class="hljs-keyword">var</span> currentView = <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>;
    <span class="hljs-keyword">var</span> findPosition = <span class="hljs-keyword">this</span>.sort &amp;&amp; index &lt; <span class="hljs-keyword">this</span>.children.length - <span class="hljs-number">1</span>;
    <span class="hljs-keyword">if</span> (findPosition) {</pre></div></div>
            
        </li>
        
        
        <li id="section-292">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-292">&#182;</a>
              </div>
              <p>Find the view after this one</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      currentView = _.find(<span class="hljs-keyword">this</span>.children._views, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">view</span>) </span>{
        <span class="hljs-keyword">return</span> view._index === index + <span class="hljs-number">1</span>;
      });
    }

    <span class="hljs-keyword">if</span> (currentView) {
      <span class="hljs-keyword">this</span>.beforeEl(currentView.el, childView.el);
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }

    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-293">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-293">&#182;</a>
              </div>
              <p>Override to handle DOM inserting differently</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  beforeEl: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">beforeEl</span>(<span class="hljs-params">el, siblings</span>) </span>{
    <span class="hljs-keyword">this</span>.$(el).before(siblings);
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-294">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-294">&#182;</a>
              </div>
              <p>Internal method. Append a view to the end of the $el</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _insertAfter: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_insertAfter</span>(<span class="hljs-params">childView</span>) </span>{
    <span class="hljs-keyword">this</span>.Dom.appendContents(<span class="hljs-keyword">this</span>.el, childView.el, { <span class="hljs-attr">_$el</span>: <span class="hljs-keyword">this</span>.$el, <span class="hljs-attr">_$contents</span>: childView.$el });
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-295">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-295">&#182;</a>
              </div>
              <p>Internal method to set up the <code>children</code> object for storing all of the child views</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _initChildViewStorage: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_initChildViewStorage</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">this</span>.children = <span class="hljs-keyword">new</span> Container();
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-296">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-296">&#182;</a>
              </div>
              <p>called by ViewMixin destroy</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _removeChildren: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_removeChildren</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">this</span>._destroyChildren();
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-297">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-297">&#182;</a>
              </div>
              <p>Destroy the child views that this collection view is holding on to, if any</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _destroyChildren: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_destroyChildren</span>(<span class="hljs-params">options</span>) </span>{
    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.children.length) {
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'before:destroy:children'</span>, <span class="hljs-keyword">this</span>);
    _.each(<span class="hljs-keyword">this</span>.children._views, _.bind(<span class="hljs-keyword">this</span>._removeChildView, <span class="hljs-keyword">this</span>));
    <span class="hljs-keyword">this</span>.children._updateLength();
    <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'destroy:children'</span>, <span class="hljs-keyword">this</span>);
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-298">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-298">&#182;</a>
              </div>
              <p>Return true if the given child should be shown. Return false otherwise.
The filter will be passed (child, index, collection), where
 ‘child’ is the given model
 ‘index’ is the index of that model in the collection
 ‘collection’ is the collection referenced by this CollectionView</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _shouldAddChild: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_shouldAddChild</span>(<span class="hljs-params">child, index</span>) </span>{
    <span class="hljs-keyword">var</span> filter = <span class="hljs-keyword">this</span>.filter;
    <span class="hljs-keyword">return</span> !_.isFunction(filter) || filter.call(<span class="hljs-keyword">this</span>, child, index, <span class="hljs-keyword">this</span>.collection);
  }
}, {
  <span class="hljs-attr">setDomApi</span>: setDomApi
});

_.extend(CollectionView.prototype, ViewMixin);</pre></div></div>
            
        </li>
        
        
        <li id="section-299">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-299">&#182;</a>
              </div>
              <p>Provide a container to store, retrieve and
shut down child views.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">var</span> Container$<span class="hljs-number">1</span> = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Container</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">this</span>._init();
};

emulateCollection(Container$<span class="hljs-number">1.</span>prototype, <span class="hljs-string">'_views'</span>);

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">stringComparator</span>(<span class="hljs-params">comparator, view</span>) </span>{
  <span class="hljs-keyword">return</span> view.model &amp;&amp; view.model.get(comparator);
}</pre></div></div>
            
        </li>
        
        
        <li id="section-300">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-300">&#182;</a>
              </div>
              <h2 id="container-methods">Container Methods</h2>

            </div>
            
        </li>
        
        
        <li id="section-301">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-301">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>
_.extend(Container$<span class="hljs-number">1.</span>prototype, {</pre></div></div>
            
        </li>
        
        
        <li id="section-302">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-302">&#182;</a>
              </div>
              <p>Initializes an empty container</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _init: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_init</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">this</span>._views = [];
    <span class="hljs-keyword">this</span>._viewsByCid = {};
    <span class="hljs-keyword">this</span>._indexByModel = {};
    <span class="hljs-keyword">this</span>._updateLength();
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-303">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-303">&#182;</a>
              </div>
              <p>Add a view to this container. Stores the view
by <code>cid</code> and makes it searchable by the model
cid (and model itself). Additionally it stores
the view by index in the _views array</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _add: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_add</span>(<span class="hljs-params">view</span>) </span>{
    <span class="hljs-keyword">var</span> index = <span class="hljs-built_in">arguments</span>.length &gt; <span class="hljs-number">1</span> &amp;&amp; <span class="hljs-built_in">arguments</span>[<span class="hljs-number">1</span>] !== <span class="hljs-literal">undefined</span> ? <span class="hljs-built_in">arguments</span>[<span class="hljs-number">1</span>] : <span class="hljs-keyword">this</span>._views.length;

    <span class="hljs-keyword">var</span> viewCid = view.cid;</pre></div></div>
            
        </li>
        
        
        <li id="section-304">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-304">&#182;</a>
              </div>
              <p>store the view</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">this</span>._viewsByCid[viewCid] = view;</pre></div></div>
            
        </li>
        
        
        <li id="section-305">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-305">&#182;</a>
              </div>
              <p>index it by model</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">if</span> (view.model) {
      <span class="hljs-keyword">this</span>._indexByModel[view.model.cid] = viewCid;
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-306">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-306">&#182;</a>
              </div>
              <p>add to end by default</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">this</span>._views.splice(index, <span class="hljs-number">0</span>, view);

    <span class="hljs-keyword">this</span>._updateLength();
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-307">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-307">&#182;</a>
              </div>
              <p>Sort (mutate) and return the array of the child views.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _sort: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_sort</span>(<span class="hljs-params">comparator</span>) </span>{
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> comparator === <span class="hljs-string">'string'</span>) {
      comparator = _.partial(stringComparator, comparator);
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._sortBy(comparator);
    }

    <span class="hljs-keyword">if</span> (comparator.length === <span class="hljs-number">1</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._sortBy(comparator);
    }

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._views.sort(comparator);
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-308">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-308">&#182;</a>
              </div>
              <p>Makes <code>_.sortBy</code> mutate the array to match <code>this._views.sort</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _sortBy: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_sortBy</span>(<span class="hljs-params">comparator</span>) </span>{
    <span class="hljs-keyword">var</span> sortedViews = _.sortBy(<span class="hljs-keyword">this</span>._views, comparator);

    <span class="hljs-keyword">this</span>._set(sortedViews);

    <span class="hljs-keyword">return</span> sortedViews;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-309">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-309">&#182;</a>
              </div>
              <p>Replace array contents without overwriting the reference.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _set: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_set</span>(<span class="hljs-params">views</span>) </span>{
    <span class="hljs-keyword">this</span>._views.length = <span class="hljs-number">0</span>;

    <span class="hljs-keyword">this</span>._views.push.apply(<span class="hljs-keyword">this</span>._views, views.slice(<span class="hljs-number">0</span>));

    <span class="hljs-keyword">this</span>._updateLength();
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-310">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-310">&#182;</a>
              </div>
              <p>Swap views by index</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _swap: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_swap</span>(<span class="hljs-params">view1, view2</span>) </span>{
    <span class="hljs-keyword">var</span> view1Index = <span class="hljs-keyword">this</span>.findIndexByView(view1);
    <span class="hljs-keyword">var</span> view2Index = <span class="hljs-keyword">this</span>.findIndexByView(view2);

    <span class="hljs-keyword">if</span> (view1Index === <span class="hljs-number">-1</span> || view2Index === <span class="hljs-number">-1</span>) {
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-keyword">var</span> swapView = <span class="hljs-keyword">this</span>._views[view1Index];
    <span class="hljs-keyword">this</span>._views[view1Index] = <span class="hljs-keyword">this</span>._views[view2Index];
    <span class="hljs-keyword">this</span>._views[view2Index] = swapView;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-311">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-311">&#182;</a>
              </div>
              <p>Find a view by the model that was attached to it.
Uses the model’s <code>cid</code> to find it.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  findByModel: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">findByModel</span>(<span class="hljs-params">model</span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.findByModelCid(model.cid);
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-312">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-312">&#182;</a>
              </div>
              <p>Find a view by the <code>cid</code> of the model that was attached to it.
Uses the model’s <code>cid</code> to find the view <code>cid</code> and
retrieve the view using it.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  findByModelCid: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">findByModelCid</span>(<span class="hljs-params">modelCid</span>) </span>{
    <span class="hljs-keyword">var</span> viewCid = <span class="hljs-keyword">this</span>._indexByModel[modelCid];
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.findByCid(viewCid);
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-313">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-313">&#182;</a>
              </div>
              <p>Find a view by index.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  findByIndex: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">findByIndex</span>(<span class="hljs-params">index</span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._views[index];
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-314">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-314">&#182;</a>
              </div>
              <p>Find the index of a view instance</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  findIndexByView: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">findIndexByView</span>(<span class="hljs-params">view</span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._views.indexOf(view);
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-315">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-315">&#182;</a>
              </div>
              <p>Retrieve a view by its <code>cid</code> directly</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  findByCid: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">findByCid</span>(<span class="hljs-params">cid</span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._viewsByCid[cid];
  },
  <span class="hljs-attr">hasView</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">hasView</span>(<span class="hljs-params">view</span>) </span>{
    <span class="hljs-keyword">return</span> !!<span class="hljs-keyword">this</span>.findByCid(view.cid);
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-316">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-316">&#182;</a>
              </div>
              <p>Remove a view and clean up index references.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _remove: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_remove</span>(<span class="hljs-params">view</span>) </span>{
    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>._viewsByCid[view.cid]) {
      <span class="hljs-keyword">return</span>;
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-317">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-317">&#182;</a>
              </div>
              <p>delete model index</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">if</span> (view.model) {
      <span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>._indexByModel[view.model.cid];
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-318">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-318">&#182;</a>
              </div>
              <p>remove the view from the container</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>._viewsByCid[view.cid];

    <span class="hljs-keyword">var</span> index = <span class="hljs-keyword">this</span>.findIndexByView(view);
    <span class="hljs-keyword">this</span>._views.splice(index, <span class="hljs-number">1</span>);

    <span class="hljs-keyword">this</span>._updateLength();
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-319">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-319">&#182;</a>
              </div>
              <p>Update the <code>.length</code> attribute on this container</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _updateLength: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_updateLength</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">this</span>.length = <span class="hljs-keyword">this</span>._views.length;
  }
});</pre></div></div>
            
        </li>
        
        
        <li id="section-320">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-320">&#182;</a>
              </div>
              <h2 id="next-collection-view">Next Collection View</h2>

            </div>
            
        </li>
        
        
        <li id="section-321">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-321">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>
<span class="hljs-keyword">var</span> ClassOptions$<span class="hljs-number">4</span> = [<span class="hljs-string">'behaviors'</span>, <span class="hljs-string">'childView'</span>, <span class="hljs-string">'childViewEventPrefix'</span>, <span class="hljs-string">'childViewEvents'</span>, <span class="hljs-string">'childViewOptions'</span>, <span class="hljs-string">'childViewTriggers'</span>, <span class="hljs-string">'collectionEvents'</span>, <span class="hljs-string">'emptyView'</span>, <span class="hljs-string">'emptyViewOptions'</span>, <span class="hljs-string">'events'</span>, <span class="hljs-string">'modelEvents'</span>, <span class="hljs-string">'sortWithCollection'</span>, <span class="hljs-string">'triggers'</span>, <span class="hljs-string">'ui'</span>, <span class="hljs-string">'viewComparator'</span>, <span class="hljs-string">'viewFilter'</span>];</pre></div></div>
            
        </li>
        
        
        <li id="section-322">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-322">&#182;</a>
              </div>
              <p>A view that iterates over a Backbone.Collection
and renders an individual child view for each model.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">var</span> CollectionView$<span class="hljs-number">2</span> = Backbone.View.extend({</pre></div></div>
            
        </li>
        
        
        <li id="section-323">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-323">&#182;</a>
              </div>
              <p>flag for maintaining the sorted order of the collection</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  sortWithCollection: <span class="hljs-literal">true</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-324">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-324">&#182;</a>
              </div>
              <p>constructor</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">constructor</span>: function <span class="hljs-keyword">constructor</span>(options) {
    <span class="hljs-keyword">this</span>._setOptions(options);

    <span class="hljs-keyword">this</span>.mergeOptions(options, ClassOptions$<span class="hljs-number">4</span>);

    monitorViewEvents(<span class="hljs-keyword">this</span>);

    <span class="hljs-keyword">this</span>.once(<span class="hljs-string">'render'</span>, <span class="hljs-keyword">this</span>._initialEvents);</pre></div></div>
            
        </li>
        
        
        <li id="section-325">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-325">&#182;</a>
              </div>
              <p>This children container isn’t really used by a render, but it provides
the ability to check <code>this.children.length</code> prior to rendering
It also allows for cases where only addChildView is used</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">this</span>._initChildViewStorage();
    <span class="hljs-keyword">this</span>._initBehaviors();

    <span class="hljs-keyword">var</span> args = <span class="hljs-built_in">Array</span>.prototype.slice.call(<span class="hljs-built_in">arguments</span>);
    args[<span class="hljs-number">0</span>] = <span class="hljs-keyword">this</span>.options;
    Backbone.View.prototype.constructor.apply(<span class="hljs-keyword">this</span>, args);

    <span class="hljs-keyword">this</span>._initEmptyRegion();

    <span class="hljs-keyword">this</span>.delegateEntityEvents();

    <span class="hljs-keyword">this</span>._triggerEventOnBehaviors(<span class="hljs-string">'initialize'</span>, <span class="hljs-keyword">this</span>);
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-326">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-326">&#182;</a>
              </div>
              <p>Internal method to set up the <code>children</code> object for storing all of the child views</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _initChildViewStorage: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_initChildViewStorage</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">this</span>.children = <span class="hljs-keyword">new</span> Container$<span class="hljs-number">1</span>();
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-327">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-327">&#182;</a>
              </div>
              <p>Create an region to show the emptyView</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _initEmptyRegion: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_initEmptyRegion</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">this</span>.emptyRegion = <span class="hljs-keyword">new</span> Region({ <span class="hljs-attr">el</span>: <span class="hljs-keyword">this</span>.el, <span class="hljs-attr">replaceElement</span>: <span class="hljs-literal">false</span> });

    <span class="hljs-keyword">this</span>.emptyRegion._parentView = <span class="hljs-keyword">this</span>;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-328">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-328">&#182;</a>
              </div>
              <p>Configured the initial events that the collection view binds to.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _initialEvents: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_initialEvents</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">this</span>.listenTo(<span class="hljs-keyword">this</span>.collection, {
      <span class="hljs-string">'sort'</span>: <span class="hljs-keyword">this</span>._onCollectionSort,
      <span class="hljs-string">'reset'</span>: <span class="hljs-keyword">this</span>._onCollectionReset,
      <span class="hljs-string">'update'</span>: <span class="hljs-keyword">this</span>._onCollectionUpdate
    });
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-329">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-329">&#182;</a>
              </div>
              <p>Internal method. This checks for any changes in the order of the collection.
If the index of any view doesn’t match, it will re-sort.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _onCollectionSort: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_onCollectionSort</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> _this = <span class="hljs-keyword">this</span>;

    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.sortWithCollection || <span class="hljs-keyword">this</span>.viewComparator === <span class="hljs-literal">false</span>) {
      <span class="hljs-keyword">return</span>;
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-330">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-330">&#182;</a>
              </div>
              <p>If the data is changing we will handle the sort later</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.collection.length !== <span class="hljs-keyword">this</span>.children.length) {
      <span class="hljs-keyword">return</span>;
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-331">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-331">&#182;</a>
              </div>
              <p>Additional check if the data is changing</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">var</span> hasAddedModel = <span class="hljs-keyword">this</span>.collection.some(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">model</span>) </span>{
      <span class="hljs-keyword">return</span> !_this.children.findByModel(model);
    });

    <span class="hljs-keyword">if</span> (hasAddedModel) {
      <span class="hljs-keyword">return</span>;
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-332">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-332">&#182;</a>
              </div>
              <p>If the only thing happening here is sorting, sort.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">this</span>.sort();
  },
  <span class="hljs-attr">_onCollectionReset</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_onCollectionReset</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">this</span>.render();
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-333">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-333">&#182;</a>
              </div>
              <p>Handle collection update model additions and  removals</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _onCollectionUpdate: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_onCollectionUpdate</span>(<span class="hljs-params">collection, options</span>) </span>{
    <span class="hljs-keyword">var</span> changes = options.changes;</pre></div></div>
            
        </li>
        
        
        <li id="section-334">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-334">&#182;</a>
              </div>
              <p>Remove first since it’ll be a shorter array lookup.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">var</span> removedViews = <span class="hljs-keyword">this</span>._removeChildModels(changes.removed);

    <span class="hljs-keyword">this</span>._addedViews = <span class="hljs-keyword">this</span>._addChildModels(changes.added);

    <span class="hljs-keyword">this</span>._detachChildren(removedViews);

    <span class="hljs-keyword">this</span>._showChildren();</pre></div></div>
            
        </li>
        
        
        <li id="section-335">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-335">&#182;</a>
              </div>
              <p>Destroy removed child views after all of the render is complete</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">this</span>._removeChildViews(removedViews);
  },
  <span class="hljs-attr">_removeChildModels</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_removeChildModels</span>(<span class="hljs-params">models</span>) </span>{
    <span class="hljs-keyword">return</span> _.map(models, _.bind(<span class="hljs-keyword">this</span>._removeChildModel, <span class="hljs-keyword">this</span>));
  },
  <span class="hljs-attr">_removeChildModel</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_removeChildModel</span>(<span class="hljs-params">model</span>) </span>{
    <span class="hljs-keyword">var</span> view = <span class="hljs-keyword">this</span>.children.findByModel(model);

    <span class="hljs-keyword">this</span>._removeChild(view);

    <span class="hljs-keyword">return</span> view;
  },
  <span class="hljs-attr">_removeChild</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_removeChild</span>(<span class="hljs-params">view</span>) </span>{
    <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'before:remove:child'</span>, <span class="hljs-keyword">this</span>, view);

    <span class="hljs-keyword">this</span>.children._remove(view);

    <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'remove:child'</span>, <span class="hljs-keyword">this</span>, view);
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-336">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-336">&#182;</a>
              </div>
              <p>Added views are returned for consistency with _removeChildModels</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _addChildModels: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_addChildModels</span>(<span class="hljs-params">models</span>) </span>{
    <span class="hljs-keyword">return</span> _.map(models, _.bind(<span class="hljs-keyword">this</span>._addChildModel, <span class="hljs-keyword">this</span>));
  },
  <span class="hljs-attr">_addChildModel</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_addChildModel</span>(<span class="hljs-params">model</span>) </span>{
    <span class="hljs-keyword">var</span> view = <span class="hljs-keyword">this</span>._createChildView(model);

    <span class="hljs-keyword">this</span>._addChild(view);

    <span class="hljs-keyword">return</span> view;
  },
  <span class="hljs-attr">_createChildView</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_createChildView</span>(<span class="hljs-params">model</span>) </span>{
    <span class="hljs-keyword">var</span> ChildView = <span class="hljs-keyword">this</span>._getChildView(model);
    <span class="hljs-keyword">var</span> childViewOptions = <span class="hljs-keyword">this</span>._getChildViewOptions(model);
    <span class="hljs-keyword">var</span> view = <span class="hljs-keyword">this</span>.buildChildView(model, ChildView, childViewOptions);

    <span class="hljs-keyword">return</span> view;
  },
  <span class="hljs-attr">_addChild</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_addChild</span>(<span class="hljs-params">view, index</span>) </span>{
    <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'before:add:child'</span>, <span class="hljs-keyword">this</span>, view);

    <span class="hljs-keyword">this</span>._setupChildView(view);
    <span class="hljs-keyword">this</span>.children._add(view, index);

    <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'add:child'</span>, <span class="hljs-keyword">this</span>, view);
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-337">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-337">&#182;</a>
              </div>
              <p>Retrieve the <code>childView</code> class
The <code>childView</code> property can be either a view class or a function that
returns a view class. If it is a function, it will receive the model that
will be passed to the view instance (created from the returned view class)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _getChildView: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_getChildView</span>(<span class="hljs-params">child</span>) </span>{
    <span class="hljs-keyword">var</span> childView = <span class="hljs-keyword">this</span>.childView;

    <span class="hljs-keyword">if</span> (!childView) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> MarionetteError({
        <span class="hljs-attr">name</span>: <span class="hljs-string">'NoChildViewError'</span>,
        <span class="hljs-attr">message</span>: <span class="hljs-string">'A "childView" must be specified'</span>
      });
    }

    childView = <span class="hljs-keyword">this</span>._getView(childView, child);

    <span class="hljs-keyword">if</span> (!childView) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> MarionetteError({
        <span class="hljs-attr">name</span>: <span class="hljs-string">'InvalidChildViewError'</span>,
        <span class="hljs-attr">message</span>: <span class="hljs-string">'"childView" must be a view class or a function that returns a view class'</span>
      });
    }

    <span class="hljs-keyword">return</span> childView;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-338">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-338">&#182;</a>
              </div>
              <p>First check if the <code>view</code> is a view class (the common case)
Then check if it’s a function (which we assume that returns a view class)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _getView: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_getView</span>(<span class="hljs-params">view, child</span>) </span>{
    <span class="hljs-keyword">if</span> (view.prototype <span class="hljs-keyword">instanceof</span> Backbone.View || view === Backbone.View) {
      <span class="hljs-keyword">return</span> view;
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (_.isFunction(view)) {
      <span class="hljs-keyword">return</span> view.call(<span class="hljs-keyword">this</span>, child);
    }
  },
  <span class="hljs-attr">_getChildViewOptions</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_getChildViewOptions</span>(<span class="hljs-params">child</span>) </span>{
    <span class="hljs-keyword">if</span> (_.isFunction(<span class="hljs-keyword">this</span>.childViewOptions)) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.childViewOptions(child);
    }

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.childViewOptions;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-339">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-339">&#182;</a>
              </div>
              <p>Build a <code>childView</code> for a model in the collection.
Override to customize the build</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  buildChildView: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">buildChildView</span>(<span class="hljs-params">child, ChildViewClass, childViewOptions</span>) </span>{
    <span class="hljs-keyword">var</span> options = _.extend({ <span class="hljs-attr">model</span>: child }, childViewOptions);
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> ChildViewClass(options);
  },
  <span class="hljs-attr">_setupChildView</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_setupChildView</span>(<span class="hljs-params">view</span>) </span>{
    monitorViewEvents(view);</pre></div></div>
            
        </li>
        
        
        <li id="section-340">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-340">&#182;</a>
              </div>
              <p>We need to listen for if a view is destroyed in a way other
than through the CollectionView.
If this happens we need to remove the reference to the view
since once a view has been destroyed we can not reuse it.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    view.on(<span class="hljs-string">'destroy'</span>, <span class="hljs-keyword">this</span>.removeChildView, <span class="hljs-keyword">this</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-341">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-341">&#182;</a>
              </div>
              <p>set up the child view event forwarding</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">this</span>._proxyChildViewEvents(view);
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-342">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-342">&#182;</a>
              </div>
              <p>used by ViewMixin’s <code>_childViewEventHandler</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _getImmediateChildren: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_getImmediateChildren</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.children._views;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-343">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-343">&#182;</a>
              </div>
              <p>Overriding Backbone.View’s <code>setElement</code> to handle
if an el was previously defined. If so, the view might be
attached on setElement.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  setElement: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setElement</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> hasEl = !!<span class="hljs-keyword">this</span>.el;

    Backbone.View.prototype.setElement.apply(<span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span>);

    <span class="hljs-keyword">if</span> (hasEl) {
      <span class="hljs-keyword">this</span>._isAttached = isNodeAttached(<span class="hljs-keyword">this</span>.el);
    }

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-344">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-344">&#182;</a>
              </div>
              <p>Render children views.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  render: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">render</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._isDestroyed) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
    }
    <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'before:render'</span>, <span class="hljs-keyword">this</span>);

    <span class="hljs-keyword">this</span>._destroyChildren();</pre></div></div>
            
        </li>
        
        
        <li id="section-345">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-345">&#182;</a>
              </div>
              <p>After all children have been destroyed re-init the container</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">this</span>.children._init();

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.collection) {
      <span class="hljs-keyword">this</span>._addChildModels(<span class="hljs-keyword">this</span>.collection.models);
    }

    <span class="hljs-keyword">this</span>._showChildren();

    <span class="hljs-keyword">this</span>._isRendered = <span class="hljs-literal">true</span>;

    <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'render'</span>, <span class="hljs-keyword">this</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-346">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-346">&#182;</a>
              </div>
              <p>Sorts the children then filters and renders the results.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  sort: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sort</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._isDestroyed) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
    }

    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.children.length) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
    }

    <span class="hljs-keyword">this</span>._showChildren();

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
  },
  <span class="hljs-attr">_showChildren</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_showChildren</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.isEmpty()) {
      <span class="hljs-keyword">this</span>._showEmptyView();
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-keyword">this</span>._sortChildren();

    <span class="hljs-keyword">this</span>.filter();
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-347">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-347">&#182;</a>
              </div>
              <p>Returns true if the collectionView is considered empty.
This is called twice during a render. Once to check the data,
and again when views are filtered. Override this function to
customize what empty means.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  isEmpty: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isEmpty</span>(<span class="hljs-params">allViewsFiltered</span>) </span>{
    <span class="hljs-keyword">return</span> allViewsFiltered || !<span class="hljs-keyword">this</span>.children.length;
  },
  <span class="hljs-attr">_showEmptyView</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_showEmptyView</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> EmptyView = <span class="hljs-keyword">this</span>._getEmptyView();

    <span class="hljs-keyword">if</span> (!EmptyView) {
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-keyword">var</span> options = <span class="hljs-keyword">this</span>._getEmptyViewOptions();

    <span class="hljs-keyword">this</span>.emptyRegion.show(<span class="hljs-keyword">new</span> EmptyView(options));
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-348">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-348">&#182;</a>
              </div>
              <p>Retrieve the empty view class</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _getEmptyView: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_getEmptyView</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> emptyView = <span class="hljs-keyword">this</span>.emptyView;

    <span class="hljs-keyword">if</span> (!emptyView) {
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._getView(emptyView);
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-349">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-349">&#182;</a>
              </div>
              <p>Remove the emptyView</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _destroyEmptyView: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_destroyEmptyView</span>(<span class="hljs-params"></span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-350">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-350">&#182;</a>
              </div>
              <p>Only empty if a view is show so the region
doesn’t detach any other unrelated HTML</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.emptyRegion.hasView()) {
      <span class="hljs-keyword">this</span>.emptyRegion.empty();
    }
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-351">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-351">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>  _getEmptyViewOptions: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_getEmptyViewOptions</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> emptyViewOptions = <span class="hljs-keyword">this</span>.emptyViewOptions || <span class="hljs-keyword">this</span>.childViewOptions;

    <span class="hljs-keyword">if</span> (_.isFunction(emptyViewOptions)) {
      <span class="hljs-keyword">return</span> emptyViewOptions.call(<span class="hljs-keyword">this</span>);
    }

    <span class="hljs-keyword">return</span> emptyViewOptions;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-352">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-352">&#182;</a>
              </div>
              <p>Sorts views by viewComparator and sets the children to the new order</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _sortChildren: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_sortChildren</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.viewComparator === <span class="hljs-literal">false</span>) {
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'before:sort'</span>, <span class="hljs-keyword">this</span>);

    <span class="hljs-keyword">var</span> viewComparator = <span class="hljs-keyword">this</span>.getComparator();

    <span class="hljs-keyword">if</span> (_.isFunction(viewComparator)) {</pre></div></div>
            
        </li>
        
        
        <li id="section-353">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-353">&#182;</a>
              </div>
              <p>Must use native bind to preserve length</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      viewComparator = viewComparator.bind(<span class="hljs-keyword">this</span>);
    }

    <span class="hljs-keyword">this</span>.children._sort(viewComparator);

    <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'sort'</span>, <span class="hljs-keyword">this</span>);
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-354">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-354">&#182;</a>
              </div>
              <p>Sets the view’s <code>viewComparator</code> and applies the sort if the view is ready.
To prevent the render pass <code>{ preventRender: true }</code> as the 2nd argument.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  setComparator: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setComparator</span>(<span class="hljs-params">comparator</span>) </span>{
    <span class="hljs-keyword">var</span> _ref = <span class="hljs-built_in">arguments</span>.length &gt; <span class="hljs-number">1</span> &amp;&amp; <span class="hljs-built_in">arguments</span>[<span class="hljs-number">1</span>] !== <span class="hljs-literal">undefined</span> ? <span class="hljs-built_in">arguments</span>[<span class="hljs-number">1</span>] : {},
        preventRender = _ref.preventRender;

    <span class="hljs-keyword">var</span> comparatorChanged = <span class="hljs-keyword">this</span>.viewComparator !== comparator;
    <span class="hljs-keyword">var</span> shouldSort = comparatorChanged &amp;&amp; !preventRender;

    <span class="hljs-keyword">this</span>.viewComparator = comparator;

    <span class="hljs-keyword">if</span> (shouldSort) {
      <span class="hljs-keyword">this</span>.sort();
    }

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-355">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-355">&#182;</a>
              </div>
              <p>Clears the <code>viewComparator</code> and follows the same rules for rendering as <code>setComparator</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  removeComparator: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">removeComparator</span>(<span class="hljs-params">options</span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.setComparator(<span class="hljs-literal">null</span>, options);
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-356">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-356">&#182;</a>
              </div>
              <p>If viewComparator is overriden it will be returned here.
Additionally override this function to provide custom
viewComparator logic</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  getComparator: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getComparator</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.viewComparator || <span class="hljs-keyword">this</span>._viewComparator;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-357">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-357">&#182;</a>
              </div>
              <p>Default internal view comparator that order the views by
the order of the collection</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _viewComparator: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_viewComparator</span>(<span class="hljs-params">view</span>) </span>{
    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.collection) {
      <span class="hljs-keyword">return</span>;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.collection.indexOf(view.model);
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-358">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-358">&#182;</a>
              </div>
              <p>This method re-filters the children views and re-renders the results</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  filter: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">filter</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._isDestroyed) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
    }

    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.children.length) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
    }

    <span class="hljs-keyword">var</span> filteredViews = <span class="hljs-keyword">this</span>._filterChildren();

    <span class="hljs-keyword">this</span>._renderChildren(filteredViews);

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
  },
  <span class="hljs-attr">_isAddedAtEnd</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_isAddedAtEnd</span>(<span class="hljs-params">addedView, index, addedViews</span>) </span>{
    <span class="hljs-keyword">var</span> viewIndex = <span class="hljs-keyword">this</span>.children._views.length - addedViews.length + index;
    <span class="hljs-keyword">return</span> addedView === <span class="hljs-keyword">this</span>.children._views[viewIndex];
  },
  <span class="hljs-attr">_filterChildren</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_filterChildren</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> viewFilter = <span class="hljs-keyword">this</span>._getFilter();
    <span class="hljs-keyword">var</span> addedViews = <span class="hljs-keyword">this</span>._addedViews;

    <span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>._addedViews;

    <span class="hljs-keyword">if</span> (!viewFilter) {
      <span class="hljs-keyword">if</span> (addedViews &amp;&amp; _.every(addedViews, _.bind(<span class="hljs-keyword">this</span>._isAddedAtEnd, <span class="hljs-keyword">this</span>))) {
        <span class="hljs-keyword">return</span> addedViews;
      }

      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.children._views;
    }

    <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'before:filter'</span>, <span class="hljs-keyword">this</span>);

    <span class="hljs-keyword">var</span> filteredViews = _.partition(<span class="hljs-keyword">this</span>.children._views, _.bind(viewFilter, <span class="hljs-keyword">this</span>));

    <span class="hljs-keyword">this</span>._detachChildren(filteredViews[<span class="hljs-number">1</span>]);

    <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'filter'</span>, <span class="hljs-keyword">this</span>);

    <span class="hljs-keyword">return</span> filteredViews[<span class="hljs-number">0</span>];
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-359">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-359">&#182;</a>
              </div>
              <p>This method returns a function for the viewFilter</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _getFilter: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_getFilter</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> viewFilter = <span class="hljs-keyword">this</span>.getFilter();

    <span class="hljs-keyword">if</span> (!viewFilter) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }

    <span class="hljs-keyword">if</span> (_.isFunction(viewFilter)) {
      <span class="hljs-keyword">return</span> viewFilter;
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-360">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-360">&#182;</a>
              </div>
              <p>Support filter predicates <code>{ fooFlag: true }</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">if</span> (_.isObject(viewFilter)) {
      <span class="hljs-keyword">var</span> matcher = _.matches(viewFilter);
      <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">view</span>) </span>{
        <span class="hljs-keyword">return</span> matcher(view.model &amp;&amp; view.model.attributes);
      };
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-361">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-361">&#182;</a>
              </div>
              <p>Filter by model attribute</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">if</span> (_.isString(viewFilter)) {
      <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">view</span>) </span>{
        <span class="hljs-keyword">return</span> view.model &amp;&amp; view.model.get(viewFilter);
      };
    }

    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> MarionetteError({
      <span class="hljs-attr">name</span>: <span class="hljs-string">'InvalidViewFilterError'</span>,
      <span class="hljs-attr">message</span>: <span class="hljs-string">'"viewFilter" must be a function, predicate object literal, a string indicating a model attribute, or falsy'</span>
    });
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-362">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-362">&#182;</a>
              </div>
              <p>Override this function to provide custom
viewFilter logic</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  getFilter: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getFilter</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.viewFilter;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-363">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-363">&#182;</a>
              </div>
              <p>Sets the view’s <code>viewFilter</code> and applies the filter if the view is ready.
To prevent the render pass <code>{ preventRender: true }</code> as the 2nd argument.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  setFilter: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setFilter</span>(<span class="hljs-params">filter</span>) </span>{
    <span class="hljs-keyword">var</span> _ref2 = <span class="hljs-built_in">arguments</span>.length &gt; <span class="hljs-number">1</span> &amp;&amp; <span class="hljs-built_in">arguments</span>[<span class="hljs-number">1</span>] !== <span class="hljs-literal">undefined</span> ? <span class="hljs-built_in">arguments</span>[<span class="hljs-number">1</span>] : {},
        preventRender = _ref2.preventRender;

    <span class="hljs-keyword">var</span> filterChanged = <span class="hljs-keyword">this</span>.viewFilter !== filter;
    <span class="hljs-keyword">var</span> shouldRender = filterChanged &amp;&amp; !preventRender;

    <span class="hljs-keyword">this</span>.viewFilter = filter;

    <span class="hljs-keyword">if</span> (shouldRender) {
      <span class="hljs-keyword">this</span>.filter();
    }

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-364">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-364">&#182;</a>
              </div>
              <p>Clears the <code>viewFilter</code> and follows the same rules for rendering as <code>setFilter</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  removeFilter: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">removeFilter</span>(<span class="hljs-params">options</span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.setFilter(<span class="hljs-literal">null</span>, options);
  },
  <span class="hljs-attr">_detachChildren</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_detachChildren</span>(<span class="hljs-params">detachingViews</span>) </span>{
    _.each(detachingViews, _.bind(<span class="hljs-keyword">this</span>._detachChildView, <span class="hljs-keyword">this</span>));
  },
  <span class="hljs-attr">_detachChildView</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_detachChildView</span>(<span class="hljs-params">view</span>) </span>{
    <span class="hljs-keyword">var</span> shouldTriggerDetach = view._isAttached &amp;&amp; <span class="hljs-keyword">this</span>.monitorViewEvents !== <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">if</span> (shouldTriggerDetach) {
      triggerMethodOn(view, <span class="hljs-string">'before:detach'</span>, view);
    }

    <span class="hljs-keyword">this</span>.detachHtml(view);

    <span class="hljs-keyword">if</span> (shouldTriggerDetach) {
      view._isAttached = <span class="hljs-literal">false</span>;
      triggerMethodOn(view, <span class="hljs-string">'detach'</span>, view);
    }
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-365">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-365">&#182;</a>
              </div>
              <p>Override this method to change how the collectionView detaches a child view</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  detachHtml: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">detachHtml</span>(<span class="hljs-params">view</span>) </span>{
    <span class="hljs-keyword">this</span>.Dom.detachEl(view.el, view.$el);
  },
  <span class="hljs-attr">_renderChildren</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_renderChildren</span>(<span class="hljs-params">views</span>) </span>{
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.isEmpty(!views.length)) {
      <span class="hljs-keyword">this</span>._showEmptyView();
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-keyword">this</span>._destroyEmptyView();

    <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'before:render:children'</span>, <span class="hljs-keyword">this</span>, views);

    <span class="hljs-keyword">var</span> els = <span class="hljs-keyword">this</span>._getBuffer(views);

    <span class="hljs-keyword">this</span>._attachChildren(els, views);

    <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'render:children'</span>, <span class="hljs-keyword">this</span>, views);
  },
  <span class="hljs-attr">_attachChildren</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_attachChildren</span>(<span class="hljs-params">els, views</span>) </span>{
    <span class="hljs-keyword">var</span> shouldTriggerAttach = <span class="hljs-keyword">this</span>._isAttached &amp;&amp; <span class="hljs-keyword">this</span>.monitorViewEvents !== <span class="hljs-literal">false</span>;

    views = shouldTriggerAttach ? views : [];

    _.each(views, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">view</span>) </span>{
      <span class="hljs-keyword">if</span> (view._isAttached) {
        <span class="hljs-keyword">return</span>;
      }
      triggerMethodOn(view, <span class="hljs-string">'before:attach'</span>, view);
    });

    <span class="hljs-keyword">this</span>.attachHtml(els);

    _.each(views, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">view</span>) </span>{
      <span class="hljs-keyword">if</span> (view._isAttached) {
        <span class="hljs-keyword">return</span>;
      }
      view._isAttached = <span class="hljs-literal">true</span>;
      triggerMethodOn(view, <span class="hljs-string">'attach'</span>, view);
    });
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-366">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-366">&#182;</a>
              </div>
              <p>Renders each view in children and creates a fragment buffer from them</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _getBuffer: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_getBuffer</span>(<span class="hljs-params">views</span>) </span>{
    <span class="hljs-keyword">var</span> _this2 = <span class="hljs-keyword">this</span>;

    <span class="hljs-keyword">var</span> elBuffer = <span class="hljs-keyword">this</span>.Dom.createBuffer();

    _.each(views, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">view</span>) </span>{
      renderView(view);
      _this2.Dom.appendContents(elBuffer, view.el, { <span class="hljs-attr">_$contents</span>: view.$el });
    });

    <span class="hljs-keyword">return</span> elBuffer;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-367">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-367">&#182;</a>
              </div>
              <p>Override this method to do something other than <code>.append</code>.
You can attach any HTML at this point including the els.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  attachHtml: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">attachHtml</span>(<span class="hljs-params">els</span>) </span>{
    <span class="hljs-keyword">this</span>.Dom.appendContents(<span class="hljs-keyword">this</span>.el, els, { <span class="hljs-attr">_$el</span>: <span class="hljs-keyword">this</span>.$el });
  },
  <span class="hljs-attr">swapChildViews</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">swapChildViews</span>(<span class="hljs-params">view1, view2</span>) </span>{
    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.children.hasView(view1) || !<span class="hljs-keyword">this</span>.children.hasView(view2)) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> MarionetteError({
        <span class="hljs-attr">name</span>: <span class="hljs-string">'ChildSwapError'</span>,
        <span class="hljs-attr">message</span>: <span class="hljs-string">'Both views must be children of the collection view'</span>
      });
    }

    <span class="hljs-keyword">this</span>.children._swap(view1, view2);
    <span class="hljs-keyword">this</span>.Dom.swapEl(view1.el, view2.el);</pre></div></div>
            
        </li>
        
        
        <li id="section-368">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-368">&#182;</a>
              </div>
              <p>If the views are not filtered the same, refilter</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.Dom.hasEl(<span class="hljs-keyword">this</span>.el, view1.el) !== <span class="hljs-keyword">this</span>.Dom.hasEl(<span class="hljs-keyword">this</span>.el, view2.el)) {
      <span class="hljs-keyword">this</span>.filter();
    }

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-369">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-369">&#182;</a>
              </div>
              <p>Render the child’s view and add it to the HTML for the collection view at a given index, based on the current sort</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  addChildView: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addChildView</span>(<span class="hljs-params">view, index</span>) </span>{
    <span class="hljs-keyword">if</span> (!view || view._isDestroyed) {
      <span class="hljs-keyword">return</span> view;
    }

    <span class="hljs-keyword">this</span>._addChild(view, index);
    <span class="hljs-keyword">this</span>._addedViews = [view];
    <span class="hljs-keyword">this</span>._showChildren();

    <span class="hljs-keyword">return</span> view;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-370">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-370">&#182;</a>
              </div>
              <p>Detach a view from the children.  Best used when adding a
childView from <code>addChildView</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  detachChildView: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">detachChildView</span>(<span class="hljs-params">view</span>) </span>{
    <span class="hljs-keyword">this</span>.removeChildView(view, { <span class="hljs-attr">shouldDetach</span>: <span class="hljs-literal">true</span> });

    <span class="hljs-keyword">return</span> view;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-371">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-371">&#182;</a>
              </div>
              <p>Remove the child view and destroy it.  Best used when adding a
childView from <code>addChildView</code>
The options argument is for internal use only</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  removeChildView: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">removeChildView</span>(<span class="hljs-params">view, options</span>) </span>{
    <span class="hljs-keyword">if</span> (!view) {
      <span class="hljs-keyword">return</span> view;
    }

    <span class="hljs-keyword">this</span>._removeChildView(view, options);

    <span class="hljs-keyword">this</span>._removeChild(view);

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.isEmpty()) {
      <span class="hljs-keyword">this</span>._showEmptyView();
    }

    <span class="hljs-keyword">return</span> view;
  },
  <span class="hljs-attr">_removeChildViews</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_removeChildViews</span>(<span class="hljs-params">views</span>) </span>{
    _.each(views, _.bind(<span class="hljs-keyword">this</span>._removeChildView, <span class="hljs-keyword">this</span>));
  },
  <span class="hljs-attr">_removeChildView</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_removeChildView</span>(<span class="hljs-params">view</span>) </span>{
    <span class="hljs-keyword">var</span> _ref3 = <span class="hljs-built_in">arguments</span>.length &gt; <span class="hljs-number">1</span> &amp;&amp; <span class="hljs-built_in">arguments</span>[<span class="hljs-number">1</span>] !== <span class="hljs-literal">undefined</span> ? <span class="hljs-built_in">arguments</span>[<span class="hljs-number">1</span>] : {},
        shouldDetach = _ref3.shouldDetach;

    view.off(<span class="hljs-string">'destroy'</span>, <span class="hljs-keyword">this</span>.removeChildView, <span class="hljs-keyword">this</span>);

    <span class="hljs-keyword">if</span> (shouldDetach) {
      <span class="hljs-keyword">this</span>._detachChildView(view);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">this</span>._destroyChildView(view);
    }

    <span class="hljs-keyword">this</span>.stopListening(view);
  },
  <span class="hljs-attr">_destroyChildView</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_destroyChildView</span>(<span class="hljs-params">view</span>) </span>{
    <span class="hljs-keyword">if</span> (view._isDestroyed) {
      <span class="hljs-keyword">return</span>;
    }

    view._shouldDisableEvents = <span class="hljs-keyword">this</span>.monitorViewEvents === <span class="hljs-literal">false</span>;
    destroyView(view);
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-372">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-372">&#182;</a>
              </div>
              <p>called by ViewMixin destroy</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _removeChildren: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_removeChildren</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">this</span>._destroyChildren();
    <span class="hljs-keyword">this</span>.emptyRegion.destroy();
    <span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>._addedViews;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-373">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-373">&#182;</a>
              </div>
              <p>Destroy the child views that this collection view is holding on to, if any</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _destroyChildren: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_destroyChildren</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.children || !<span class="hljs-keyword">this</span>.children.length) {
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'before:destroy:children'</span>, <span class="hljs-keyword">this</span>);
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.monitorViewEvents === <span class="hljs-literal">false</span>) {
      <span class="hljs-keyword">this</span>.Dom.detachContents(<span class="hljs-keyword">this</span>.el, <span class="hljs-keyword">this</span>.$el);
    }
    _.each(<span class="hljs-keyword">this</span>.children._views, _.bind(<span class="hljs-keyword">this</span>._removeChildView, <span class="hljs-keyword">this</span>));
    <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'destroy:children'</span>, <span class="hljs-keyword">this</span>);
  }
}, {
  <span class="hljs-attr">setDomApi</span>: setDomApi
});

_.extend(CollectionView$<span class="hljs-number">2.</span>prototype, ViewMixin);</pre></div></div>
            
        </li>
        
        
        <li id="section-374">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-374">&#182;</a>
              </div>
              <h2 id="composite-view">Composite View</h2>

            </div>
            
        </li>
        
        
        <li id="section-375">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-375">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>
<span class="hljs-keyword">var</span> ClassOptions$<span class="hljs-number">5</span> = [<span class="hljs-string">'childViewContainer'</span>, <span class="hljs-string">'template'</span>, <span class="hljs-string">'templateContext'</span>];</pre></div></div>
            
        </li>
        
        
        <li id="section-376">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-376">&#182;</a>
              </div>
              <p>Used for rendering a branch-leaf, hierarchical structure.
Extends directly from CollectionView
@deprecated</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">var</span> CompositeView = CollectionView.extend({</pre></div></div>
            
        </li>
        
        
        <li id="section-377">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-377">&#182;</a>
              </div>
              <p>Setting up the inheritance chain which allows changes to
Marionette.CollectionView.prototype.constructor which allows overriding
option to pass ‘{sort: false}’ to prevent the CompositeView from
maintaining the sorted order of the collection.
This will fallback onto appending childView’s to the end.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">constructor</span>: function <span class="hljs-keyword">constructor</span>(options) {
    deprecate(<span class="hljs-string">'CompositeView is deprecated. Convert to View at your earliest convenience'</span>);

    <span class="hljs-keyword">this</span>.mergeOptions(options, ClassOptions$<span class="hljs-number">5</span>);

    CollectionView.prototype.constructor.apply(<span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span>);
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-378">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-378">&#182;</a>
              </div>
              <p>Configured the initial events that the composite view
binds to. Override this method to prevent the initial
events, or to add your own initial events.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _initialEvents: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_initialEvents</span>(<span class="hljs-params"></span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-379">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-379">&#182;</a>
              </div>
              <p>Bind only after composite view is rendered to avoid adding child views
to nonexistent childViewContainer</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.collection) {
      <span class="hljs-keyword">this</span>.listenTo(<span class="hljs-keyword">this</span>.collection, <span class="hljs-string">'add'</span>, <span class="hljs-keyword">this</span>._onCollectionAdd);
      <span class="hljs-keyword">this</span>.listenTo(<span class="hljs-keyword">this</span>.collection, <span class="hljs-string">'update'</span>, <span class="hljs-keyword">this</span>._onCollectionUpdate);
      <span class="hljs-keyword">this</span>.listenTo(<span class="hljs-keyword">this</span>.collection, <span class="hljs-string">'reset'</span>, <span class="hljs-keyword">this</span>.renderChildren);

      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.sort) {
        <span class="hljs-keyword">this</span>.listenTo(<span class="hljs-keyword">this</span>.collection, <span class="hljs-string">'sort'</span>, <span class="hljs-keyword">this</span>._sortViews);
      }
    }
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-380">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-380">&#182;</a>
              </div>
              <p>Retrieve the <code>childView</code> to be used when rendering each of
the items in the collection. The default is to return
<code>this.childView</code> or Marionette.CompositeView if no <code>childView</code>
has been defined. As happens in CollectionView, <code>childView</code> can
be a function (which should return a view class).</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _getChildView: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_getChildView</span>(<span class="hljs-params">child</span>) </span>{
    <span class="hljs-keyword">var</span> childView = <span class="hljs-keyword">this</span>.childView;</pre></div></div>
            
        </li>
        
        
        <li id="section-381">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-381">&#182;</a>
              </div>
              <p>for CompositeView, if <code>childView</code> is not specified, we’ll get the same
composite view class rendered for each child in the collection
then check if the <code>childView</code> is a view class (the common case)
finally check if it’s a function (which we assume that returns a view class)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">if</span> (!childView) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.constructor;
    }

    childView = <span class="hljs-keyword">this</span>._getView(childView, child);

    <span class="hljs-keyword">if</span> (!childView) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> MarionetteError({
        <span class="hljs-attr">name</span>: <span class="hljs-string">'InvalidChildViewError'</span>,
        <span class="hljs-attr">message</span>: <span class="hljs-string">'"childView" must be a view class or a function that returns a view class'</span>
      });
    }

    <span class="hljs-keyword">return</span> childView;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-382">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-382">&#182;</a>
              </div>
              <p>Return the serialized model</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  serializeData: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">serializeData</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.serializeModel();
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-383">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-383">&#182;</a>
              </div>
              <p>Renders the model and the collection.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  render: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">render</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._isDestroyed) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
    }
    <span class="hljs-keyword">this</span>._isRendering = <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">this</span>.resetChildViewContainer();

    <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'before:render'</span>, <span class="hljs-keyword">this</span>);

    <span class="hljs-keyword">this</span>._renderTemplate();
    <span class="hljs-keyword">this</span>.bindUIElements();
    <span class="hljs-keyword">this</span>.renderChildren();

    <span class="hljs-keyword">this</span>._isRendering = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">this</span>._isRendered = <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'render'</span>, <span class="hljs-keyword">this</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
  },
  <span class="hljs-attr">renderChildren</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">renderChildren</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._isRendered || <span class="hljs-keyword">this</span>._isRendering) {
      CollectionView.prototype._renderChildren.call(<span class="hljs-keyword">this</span>);
    }
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-384">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-384">&#182;</a>
              </div>
              <p>You might need to override this if you’ve overridden attachHtml</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  attachBuffer: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">attachBuffer</span>(<span class="hljs-params">compositeView, buffer</span>) </span>{
    <span class="hljs-keyword">var</span> $container = <span class="hljs-keyword">this</span>.getChildViewContainer(compositeView);
    <span class="hljs-keyword">this</span>.Dom.appendContents($container[<span class="hljs-number">0</span>], buffer, { <span class="hljs-attr">_$el</span>: $container });
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-385">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-385">&#182;</a>
              </div>
              <p>Internal method. Append a view to the end of the $el.
Overidden from CollectionView to ensure view is appended to
childViewContainer</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _insertAfter: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_insertAfter</span>(<span class="hljs-params">childView</span>) </span>{
    <span class="hljs-keyword">var</span> $container = <span class="hljs-keyword">this</span>.getChildViewContainer(<span class="hljs-keyword">this</span>, childView);
    <span class="hljs-keyword">this</span>.Dom.appendContents($container[<span class="hljs-number">0</span>], childView.el, { <span class="hljs-attr">_$el</span>: $container, <span class="hljs-attr">_$contents</span>: childView.$el });
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-386">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-386">&#182;</a>
              </div>
              <p>Internal method. Append reordered childView’.
Overidden from CollectionView to ensure reordered views
are appended to childViewContainer</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _appendReorderedChildren: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_appendReorderedChildren</span>(<span class="hljs-params">children</span>) </span>{
    <span class="hljs-keyword">var</span> $container = <span class="hljs-keyword">this</span>.getChildViewContainer(<span class="hljs-keyword">this</span>);
    <span class="hljs-keyword">this</span>.Dom.appendContents($container[<span class="hljs-number">0</span>], children, { <span class="hljs-attr">_$el</span>: $container });
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-387">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-387">&#182;</a>
              </div>
              <p>Internal method to ensure an <code>$childViewContainer</code> exists, for the
<code>attachHtml</code> method to use.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  getChildViewContainer: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getChildViewContainer</span>(<span class="hljs-params">containerView, childView</span>) </span>{
    <span class="hljs-keyword">if</span> (!!containerView.$childViewContainer) {
      <span class="hljs-keyword">return</span> containerView.$childViewContainer;
    }

    <span class="hljs-keyword">var</span> container = <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>;
    <span class="hljs-keyword">var</span> childViewContainer = containerView.childViewContainer;
    <span class="hljs-keyword">if</span> (childViewContainer) {

      <span class="hljs-keyword">var</span> selector = _.result(containerView, <span class="hljs-string">'childViewContainer'</span>);

      <span class="hljs-keyword">if</span> (selector.charAt(<span class="hljs-number">0</span>) === <span class="hljs-string">'@'</span> &amp;&amp; containerView.ui) {
        container = containerView.ui[selector.substr(<span class="hljs-number">4</span>)];
      } <span class="hljs-keyword">else</span> {
        container = <span class="hljs-keyword">this</span>.$(selector);
      }

      <span class="hljs-keyword">if</span> (container.length &lt;= <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> MarionetteError({
          <span class="hljs-attr">name</span>: <span class="hljs-string">'ChildViewContainerMissingError'</span>,
          <span class="hljs-attr">message</span>: <span class="hljs-string">'The specified "childViewContainer" was not found: '</span> + containerView.childViewContainer
        });
      }
    } <span class="hljs-keyword">else</span> {
      container = containerView.$el;
    }

    containerView.$childViewContainer = container;
    <span class="hljs-keyword">return</span> container;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-388">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-388">&#182;</a>
              </div>
              <p>Internal method to reset the <code>$childViewContainer</code> on render</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  resetChildViewContainer: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">resetChildViewContainer</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.$childViewContainer) {
      <span class="hljs-keyword">this</span>.$childViewContainer = <span class="hljs-literal">undefined</span>;
    }
  }
});</pre></div></div>
            
        </li>
        
        
        <li id="section-389">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-389">&#182;</a>
              </div>
              <p>To prevent duplication but allow the best View organization
Certain View methods are mixed directly into the deprecated CompositeView</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">var</span> MixinFromView = _.pick(View.prototype, <span class="hljs-string">'serializeModel'</span>, <span class="hljs-string">'getTemplate'</span>, <span class="hljs-string">'_renderTemplate'</span>, <span class="hljs-string">'_renderHtml'</span>, <span class="hljs-string">'mixinTemplateContext'</span>, <span class="hljs-string">'attachElContent'</span>);
_.extend(CompositeView.prototype, MixinFromView);</pre></div></div>
            
        </li>
        
        
        <li id="section-390">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-390">&#182;</a>
              </div>
              <h2 id="behavior">Behavior</h2>

            </div>
            
        </li>
        
        
        <li id="section-391">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-391">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-392">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-392">&#182;</a>
              </div>
              <p>A Behavior is an isolated set of DOM /
user interactions that can be mixed into any View.
Behaviors allow you to blackbox View specific interactions
into portable logical chunks, keeping your views simple and your code DRY.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
<span class="hljs-keyword">var</span> ClassOptions$<span class="hljs-number">6</span> = [<span class="hljs-string">'collectionEvents'</span>, <span class="hljs-string">'events'</span>, <span class="hljs-string">'modelEvents'</span>, <span class="hljs-string">'triggers'</span>, <span class="hljs-string">'ui'</span>];

<span class="hljs-keyword">var</span> Behavior = MarionetteObject.extend({
  <span class="hljs-attr">cidPrefix</span>: <span class="hljs-string">'mnb'</span>,

  <span class="hljs-attr">constructor</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">constructor</span>(<span class="hljs-params">options, view</span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-393">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-393">&#182;</a>
              </div>
              <p>Setup reference to the view.
this comes in handle when a behavior
wants to directly talk up the chain
to the view.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">this</span>.view = view;

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.defaults) {
      deprecate(<span class="hljs-string">'Behavior defaults are deprecated. For similar functionality set options on the Behavior class.'</span>);
    }

    <span class="hljs-keyword">this</span>.defaults = _.clone(_.result(<span class="hljs-keyword">this</span>, <span class="hljs-string">'defaults'</span>, {}));

    <span class="hljs-keyword">this</span>._setOptions(_.extend({}, <span class="hljs-keyword">this</span>.defaults, options));
    <span class="hljs-keyword">this</span>.mergeOptions(<span class="hljs-keyword">this</span>.options, ClassOptions$<span class="hljs-number">6</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-394">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-394">&#182;</a>
              </div>
              <p>Construct an internal UI hash using
the behaviors UI hash and then the view UI hash.
This allows the user to use UI hash elements
defined in the parent view as well as those
defined in the given behavior.
This order will help the reuse and share of a behavior
between multiple views, while letting a view override a
selector under an UI key.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">this</span>.ui = _.extend({}, _.result(<span class="hljs-keyword">this</span>, <span class="hljs-string">'ui'</span>), _.result(view, <span class="hljs-string">'ui'</span>));

    MarionetteObject.apply(<span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span>);
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-395">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-395">&#182;</a>
              </div>
              <p>proxy behavior $ method to the view
this is useful for doing jquery DOM lookups
scoped to behaviors view.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  $: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">$</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.view.$.apply(<span class="hljs-keyword">this</span>.view, <span class="hljs-built_in">arguments</span>);
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-396">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-396">&#182;</a>
              </div>
              <p>Stops the behavior from listening to events.
Overrides Object#destroy to prevent additional events from being triggered.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  destroy: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">destroy</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">this</span>.stopListening();

    <span class="hljs-keyword">this</span>.view._removeBehavior(<span class="hljs-keyword">this</span>);

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
  },
  <span class="hljs-attr">proxyViewProperties</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">proxyViewProperties</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">this</span>.$el = <span class="hljs-keyword">this</span>.view.$el;
    <span class="hljs-keyword">this</span>.el = <span class="hljs-keyword">this</span>.view.el;

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
  },
  <span class="hljs-attr">bindUIElements</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">bindUIElements</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">this</span>._bindUIElements();

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
  },
  <span class="hljs-attr">unbindUIElements</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">unbindUIElements</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">this</span>._unbindUIElements();

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
  },
  <span class="hljs-attr">getUI</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getUI</span>(<span class="hljs-params">name</span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._getUI(name);
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-397">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-397">&#182;</a>
              </div>
              <p>Handle <code>modelEvents</code>, and <code>collectionEvents</code> configuration</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  delegateEntityEvents: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">delegateEntityEvents</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">this</span>._delegateEntityEvents(<span class="hljs-keyword">this</span>.view.model, <span class="hljs-keyword">this</span>.view.collection);

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
  },
  <span class="hljs-attr">undelegateEntityEvents</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">undelegateEntityEvents</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">this</span>._undelegateEntityEvents(<span class="hljs-keyword">this</span>.view.model, <span class="hljs-keyword">this</span>.view.collection);

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
  },
  <span class="hljs-attr">getEvents</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getEvents</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> _this = <span class="hljs-keyword">this</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-398">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-398">&#182;</a>
              </div>
              <p>Normalize behavior events hash to allow
a user to use the @ui. syntax.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">var</span> behaviorEvents = <span class="hljs-keyword">this</span>.normalizeUIKeys(_.result(<span class="hljs-keyword">this</span>, <span class="hljs-string">'events'</span>));</pre></div></div>
            
        </li>
        
        
        <li id="section-399">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-399">&#182;</a>
              </div>
              <p>binds the handler to the behavior and builds a unique eventName</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">return</span> _.reduce(behaviorEvents, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">events, behaviorHandler, key</span>) </span>{
      <span class="hljs-keyword">if</span> (!_.isFunction(behaviorHandler)) {
        behaviorHandler = _this[behaviorHandler];
      }
      <span class="hljs-keyword">if</span> (!behaviorHandler) {
        <span class="hljs-keyword">return</span>;
      }
      key = getUniqueEventName(key);
      events[key] = _.bind(behaviorHandler, _this);
      <span class="hljs-keyword">return</span> events;
    }, {});
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-400">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-400">&#182;</a>
              </div>
              <p>Internal method to build all trigger handlers for a given behavior</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  getTriggers: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getTriggers</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.triggers) {
      <span class="hljs-keyword">return</span>;
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-401">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-401">&#182;</a>
              </div>
              <p>Normalize behavior triggers hash to allow
a user to use the @ui. syntax.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">var</span> behaviorTriggers = <span class="hljs-keyword">this</span>.normalizeUIKeys(_.result(<span class="hljs-keyword">this</span>, <span class="hljs-string">'triggers'</span>));

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._getViewTriggers(<span class="hljs-keyword">this</span>.view, behaviorTriggers);
  }
});

_.extend(Behavior.prototype, DelegateEntityEventsMixin, TriggersMixin, UIMixin);</pre></div></div>
            
        </li>
        
        
        <li id="section-402">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-402">&#182;</a>
              </div>
              <h2 id="application">Application</h2>

            </div>
            
        </li>
        
        
        <li id="section-403">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-403">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">var</span> ClassOptions$<span class="hljs-number">7</span> = [<span class="hljs-string">'region'</span>, <span class="hljs-string">'regionClass'</span>];</pre></div></div>
            
        </li>
        
        
        <li id="section-404">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-404">&#182;</a>
              </div>
              <p>A container for a Marionette application.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">var</span> Application = MarionetteObject.extend({
  <span class="hljs-attr">cidPrefix</span>: <span class="hljs-string">'mna'</span>,

  <span class="hljs-attr">constructor</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">constructor</span>(<span class="hljs-params">options</span>) </span>{
    <span class="hljs-keyword">this</span>._setOptions(options);

    <span class="hljs-keyword">this</span>.mergeOptions(options, ClassOptions$<span class="hljs-number">7</span>);

    <span class="hljs-keyword">this</span>._initRegion();

    MarionetteObject.prototype.constructor.apply(<span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span>);
  },


  <span class="hljs-attr">regionClass</span>: Region,

  <span class="hljs-attr">_initRegion</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_initRegion</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> region = <span class="hljs-keyword">this</span>.region;

    <span class="hljs-keyword">if</span> (!region) {
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-keyword">var</span> defaults = {
      <span class="hljs-attr">regionClass</span>: <span class="hljs-keyword">this</span>.regionClass
    };

    <span class="hljs-keyword">this</span>._region = buildRegion(region, defaults);
  },
  <span class="hljs-attr">getRegion</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getRegion</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._region;
  },
  <span class="hljs-attr">showView</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">showView</span>(<span class="hljs-params">view</span>) </span>{
    <span class="hljs-keyword">var</span> region = <span class="hljs-keyword">this</span>.getRegion();

    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> _len = <span class="hljs-built_in">arguments</span>.length, args = <span class="hljs-built_in">Array</span>(_len &gt; <span class="hljs-number">1</span> ? _len - <span class="hljs-number">1</span> : <span class="hljs-number">0</span>), _key = <span class="hljs-number">1</span>; _key &lt; _len; _key++) {
      args[_key - <span class="hljs-number">1</span>] = <span class="hljs-built_in">arguments</span>[_key];
    }

    <span class="hljs-keyword">return</span> region.show.apply(region, [view].concat(args));
  },
  <span class="hljs-attr">getView</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getView</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.getRegion().currentView;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-405">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-405">&#182;</a>
              </div>
              <p>kick off all of the application’s processes.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  start: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">start</span>(<span class="hljs-params">options</span>) </span>{
    <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'before:start'</span>, <span class="hljs-keyword">this</span>, options);
    <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'start'</span>, <span class="hljs-keyword">this</span>, options);
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
  }
});</pre></div></div>
            
        </li>
        
        
        <li id="section-406">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-406">&#182;</a>
              </div>
              <h2 id="app-router">App Router</h2>

            </div>
            
        </li>
        
        
        <li id="section-407">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-407">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-408">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-408">&#182;</a>
              </div>
              <p>Reduce the boilerplate code of handling route events
and then calling a single method on another object,
called a controller.
Have your routers configured to call the method on
your controller, directly.</p>
<p>Configure an AppRouter with <code>appRoutes</code>.</p>
<p>App routers can only take one <code>controller</code> object.
It is recommended that you divide your controller
objects in to smaller pieces of related functionality
and have multiple routers / controllers, instead of
just one giant router and controller.</p>
<p>You can also add standard routes to an AppRouter.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
<span class="hljs-keyword">var</span> ClassOptions$<span class="hljs-number">8</span> = [<span class="hljs-string">'appRoutes'</span>, <span class="hljs-string">'controller'</span>];

<span class="hljs-keyword">var</span> AppRouter = Backbone.Router.extend({
  <span class="hljs-attr">constructor</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">constructor</span>(<span class="hljs-params">options</span>) </span>{
    <span class="hljs-keyword">this</span>._setOptions(options);

    <span class="hljs-keyword">this</span>.mergeOptions(options, ClassOptions$<span class="hljs-number">8</span>);

    Backbone.Router.apply(<span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span>);

    <span class="hljs-keyword">var</span> appRoutes = <span class="hljs-keyword">this</span>.appRoutes;
    <span class="hljs-keyword">var</span> controller = <span class="hljs-keyword">this</span>._getController();
    <span class="hljs-keyword">this</span>.processAppRoutes(controller, appRoutes);
    <span class="hljs-keyword">this</span>.on(<span class="hljs-string">'route'</span>, <span class="hljs-keyword">this</span>._processOnRoute, <span class="hljs-keyword">this</span>);
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-409">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-409">&#182;</a>
              </div>
              <p>Similar to route method on a Backbone Router but
method is called on the controller</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  appRoute: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">appRoute</span>(<span class="hljs-params">route, methodName</span>) </span>{
    <span class="hljs-keyword">var</span> controller = <span class="hljs-keyword">this</span>._getController();
    <span class="hljs-keyword">this</span>._addAppRoute(controller, route, methodName);
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-410">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-410">&#182;</a>
              </div>
              <p>process the route event and trigger the onRoute
method call, if it exists</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _processOnRoute: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_processOnRoute</span>(<span class="hljs-params">routeName, routeArgs</span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-411">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-411">&#182;</a>
              </div>
              <p>make sure an onRoute before trying to call it</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">if</span> (_.isFunction(<span class="hljs-keyword">this</span>.onRoute)) {</pre></div></div>
            
        </li>
        
        
        <li id="section-412">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-412">&#182;</a>
              </div>
              <p>find the path that matches the current route</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">var</span> routePath = _.invert(<span class="hljs-keyword">this</span>.appRoutes)[routeName];
      <span class="hljs-keyword">this</span>.onRoute(routeName, routePath, routeArgs);
    }
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-413">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-413">&#182;</a>
              </div>
              <p>Internal method to process the <code>appRoutes</code> for the
router, and turn them in to routes that trigger the
specified method on the specified <code>controller</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  processAppRoutes: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">processAppRoutes</span>(<span class="hljs-params">controller, appRoutes</span>) </span>{
    <span class="hljs-keyword">var</span> _this = <span class="hljs-keyword">this</span>;

    <span class="hljs-keyword">if</span> (!appRoutes) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
    }

    <span class="hljs-keyword">var</span> routeNames = _.keys(appRoutes).reverse(); <span class="hljs-comment">// Backbone requires reverted order of routes</span>

    _.each(routeNames, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">route</span>) </span>{
      _this._addAppRoute(controller, route, appRoutes[route]);
    });

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
  },
  <span class="hljs-attr">_getController</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_getController</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.controller;
  },
  <span class="hljs-attr">_addAppRoute</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_addAppRoute</span>(<span class="hljs-params">controller, route, methodName</span>) </span>{
    <span class="hljs-keyword">var</span> method = controller[methodName];

    <span class="hljs-keyword">if</span> (!method) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> MarionetteError(<span class="hljs-string">'Method "'</span> + methodName + <span class="hljs-string">'" was not found on the controller'</span>);
    }

    <span class="hljs-keyword">this</span>.route(route, methodName, _.bind(method, controller));
  },


  <span class="hljs-attr">triggerMethod</span>: triggerMethod
});

_.extend(AppRouter.prototype, CommonMixin);</pre></div></div>
            
        </li>
        
        
        <li id="section-414">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-414">&#182;</a>
              </div>
              <p>Placeholder method to be extended by the user.
The method should define the object that stores the behaviors.
i.e.</p>
<pre><code class="lang-js">Marionette.Behaviors.behaviorsLookup: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">return</span> App.Behaviors
}
</code></pre>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">behaviorsLookup</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> MarionetteError({
    <span class="hljs-attr">message</span>: <span class="hljs-string">'You must define where your behaviors are stored.'</span>,
    <span class="hljs-attr">url</span>: <span class="hljs-string">'marionette.behaviors.md#behaviorslookup'</span>
  });
}

<span class="hljs-keyword">var</span> previousMarionette = Backbone.Marionette;
<span class="hljs-keyword">var</span> Marionette = Backbone.Marionette = {};</pre></div></div>
            
        </li>
        
        
        <li id="section-415">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-415">&#182;</a>
              </div>
              <p>This allows you to run multiple instances of Marionette on the same
webapp. After loading the new version, call <code>noConflict()</code> to
get a reference to it. At the same time the old version will be
returned to Backbone.Marionette.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>Marionette.noConflict = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
  Backbone.Marionette = previousMarionette;
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
};</pre></div></div>
            
        </li>
        
        
        <li id="section-416">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-416">&#182;</a>
              </div>
              <p>Utilities</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>Marionette.bindEvents = proxy(bindEvents);
Marionette.unbindEvents = proxy(unbindEvents);
Marionette.bindRequests = proxy(bindRequests);
Marionette.unbindRequests = proxy(unbindRequests);
Marionette.mergeOptions = proxy(mergeOptions);
Marionette.getOption = proxy(getOption);
Marionette.normalizeMethods = proxy(normalizeMethods);
Marionette.extend = extend;
Marionette.isNodeAttached = isNodeAttached;
Marionette.deprecate = deprecate;
Marionette.triggerMethod = proxy(triggerMethod);
Marionette.triggerMethodOn = triggerMethodOn;
Marionette.isEnabled = isEnabled;
Marionette.setEnabled = setEnabled;
Marionette.monitorViewEvents = monitorViewEvents;

Marionette.Behaviors = {};
Marionette.Behaviors.behaviorsLookup = behaviorsLookup;</pre></div></div>
            
        </li>
        
        
        <li id="section-417">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-417">&#182;</a>
              </div>
              <p>Classes</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>Marionette.Application = Application;
Marionette.AppRouter = AppRouter;
Marionette.Renderer = Renderer;
Marionette.TemplateCache = TemplateCache;
Marionette.View = View;
Marionette.CollectionView = CollectionView;
Marionette.NextCollectionView = CollectionView$<span class="hljs-number">2</span>;
Marionette.CompositeView = CompositeView;
Marionette.Behavior = Behavior;
Marionette.Region = Region;
Marionette.Error = MarionetteError;
Marionette.Object = MarionetteObject;</pre></div></div>
            
        </li>
        
        
        <li id="section-418">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-418">&#182;</a>
              </div>
              <p>Configuration</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>Marionette.DEV_MODE = <span class="hljs-literal">false</span>;
Marionette.FEATURES = FEATURES;
Marionette.VERSION = version;
Marionette.DomApi = DomApi;
Marionette.setDomApi = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">mixin</span>) </span>{
  CollectionView.setDomApi(mixin);
  CompositeView.setDomApi(mixin);
  CollectionView$<span class="hljs-number">2.</span>setDomApi(mixin);
  Region.setDomApi(mixin);
  View.setDomApi(mixin);
};

<span class="hljs-keyword">return</span> Marionette;

})));
<span class="hljs-keyword">this</span> &amp;&amp; <span class="hljs-keyword">this</span>.Marionette &amp;&amp; (<span class="hljs-keyword">this</span>.Mn = <span class="hljs-keyword">this</span>.Marionette);</pre></div></div>
            
        </li>
        
        
        <li id="section-419">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-419">&#182;</a>
              </div>
              <h1 id="sourcemappingurl-backbone-marionette-js-map">sourceMappingURL=backbone.marionette.js.map</h1>

            </div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
