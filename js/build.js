$(function(){function scrollToTop(e){e.preventDefault(),$("body, html").animate({scrollTop:0},scrollTopDuration)}$(".primary-logo").mouseenter(function(){snabbt(this,"attention",{rotation:[0,0,Math.PI/2],springConstant:1.9,springDeacceleration:.9})}),function(){function setTransform(){var distance=-pos*($slide.width()+parseInt($slide.css("margin-right").replace(/px/g,""),10));$slider.css("transform","translate3d("+distance+"px,0,0)"),$slideshowPrev[pos?"show":"hide"](),$slideshowNext[pos!==slideCount-1?"show":"hide"]()}function addClickEffects(button){var $span=$(button).children("span");$span.addClass("cbutton--click"),setTimeout(function(){$span.removeClass("cbutton--click")},500)}function slideshowPrev(event){event.preventDefault(),pos=0===pos?pos:pos-1,setTransform(),addClickEffects(this)}function slideshowNext(event){event.preventDefault(),pos=pos===slideCount-1?pos:pos+1,setTransform(),addClickEffects(this)}var $slideshowWrap=$(".video_slideshow_scroller"),$slideshowPrev=$slideshowWrap.children(".prev").hide(),$slideshowNext=$slideshowWrap.children(".next"),$slider=$slideshowWrap.children(".video_slideshow"),$slide=$slider.children().first(),slideCount=$slider.children().length,pos=0;$slideshowWrap.length&&($(window).on("resize",_.throttle(setTransform,300)),$slideshowNext.on("click",slideshowNext),$slideshowPrev.on("click",slideshowPrev))}();var $codeSample=$(".equal-heights-js");$(window).width()>705&&$codeSample.equalHeights(),$(window).resize(function(){$(window).width()>705?($codeSample.css("height","auto"),$codeSample.equalHeights()):$codeSample.css("height","auto")}),prettyPrint(),$(".company-logo-list img").unveil(),$(".show-more").on("click",function(e){var $this=$(this);e.preventDefault(),$this.toggleClass("active"),$(".slider").toggleClass("closed");var txt="more"===$this.text()?"less":"more";$this.text(txt)}),$(".youtube-play").on("click",function(e){e.preventDefault();var $player=$(this).parent(),vidId=$player.attr("data-vid-id"),vidUrl="https://www.youtube.com/embed/"+vidId+"?autoplay=1&autohide=1&modestbranding=1&showInfo=0&html5=1",$iframe=$("<iframe/>",{src:vidUrl,width:"100%",height:"100%",allowFullScreen:"",frameborder:"0"});$player.empty().append($iframe)});var offset=300,offsetOpacity=1200,scrollTopDuration=700,$backToTopBtn=$(".top");$(window).scroll(function(){$(this).scrollTop()>offset?$backToTopBtn.addClass("is-visible"):$backToTopBtn.removeClass("is-visible fade-out"),$(this).scrollTop()>offsetOpacity&&$backToTopBtn.addClass("fade-out")}),$backToTopBtn.on("click",scrollToTop)}),$(function(){function closeSearchBar(){$searchInput.val(""),$(".nav-slider__list").removeClass("hidden"),$(".searchbar").addClass("hidden"),$toggleCheckbox.prop("checked",!1),$("header").removeClass("search-expanded"),$(window).width()<=768&&($(".toggle-search-open").removeClass("hidden"),$(".menu-icon").removeClass("hidden"))}$(".searchbar").css({display:""});var $toggleCheckbox=$("#toggle-search"),$searchInput=$("#search-input");$(".toggle-search-open").click(function(e){e.preventDefault(),$(".nav-slider__list").addClass("hidden"),$(".searchbar").removeClass("hidden"),$("header").addClass("search-expanded"),$toggleCheckbox.click(),$searchInput.focus(),$(window).width()<=768&&($(this).addClass("hidden"),$(".menu-icon").addClass("hidden"))}),$(".toggle-search-close").click(function(){closeSearchBar()}),$(document).on("keydown",function(event){27===event.keyCode&&closeSearchBar()})}),function($){var url="https://api.github.com/repos/marionettejs/backbone.marionette?callback=?";$.getJSON(url).done(function(result){if(200===result.meta.status){var stargazers=result.data.stargazers_count||"5700";$(".stargazers-js").text(stargazers)}})}(jQuery),function($){var ETag=localStorage.getItem("github:team:ETag"),requestData={client_id:"0ab3cd67b835df549748",client_secret:"6a253f50df77585a5aff0a61046a7f4fac5ea134",url:"https://api.github.com/orgs/marionettejs/members"};ETag&&(requestData.beforeSend=function(xhr){xhr.setRequestHeader("If-None-Match",ETag)}),$.ajax(requestData).done(function(response,status,xhr){var data;304===xhr.status?data=JSON.parse(localStorage.getItem("github:team")):(data=response,localStorage.setItem("github:team",JSON.stringify(data)),localStorage.setItem("github:team:ETag",xhr.getResponseHeader("ETag")));var i,memberCount=data.length,memberListEl=$(".member-list");for(i=0;i<memberCount;i++){var member=data[i],listItemEl=$(document.createElement("li")),memberEl=$(document.createElement("a"));listItemEl.addClass("col-4"),memberEl.addClass("team-member").attr("href",member.html_url).attr("data-username",member.login).css("background-image","url("+member.avatar_url+"&s=250)"),listItemEl.append(memberEl),memberListEl.append(listItemEl)}})}(jQuery);var msg=["           .---._-------------------------------------+","___________/ ._____)                                   |","              ) __|   HEY HACKER! MARIONETTE IS        |","                __|   EVEN COOLER WHEN YOU USE THE     |","..---------.._____|   INSPECTOR. http://goo.gl/Wo3pju  |","                  +------------------------------------+"].join("\n");try{console.log("%c"+msg,"background: #A80000; color: #EBF2C2")}catch(o_O){}!function($,base64,showdown){function shortenedText(text,maxLines){maxLines||(maxLines=MAX_LINES);var firstPart=text.split("\n").splice(0,maxLines),secondPart=text.split("\n").splice(maxLines);return[firstPart.join("\n"),secondPart.join("\n")]}function showMore(){$(".show-more").removeClass("hidden")}var MAX_LINES=100,url="https://api.github.com/repos/marionettejs/backbone.marionette/contents/changelog.md",data={client_id:"0ab3cd67b835df549748",client_secret:"6a253f50df77585a5aff0a61046a7f4fac5ea134"};$.getJSON(url,data).done(function(result){var changelog=base64.decode(result.content),converter=new showdown.Converter;if(changelog.split("\n").length>MAX_LINES){var textParts=shortenedText(changelog,MAX_LINES),changelogPartTwo=textParts[1],changelogPartTwoHTML=converter.makeHtml(changelogPartTwo);$(".part-two").html(changelogPartTwoHTML),showMore(changelog),changelog=textParts[0]}var changelogHtml=converter.makeHtml(changelog);$(".changelog").html(changelogHtml),$(".changelog code, .part-two code").addClass("code-wrap notranslate")}).fail(function(err){$(".changelog-error").removeClass("hidden")})}(jQuery,base64,showdown),function($){function loadScript(callback){((window.gitter={}).chat={}).options={disableDefaultChat:!0},$.getScript(scriptSrc,function(){scriptLoaded=!0,callback()})}function initChat(){chat=new window.gitter.Chat({room:"marionettejs/backbone.marionette",activationElement:""})}function toggleChat(bool){void 0===chat&&initChat(),chat.toggleChat(bool)}function toggleOpenChatBtn(bool){$openChatBtn.attr("disabled",bool).toggleClass("btn-disabled",bool)}function setListeners(){$(".gitter-chat-embed").on("gitter-chat-toggle",function(event){toggleOpenChatBtn(event.originalEvent.detail.state)})}function openChat(event){event.preventDefault(),toggleOpenChatBtn(!0),scriptLoaded?toggleChat(!0):loadScript(function(){toggleChat(!0),setListeners()})}var chat,$openChatBtn=$(".open-gitter-chat"),scriptLoaded=!!window.gitter,scriptSrc="//sidecar.gitter.im/dist/sidecar.v1.js";$openChatBtn.click(openChat)}(jQuery),"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js",{scope:"/"}),function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?factory(exports,require("backbone"),require("underscore"),require("backbone.radio")):"function"==typeof define&&define.amd?define(["exports","backbone","underscore","backbone.radio"],factory):(global=global||self,function(){var current=global.Marionette,exports=global.Marionette={};factory(exports,global.Backbone,global._,global.Backbone.Radio),exports.noConflict=function(){return global.Marionette=current,exports}}())}(this,function(exports,Backbone,_,Radio){"use strict";function normalizeBindings(context,bindings){if(!_.isObject(bindings))throw new MarionetteError({message:"Bindings must be an object.",url:"common.html#bindevents"});return normalizeMethods.call(context,bindings)}function bindEvents(entity,bindings){return entity&&bindings?(this.listenTo(entity,normalizeBindings(this,bindings)),this):this}function unbindEvents(entity,bindings){return entity?bindings?(this.stopListening(entity,normalizeBindings(this,bindings)),this):(this.stopListening(entity),this):this}function normalizeBindings$1(context,bindings){if(!_.isObject(bindings))throw new MarionetteError({message:"Bindings must be an object.",url:"common.html#bindrequests"});return normalizeMethods.call(context,bindings)}function bindRequests(channel,bindings){return channel&&bindings?(channel.reply(normalizeBindings$1(this,bindings),this),this):this}function unbindRequests(channel,bindings){return channel?bindings?(channel.stopReplying(normalizeBindings$1(this,bindings)),this):(channel.stopReplying(null,null,this),this):this}function triggerMethodChildren(view,event,shouldTrigger){view._getImmediateChildren&&_.each(view._getImmediateChildren(),function(child){shouldTrigger(child)&&child.triggerMethod(event,child)})}function shouldTriggerAttach(view){return!view._isAttached}function shouldAttach(view){return!!shouldTriggerAttach(view)&&(view._isAttached=!0,!0)}function shouldTriggerDetach(view){return view._isAttached}function shouldDetach(view){return view._isAttached=!1,!0}function triggerDOMRefresh(view){view._isAttached&&view._isRendered&&view.triggerMethod("dom:refresh",view)}function triggerDOMRemove(view){view._isAttached&&view._isRendered&&view.triggerMethod("dom:remove",view)}function handleBeforeAttach(){triggerMethodChildren(this,"before:attach",shouldTriggerAttach)}function handleAttach(){triggerMethodChildren(this,"attach",shouldAttach),triggerDOMRefresh(this)}function handleBeforeDetach(){triggerMethodChildren(this,"before:detach",shouldTriggerDetach),triggerDOMRemove(this)}function handleDetach(){triggerMethodChildren(this,"detach",shouldDetach)}function handleBeforeRender(){triggerDOMRemove(this)}function handleRender(){triggerDOMRefresh(this)}function monitorViewEvents(view){view._areViewEventsMonitored||view.monitorViewEvents===!1||(view._areViewEventsMonitored=!0,view.on({"before:attach":handleBeforeAttach,attach:handleAttach,"before:detach":handleBeforeDetach,detach:handleDetach,"before:render":handleBeforeRender,render:handleRender}))}function getEventName(match,prefix,eventName){return eventName.toUpperCase()}function triggerMethod(event){var result,methodName=getOnMethodName(event),method=getOption.call(this,methodName);return _.isFunction(method)&&(result=method.apply(this,_.drop(arguments))),this.trigger.apply(this,arguments),result}function getBehaviorClass(options){if(options.behaviorClass)return{BehaviorClass:options.behaviorClass,options:options};if(_.isFunction(options))return{BehaviorClass:options,options:{}};throw new MarionetteError({message:"Unable to get behavior class. A Behavior constructor should be passed directly or as behaviorClass property of options",url:"marionette.behavior.html#defining-and-attaching-behaviors"})}function parseBehaviors(view,behaviors,allBehaviors){return _.reduce(behaviors,function(reducedBehaviors,behaviorDefiniton){var _getBehaviorClass=getBehaviorClass(behaviorDefiniton),BehaviorClass=_getBehaviorClass.BehaviorClass,options=_getBehaviorClass.options,behavior=new BehaviorClass(options,view);return reducedBehaviors.push(behavior),parseBehaviors(view,_.result(behavior,"behaviors"),reducedBehaviors)},allBehaviors)}function isEnabled(name){return!!FEATURES[name]}function setEnabled(name,state){return FEATURES[name]=state}function buildViewTrigger(view,triggerDef){_.isString(triggerDef)&&(triggerDef={event:triggerDef});var eventName=triggerDef.event,shouldPreventDefault=!!triggerDef.preventDefault;isEnabled("triggersPreventDefault")&&(shouldPreventDefault=triggerDef.preventDefault!==!1);var shouldStopPropagation=!!triggerDef.stopPropagation;return isEnabled("triggersStopPropagation")&&(shouldStopPropagation=triggerDef.stopPropagation!==!1),function(event){shouldPreventDefault&&event.preventDefault(),shouldStopPropagation&&event.stopPropagation();for(var _len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];view.triggerMethod.apply(view,[eventName,view,event].concat(args))}}function _getEl(el){return el instanceof Backbone.$?el:Backbone.$(el)}function setDomApi(mixin){return this.prototype.Dom=_.extend({},this.prototype.Dom,mixin),this}function renderView(view){view._isRendered||(view.supportsRenderLifecycle||view.triggerMethod("before:render",view),view.render(),view._isRendered=!0,view.supportsRenderLifecycle||view.triggerMethod("render",view))}function destroyView(view,disableDetachEvents){if(view.destroy)return view._disableDetachEvents=disableDetachEvents,void view.destroy();view.supportsDestroyLifecycle||view.triggerMethod("before:destroy",view);var shouldTriggerDetach=view._isAttached&&!disableDetachEvents;shouldTriggerDetach&&view.triggerMethod("before:detach",view),view.remove(),shouldTriggerDetach&&(view._isAttached=!1,view.triggerMethod("detach",view)),view._isDestroyed=!0,view.supportsDestroyLifecycle||view.triggerMethod("destroy",view)}function buildRegion(definition,defaults){if(definition instanceof Region)return definition;if(_.isString(definition))return buildRegionFromObject(defaults,{el:definition});if(_.isFunction(definition))return buildRegionFromObject(defaults,{regionClass:definition});if(_.isObject(definition))return buildRegionFromObject(defaults,definition);throw new MarionetteError({message:"Improper region configuration type.",url:"marionette.region.html#defining-regions"})}function buildRegionFromObject(defaults,definition){var options=_.extend({},defaults,definition),RegionClass=options.regionClass;return delete options.regionClass,new RegionClass(options)}function setRenderer(renderer){return this.prototype._renderHtml=renderer,this}function childReducer(children,region){return region.currentView&&children.push(region.currentView),children}function stringComparator(comparator,view){return view.model&&view.model.get(comparator)}Backbone=Backbone&&Backbone.hasOwnProperty("default")?Backbone.default:Backbone,_=_&&_.hasOwnProperty("default")?_.default:_,Radio=Radio&&Radio.hasOwnProperty("default")?Radio.default:Radio;var version="4.1.2",proxy=function(method){return function(context){for(var _len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];return method.apply(context,args)}},extend=Backbone.Model.extend,normalizeMethods=function(hash){var _this=this;if(hash)return _.reduce(hash,function(normalizedHash,method,name){return _.isFunction(method)||(method=_this[method]),method&&(normalizedHash[name]=method),normalizedHash},{})},errorProps=["description","fileName","lineNumber","name","message","number","url"],MarionetteError=extend.call(Error,{urlRoot:"http://marionettejs.com/docs/v".concat(version,"/"),url:"",constructor:function(options){var error=Error.call(this,options.message);_.extend(this,_.pick(error,errorProps),_.pick(options,errorProps)),Error.captureStackTrace&&this.captureStackTrace(),this.url=this.urlRoot+this.url},captureStackTrace:function(){Error.captureStackTrace(this,MarionetteError)},toString:function(){return"".concat(this.name,": ").concat(this.message," See: ").concat(this.url)}}),getOption=function(optionName){if(optionName)return this.options&&void 0!==this.options[optionName]?this.options[optionName]:this[optionName]},mergeOptions=function(options,keys){var _this=this;options&&_.each(keys,function(key){var option=options[key];void 0!==option&&(_this[key]=option)})},splitter=/(^|:)(\w)/gi,methodCache={},getOnMethodName=function(event){return methodCache[event]||(methodCache[event]="on"+event.replace(splitter,getEventName)),methodCache[event]},Events={triggerMethod:triggerMethod},CommonMixin={normalizeMethods:normalizeMethods,_setOptions:function(options,classOptions){this.options=_.extend({},_.result(this,"options"),options),this.mergeOptions(options,classOptions)},mergeOptions:mergeOptions,getOption:getOption,bindEvents:bindEvents,unbindEvents:unbindEvents,bindRequests:bindRequests,unbindRequests:unbindRequests,triggerMethod:triggerMethod};_.extend(CommonMixin,Backbone.Events);var DestroyMixin={_isDestroyed:!1,isDestroyed:function(){return this._isDestroyed},destroy:function(options){return this._isDestroyed?this:(this.triggerMethod("before:destroy",this,options),this._isDestroyed=!0,this.triggerMethod("destroy",this,options),this.stopListening(),this)}},RadioMixin={_initRadio:function(){var channelName=_.result(this,"channelName");if(channelName){if(!Radio)throw new MarionetteError({message:'The dependency "backbone.radio" is missing.',url:"backbone.radio.html#marionette-integration"});var channel=this._channel=Radio.channel(channelName),radioEvents=_.result(this,"radioEvents");this.bindEvents(channel,radioEvents);var radioRequests=_.result(this,"radioRequests");this.bindRequests(channel,radioRequests),this.on("destroy",this._destroyRadio)}},_destroyRadio:function(){this._channel.stopReplying(null,null,this)},getChannel:function(){return this._channel}},ClassOptions=["channelName","radioEvents","radioRequests"],MarionetteObject=function(options){this._setOptions(options,ClassOptions),this.cid=_.uniqueId(this.cidPrefix),this._initRadio(),this.initialize.apply(this,arguments)};MarionetteObject.extend=extend,_.extend(MarionetteObject.prototype,CommonMixin,DestroyMixin,RadioMixin,{cidPrefix:"mno",initialize:function(){}});var _invoke=_.invokeMap||_.invoke,BehaviorsMixin={_initBehaviors:function(){this._behaviors=parseBehaviors(this,_.result(this,"behaviors"),[])},_getBehaviorTriggers:function(){var triggers=_invoke(this._behaviors,"_getTriggers");return _.reduce(triggers,function(memo,_triggers){return _.extend(memo,_triggers)},{})},_getBehaviorEvents:function(){var events=_invoke(this._behaviors,"_getEvents");return _.reduce(events,function(memo,_events){return _.extend(memo,_events)},{})},_proxyBehaviorViewProperties:function(){_invoke(this._behaviors,"proxyViewProperties")},_delegateBehaviorEntityEvents:function(){_invoke(this._behaviors,"delegateEntityEvents")},_undelegateBehaviorEntityEvents:function(){_invoke(this._behaviors,"undelegateEntityEvents")},_destroyBehaviors:function(options){_invoke(this._behaviors,"destroy",options)},_removeBehavior:function(behavior){this._isDestroyed||(this.undelegate(".trig".concat(behavior.cid," .").concat(behavior.cid)),this._behaviors=_.without(this._behaviors,behavior))},_bindBehaviorUIElements:function(){_invoke(this._behaviors,"bindUIElements")},_unbindBehaviorUIElements:function(){_invoke(this._behaviors,"unbindUIElements")},_triggerEventOnBehaviors:function(eventName,view,options){_invoke(this._behaviors,"triggerMethod",eventName,view,options)}},DelegateEntityEventsMixin={_delegateEntityEvents:function(model,collection){model&&(this._modelEvents=_.result(this,"modelEvents"),this.bindEvents(model,this._modelEvents)),collection&&(this._collectionEvents=_.result(this,"collectionEvents"),this.bindEvents(collection,this._collectionEvents))},_undelegateEntityEvents:function(model,collection){this._modelEvents&&(this.unbindEvents(model,this._modelEvents),delete this._modelEvents),this._collectionEvents&&(this.unbindEvents(collection,this._collectionEvents),delete this._collectionEvents)},_deleteEntityEventHandlers:function(){delete this._modelEvents,delete this._collectionEvents}},TemplateRenderMixin={_renderTemplate:function(template){var data=this.mixinTemplateContext(this.serializeData())||{},html=this._renderHtml(template,data);"undefined"!=typeof html&&this.attachElContent(html)},getTemplate:function(){return this.template},mixinTemplateContext:function(serializedData){var templateContext=_.result(this,"templateContext");return templateContext?serializedData?_.extend({},serializedData,templateContext):templateContext:serializedData},serializeData:function(){return this.model?this.serializeModel():this.collection?{items:this.serializeCollection()}:void 0},serializeModel:function(){return this.model.attributes},serializeCollection:function(){return _.map(this.collection.models,function(model){return model.attributes})},_renderHtml:function(template,data){return template(data)},attachElContent:function(html){this.Dom.setContents(this.el,html,this.$el)}},delegateEventSplitter=/^(\S+)\s*(.*)$/,getNamespacedEventName=function(eventName,namespace){var match=eventName.match(delegateEventSplitter);return"".concat(match[1],".").concat(namespace," ").concat(match[2])},FEATURES={childViewEventPrefix:!1,triggersStopPropagation:!0,triggersPreventDefault:!0,DEV_MODE:!1},TriggersMixin={_getViewTriggers:function(view,triggers){var _this=this;return _.reduce(triggers,function(events,value,key){return key=getNamespacedEventName(key,"trig".concat(_this.cid)),events[key]=buildViewTrigger(view,value),events},{})}},_normalizeUIKeys=function(hash,ui){return _.reduce(hash,function(memo,val,key){var normalizedKey=_normalizeUIString(key,ui);return memo[normalizedKey]=val,memo},{})},uiRegEx=/@ui\.[a-zA-Z-_$0-9]*/g,_normalizeUIString=function(uiString,ui){return uiString.replace(uiRegEx,function(r){return ui[r.slice(4)]})},_normalizeUIValues=function(hash,ui,property){return _.each(hash,function(val,key){if(_.isString(val))hash[key]=_normalizeUIString(val,ui);else if(val){var propertyVal=val[property];_.isString(propertyVal)&&(val[property]=_normalizeUIString(propertyVal,ui))}}),hash},UIMixin={normalizeUIKeys:function(hash){var uiBindings=this._getUIBindings();return _normalizeUIKeys(hash,uiBindings)},normalizeUIString:function(uiString){var uiBindings=this._getUIBindings();return _normalizeUIString(uiString,uiBindings)},normalizeUIValues:function(hash,property){var uiBindings=this._getUIBindings();return _normalizeUIValues(hash,uiBindings,property)},_getUIBindings:function(){var uiBindings=_.result(this,"_uiBindings");return uiBindings||_.result(this,"ui")},_bindUIElements:function(){var _this=this;if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var bindings=_.result(this,"_uiBindings");this._ui={},_.each(bindings,function(selector,key){_this._ui[key]=_this.$(selector)}),this.ui=this._ui}},_unbindUIElements:function(){var _this2=this;this.ui&&this._uiBindings&&(_.each(this.ui,function($el,name){delete _this2.ui[name]}),this.ui=this._uiBindings,delete this._uiBindings,delete this._ui)},_getUI:function(name){return this._ui[name]}},DomApi={createBuffer:function(){return document.createDocumentFragment()},getDocumentEl:function(el){return el.ownerDocument.documentElement},getEl:function(selector){return _getEl(selector)},findEl:function(el,selector){return _getEl(el).find(selector)},hasEl:function(el,childEl){return el.contains(childEl&&childEl.parentNode)},detachEl:function(el){var _$el=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_getEl(el);_$el.detach()},replaceEl:function(newEl,oldEl){if(newEl!==oldEl){var parent=oldEl.parentNode;parent&&parent.replaceChild(newEl,oldEl)}},swapEl:function(el1,el2){if(el1!==el2){var parent1=el1.parentNode,parent2=el2.parentNode;if(parent1&&parent2){var next1=el1.nextSibling,next2=el2.nextSibling;parent1.insertBefore(el2,next1),parent2.insertBefore(el1,next2)}}},setContents:function(el,html){var _$el=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_getEl(el);_$el.html(html)},appendContents:function(el,contents){var _ref=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},_ref$_$el=_ref._$el,_$el=void 0===_ref$_$el?_getEl(el):_ref$_$el,_ref$_$contents=_ref._$contents,_$contents=void 0===_ref$_$contents?_getEl(contents):_ref$_$contents;_$el.append(_$contents)},hasContents:function(el){return!!el&&el.hasChildNodes()},detachContents:function(el){var _$el=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_getEl(el);_$el.contents().detach()}},ViewMixin={Dom:DomApi,_isElAttached:function(){return!!this.el&&this.Dom.hasEl(this.Dom.getDocumentEl(this.el),this.el)},supportsRenderLifecycle:!0,supportsDestroyLifecycle:!0,_isDestroyed:!1,isDestroyed:function(){return!!this._isDestroyed},_isRendered:!1,isRendered:function(){return!!this._isRendered},_isAttached:!1,isAttached:function(){return!!this._isAttached},delegateEvents:function(events){this._proxyBehaviorViewProperties(),this._buildEventProxies();var combinedEvents=_.extend({},this._getBehaviorEvents(),this._getEvents(events),this._getBehaviorTriggers(),this._getTriggers());return Backbone.View.prototype.delegateEvents.call(this,combinedEvents),this},_getEvents:function(events){if(events)return this.normalizeUIKeys(events);if(this.events)return this.normalizeUIKeys(_.result(this,"events"))},_getTriggers:function(){if(this.triggers){var triggers=this.normalizeUIKeys(_.result(this,"triggers"));return this._getViewTriggers(this,triggers)}},delegateEntityEvents:function(){return this._delegateEntityEvents(this.model,this.collection),this._delegateBehaviorEntityEvents(),this},undelegateEntityEvents:function(){return this._undelegateEntityEvents(this.model,this.collection),this._undelegateBehaviorEntityEvents(),this},destroy:function(options){if(this._isDestroyed||this._isDestroying)return this;this._isDestroying=!0;var shouldTriggerDetach=this._isAttached&&!this._disableDetachEvents;return this.triggerMethod("before:destroy",this,options),shouldTriggerDetach&&this.triggerMethod("before:detach",this),this.unbindUIElements(),this._removeElement(),shouldTriggerDetach&&(this._isAttached=!1,this.triggerMethod("detach",this)),this._removeChildren(),this._isDestroyed=!0,this._isRendered=!1,this._destroyBehaviors(options),this._deleteEntityEventHandlers(),this.triggerMethod("destroy",this,options),this._triggerEventOnBehaviors("destroy",this,options),this.stopListening(),this},_removeElement:function(){this.$el.off().removeData(),this.Dom.detachEl(this.el,this.$el)},bindUIElements:function(){return this._bindUIElements(),this._bindBehaviorUIElements(),this},unbindUIElements:function(){return this._unbindUIElements(),this._unbindBehaviorUIElements(),this},getUI:function(name){return this._getUI(name)},_buildEventProxies:function(){this._childViewEvents=this.normalizeMethods(_.result(this,"childViewEvents")),this._childViewTriggers=_.result(this,"childViewTriggers"),this._eventPrefix=this._getEventPrefix()},_getEventPrefix:function(){var defaultPrefix=!!isEnabled("childViewEventPrefix")&&"childview",prefix=_.result(this,"childViewEventPrefix",defaultPrefix);return prefix===!1?prefix:prefix+":"},_proxyChildViewEvents:function(view){(this._childViewEvents||this._childViewTriggers||this._eventPrefix)&&this.listenTo(view,"all",this._childViewEventHandler)},_childViewEventHandler:function(eventName){for(var childViewEvents=this._childViewEvents,_len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];childViewEvents&&childViewEvents[eventName]&&childViewEvents[eventName].apply(this,args);var childViewTriggers=this._childViewTriggers;childViewTriggers&&childViewTriggers[eventName]&&this.triggerMethod.apply(this,[childViewTriggers[eventName]].concat(args)),this._eventPrefix&&this.triggerMethod.apply(this,[this._eventPrefix+eventName].concat(args))}};_.extend(ViewMixin,BehaviorsMixin,CommonMixin,DelegateEntityEventsMixin,TemplateRenderMixin,TriggersMixin,UIMixin);var classErrorName="RegionError",ClassOptions$1=["allowMissingEl","parentEl","replaceElement"],Region=function(options){this._setOptions(options,ClassOptions$1),this.cid=_.uniqueId(this.cidPrefix),this._initEl=this.el=this.getOption("el"),this.el=this.el instanceof Backbone.$?this.el[0]:this.el,this.$el=this._getEl(this.el),this.initialize.apply(this,arguments)};Region.extend=extend,Region.setDomApi=setDomApi,_.extend(Region.prototype,CommonMixin,{Dom:DomApi,cidPrefix:"mnr",replaceElement:!1,_isReplaced:!1,_isSwappingView:!1,initialize:function(){},show:function(view,options){if(this._ensureElement(options)){if(view=this._getView(view,options),view===this.currentView)return this;if(view._isShown)throw new MarionetteError({name:classErrorName,message:"View is already shown in a Region or CollectionView",url:"marionette.region.html#showing-a-view"});return this._isSwappingView=!!this.currentView,this.triggerMethod("before:show",this,view,options),!this.currentView&&view._isAttached||this.empty(options),this._setupChildView(view),this.currentView=view,renderView(view),this._attachView(view,options),this.triggerMethod("show",this,view,options),this._isSwappingView=!1,this}},_getEl:function(el){if(!el)throw new MarionetteError({name:classErrorName,message:'An "el" must be specified for a region.',url:"marionette.region.html#additional-options"});return this.getEl(el)},_setEl:function(){this.$el=this._getEl(this.el),this.$el.length&&(this.el=this.$el[0]),this.$el.length>1&&(this.$el=this.Dom.getEl(this.el))},_setElement:function(el){if(el===this.el)return this;var shouldReplace=this._isReplaced;if(this._restoreEl(),this.el=el,this._setEl(),this.currentView){var view=this.currentView;shouldReplace?this._replaceEl(view):this.attachHtml(view)}return this},_setupChildView:function(view){monitorViewEvents(view),this._proxyChildViewEvents(view),view.on("destroy",this._empty,this)},_proxyChildViewEvents:function(view){var parentView=this._parentView;parentView&&parentView._proxyChildViewEvents(view)},_shouldDisableMonitoring:function(){return this._parentView&&this._parentView.monitorViewEvents===!1},_isElAttached:function(){return this.Dom.hasEl(this.Dom.getDocumentEl(this.el),this.el)},_attachView:function(view){var _ref=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},replaceElement=_ref.replaceElement,shouldTriggerAttach=!view._isAttached&&this._isElAttached()&&!this._shouldDisableMonitoring(),shouldReplaceEl="undefined"==typeof replaceElement?!!_.result(this,"replaceElement"):!!replaceElement;shouldTriggerAttach&&view.triggerMethod("before:attach",view),shouldReplaceEl?this._replaceEl(view):this.attachHtml(view),shouldTriggerAttach&&(view._isAttached=!0,view.triggerMethod("attach",view)),view._isShown=!0},_ensureElement:function(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(_.isObject(this.el)||this._setEl(),!this.$el||0===this.$el.length){var allowMissingEl="undefined"==typeof options.allowMissingEl?!!_.result(this,"allowMissingEl"):!!options.allowMissingEl;if(allowMissingEl)return!1;throw new MarionetteError({name:classErrorName,message:'An "el" must exist in DOM for this region '.concat(this.cid),url:"marionette.region.html#additional-options"})}return!0},_getView:function(view){if(!view)throw new MarionetteError({name:classErrorName,message:"The view passed is undefined and therefore invalid. You must pass a view instance to show.",url:"marionette.region.html#showing-a-view"});if(view._isDestroyed)throw new MarionetteError({name:classErrorName,message:'View (cid: "'.concat(view.cid,'") has already been destroyed and cannot be used.'),url:"marionette.region.html#showing-a-view"});if(view instanceof Backbone.View)return view;var viewOptions=this._getViewOptions(view);return new View(viewOptions)},_getViewOptions:function(viewOptions){if(_.isFunction(viewOptions))return{template:viewOptions};if(_.isObject(viewOptions))return viewOptions;var template=function(){return viewOptions};return{template:template}},getEl:function(el){var context=_.result(this,"parentEl");return context&&_.isString(el)?this.Dom.findEl(context,el):this.Dom.getEl(el)},_replaceEl:function(view){this._restoreEl(),view.on("before:destroy",this._restoreEl,this),this.Dom.replaceEl(view.el,this.el),this._isReplaced=!0},_restoreEl:function(){if(this._isReplaced){var view=this.currentView;view&&(this._detachView(view),this._isReplaced=!1)}},isReplaced:function(){return!!this._isReplaced},isSwappingView:function(){return!!this._isSwappingView},attachHtml:function(view){this.Dom.appendContents(this.el,view.el,{_$el:this.$el,_$contents:view.$el
})},empty:function(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{allowMissingEl:!0},view=this.currentView;return view?(this._empty(view,!0),this):(this._ensureElement(options)&&this.detachHtml(),this)},_empty:function(view,shouldDestroy){view.off("destroy",this._empty,this),this.triggerMethod("before:empty",this,view),this._restoreEl(),delete this.currentView,view._isDestroyed||(shouldDestroy?this.removeView(view):this._detachView(view),view._isShown=!1,this._stopChildViewEvents(view)),this.triggerMethod("empty",this,view)},_stopChildViewEvents:function(view){var parentView=this._parentView;parentView&&this._parentView.stopListening(view)},destroyView:function(view){return view._isDestroyed?view:(destroyView(view,this._shouldDisableMonitoring()),view)},removeView:function(view){this.destroyView(view)},detachView:function(){var view=this.currentView;if(view)return this._empty(view),view},_detachView:function(view){var shouldTriggerDetach=view._isAttached&&!this._shouldDisableMonitoring(),shouldRestoreEl=this._isReplaced;shouldTriggerDetach&&view.triggerMethod("before:detach",view),shouldRestoreEl?this.Dom.replaceEl(this.el,view.el):this.detachHtml(),shouldTriggerDetach&&(view._isAttached=!1,view.triggerMethod("detach",view))},detachHtml:function(){this.Dom.detachContents(this.el,this.$el)},hasView:function(){return!!this.currentView},reset:function(options){return this.empty(options),this.el=this._initEl,delete this.$el,this},_isDestroyed:!1,isDestroyed:function(){return this._isDestroyed},destroy:function(options){return this._isDestroyed?this:(this.triggerMethod("before:destroy",this,options),this._isDestroyed=!0,this.reset(options),this._name&&this._parentView._removeReferences(this._name),delete this._parentView,delete this._name,this.triggerMethod("destroy",this,options),this.stopListening(),this)}});var RegionsMixin={regionClass:Region,_initRegions:function(){this.regions=this.regions||{},this._regions={},this.addRegions(_.result(this,"regions"))},_reInitRegions:function(){_invoke(this._regions,"reset")},addRegion:function(name,definition){var regions={};return regions[name]=definition,this.addRegions(regions)[name]},addRegions:function(regions){if(!_.isEmpty(regions))return regions=this.normalizeUIValues(regions,"el"),this.regions=_.extend({},this.regions,regions),this._addRegions(regions)},_addRegions:function(regionDefinitions){var _this=this,defaults={regionClass:this.regionClass,parentEl:_.partial(_.result,this,"el")};return _.reduce(regionDefinitions,function(regions,definition,name){return regions[name]=buildRegion(definition,defaults),_this._addRegion(regions[name],name),regions},{})},_addRegion:function(region,name){this.triggerMethod("before:add:region",this,name,region),region._parentView=this,region._name=name,this._regions[name]=region,this.triggerMethod("add:region",this,name,region)},removeRegion:function(name){var region=this._regions[name];return this._removeRegion(region,name),region},removeRegions:function(){var regions=this._getRegions();return _.each(this._regions,this._removeRegion.bind(this)),regions},_removeRegion:function(region,name){this.triggerMethod("before:remove:region",this,name,region),region.destroy(),this.triggerMethod("remove:region",this,name,region)},_removeReferences:function(name){delete this.regions[name],delete this._regions[name]},emptyRegions:function(){var regions=this.getRegions();return _invoke(regions,"empty"),regions},hasRegion:function(name){return!!this.getRegion(name)},getRegion:function(name){return this._isRendered||this.render(),this._regions[name]},_getRegions:function(){return _.clone(this._regions)},getRegions:function(){return this._isRendered||this.render(),this._getRegions()},showChildView:function(name,view,options){var region=this.getRegion(name);return region.show(view,options),view},detachChildView:function(name){return this.getRegion(name).detachView()},getChildView:function(name){return this.getRegion(name).currentView}},ClassOptions$2=["behaviors","childViewEventPrefix","childViewEvents","childViewTriggers","collectionEvents","events","modelEvents","regionClass","regions","template","templateContext","triggers","ui"],View=Backbone.View.extend({constructor:function(options){this._setOptions(options,ClassOptions$2),monitorViewEvents(this),this._initBehaviors(),this._initRegions(),Backbone.View.prototype.constructor.apply(this,arguments),this.delegateEntityEvents(),this._triggerEventOnBehaviors("initialize",this,options)},setElement:function(){return Backbone.View.prototype.setElement.apply(this,arguments),this._isRendered=this.Dom.hasContents(this.el),this._isAttached=this._isElAttached(),this._isRendered&&this.bindUIElements(),this},render:function(){var template=this.getTemplate();return template===!1||this._isDestroyed?this:(this.triggerMethod("before:render",this),this._isRendered&&this._reInitRegions(),this._renderTemplate(template),this.bindUIElements(),this._isRendered=!0,this.triggerMethod("render",this),this)},_removeChildren:function(){this.removeRegions()},_getImmediateChildren:function(){return _.reduce(this._regions,childReducer,[])}},{setRenderer:setRenderer,setDomApi:setDomApi});_.extend(View.prototype,ViewMixin,RegionsMixin);var Container=function(){this._init()},methods=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck","reduce","partition"];_.each(methods,function(method){Container.prototype[method]=function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _[method].apply(_,[this._views].concat(args))}}),_.extend(Container.prototype,{_init:function(){this._views=[],this._viewsByCid={},this._indexByModel={},this._updateLength()},_add:function(view){var index=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._views.length;this._addViewIndexes(view),this._views.splice(index,0,view),this._updateLength()},_addViewIndexes:function(view){this._viewsByCid[view.cid]=view,view.model&&(this._indexByModel[view.model.cid]=view)},_sort:function(comparator,context){return"string"==typeof comparator?(comparator=_.partial(stringComparator,comparator),this._sortBy(comparator)):1===comparator.length?this._sortBy(comparator.bind(context)):this._views.sort(comparator.bind(context))},_sortBy:function(comparator){var sortedViews=_.sortBy(this._views,comparator);return this._set(sortedViews),sortedViews},_set:function(views,shouldReset){this._views.length=0,this._views.push.apply(this._views,views.slice(0)),shouldReset&&(this._viewsByCid={},this._indexByModel={},_.each(views,this._addViewIndexes.bind(this)),this._updateLength())},_swap:function(view1,view2){var view1Index=this.findIndexByView(view1),view2Index=this.findIndexByView(view2);if(view1Index!==-1&&view2Index!==-1){var swapView=this._views[view1Index];this._views[view1Index]=this._views[view2Index],this._views[view2Index]=swapView}},findByModel:function(model){return this.findByModelCid(model.cid)},findByModelCid:function(modelCid){return this._indexByModel[modelCid]},findByIndex:function(index){return this._views[index]},findIndexByView:function(view){return this._views.indexOf(view)},findByCid:function(cid){return this._viewsByCid[cid]},hasView:function(view){return!!this.findByCid(view.cid)},_remove:function(view){if(this._viewsByCid[view.cid]){view.model&&delete this._indexByModel[view.model.cid],delete this._viewsByCid[view.cid];var index=this.findIndexByView(view);this._views.splice(index,1),this._updateLength()}},_updateLength:function(){this.length=this._views.length}});var classErrorName$1="CollectionViewError",ClassOptions$3=["behaviors","childView","childViewContainer","childViewEventPrefix","childViewEvents","childViewOptions","childViewTriggers","collectionEvents","emptyView","emptyViewOptions","events","modelEvents","sortWithCollection","template","templateContext","triggers","ui","viewComparator","viewFilter"],CollectionView=Backbone.View.extend({sortWithCollection:!0,constructor:function(options){this._setOptions(options,ClassOptions$3),monitorViewEvents(this),this._initChildViewStorage(),this._initBehaviors(),Backbone.View.prototype.constructor.apply(this,arguments),this.getEmptyRegion(),this.delegateEntityEvents(),this._triggerEventOnBehaviors("initialize",this,options)},_initChildViewStorage:function(){this._children=new Container,this.children=new Container},getEmptyRegion:function(){var $emptyEl=this.$container||this.$el;return this._emptyRegion&&!this._emptyRegion.isDestroyed()?(this._emptyRegion._setElement($emptyEl[0]),this._emptyRegion):(this._emptyRegion=new Region({el:$emptyEl[0],replaceElement:!1}),this._emptyRegion._parentView=this,this._emptyRegion)},_initialEvents:function(){this._isRendered||this.listenTo(this.collection,{sort:this._onCollectionSort,reset:this._onCollectionReset,update:this._onCollectionUpdate})},_onCollectionSort:function(collection,_ref){var add=_ref.add,merge=_ref.merge,remove=_ref.remove;this.sortWithCollection&&this.viewComparator!==!1&&(add||remove||merge||this.sort())},_onCollectionReset:function(){this._destroyChildren(),this._addChildModels(this.collection.models),this.sort()},_onCollectionUpdate:function(collection,options){var changes=options.changes,removedViews=changes.removed.length&&this._removeChildModels(changes.removed);this._addedViews=changes.added.length&&this._addChildModels(changes.added),this._detachChildren(removedViews),this.sort(),this._removeChildViews(removedViews)},_removeChildModels:function(models){var _this=this;return _.reduce(models,function(views,model){var removeView=_this._removeChildModel(model);return removeView&&views.push(removeView),views},[])},_removeChildModel:function(model){var view=this._children.findByModel(model);return view&&this._removeChild(view),view},_removeChild:function(view){this.triggerMethod("before:remove:child",this,view),this.children._remove(view),this._children._remove(view),this.triggerMethod("remove:child",this,view)},_addChildModels:function(models){return _.map(models,this._addChildModel.bind(this))},_addChildModel:function(model){var view=this._createChildView(model);return this._addChild(view),view},_createChildView:function(model){var ChildView=this._getChildView(model),childViewOptions=this._getChildViewOptions(model),view=this.buildChildView(model,ChildView,childViewOptions);return view},_addChild:function(view,index){this.triggerMethod("before:add:child",this,view),this._setupChildView(view),this._children._add(view,index),this.children._add(view,index),this.triggerMethod("add:child",this,view)},_getChildView:function(child){var childView=this.childView;if(!childView)throw new MarionetteError({name:classErrorName$1,message:'A "childView" must be specified',url:"marionette.collectionview.html#collectionviews-childview"});if(childView=this._getView(childView,child),!childView)throw new MarionetteError({name:classErrorName$1,message:'"childView" must be a view class or a function that returns a view class',url:"marionette.collectionview.html#collectionviews-childview"});return childView},_getView:function(view,child){return view.prototype instanceof Backbone.View||view===Backbone.View?view:_.isFunction(view)?view.call(this,child):void 0},_getChildViewOptions:function(child){return _.isFunction(this.childViewOptions)?this.childViewOptions(child):this.childViewOptions},buildChildView:function(child,ChildViewClass,childViewOptions){var options=_.extend({model:child},childViewOptions);return new ChildViewClass(options)},_setupChildView:function(view){monitorViewEvents(view),view.on("destroy",this.removeChildView,this),this._proxyChildViewEvents(view)},_getImmediateChildren:function(){return this.children._views},setElement:function(){return Backbone.View.prototype.setElement.apply(this,arguments),this._isAttached=this._isElAttached(),this},render:function(){if(this._isDestroyed)return this;this.triggerMethod("before:render",this),this._destroyChildren(),this.collection&&(this._addChildModels(this.collection.models),this._initialEvents());var template=this.getTemplate();return template&&(this._renderTemplate(template),this.bindUIElements()),this._getChildViewContainer(),this.sort(),this._isRendered=!0,this.triggerMethod("render",this),this},_getChildViewContainer:function(){var childViewContainer=_.result(this,"childViewContainer");if(this.$container=childViewContainer?this.$(childViewContainer):this.$el,!this.$container.length)throw new MarionetteError({name:classErrorName$1,message:'The specified "childViewContainer" was not found: '.concat(childViewContainer),url:"marionette.collectionview.html#defining-the-childviewcontainer"})},sort:function(){return this._sortChildren(),this.filter(),this},_sortChildren:function(){if(this._children.length){var viewComparator=this.getComparator();viewComparator&&(delete this._addedViews,this.triggerMethod("before:sort",this),this._children._sort(viewComparator,this),this.triggerMethod("sort",this))}},setComparator:function(comparator){var _ref2=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},preventRender=_ref2.preventRender,comparatorChanged=this.viewComparator!==comparator,shouldSort=comparatorChanged&&!preventRender;return this.viewComparator=comparator,shouldSort&&this.sort(),this},removeComparator:function(options){return this.setComparator(null,options)},getComparator:function(){return this.viewComparator?this.viewComparator:!(!this.sortWithCollection||this.viewComparator===!1||!this.collection)&&this._viewComparator},_viewComparator:function(view){return this.collection.indexOf(view.model)},filter:function(){return this._isDestroyed?this:(this._filterChildren(),this._renderChildren(),this)},_filterChildren:function(){var _this2=this;if(this._children.length){var viewFilter=this._getFilter();if(!viewFilter){var shouldReset=this.children.length!==this._children.length;return void this.children._set(this._children._views,shouldReset)}delete this._addedViews,this.triggerMethod("before:filter",this);var attachViews=[],detachViews=[];_.each(this._children._views,function(view,key,children){(viewFilter.call(_this2,view,key,children)?attachViews:detachViews).push(view)}),this._detachChildren(detachViews),this.children._set(attachViews,!0),this.triggerMethod("filter",this,attachViews,detachViews)}},_getFilter:function(){var viewFilter=this.getFilter();if(!viewFilter)return!1;if(_.isFunction(viewFilter))return viewFilter;if(_.isObject(viewFilter)){var matcher=_.matches(viewFilter);return function(view){return matcher(view.model&&view.model.attributes)}}if(_.isString(viewFilter))return function(view){return view.model&&view.model.get(viewFilter)};throw new MarionetteError({name:classErrorName$1,message:'"viewFilter" must be a function, predicate object literal, a string indicating a model attribute, or falsy',url:"marionette.collectionview.html#defining-the-viewfilter"})},getFilter:function(){return this.viewFilter},setFilter:function(filter){var _ref3=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},preventRender=_ref3.preventRender,filterChanged=this.viewFilter!==filter,shouldRender=filterChanged&&!preventRender;return this.viewFilter=filter,shouldRender&&this.filter(),this},removeFilter:function(options){return this.setFilter(null,options)},_detachChildren:function(detachingViews){_.each(detachingViews,this._detachChildView.bind(this))},_detachChildView:function(view){var shouldTriggerDetach=view._isAttached&&this.monitorViewEvents!==!1;shouldTriggerDetach&&view.triggerMethod("before:detach",view),this.detachHtml(view),shouldTriggerDetach&&(view._isAttached=!1,view.triggerMethod("detach",view)),view._isShown=!1},detachHtml:function(view){this.Dom.detachEl(view.el,view.$el)},_renderChildren:function(){this._hasUnrenderedViews&&(delete this._addedViews,delete this._hasUnrenderedViews);var views=this._addedViews||this.children._views;if(this.triggerMethod("before:render:children",this,views),this.isEmpty())this._showEmptyView();else{this._destroyEmptyView();var els=this._getBuffer(views);this._attachChildren(els,views)}delete this._addedViews,this.triggerMethod("render:children",this,views)},_getBuffer:function(views){var _this3=this,elBuffer=this.Dom.createBuffer();return _.each(views,function(view){renderView(view),view._isShown=!0,_this3.Dom.appendContents(elBuffer,view.el,{_$contents:view.$el})}),elBuffer},_attachChildren:function(els,views){var shouldTriggerAttach=this._isAttached&&this.monitorViewEvents!==!1;views=shouldTriggerAttach?views:[],_.each(views,function(view){view._isAttached||view.triggerMethod("before:attach",view)}),this.attachHtml(els,this.$container),_.each(views,function(view){view._isAttached||(view._isAttached=!0,view.triggerMethod("attach",view))})},attachHtml:function(els,$container){this.Dom.appendContents($container[0],els,{_$el:$container})},isEmpty:function(){return!this.children.length},_showEmptyView:function(){var EmptyView=this._getEmptyView();if(EmptyView){var options=this._getEmptyViewOptions(),emptyRegion=this.getEmptyRegion();emptyRegion.show(new EmptyView(options))}},_getEmptyView:function(){var emptyView=this.emptyView;if(emptyView)return this._getView(emptyView)},_destroyEmptyView:function(){var emptyRegion=this.getEmptyRegion();emptyRegion.hasView()&&emptyRegion.empty()},_getEmptyViewOptions:function(){var emptyViewOptions=this.emptyViewOptions||this.childViewOptions;return _.isFunction(emptyViewOptions)?emptyViewOptions.call(this):emptyViewOptions},swapChildViews:function(view1,view2){if(!this._children.hasView(view1)||!this._children.hasView(view2))throw new MarionetteError({name:classErrorName$1,message:"Both views must be children of the collection view to swap.",url:"marionette.collectionview.html#swapping-child-views"});return this._children._swap(view1,view2),this.Dom.swapEl(view1.el,view2.el),this.children.hasView(view1)!==this.children.hasView(view2)?this.filter():this.children._swap(view1,view2),this},addChildView:function(view,index){var options=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!view||view._isDestroyed)return view;if(view._isShown)throw new MarionetteError({name:classErrorName$1,message:"View is already shown in a Region or CollectionView",url:"marionette.region.html#showing-a-view"});if(_.isObject(index)&&(options=index),null!=options.index&&(index=options.index),this._isRendered||this.render(),this._addChild(view,index),options.preventRender)return this._hasUnrenderedViews=!0,view;var hasIndex="undefined"!=typeof index,isAddedToEnd=!hasIndex||index>=this._children.length;return isAddedToEnd&&!this._hasUnrenderedViews&&(this._addedViews=[view]),hasIndex?this._renderChildren():this.sort(),view},detachChildView:function(view){return this.removeChildView(view,{shouldDetach:!0}),view},removeChildView:function(view,options){return view?(this._removeChildView(view,options),this._removeChild(view),this.isEmpty()&&this._showEmptyView(),view):view},_removeChildViews:function(views){_.each(views,this._removeChildView.bind(this))},_removeChildView:function(view){var _ref4=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},shouldDetach=_ref4.shouldDetach;view.off("destroy",this.removeChildView,this),shouldDetach?this._detachChildView(view):this._destroyChildView(view),this.stopListening(view)},_destroyChildView:function(view){if(!view._isDestroyed){var shouldDisableEvents=this.monitorViewEvents===!1;destroyView(view,shouldDisableEvents)}},_removeChildren:function(){this._destroyChildren();var emptyRegion=this.getEmptyRegion();emptyRegion.destroy(),delete this._addedViews},_destroyChildren:function(){this._children.length&&(this.triggerMethod("before:destroy:children",this),this.monitorViewEvents===!1&&this.Dom.detachContents(this.el,this.$el),this._removeChildViews(this._children._views),this._children._init(),this.children._init(),this.triggerMethod("destroy:children",this))}},{setDomApi:setDomApi,setRenderer:setRenderer});_.extend(CollectionView.prototype,ViewMixin);var ClassOptions$4=["collectionEvents","events","modelEvents","triggers","ui"],Behavior=function(options,view){this.view=view,this._setOptions(options,ClassOptions$4),this.cid=_.uniqueId(this.cidPrefix),this.ui=_.extend({},_.result(this,"ui"),_.result(view,"ui")),this.listenTo(view,"all",this.triggerMethod),this.initialize.apply(this,arguments)};Behavior.extend=extend,_.extend(Behavior.prototype,CommonMixin,DelegateEntityEventsMixin,TriggersMixin,UIMixin,{cidPrefix:"mnb",initialize:function(){},$:function(){return this.view.$.apply(this.view,arguments)},destroy:function(){return this.stopListening(),this.view._removeBehavior(this),this._deleteEntityEventHandlers(),this},proxyViewProperties:function(){return this.$el=this.view.$el,this.el=this.view.el,this},bindUIElements:function(){return this._bindUIElements(),this},unbindUIElements:function(){return this._unbindUIElements(),this},getUI:function(name){return this._getUI(name)},delegateEntityEvents:function(){return this._delegateEntityEvents(this.view.model,this.view.collection),this},undelegateEntityEvents:function(){return this._undelegateEntityEvents(this.view.model,this.view.collection),this},_getEvents:function(){var _this=this;if(this.events){var behaviorEvents=this.normalizeUIKeys(_.result(this,"events"));return _.reduce(behaviorEvents,function(events,behaviorHandler,key){return _.isFunction(behaviorHandler)||(behaviorHandler=_this[behaviorHandler]),behaviorHandler?(key=getNamespacedEventName(key,_this.cid),events[key]=behaviorHandler.bind(_this),events):events},{})}},_getTriggers:function(){if(this.triggers){var behaviorTriggers=this.normalizeUIKeys(_.result(this,"triggers"));return this._getViewTriggers(this.view,behaviorTriggers)}}});var ClassOptions$5=["channelName","radioEvents","radioRequests","region","regionClass"],Application=function(options){this._setOptions(options,ClassOptions$5),this.cid=_.uniqueId(this.cidPrefix),this._initRegion(),this._initRadio(),this.initialize.apply(this,arguments)};Application.extend=extend,_.extend(Application.prototype,CommonMixin,DestroyMixin,RadioMixin,{cidPrefix:"mna",initialize:function(){},start:function(options){return this.triggerMethod("before:start",this,options),this.triggerMethod("start",this,options),this},regionClass:Region,_initRegion:function(){var region=this.region;if(region){var defaults={regionClass:this.regionClass};this._region=buildRegion(region,defaults)}},getRegion:function(){return this._region},showView:function(view){for(var region=this.getRegion(),_len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];return region.show.apply(region,[view].concat(args)),view},getView:function(){return this.getRegion().currentView}});var bindEvents$1=proxy(bindEvents),unbindEvents$1=proxy(unbindEvents),bindRequests$1=proxy(bindRequests),unbindRequests$1=proxy(unbindRequests),mergeOptions$1=proxy(mergeOptions),getOption$1=proxy(getOption),normalizeMethods$1=proxy(normalizeMethods),triggerMethod$1=proxy(triggerMethod),setDomApi$1=function(mixin){CollectionView.setDomApi(mixin),Region.setDomApi(mixin),View.setDomApi(mixin)},setRenderer$1=function(renderer){CollectionView.setRenderer(renderer),View.setRenderer(renderer)},backbone_marionette={View:View,CollectionView:CollectionView,MnObject:MarionetteObject,Object:MarionetteObject,Region:Region,Behavior:Behavior,Application:Application,isEnabled:isEnabled,setEnabled:setEnabled,monitorViewEvents:monitorViewEvents,Events:Events,extend:extend,DomApi:DomApi,VERSION:version};exports.Application=Application,exports.Behavior=Behavior,exports.CollectionView=CollectionView,exports.DomApi=DomApi,exports.Events=Events,exports.MnObject=MarionetteObject,exports.Region=Region,exports.VERSION=version,exports.View=View,exports.bindEvents=bindEvents$1,exports.bindRequests=bindRequests$1,exports.default=backbone_marionette,exports.extend=extend,exports.getOption=getOption$1,exports.isEnabled=isEnabled,exports.mergeOptions=mergeOptions$1,exports.monitorViewEvents=monitorViewEvents,exports.normalizeMethods=normalizeMethods$1,exports.setDomApi=setDomApi$1,exports.setEnabled=setEnabled,exports.setRenderer=setRenderer$1,exports.triggerMethod=triggerMethod$1,exports.unbindEvents=unbindEvents$1,exports.unbindRequests=unbindRequests$1,Object.defineProperty(exports,"__esModule",{value:!0})}),this&&this.Marionette&&(this.Mn=this.Marionette);